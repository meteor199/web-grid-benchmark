import{c as D,i as k}from"./index.D4Ecvuve.js";import{_ as F,p as b,v as N,P,o as p,c as h,j as m,F as $,C as S}from"./framework.DHS89c-t.js";const C={class:"charts-container"},I={__name:"BulkDataPush",setup(B){const o=b([]),f=b({});return N(async()=>{try{const n=(await(await fetch("/web-grid-benchmark/results/06_bulk_data_push.json?"+Date.now())).json()).reduce((e,t)=>{e[t.benchId]||(e[t.benchId]={id:t.benchId});const r=Number(t.totalCPUTime).toFixed(2),s=Number(t.duration).toFixed(2),l=Number(t.fps).toFixed();return e[t.benchId][t.name]={cpuTime:r,duration:s,fps:l},e},{});o.value=Object.values(n);const a=["imgui-grid","ag-grid","vxe-table","visactor-vtable"],g={rowHeight:72,columnDefs:[{field:"id",headerName:"推送频率",sortable:!0,filter:!0,width:200,valueFormatter:e=>{const t=e.value;if(!t)return"";const[,r,s]=t.match(/(\d+)-(\d+)-\d+$/)||[];return!s||!r?t:`每${s}ms推${r}条`}},...a.map(e=>({field:e,headerName:e,width:200,cellRenderer:t=>{const r=t.value;return r?`CPU: ${r.cpuTime}ms<br/>Duration: ${r.duration}ms<br/>FPS: ${r.fps}`:""}}))],defaultColDef:{sortable:!0,filter:!0,resizable:!0,floatingFilter:!0},animateRows:!0},v=document.querySelector("#benchmarkGrid");v&&D(v,g).setGridOption("rowData",o.value),await P(),o.value.forEach(e=>{const[,t,r]=e.id.match(/(\d+)-(\d+)-\d+$/)||[],s=f.value[e.id];if(!s)return;const l=k(s),x=["CPU耗时","总耗时","FPS"],y=a.map(i=>{const d=e[i]||{};return{name:i,type:"bar",data:[Number(d.cpuTime||0),Number(d.duration||0),"-"]}}),w=a.map(i=>{const d=e[i]||{};return{name:i,type:"bar",yAxisIndex:1,itemStyle:{opacity:.5},data:["-","-",Number(d.fps||0)]}}),_={title:{text:`每${r}ms推${t}条`},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:a},grid:{right:"20%"},xAxis:{type:"category",data:x},yAxis:[{type:"value",name:"耗时(ms)",position:"left"},{type:"value",name:"FPS",position:"right",min:0,max:60,interval:10,axisLine:{show:!0},splitLine:{show:!1}}],series:[...y,...w]};l.setOption(_)})}catch(c){console.error("Error loading or processing data:",c)}}),(c,u)=>(p(),h("div",null,[u[0]||(u[0]=m("div",{class:"ag-theme-quartz",id:"benchmarkGrid",style:{height:"600px",width:"100%"}},null,-1)),m("div",C,[(p(!0),h($,null,S(o.value,n=>(p(),h("div",{key:n.id,class:"chart-item"},[m("div",{ref_for:!0,ref:a=>{a&&(f.value[n.id]=a)},style:{width:"100%",height:"400px"}},null,512)]))),128))])]))}},O=F(I,[["__scopeId","data-v-ff665323"]]);export{O as default};
