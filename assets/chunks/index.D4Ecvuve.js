var Ka=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const r=t?this.allAsyncListeners:this.allSyncListeners;let n=r.get(e);return!n&&i&&(n=new Set,r.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const r=this.getListeners(e,i,!1);r&&(r.delete(t),r.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const r=(a,l)=>a.forEach(u=>{if(!l.has(u))return;const h=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(e)):()=>u(e);t?this.dispatchAsync(h):h()}),n=this.getListeners(i,t,!1)??new Set,o=new Set(n);o.size>0&&r(o,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{const l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(i,e)):()=>a(i,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},WA=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(WA||{}),h0={};function mC(e,t){h0[t]||(e(),h0[t]=!0)}function Oi(e,...t){console.log("AG Grid: "+e,...t)}function U(e,...t){mC(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Ge(e,...t){mC(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function yC(e){return!!(e&&e.constructor&&e.call&&e.apply)}function xO(e){RO(e,400)}var wp=[],bp=!1;function c0(e){wp.push(e),!bp&&(bp=!0,window.setTimeout(()=>{const t=wp.slice();wp.length=0,bp=!1,t.forEach(i=>i())},0))}function RO(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function Yt(e,t){let i;return function(...r){const n=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,r)},t)}}function d0(e,t){let i=0;return function(...r){const n=this,o=new Date().getTime();o-i<t||(i=o,e.apply(n,r))}}function DO(e,t,i=100,r){const n=new Date().getTime();let o=null,s=!1;const a=()=>{const l=new Date().getTime()-n>i;(e()||l)&&(t(),s=!0,o!=null&&(window.clearInterval(o),o=null),l&&r&&U(r))};a(),s||(o=window.setInterval(a,10))}function TO(...e){return t=>e.reduce((i,r)=>r(i),t)}function qr(e){return e==null||e===""?null:e}function Y(e,t=!1){return e!=null&&(e!==""||t)}function Fe(e){return!Y(e)}function yi(e){return e==null||e.length===0}function am(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function ss(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function lm(e){if(e!==void 0)return e===null||e===""?!1:um(e)}function um(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function _u(e,t){const i=e?JSON.stringify(e):null,r=t?JSON.stringify(t):null;return i===r}function _O(e,t,i=!1){const r=e==null,n=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),r&&n)return 0;if(r)return-1;if(n)return 1;function o(s,a){return s>a?1:s<a?-1:0}if(typeof e!="string"||!i)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}function $c(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}function UA(e,t){return e.get("rowModelType")===t}function it(e){return UA(e,"clientSide")}function fn(e){return UA(e,"serverSide")}function Tt(e,t){return e.get("domLayout")===t}function vd(e){return Cd(e)!==void 0}function md(e){return!e.get("suppressAsyncEvents")}function $A(e){return typeof e.get("getRowHeight")=="function"}function AO(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Zn(e,t,i=!1,r){if(r==null&&(r=e.environment.getDefaultRowHeight()),$A(e)){if(i)return{height:r,estimated:!0};const s={node:t,data:t.data},a=e.getCallback("getRowHeight")(s);if(hm(a))return a===0&&U("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,a),estimated:!1}}if(t.detail&&e.get("masterDetail"))return PO(e);const n=e.get("rowHeight");return{height:n&&hm(n)?n:r,estimated:!1}}function PO(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return hm(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function as(e){const{environment:t}=e,i=e.get("rowHeight");if(!i||Fe(i))return t.getDefaultRowHeight();const r=t.refreshRowHeightVariable();return r!==-1?r:(U("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function hm(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function Au(e,t,i){const r=t[e.getDomDataKey()];return r?r[i]:void 0}function Ss(e,t,i,r){const n=e.getDomDataKey();let o=t[n];Fe(o)&&(o={},t[n]=o),o[i]=r}function st(e){let t=null;const i=e.get("getDocument");return i&&Y(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&Y(t)?t:document}function KA(e){return st(e).defaultView||window}function Pu(e){return e.eGridDiv.getRootNode()}function et(e){return Pu(e).activeElement}function YA(e){const t=st(e),i=et(e);return i===null||i===t.body}function ba(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function Df(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Tt(e,"print"))}function Cr(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function cm(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function XA(e){const t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function qA(e){const t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;const i=e.get("groupIncludeFooter");if(typeof i=="function"){const r=e.getCallback("groupIncludeFooter");return n=>r(n)?"bottom":void 0}return()=>i?"bottom":void 0}function ZA(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function Tf(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function Ya(e){const t=e.getCallback("getRowId");return t===void 0?t:i=>{let r=t(i);return typeof r!="string"&&(U("The getRowId callback must return a string. The ID ",r," is being cast to a string."),r=String(r)),r}}function Fa(e){return(e==null?void 0:e.checkboxes)??!0}function yd(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function MO(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function FO(e){return typeof e.get("rowSelection")!="string"}function EO(e){return e.get("cellSelection")!==void 0}function IO(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?(t==null?void 0:t.suppressMultiRanges)??!1:!1:e.get("suppressMultiRangeSelection")}function Mr(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function LO(e){var r;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((r=t.handle)==null?void 0:r.mode)==="range":!1:e.get("enableRangeHandle")}function f0(e){var r;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((r=t.handle)==null?void 0:r.mode)==="fill":!1:e.get("enableFillHandle")}function jA(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const i=e.get("suppressRowClickSelection"),r=e.get("suppressRowDeselection");return i&&r?!1:i?"enableDeselection":r?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function kO(e){const t=jA(e);return t===!0||t==="enableSelection"}function p0(e){const t=jA(e);return t===!0||t==="enableDeselection"}function CC(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function Cd(e){const t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t==null?void 0:t.mode}function SC(e){return Cd(e)==="multiRow"}function OO(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function wC(e){const t=e.get("rowSelection");if(typeof t=="string"){const i=e.get("groupSelectsChildren"),r=e.get("groupSelectsFiltered");return i&&r?"filteredDescendants":i?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function ws(e){const t=wC(e);return t==="descendants"||t==="filteredDescendants"}function xp(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function Ee(e){if(!(!e||!e.length))return e[e.length-1]}function ao(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((r,n)=>i?i(r,t[n]):t[n]===r)}function GO(e){return e.sort((t,i)=>t-i)}function QA(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function Xt(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function NO(e,t){for(let i=0;i<t.length;i++)QA(e,t[i])}function VO(e,t){for(let i=0;i<t.length;i++)Xt(e,t[i])}function Sd(e,t,i){e.splice(i,0,t)}function JA(e,t,i){VO(e,t),t.slice().reverse().forEach(r=>Sd(e,r,i))}function ls(e,t){return e.indexOf(t)>-1}function BO(e){return(e==null?void 0:e.flatMap(t=>t))??[]}function g0(e,t){t==null||e==null||t.forEach(i=>e.push(i))}var eP="__ag_Grid_Stop_Propagation",HO=["touchstart","touchend","touchmove","touchcancel","scroll"],Rp={};function Ea(e){e[eP]=!0}function Zr(e){return e[eP]===!0}var tP=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof Rp[i]=="boolean")return Rp[i];const r=document.createElement(e[i]||"div");return i="on"+i,Rp[i]=i in r}})();function dm(e,t,i){let r=t;for(;r;){const n=Au(e,r,i);if(n)return n;r=r.parentElement}return null}function zO(e,t){return!t||!e?!1:UO(t).indexOf(e)>=0}function WO(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function UO(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():WO(t)}function $O(e,t,i,r){const o=ls(HO,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,r,o)}var B=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new Ka),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const r in t){const n=t[r];n&&i.push(this._setupListener(e,r,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?$O(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const r=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==r),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,r=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=n.changeSet.id}const o={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};t(o)};e.forEach(n=>this.setupGridOptionListener(n,r))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function Ut(e){return e instanceof Kc}var Kc=class extends B{constructor(e,t,i,r){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=nP(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=r}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Qn(t)?e.push(t):Ut(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const r=this.findChildrenRemovingPadding();for(let o=0,s=r.length;o<s;o++){const a=r[o];if(!a.isVisible())continue;const l=a.getColumnGroupShow();l==="open"?(e=!0,i=!0):l==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(r=>{Ut(r)&&r.isPadding()?t(r.children):e.push(r)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},iP="ag-Grid-ControlsColumn",KO=class extends B{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];const i=Fa(t),r=yd(t);if(i||r){const n=e.get("selectionColumnDef"),s={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(l,u,h,c){const d=h.isSelected(),f=c.isSelected();return d&&f?0:d?1:-1},editable:!1,suppressFillHandle:!0,...n,colId:`${iP}`},a=new DC(s,null,s.colId,!1);return this.createBean(a),[a]}return[]}},_f="ag-Grid-AutoColumn";function bC(e){const t=[],i=r=>{for(let n=0;n<r.length;n++){const o=r[n];Qn(o)?t.push(o):Ut(o)&&i(o.getChildren())}};return i(e),t}function $r(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function In(e,t,i){const r={};if(!t)return;nn(null,t,o=>{r[o.getInstanceId()]=o}),i&&nn(null,i,o=>{r[o.getInstanceId()]=null});const n=Object.values(r).filter(o=>o!=null);e.destroyBeans(n)}function fm(e){return e.getId().startsWith(_f)}function uh(e){return e.getColId().startsWith(iP)}function Yc(e){let t=[];return e instanceof Array?e.some(r=>typeof r!="string")?U("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):U("colDef.type should be of type 'string' | 'string[]'"),t}var xC=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,r)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,r))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},RC=new Set(["__proto__","constructor","prototype"]);function Qi(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const[i,r]of Object.entries(e))t(i,r)}}function rP(e){const t={},i=Object.keys(e);for(let r=0;r<i.length;r++){if(RC.has(i[r]))continue;const n=i[r],o=e[n];t[n]=o}return t}function pm(e,t){if(!e)return;const i=e,r={};return Object.keys(i).forEach(n=>{if(t&&t.indexOf(n)>=0||RC.has(n))return;const o=i[n];gm(o)&&o.constructor===Object?r[n]=pm(o):r[n]=o}),r}function jn(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const i=[];for(const r in e)e.hasOwnProperty(r)&&e.propertyIsEnumerable(r)&&i.push(e[r]);return i}function Kt(e,t,i=!0,r=!1){Y(t)&&Qi(t,(n,o)=>{if(RC.has(n))return;let s=e[n];s!==o&&(r&&s==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(s={},e[n]=s),gm(o)&&gm(s)&&!Array.isArray(s)?Kt(s,o,i,r):(i||o!==void 0)&&(e[n]=o))})}function su(e,t,i){if(!t||!e)return;if(!i)return e[t];const r=t.split(".");let n=e;for(let o=0;o<r.length;o++){if(n==null)return;n=n[r[o]]}return n}function gm(e){return typeof e=="object"&&e!==null}var YO={resizable:!0,sortable:!0},XO=0;function nP(){return XO++}function Qn(e){return e instanceof DC}var DC=class extends B{constructor(e,t,i,r){super(),this.isColumn=!0,this.instanceId=nP(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new Ka,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=r,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);const r=e.hide,n=e.initialHide;r!==void 0?this.visible=!r:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=e.flex,s=e.initialFlex;o!==void 0?this.flex=o:s!==void 0&&(this.flex=s)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=Y(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=Y(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=Y(this.colDef.tooltipField)||Y(this.colDef.tooltipValueGetter)||Y(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=ss(e.width),r=ss(e.initialWidth);return i!=null?t=i:r!=null?t=r:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Fe(this.colDef)||Fe(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){var r;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new xC(this.frameworkOverrides));const i=((r=this.frameworkEventListenerService)==null?void 0:r.wrap(t))??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){var r;const i=((r=this.frameworkEventListenerService)==null?void 0:r.unwrap(t))??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&typeof t!="string"){const i=uh(this)&&Fa(t);return this.isColumnFunc(e,i)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??YO[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Fe(this.sort)}isSorting(){return Y(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const r=this.createColumnEvent("filterChanged",t);i&&Kt(r,i),this.columnEventService.dispatchEvent(r)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Fe(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(Fe(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},qO={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},ZO=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=am(e);let i=0;for(;;){let r;if(e?(r=e,i!==0&&(r+="_"+i)):t?(r=t,i!==0&&(r+="_"+i)):r=i,!this.existingKeys[r])return this.existingKeys[r]=!0,String(r);i++}}},jO=class extends B{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,r){const n=new ZO,{existingCols:o,existingGroups:s,existingColKeys:a}=this.extractExistingTreeData(i);n.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,o,n,s,r),u=this.findMaxDept(l,0),h=this.balanceColumnTree(l,0,u,n);return nn(null,h,(d,f)=>{Ut(d)&&d.setupExpandable(),d.setOriginalParent(f)}),{columnTree:h,treeDept:u}}extractExistingTreeData(e){const t=[],i=[],r=[];return e&&nn(null,e,n=>{if(Ut(n)){const o=n;i.push(o)}else{const o=n;r.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:r}}balanceTreeForAutoCols(e,t){const i=[],r=this.findDepth(t);return e.forEach(n=>{let o=n;for(let s=r-1;s>=0;s--){const a=new Kc(null,`FAKE_PATH_${n.getId()}}_${s}`,!0,s);this.createBean(a),a.setChildren([o]),o.setOriginalParent(a),o=a}r===0&&n.setOriginalParent(null),i.push(o)}),[i,r]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Ut(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,r){const n=[];for(let o=0;o<e.length;o++){const s=e[o];if(Ut(s)){const a=s,l=this.balanceColumnTree(a.getChildren(),t+1,i,r);a.setChildren(l),n.push(a)}else{let a,l;for(let u=i-1;u>=t;u--){const h=r.getUniqueKey(null,null),c=this.createMergedColGroupDef(null),d=new Kc(c,h,!0,t);this.createBean(d),l&&l.setChildren([d]),l=d,a||(a=l)}if(a&&l)if(n.push(a),e.some(h=>Ut(h))){l.setChildren([s]);continue}else{l.setChildren(e);break}n.push(s)}}return n}findMaxDept(e,t){let i=t;for(let r=0;r<e.length;r++){const n=e[r];if(Ut(n)){const o=n,s=this.findMaxDept(o.getChildren(),t+1);i<s&&(i=s)}}return i}recursivelyCreateColumns(e,t,i,r,n,o,s){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const u=e[l];this.isColumnGroup(u)?a[l]=this.createColumnGroup(i,u,t,r,n,o,s):a[l]=this.createColumn(i,u,r,n,s)}return a}createColumnGroup(e,t,i,r,n,o,s){const a=this.createMergedColGroupDef(t),l=n.getUniqueKey(a.groupId||null,null),u=new Kc(a,l,!1,i);this.createBean(u);const h=this.findExistingGroup(t,o);h&&o.splice(h.idx,1);const c=h==null?void 0:h.group;c&&u.setExpanded(c.isExpanded());const d=this.recursivelyCreateColumns(a.children,i+1,e,r,n,o,s);return u.setChildren(d),u}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,r,n){var a;const o=this.findExistingColumn(t,i);o&&(i==null||i.splice(o.idx,1));let s=o==null?void 0:o.column;if(s){const l=this.addColumnDefaultAndTypes(t,s.getColId());s.setColDef(l,t,n),this.applyColumnState(s,l,n)}else{const l=r.getUniqueKey(t.colId,t.field),u=this.addColumnDefaultAndTypes(t,l);s=new DC(u,t,l,e),this.createBean(s)}return(a=this.dataTypeService)==null||a.addColumnListeners(s),s}applyColumnState(e,t,i){const r=ss(t.flex);if(r!==void 0&&e.setFlex(r),e.getFlex()<=0){const a=ss(t.width);if(a!=null)e.setActualWidth(a,i);else{const l=e.getActualWidth();e.setActualWidth(l,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));const o=ss(t.sortIndex);o!==void 0&&e.setSortIndex(o);const s=lm(t.hide);s!==void 0&&e.setVisible(!s,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const r=t[i].getUserProvidedColDef();if(!r)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(r.field===e.field)return{idx:i,column:t[i]};continue}if(r===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let r=0;r<t.length;r++){const n=t[r];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:r,group:n}}}addColumnDefaultAndTypes(e,t){var a;const i={},r=this.gos.get("defaultColDef");Kt(i,r,!1,!0);const n=this.updateColDefAndGetColumnType(i,e,t);n&&this.assignColumnTypes(n,i),Kt(i,e,!1,!0);const o=this.gos.get("autoGroupColumnDef"),s=Cr(this.gos);return e.rowGroup&&o&&s&&Kt(i,{sort:o.sort,initialSort:o.initialSort},!1,!0),(a=this.dataTypeService)==null||a.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){var o;const r=(o=this.dataTypeService)==null?void 0:o.updateColDefAndGetColumnType(e,t,i),n=t.type??r??e.type;return e.type=n,n?Yc(n):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},qO),r=this.gos.get("columnTypes")||{};Qi(r,(n,o)=>{n in i?U(`the column type '${n}' is a default column type and cannot be overridden.`):(o.type&&U("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[n]=o)}),e.forEach(n=>{const o=i[n.trim()];o?Kt(t,o,!1,!0):U("colDef.type '"+n+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function nn(e,t,i){if(t)for(let r=0;r<t.length;r++){const n=t[r];Ut(n)&&nn(n,n.getChildren(),i),i(n,e)}}var QO=class extends B{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll($o(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,$o(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged($o(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs($o(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),$o(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){var u,h,c;const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const i=(u=this.colDefCols)==null?void 0:u.list,r=(h=this.colDefCols)==null?void 0:h.tree,n=this.columnFactory.createColumnTree(this.colDefs,!0,r,e);In(this.context,(c=this.colDefCols)==null?void 0:c.tree,n.columnTree);const o=n.columnTree,s=n.treeDept,a=bC(o),l={};a.forEach(d=>l[d.getId()]=d),this.colDefCols={tree:o,treeDepth:s,list:a,map:l},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){var n,o,s;if(!this.colDefCols)return;const t=(n=this.cols)==null?void 0:n.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const i=AO(this.gos,this.showingPivotResult);(!e||i)&&this.restoreColOrder(),this.positionLockedCols(),(o=this.showRowGroupColsService)==null||o.refresh(),(s=this.quickFilterService)==null||s.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!ao(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){const{map:t,list:i,tree:r,treeDepth:n}=e;this.cols={list:i.slice(),map:{...t},tree:r.slice(),treeDepth:n},e.list.some(s=>{var a;return((a=this.cols)==null?void 0:a.map[s.getColId()])!==void 0})||(this.lastPivotOrder=null)}else{const{map:t,list:i,tree:r,treeDepth:n}=this.colDefCols;this.cols={list:i.slice(),map:{...t},tree:r.slice(),treeDepth:n}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(r=>{const n=fm(r);if(e){const o=t&&ls(t,r);return n||o}else return n||r.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),v0(this.cols))}createAutoCols(){var p;const e=Tf(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),n=!(i.length>0||this.gos.get("treeData"))||t||e,o=()=>{this.autoCols&&(In(this.context,this.autoCols.tree),this.autoCols=null)};if(n||!this.autoColService){o();return}const s=this.autoColService.createAutoCols(i)??[],a=y0(s,((p=this.autoCols)==null?void 0:p.list)||null),l=this.cols.treeDepth,h=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&h)return;o();const[c,d]=this.columnFactory.balanceTreeForAutoCols(s,this.cols.tree);this.autoCols={list:s,tree:c,treeDepth:d,map:{}};const f=g=>{if(!g)return null;const v=g.filter(m=>!fm(m));return[...s,...v]};this.lastOrder=f(this.lastOrder),this.lastPivotOrder=f(this.lastPivotOrder)}createControlsCols(){var u,h,c;const e=()=>{var d;In(this.context,(d=this.controlsCols)==null?void 0:d.tree),this.controlsCols=null};this.controlsColService||e();const t=this.cols.treeDepth,r=(((u=this.controlsCols)==null?void 0:u.treeDepth)??-1)==t,n=((h=this.controlsColService)==null?void 0:h.createControlsCols())??[];if(y0(n,((c=this.controlsCols)==null?void 0:c.list)??[])&&r)return;e();const[s,a]=this.columnFactory.balanceTreeForAutoCols(n,this.cols.tree);this.controlsCols={list:n,tree:s,treeDepth:a,map:{}};const l=d=>{if(!d)return null;const f=d.filter(p=>!uh(p));return[...n,...f]};this.lastOrder=l(this.lastOrder),this.lastPivotOrder=l(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),v0(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map(r=>({colId:typeof r=="string"?r:r.getColId(),hide:!t}))},i)}setColsPinned(e,t,i){if(!this.cols||yi(e))return;if(Tt(this.gos,"print")){U("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let r;t===!0||t==="left"?r="left":t==="right"?r="right":r=null;const n=[];e.forEach(o=>{if(!o)return;const s=this.getCol(o);s&&s.getPinned()!==r&&(s.setPinned(r),n.push(s))}),n.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(n,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let r;Ut(e)?r=e.getId():r=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:r,open:t}],i)}getProvidedColGroup(e){var i;let t=null;return nn(null,(i=this.cols)==null?void 0:i.tree,r=>{Ut(r)&&r.getId()===e&&(t=r)}),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const r=this.funcColsService.getRowGroupColumns().findIndex(n=>n.getColId()===e.getColId());return t>r}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,it(this.gos)||fn(this.gos)||U("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map((l,u)=>[l,u]));if(!this.cols.list.some(l=>t.has(l)))return;const r=new Map(this.cols.list.map(l=>[l,!0])),n=e.filter(l=>r.has(l)),o=new Map(n.map(l=>[l,!0])),s=this.cols.list.filter(l=>!o.has(l)),a=n.slice();s.forEach(l=>{let u=l.getOriginalParent();if(!u){a.push(l);return}const h=[];for(;!h.length&&u;)u.getLeafColumns().forEach(p=>{const g=a.indexOf(p)>=0,v=h.indexOf(p)<0;g&&v&&h.push(p)}),u=u.getOriginalParent();if(!h.length){a.push(l);return}const c=h.map(f=>a.indexOf(f)),d=Math.max(...c);Sd(a,l,d+1)}),this.cols.list=a}sortColsLikeKeys(e){if(this.cols==null)return;let t=[];const i={};e.forEach(n=>{if(i[n])return;const o=this.cols.map[n];o&&(t.push(o),i[n]=!0)});let r=0;if(this.cols.list.forEach(n=>{const o=n.getColId();if(i[o]!=null)return;o.startsWith(_f)?Sd(t,n,r++):t.push(n)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){U("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(i=>this.cols.list.indexOf(i)<0).length>0||e.sort((i,r)=>{const n=this.cols.list.indexOf(i),o=this.cols.list.indexOf(r);return n-o})}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const r=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(r,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){var r;JA((r=this.cols)==null?void 0:r.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=(e=this.cols)==null?void 0:e.list:this.lastOrder=(t=this.cols)==null?void 0:t.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((r,n)=>this.lastOrder.indexOf(r)-this.lastOrder.indexOf(n)):this.lastOrder&&e.sort((r,n)=>this.cols.list.indexOf(r)-this.cols.list.indexOf(n));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){var e;return((e=this.colDefCols)==null?void 0:e.treeDepth)>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(U("Pivot mode not available with treeData."),!1):!0}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!yi(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e,t,i;In(this.context,(e=this.colDefCols)==null?void 0:e.tree),In(this.context,(t=this.autoCols)==null?void 0:t.tree),In(this.context,(i=this.controlsCols)==null?void 0:i.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){var e;return(e=this.colDefCols)!=null&&e.list?this.colDefCols.list:null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}getAllCols(){var i,r,n;const e=this.pivotResultColsService.getPivotResultCols(),t=e==null?void 0:e.list;return[((i=this.colDefCols)==null?void 0:i.list)??[],((r=this.autoCols)==null?void 0:r.list)??[],((n=this.controlsCols)==null?void 0:n.list)??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:r}=t;if(typeof e=="string"&&i[e])return i[e];for(let n=0;n<r.length;n++)if(m0(r[n],e))return r[n];return this.getAutoCol(e)}getAutoCol(e){var t;return((t=this.autoCols)==null?void 0:t.list.find(i=>m0(i,e)))??null}getAutoCols(){var e;return((e=this.autoCols)==null?void 0:e.list)??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const i of t){if(!i)continue;const r=i.getGroupRowCount()||0;for(let n=0;n<r;n++){const o=i.getGroupRowCtrlAtIndex(n),s=e[n];if(o){const a=this.getColumnGroupHeaderRowHeight(o);(s==null||a>s)&&(e[n]=a)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let i=0;const r=e.getHeaderCtrls();for(const n of r){const o=n.getColumn();if(o.isAutoHeaderHeight()){const s=o.getAutoHeaderHeight();s!=null&&s>i&&(i=s)}}return Math.max(t,i)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.visibleColsService.getAllCols().filter(r=>r.isAutoHeaderHeight()).map(r=>r.getAutoHeaderHeight()||0);return Math.max(e,...i)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){const r=t&&typeof t!="string"?Fa(t):void 0,n=e&&typeof e!="string"?Fa(e):void 0,o=r!==n,s=t&&typeof t!="string"?yd(t):void 0,a=e&&typeof e!="string"?yd(e):void 0;(o||s!==a)&&this.refreshAll(i)}};function $o(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function v0(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function m0(e,t){const i=e===t,r=e.getColDef()===t,n=e.getColId()==t;return i||r||n}function y0(e,t){return ao(e,t,(i,r)=>i.getColId()===r.getColId())}var JO=class extends B{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:i,skipHeaderGroups:r,stopAtGroup:n,source:o="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;const s=[];let a=-1;const l=i??this.gos.get("skipHeaderOnAutoSize"),u=r??l;for(;a!==0;){a=0;const h=[];t.forEach(c=>{if(!c)return;const d=this.columnModel.getCol(c);if(!d||s.indexOf(d)>=0)return;const f=this.autoWidthCalculator.getPreferredWidthForColumn(d,l);if(f>0){const p=this.normaliseColumnWidth(d,f);d.setActualWidth(p,o),s.push(d),a++}h.push(d)}),h.length&&this.visibleColsService.refresh(o)}u||this.autoSizeColumnGroupsByColumns(t,o,n),this.eventDispatcher.columnResized(s,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const r=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let l=a.getParent();for(;l&&l!=i;)l.isPadding()||r.add(l),l=l.getParent()});let o;const s=[];for(const a of r){for(const l of this.ctrlsService.getHeaderRowContainerCtrls())if(o=l.getHeaderCtrlForColumn(a),o)break;o&&o.resizeLeafColumnsToFit(t)}return s}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const r=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=r),t}},eG=class extends B{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Xt(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Xt(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Xt(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return yi(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const r=this.columnModel.getColDefCol(e);r&&(r.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[r],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(i,r)=>this.setRowGroupActive(i,r,t),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,i=>this.setRowGroupActive(!0,i,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,i=>this.setRowGroupActive(!1,i,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,i=>i.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(i,r)=>{r.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,i=>i.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(i,r)=>this.setValueActive(i,r,t),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const r=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(r)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,i=>this.setValueActive(!0,i,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,i=>this.setValueActive(!1,i,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const r=this.rowGroupCols[e],n=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,r),this.eventDispatcher.rowGroupChanged(n,i)}setColList(e,t,i,r,n,o,s){if(!this.columnModel.getCols())return;const a=new Map;t.forEach((u,h)=>a.set(u,h)),t.length=0,Y(e)&&e.forEach(u=>{const h=this.columnModel.getColDefCol(u);h&&t.push(h)}),t.forEach((u,h)=>{const c=a.get(u);if(c===void 0){a.set(u,0);return}r&&c!==h||a.delete(u)}),(this.columnModel.getColDefCols()||[]).forEach(u=>{const h=t.indexOf(u)>=0;o(h,u)}),n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(s),this.eventDispatcher.columnChanged(i,[...a.keys()],s)}updateColList(e,t,i,r,n,o,s){if(!e||yi(e))return;let a=!1;const l=new Set;e.forEach(u=>{if(!u)return;const h=this.columnModel.getColDefCol(u);if(h){if(l.add(h),i){if(t.indexOf(h)>=0)return;t.push(h)}else{const c=t.indexOf(h);if(c<0)return;for(let d=c+1;d<t.length;d++)l.add(t[d]);Xt(t,h)}n(h),a=!0}}),a&&(r&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(s),this.eventDispatcher.genericColumnEvent(o,Array.from(l),s))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(i,r)=>i.setValueActive(r,e),()=>{},()=>{},i=>{const r=i.aggFunc;if(r===null||r==="")return null;if(r!==void 0)return!!r},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueCols.forEach(i=>{const r=i.getColDef();r.aggFunc!=null&&r.aggFunc!=""?i.setAggFunc(r.aggFunc):i.getAggFunc()||i.setAggFunc(r.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(i,r)=>i.setRowGroupActive(r,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(i,r)=>i.setPivotActive(r,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}extractColsCommon(e=[],t=[],i,r,n,o,s){const a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(d=>{const f=e.indexOf(d)<0,p=d.getColDef(),g=lm(o(p)),v=lm(s(p)),m=ss(r(p)),y=ss(n(p));let C;g!==void 0?C=g:m!==void 0?m===null?C=!1:C=m>=0:f?v!==void 0?C=v:y!==void 0?C=y!=null&&y>=0:C=!1:C=t.indexOf(d)>=0,C&&((f?m!=null||y!=null:m!=null)?a.push(d):l.push(d))});const h=d=>{const f=r(d.getColDef()),p=n(d.getColDef());return f??p};a.sort((d,f)=>{const p=h(d),g=h(f);return p===g?0:p<g?-1:1});const c=[].concat(a);return t.forEach(d=>{l.indexOf(d)>=0&&c.push(d)}),l.forEach(d=>{c.indexOf(d)<0&&c.push(d)}),t.forEach(d=>{c.indexOf(d)<0&&i(d,!1)}),c.forEach(d=>{t.indexOf(d)<0&&i(d,!0)}),c}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},r=(n,o,s,a,l,u)=>{const h=this.columnModel.getColDefCols();if(!o.length||!h)return[];const c=Object.keys(n),d=new Set(c),f=new Set(c),p=new Set(o.map(w=>{const x=w.getColId();return f.delete(x),x}).concat(c)),g=[],v={};let m=0;for(let w=0;w<h.length;w++){const x=h[w].getColId();p.has(x)&&(g.push(x),v[x]=m++)}let y=1e3,C=!1,S=0;const b=w=>{const x=v[w];for(let R=S;R<x;R++){const D=g[R];f.has(D)&&(n[D][l]=y++,f.delete(D))}S=x};o.forEach(w=>{const x=w.getColId();if(d.has(x))b(x),n[x][l]=y++;else{const R=w.getColDef();(R[l]===null||R[l]===void 0&&R[u]==null)&&(C||(R[s]||R[s]===void 0&&R[a]?b(x):(f.forEach(A=>{n[A][l]=y+v[A]}),y+=g.length,C=!0)),i[x]||(i[x]={colId:x}),i[x][l]=y++)}})};return r(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),r(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},tG=class extends B{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(yi(i))return!1;if(e&&e.state&&!e.state.forEach)return U("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const r=this.funcColsService.getModifyColumnsNoEventsCallbacks(),n=(a,l,u)=>{const h=this.compareColumnStatesAndDispatchEvents(t),c=l.slice(),d={},f={},p=[],g=[];let v=0;const m=this.funcColsService.getRowGroupColumns().slice(),y=this.funcColsService.getPivotColumns().slice();a.forEach(w=>{const x=w.colId||"";if(x.startsWith(_f)){p.push(w),g.push(w);return}const D=u(x);D?(this.syncColumnWithStateItem(D,w,e.defaultState,d,f,!1,t,r),Xt(c,D)):(g.push(w),v+=1)});const C=w=>this.syncColumnWithStateItem(w,null,e.defaultState,d,f,!1,t,r);c.forEach(C),this.funcColsService.sortRowGroupColumns(C0.bind(this,d,m)),this.funcColsService.sortPivotColumns(C0.bind(this,f,y)),this.columnModel.refreshCols(!1);const b=(this.columnModel.getAutoCols()||[]).slice();return p.forEach(w=>{const x=this.columnModel.getAutoCol(w.colId);Xt(b,x),this.syncColumnWithStateItem(x,w,e.defaultState,null,null,!0,t,r)}),b.forEach(C),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),h(),{unmatchedAndAutoStates:g,unmatchedCount:v}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:s}=n(e.state||[],i,a=>this.columnModel.getColDefCol(a));if(o.length>0||Y(e.defaultState)){const a=this.pivotResultColsService.getPivotResultCols(),l=a==null?void 0:a.list;s=n(o,l||[],u=>this.pivotResultColsService.getPivotResultCol(u)).unmatchedCount}return this.columnAnimationService.finish(),s===0}resetColumnState(e){const t=this.columnModel.getColDefCols();if(yi(t))return;const i=this.columnModel.getColDefColTree(),r=bC(i),n=[];let o=1e3,s=1e3,a=[];const l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),r&&(a=a.concat(r)),a.forEach(u=>{const h=this.getColumnStateFromColDef(u);Fe(h.rowGroupIndex)&&h.rowGroup&&(h.rowGroupIndex=o++),Fe(h.pivotIndex)&&h.pivot&&(h.pivotIndex=s++),n.push(h)}),this.applyColumnState({state:n,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(p,g)=>p??g??null,i=e.getColDef(),r=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),s=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let u=t(i.rowGroupIndex,i.initialRowGroupIndex),h=t(i.rowGroup,i.initialRowGroup);u==null&&(h==null||h==!1)&&(u=null,h=null);let c=t(i.pivotIndex,i.initialPivotIndex),d=t(i.pivot,i.initialPivot);c==null&&(d==null||d==!1)&&(c=null,d=null);const f=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:r,sortIndex:n,hide:o,pinned:s,width:a,flex:l,rowGroup:h,rowGroupIndex:u,pivot:d,pivotIndex:c,aggFunc:f}}syncColumnWithStateItem(e,t,i,r,n,o,s,a){if(!e)return;const l=(S,b)=>{const w={value1:void 0,value2:void 0};let x=!1;return t&&(t[S]!==void 0&&(w.value1=t[S],x=!0),Y(b)&&t[b]!==void 0&&(w.value2=t[b],x=!0)),!x&&i&&(i[S]!==void 0&&(w.value1=i[S]),Y(b)&&i[b]!==void 0&&(w.value2=i[b])),w},u=l("hide").value1;u!==void 0&&e.setVisible(!u,s);const h=l("pinned").value1;h!==void 0&&e.setPinned(h);const c=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),d=l("flex").value1;if(d!==void 0&&e.setFlex(d),d==null){const S=l("width").value1;S!=null&&c!=null&&S>=c&&e.setActualWidth(S,s)}const f=l("sort").value1;f!==void 0&&(f==="desc"||f==="asc"?e.setSort(f,s):e.setSort(void 0,s));const p=l("sortIndex").value1;if(p!==void 0&&e.setSortIndex(p),o||!e.isPrimary())return;const g=l("aggFunc").value1;g!==void 0&&(typeof g=="string"?(e.setAggFunc(g),e.isValueActive()||(e.setValueActive(!0,s),a.addValueCol(e))):(Y(g)&&U("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,s),a.removeValueCol(e))));const{value1:v,value2:m}=l("rowGroup","rowGroupIndex");(v!==void 0||m!==void 0)&&(typeof m=="number"||v?(e.isRowGroupActive()||(e.setRowGroupActive(!0,s),a.addGroupCol(e)),r&&typeof m=="number"&&(r[e.getId()]=m)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,s),a.removeGroupCol(e)));const{value1:y,value2:C}=l("pivot","pivotIndex");(y!==void 0||C!==void 0)&&(typeof C=="number"||y?(e.isPivotActive()||(e.setPivotActive(!0,s),a.addPivotCol(e)),n&&typeof C=="number"&&(n[e.getId()]=C)):e.isPivotActive()&&(e.setPivotActive(!1,s),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach(i=>{i.colId!=null&&t.push(i.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),r={};return i.forEach(n=>{r[n.colId]=n}),()=>{const n=this.columnModel.getAllCols(),o=(g,v,m,y)=>{const C=v.map(y),S=m.map(y);if(ao(C,S))return;const w=new Set(v);m.forEach(R=>{w.delete(R)||w.add(R)});const x=[...w];this.eventService.dispatchEvent({type:g,columns:x,column:x.length===1?x[0]:null,source:e})},s=g=>{const v=[];return n.forEach(m=>{const y=r[m.getColId()];y&&g(y,m)&&v.push(m)}),v},a=g=>g.getColId();o("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),o("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);const u=s((g,v)=>{const m=g.aggFunc!=null,y=m!=v.isValueActive(),C=m&&g.aggFunc!=v.getAggFunc();return y||C});u.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",u,e);const h=(g,v)=>g.width!=v.getActualWidth();this.eventDispatcher.columnResized(s(h),!0,e);const c=(g,v)=>g.pinned!=v.getPinned();this.eventDispatcher.columnPinned(s(c),e);const d=(g,v)=>g.hide==v.isVisible();this.eventDispatcher.columnVisible(s(d),e);const p=s((g,v)=>g.sort!=v.getSort()||g.sortIndex!=v.getSortIndex());p.length>0&&this.sortController.dispatchSortChangedEvents(e,p),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),r={};i.forEach(l=>r[l.colId]=l);const n={};e.forEach(l=>{r[l.colId]&&(n[l.colId]=!0)});const o=e.filter(l=>n[l.colId]),s=i.filter(l=>n[l.colId]),a=[];s.forEach((l,u)=>{const h=o&&o[u];if(h&&h.colId!==l.colId){const c=this.columnModel.getCol(h.colId);c&&a.push(c)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},C0=(e,t,i,r)=>{const n=e[i.getId()],o=e[r.getId()],s=n!=null,a=o!=null;if(s&&a)return n-o;if(s)return-1;if(a)return 1;const l=t.indexOf(i),u=t.indexOf(r),h=l>=0,c=u>=0;return h&&c?l-u:h?-1:1},iG=class extends B{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const r=this.columnModel.getCols();if(!r)return;const n=r[e];this.moveColumns([n],t,i)}moveColumns(e,t,i,r=!0){const n=this.columnModel.getCols();if(!n)return;if(t>n.length-e.length){U("tried to insert columns in invalid location, toIndex = ",t),U("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();const o=this.columnModel.getColsForKeys(e);this.doesMovePassRules(o,t)&&(this.columnModel.moveInCols(o,t,i),this.eventDispatcher.columnMoved({movedColumns:o,source:i,toIndex:t,finished:r})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const r=this.columnModel.getCols().slice();return JA(r,e,t),r}doesMovePassLockedPositions(e){const t=o=>o?o==="left"||o===!0?-1:1:0,i=this.gos.get("enableRtl");let r=i?1:-1,n=!0;return e.forEach(o=>{const s=t(o.getColDef().lockPosition);i?s>r&&(n=!1):s<r&&(n=!1),r=s}),n}doesMovePassMarryChildren(e){let t=!0;const i=this.columnModel.getColTree();return nn(null,i,r=>{if(!Ut(r))return;const n=r,o=n.getColGroupDef();if(!(o&&o.marryChildren))return;const a=[];n.getLeafColumns().forEach(d=>{const f=e.indexOf(d);a.push(f)});const l=Math.max.apply(Math,a),u=Math.min.apply(Math,a),h=l-u,c=n.getLeafColumns().length-1;h>c&&(t=!1)}),t}placeLockedColumns(e){const t=[],i=[],r=[];return e.forEach(o=>{const s=o.getColDef().lockPosition;s==="right"?r.push(o):s==="left"||s===!0?t.push(o):i.push(o)}),this.gos.get("enableRtl")?[...r,...i,...t]:[...t,...i,...r]}},rG=/[&<>"']/g,nG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _r(e,t){if(e==null)return null;const i=e.toString().toString();return t?i:i.replace(rG,r=>nG[r])}function oG(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}function sG(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var aG=class extends B{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const r=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,r):r}getDisplayNameForProvidedColumnGroup(e,t,i){const r=t?t.getColGroupDef():null;return r?this.getHeaderName(r,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,r,n){const o=e.headerValueGetter;if(o){const s=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:r,location:n});return typeof o=="function"?o(s):typeof o=="string"?this.expressionService.evaluate(o,s):(U("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return oG(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,r=Y(i);let n=null,o;if(r){const s=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&s.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;n=i?i.getAggFunc():null,o=!0}else{const s=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();s&&a?(n=e.getAggFunc(),o=!0):o=!1}if(o){const s=typeof n=="string"?n:"func";return`${this.localeService.getLocaleTextFunc()(s,s)}(${t})`}return t}},lG=class extends B{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){var e;In(this.context,(e=this.pivotResultCols)==null?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;const i=this.columnModel.getColDefCol(t);let r=null;return this.pivotResultCols.list.forEach(n=>{const o=n.getColDef().pivotKeys,s=n.getColDef().pivotValueColumn;ao(o,e)&&s===i&&(r=n)}),r}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){var i,r;if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);const n=this.columnFactory.createColumnTree(e,!1,((i=this.pivotResultCols)==null?void 0:i.tree)||this.previousPivotResultCols||void 0,t);In(this.context,(r=this.pivotResultCols)==null?void 0:r.tree,n.columnTree);const o=n.columnTree,s=n.treeDept,a=bC(o),l={};this.pivotResultCols={tree:o,treeDepth:s,list:a,map:l},this.pivotResultCols.list.forEach(h=>this.pivotResultCols.map[h.getId()]=h);const u=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!u)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const r=n=>{n.forEach(o=>{if(Y(o.children)){const a=o;i&&i(a),r(a.children)}else t&&t(o)})};e&&r(e)}},uG=class extends B{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,r){const n=[];e.forEach(o=>{const s=this.columnModel.getColDefCol(o.key)||this.columnModel.getCol(o.key);if(!s)return;if(n.push({width:o.newWidth,ratios:[1],columns:[s]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const l=this.visibleColsService.getColAfter(s);if(!l)return;const u=s.getActualWidth()-o.newWidth,h=l.getActualWidth()+u;n.push({width:h,ratios:[1],columns:[l]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:i,source:r})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:r}=e;if(!(!t||t.every(h=>this.checkMinAndMaxWidthsForSet(h)))){if(i){const h=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(h,i,r)}return}const o=[],s=[];t.forEach(h=>{const{width:c,columns:d,ratios:f}=h,p={},g={};d.forEach(y=>s.push(y));let v=!0,m=0;for(;v;){if(m++,m>1e3){Ge("infinite loop in resizeColumnSets");break}v=!1;const y=[];let C=0,S=c;d.forEach((w,x)=>{if(g[w.getId()])S-=p[w.getId()];else{y.push(w);const D=f[x];C+=D}});const b=1/C;y.forEach((w,x)=>{const R=x===y.length-1;let D;R?D=S:(D=Math.round(f[x]*c*b),S-=D);const T=w.getMinWidth(),A=w.getMaxWidth();D<T?(D=T,g[w.getId()]=!0,v=!0):A>0&&D>A&&(D=A,g[w.getId()]=!0,v=!0),p[w.getId()]=D})}d.forEach(y=>{const C=p[y.getId()];y.getActualWidth()!==C&&(y.setActualWidth(C,r),o.push(y))})});const a=o.length>0;let l=[];a&&(l=this.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}),this.visibleColsService.setLeftValues(r),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const u=s.concat(l);(a||i)&&this.eventDispatcher.columnResized(u,i,r,l)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let r=0,n=0,o=!0;t.forEach(l=>{const u=l.getMinWidth();r+=u||0;const h=l.getMaxWidth();h>0?n+=h:o=!1});const s=i>=r,a=!o||i<=n;return s&&a}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let r=-1;if(e.resizingCols){const d=new Set(e.resizingCols);for(let f=i.length-1;f>=0;f--)if(d.has(i[f])){r=f;break}}let n=0,o=[],s=0,a=0;for(let d=0;d<i.length;d++)i[d].getFlex()&&d>r?(o.push(i[d]),a+=i[d].getFlex(),s+=i[d].getMinWidth()):n+=i[d].getActualWidth();if(!o.length)return[];let l=[];n+s>this.flexViewportWidth&&(o.forEach(d=>d.setActualWidth(d.getMinWidth(),t)),l=o,o=[]);const u=[];let h;e:for(;;){h=this.flexViewportWidth-n;const d=h/a;for(let f=0;f<o.length;f++){const p=o[f],g=d*p.getFlex();let v=0;const m=p.getMinWidth(),y=p.getMaxWidth();if(g<m?v=m:g>y&&(v=y),v){p.setActualWidth(v,t),QA(o,p),a-=p.getFlex(),l.push(p),n+=p.getActualWidth();continue e}u[f]=Math.floor(g)}break}let c=h;return o.forEach((d,f)=>{const p=f<o.length-1?Math.min(u[f],c):Math.max(u[f],c);d.setActualWidth(p,t),l.push(d),c-=u[f]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",i,r){var d;if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,r));return}const n={};r&&((d=r==null?void 0:r.columnLimits)==null||d.forEach(({key:f,...p})=>{n[typeof f=="string"?f:f.getColId()]=p}));const o=this.visibleColsService.getAllCols(),s=e===$r(o);if(e<=0||!o.length||s)return;const a=[],l=[];o.forEach(f=>{f.getColDef().suppressSizeToFit===!0?l.push(f):a.push(f)});const u=a.slice(0);let h=!1;const c=f=>{Xt(a,f),l.push(f)};for(a.forEach(f=>{f.resetActualWidth(t);const p=n==null?void 0:n[f.getId()],g=(p==null?void 0:p.minWidth)??(r==null?void 0:r.defaultMinWidth),v=(p==null?void 0:p.maxWidth)??(r==null?void 0:r.defaultMaxWidth),m=f.getActualWidth();typeof g=="number"&&m<g?f.setActualWidth(g,t,!0):typeof v=="number"&&m>v&&f.setActualWidth(v,t,!0)});!h;){h=!0;const f=e-$r(l);if(f<=0)a.forEach(p=>{var v;const g=((v=n==null?void 0:n[p.getId()])==null?void 0:v.minWidth)??(r==null?void 0:r.defaultMinWidth);if(typeof g=="number"){p.setActualWidth(g,t,!0);return}p.setMinimum(t)});else{const p=f/$r(a);let g=f;for(let v=a.length-1;v>=0;v--){const m=a[v],y=n==null?void 0:n[m.getId()],C=(y==null?void 0:y.minWidth)??(r==null?void 0:r.defaultMinWidth),S=(y==null?void 0:y.maxWidth)??(r==null?void 0:r.defaultMaxWidth),b=m.getMinWidth(),w=m.getMaxWidth(),x=typeof C=="number"&&C>b?C:b,R=typeof S=="number"&&S<w?S:w;let D=Math.round(m.getActualWidth()*p);D<x?(D=x,c(m),h=!1):D>R?(D=R,c(m),h=!1):v===0&&(D=g),m.setActualWidth(D,t,!0),g-=D}}}u.forEach(f=>{f.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!i&&this.eventDispatcher.columnResized(u,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:r,defaultMaxWidth:n}=e,o=i==null?void 0:i.map(({colId:s,minWidth:a,maxWidth:l})=>({key:s,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:r,defaultMaxWidth:n,columnLimits:o})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function oP(e,t){return e+"_"+t}function lt(e){return e instanceof sP}var sP=class extends B{constructor(e,t,i,r){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=r}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return oP(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{lt(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=Ee(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Qn(t)?e.push(t):lt(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Qn(t)?e.push(t):lt(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(i=>{if(lt(i)&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},aP=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},hG=class extends B{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Dp(this.treeLeft),this.columnsCenter=Dp(this.treeCenter),this.columnsRight=Dp(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(i=>i.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=$r(this.columnsCenter),t=$r(this.columnsLeft),i=$r(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?Ee(this.columnsRight):null):(t=this.columnsLeft?Ee(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(r=>{r.setLastLeftPinned(r===t,e),r.setFirstRightPinned(r===i,e)})}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter(o=>o.getPinned()=="left"),i=e.filter(o=>o.getPinned()=="right"),r=e.filter(o=>o.getPinned()!="left"&&o.getPinned()!="right"),n=new aP;this.treeLeft=this.createGroups({columns:t,idCreator:n,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:n,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:r,idCreator:n,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],r=[];for(const n of e){const o=n.getPinned();o?o===!0||o==="left"?t.push(n):r.push(n):i.push(n)}this.ariaOrderColumns=t.concat(i).concat(r)}getAriaColIndex(e){let t;return lt(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{lt(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const i=this.columnModel.getCols().slice(0),r=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(n=>{if(r){let o=$r(n);n.forEach(s=>{o-=s.getActualWidth(),s.setLeft(o,e)})}else{let o=0;n.forEach(s=>{s.setLeft(o,e),o+=s.getActualWidth()})}NO(i,n)}),i.forEach(n=>{n.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,r){const n=[];let o=null;for(let s=0;s<t.length;s++){const a=t[s],l=t.length-s,u=Math.min(a.getColSpan(e),l),h=[a];if(u>1){const d=u-1;for(let f=1;f<=d;f++)h.push(t[s+f]);s+=d}let c;i?(c=!1,h.forEach(d=>{i(d)&&(c=!0)})):c=!0,c&&(n.length===0&&o&&(r&&r(a))&&n.push(o),n.push(a)),o=a}return n}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),r=e.getDisplayedLeafColumns(),n=t==="After"?Ee(r):r[0],o=`getCol${t}`;for(;;){const s=this[o](n);if(!s)return null;const a=this.getColGroupAtLevel(s,i);if(a!==e)return a}}getColGroupAtLevel(e,t){let i=e.getParent(),r,n;for(;r=i.getProvidedColumnGroup().getLevel(),n=i.getPaddingLevel(),!(r+n<=t);)i=i.getParent();return i}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Ko(this.treeCenter,!1,e),Ko(this.treeLeft,!1,e),Ko(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllTrees();Ko(e,!1,t=>{lt(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const r=this[t[i]]();if(r.length)return e?Ee(r):r[0]}return null}getColumnGroup(e,t){if(!e)return null;if(lt(e))return e;const i=this.getAllTrees(),r=typeof t=="number";let n=null;return Ko(i,!1,o=>{if(lt(o)){const s=o;let a;r?a=e===s.getGroupId()&&t===s.getPartId():a=e===s.getGroupId(),a&&(n=s)}}),n}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return $r(this.columnsLeft)}getDisplayedColumnsRightWidth(){return $r(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const r=t==="first";let n;if(lt(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;n=r?o[0]:Ee(o)}else n=e;return(r?i[0]:Ee(i))===n}createGroups(e){const{columns:t,idCreator:i,pinned:r,oldDisplayedGroups:n,isStandaloneStructure:o}=e,s=this.mapOldGroupsById(n),a=[];let l=t;for(;l.length;){const u=l;l=[];let h=0;const c=d=>{const f=h;h=d;const p=u[f],v=(lt(p)?p.getProvidedColumnGroup():p).getOriginalParent();if(v==null){for(let y=f;y<d;y++)a.push(u[y]);return}const m=this.createColGroup(v,i,s,r,o);for(let y=f;y<d;y++)m.addChild(u[y]);l.push(m)};for(let d=1;d<u.length;d++){const f=u[d],g=(lt(f)?f.getProvidedColumnGroup():f).getOriginalParent(),v=u[h],y=(lt(v)?v.getProvidedColumnGroup():v).getOriginalParent();g!==y&&c(d)}h<u.length&&c(u.length)}return o||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,i,r,n){const o=e.getGroupId(),s=t.getInstanceIdForKey(o),a=oP(o,s);let l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),Y(l)?l.reset():(l=new sP(e,o,s,r),n||this.createBean(l)),l}mapOldGroupsById(e){const t={},i=r=>{r.forEach(n=>{if(lt(n)){const o=n;t[n.getUniqueId()]=o,i(o.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(i=>{if(i.setParent(t),lt(i)){const r=i;this.setupParentsIntoCols(r.getChildren(),r)}})}};function Ko(e,t,i){if(e)for(let r=0;r<e.length;r++){const n=e[r];if(lt(n)){const o=t?n.getDisplayedChildren():n.getChildren();Ko(o,t,i)}i(n)}}function Dp(e){const t=[];return Ko(e,!0,i=>{Qn(i)&&t.push(i)}),t}var lP=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],cG=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],dG=[...lP,...cG],fG={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},It=class{};It.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];It.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];It.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];It.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];It.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];It.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];It.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];It.ALL_PROPERTIES=[...It.ARRAY_PROPERTIES,...It.OBJECT_PROPERTIES,...It.STRING_PROPERTIES,...It.NUMBER_PROPERTIES,...It.FUNCTION_PROPERTIES,...It.BOOLEAN_PROPERTIES,...It.OTHER_PROPERTIES];var Mu=It,Ni=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};Ni.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Ni.PUBLIC_EVENTS=lP;Ni.EVENT_CALLBACKS=dG.map(e=>Ni.getCallbackForEvent(e));Ni.BOOLEAN_PROPERTIES=Mu.BOOLEAN_PROPERTIES;Ni.ALL_PROPERTIES=Mu.ALL_PROPERTIES;Ni.ALL_PROPERTIES_AND_CALLBACKS=[...Ni.ALL_PROPERTIES,...Ni.EVENT_CALLBACKS];Ni.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Ni.ALL_PROPERTIES_AND_CALLBACKS);var uP=Ni;function hh(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var pG=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(r=>this.addCssClass(r));return}if(this.cssClassStates[e]!==!0&&e.length){const r=this.getGui();r&&r.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(r=>this.removeCssClass(r));return}if(this.cssClassStates[e]!==!1&&e.length){const r=this.getGui();r&&r.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const r=(e||"").split(" ");if(r.length>1){r.forEach(n=>this.addOrRemoveCssClass(n,t));return}}if(this.cssClassStates[e]!==t&&e.length){const r=this.getGui();r&&r.classList.toggle(e,t),this.cssClassStates[e]=t}}};function pn(e,t,i){i==null||typeof i=="string"&&i==""?hP(e,t):ar(e,t,i)}function ar(e,t,i){e.setAttribute(cP(t),i.toString())}function hP(e,t){e.removeAttribute(cP(t))}function cP(e){return`aria-${e}`}function hi(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function gG(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function vG(e){return e.getAttribute("aria-label")}function Ia(e,t){pn(e,"label",t)}function Fu(e,t){pn(e,"labelledby",t)}function dP(e,t){pn(e,"live",t)}function mG(e,t){pn(e,"atomic",t)}function yG(e,t){pn(e,"relevant",t)}function CG(e,t){pn(e,"disabled",t)}function fP(e,t){pn(e,"hidden",t)}function wd(e,t){ar(e,"expanded",t)}function SG(e,t){ar(e,"setsize",t)}function wG(e,t){ar(e,"posinset",t)}function bG(e,t){ar(e,"multiselectable",t)}function xG(e,t){ar(e,"rowcount",t)}function pP(e,t){ar(e,"rowindex",t)}function RG(e,t){ar(e,"colcount",t)}function gP(e,t){ar(e,"colindex",t)}function DG(e,t){ar(e,"colspan",t)}function TG(e,t){ar(e,"sort",t)}function _G(e){hP(e,"sort")}function bd(e,t){pn(e,"selected",t)}function AG(e,t){pn(e,"controls",t.id),Fu(t,e.id)}function TC(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var Tp,kh,_p,Ap,Pp,Mp,vm,mm,Fp;function Fr(){return Tp===void 0&&(Tp=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Tp}function vP(){if(kh===void 0)if(Fr()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(kh=e[1]!=null?parseFloat(e[1]):0)}else kh=0;return kh}function _C(){if(_p===void 0){const e=window;_p=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return _p}function AC(){return Ap===void 0&&(Ap=/(firefox)/i.test(navigator.userAgent)),Ap}function mP(){return Pp===void 0&&(Pp=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Pp}function lo(){return Mp===void 0&&(Mp=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Mp}function ym(){return!Fr()||vP()>=15}function Cm(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!AC())?null:t.toString()}function PG(){if(Fp!==void 0)return Fp;if(!document.body)return-1;let e=1e6;const t=AC()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const r=e*2;if(i.style.height=r+"px",r>t||i.clientHeight!==r)break;e=r}return document.body.removeChild(i),Fp=e,e}function MG(){var e,t;return((e=document.body)==null?void 0:e.clientWidth)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1)}function FG(){var e,t;return((e=document.body)==null?void 0:e.clientHeight)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1)}function EG(){return mm==null&&yP(),mm}function yP(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(mm=i,vm=i===0)}function CP(){return vm==null&&yP(),vm}var Oh,IG="[tabindex], input, select, button, textarea, [href]",SP="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function PC(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,r=t.call(e,"input, select, button, textarea"),n=t.call(e,SP),o=nr(e);return r&&!n&&o}function Je(e,t,i={}){const{skipAriaHidden:r}=i;e.classList.toggle("ag-hidden",!t),r||fP(e,!t)}function LG(e,t,i={}){const{skipAriaHidden:r}=i;e.classList.toggle("ag-invisible",!t),r||fP(e,!t)}function Eu(e,t){const i="disabled",r=t?n=>n.setAttribute(i,""):n=>n.removeAttribute(i);r(e),_P(e.querySelectorAll("input"),n=>r(n))}function xa(e,t,i){let r=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++r>i)break}else if(e===i)break}return!1}function Ps(e){const{height:t,width:i,borderTopWidth:r,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:u,paddingLeft:h,marginTop:c,marginRight:d,marginBottom:f,marginLeft:p,boxSizing:g}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(r||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(s||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(u||"0"),paddingLeft:parseFloat(h||"0"),marginTop:parseFloat(c||"0"),marginRight:parseFloat(d||"0"),marginBottom:parseFloat(f||"0"),marginLeft:parseFloat(p||"0"),boxSizing:g}}function MC(e){const t=Ps(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function ch(e){const t=Ps(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function wP(e){const{height:t,marginBottom:i,marginTop:r}=Ps(e);return Math.floor(t+i+r)}function xd(e){const{width:t,marginLeft:i,marginRight:r}=Ps(e);return Math.floor(t+i+r)}function bP(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:r,borderRightWidth:n,borderBottomWidth:o}=Ps(e);return{top:t.top+(i||0),left:t.left+(r||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function Rd(){if(typeof Oh=="boolean")return Oh;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,Oh=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),Oh}function Dd(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),_C()&&!Rd()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i}function Td(e,t,i){i&&(Rd()?t*=-1:(Fr()||_C())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function kt(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function br(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function xP(e){return!!e.offsetParent}function nr(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!xP(e)||window.getComputedStyle(e).visibility!=="visible")}function Iu(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function RP(e,t,i){i&&i.nextSibling===t||(i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function DP(e,t){for(let i=0;i<t.length;i++){const r=t[i],n=e.children[i];n!==r&&e.insertBefore(r,n)}}function kG(e,t,i){i?i.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function TP(e,t){if(t)for(const[i,r]of Object.entries(t)){if(!i||!i.length||r==null)continue;const n=sG(i),o=r.toString(),s=o.replace(/\s*!important/g,""),a=s.length!=o.length?"important":void 0;e.style.setProperty(n,s,a)}}function OG(e){return e.clientWidth<e.scrollWidth}function GG(e){return e.clientHeight<e.scrollHeight}function _d(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):tr(e,t)}function tr(e,t){t=FC(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function au(e,t){t=FC(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function FC(e){return typeof e=="number"?`${e}px`:e}function EC(e){return e instanceof Node||e instanceof HTMLElement}function NG(e){if(e==null)return[];const t=[];return _P(e,i=>t.push(i)),t}function VG(e,t){if(e)for(let i=0;i<e.length;i++){const r=e[i];t(r.name,r.value)}}function Vi(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function _P(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}var La=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},BG=1e3,HG=1e3,S0=100,AP=class Go extends B{constructor(t,i,r,n){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=r,this.shouldDisplayTooltip=n,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){const i=this.gos.get(t);return i<0&&U(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!lo()&&(Go.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},S0):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var o;const i=t.relatedTarget,r=this.parentComp.getGui(),n=(o=this.tooltipComp)==null?void 0:o.getGui();this.isInteractingWithTooltip||r.contains(i)||this.interactionEnabled&&(n!=null&&n.contains(i))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||Go.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),i=Go.lastTooltipHideTime;return t-i<BG}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t={...this.parentComp.getTooltipParams()};if(!Y(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Go.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(i);return}const n=i.getGui();this.tooltipComp=i,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const o=this.localeService.getLocaleTextFunc(),s=this.popupService.addPopup({eChild:n,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(st(this.gos),{keydown:a=>{n.contains(a==null?void 0:a.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var r;const t=(r=this.tooltipComp)==null?void 0:r.getGui(),i=et(this.gos);return!!t&&t.contains(i)}onTooltipFocusOut(t){const i=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,i.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...t,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...t,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,r=this.tooltipTrigger===0?HG:0;window.setTimeout(()=>{t(),this.destroyBean(i)},r),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Go.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},S0)}unlockService(){Go.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};AP.isLocked=!1;var zG=AP,Xa=class extends B{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,i,r,n;if(this.tooltipManager!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new zG(e,(i=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:i.call(t),(n=(r=this.ctrl).getTooltipHideDelayOverride)==null?void 0:n.call(r),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){var n,o,s,a,l;const e=this.ctrl,t=(n=e.getColumn)==null?void 0:n.call(e),i=(o=e.getColDef)==null?void 0:o.call(e),r=(s=e.getRowNode)==null?void 0:s.call(e);return{location:e.getLocation(),colDef:i,column:t,rowIndex:(a=e.getRowIndex)==null?void 0:a.call(e),node:r,data:r==null?void 0:r.data,value:this.getTooltipText(),valueFormatted:(l=e.getValueFormatted)==null?void 0:l.call(e),hideTooltipCallback:()=>{var u;return(u=this.tooltipManager)==null?void 0:u.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},WG=new La,J=null,ke=class PP extends B{constructor(t,i){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=WG.next(),this.cssClassManager=new pG(()=>this.eGui),this.componentSelectors=new Map((i??[]).map(r=>[r.selector,r])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,i){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,i))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:i,showDelayOverride:r,hideDelayOverride:n,location:o,shouldDisplayTooltip:s}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const a=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new Xa({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>o??"UNKNOWN",getColDef:t==null?void 0:t.getColDef,getColumn:t==null?void 0:t.getColumn,getTooltipShowDelayOverride:r!=null?()=>r:void 0,getTooltipHideDelayOverride:n!=null?()=>n:void 0,shouldDisplayTooltip:s})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,i,r,n=null){if(i===void 0&&(i=this.getDataRefAttribute(t)),i){const o=this[i];if(o===J)this[i]=n??t;else{const s=r&&r[i];!this.suppressDataRefValidation&&!s&&U(`Issue with data-ref: ${i} on ${this.constructor.name} with ${o}`)}}}createChildComponentsFromTags(t,i){NG(t.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;const o=this.createComponentFromElement(n,s=>{s.getGui()&&this.copyAttributesFromNode(n,s.getGui())},i);if(o){if(o.addItems&&n.children.length){this.createChildComponentsFromTags(n,i);const s=Array.prototype.slice.call(n.children);o.addItems(s)}this.swapComponentForNode(o,t,n)}else n.childNodes&&this.createChildComponentsFromTags(n,i)})}createComponentFromElement(t,i,r){const n=t.nodeName,o=this.getDataRefAttribute(t),s=n.indexOf("AG-")===0,a=s?this.componentSelectors.get(n):null;let l=null;if(a){PP.elementGettingCreated=t;const u=r&&o?r[o]:void 0;l=new a.component(u),l.setParentComponent(this),this.createBean(l,null,i)}else s&&U(`Missing selector: ${n}`);return this.applyElementsToComponent(t,o,r,l),l}copyAttributesFromNode(t,i){VG(t.attributes,(r,n)=>i.setAttribute(r,n))}swapComponentForNode(t,i,r){const n=t.getGui();i.replaceChild(n,r),i.insertBefore(document.createComment(r.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(r=>r.setAttribute("tabindex",i.toString()))}setTemplate(t,i,r){const n=Iu(t);this.setTemplateFromElement(n,i,r)}setTemplateFromElement(t,i,r,n=!1){if(this.eGui=t,this.suppressDataRefValidation=n,i)for(let o=0;o<i.length;o++){const s=i[o];this.componentSelectors.set(s.selector,s)}this.wireTemplate(t,r)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,i){let r=i;return t==null?null:(r||(r=this.eGui),EC(t)?{element:t,parent:r}:{element:t.getGui(),parent:r})}prependChild(t,i){const{element:r,parent:n}=this.getContainerAndElement(t,i)||{};!r||!n||n.insertAdjacentElement("afterbegin",r)}appendChild(t,i){const{element:r,parent:n}=this.getContainerAndElement(t,i)||{};!r||!n||n.appendChild(r)}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:r}=i;LG(this.eGui,t,{skipAriaHidden:r})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:r}=i;Je(this.eGui,t,{skipAriaHidden:r});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,i,r){this.eGui.addEventListener(t,i,r),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}},MP={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},UG=(()=>{const e=new Set(Object.values(MP));return e.add("eye"),e})();function $G(e,t,i){const r=vi(e,t,i);if(r){const{className:o}=r;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return r}const n=document.createElement("span");return n.appendChild(r),n}function vi(e,t,i,r){let n=null;const o=i&&i.getColDef().icons;if(o&&(n=o[e]),t&&!n){const s=t.get("icons");s&&(n=s[e])}if(n){let s;if(typeof n=="function")s=n();else if(typeof n=="string")s=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof s=="string")return Iu(s);if(EC(s))return s;U("iconRenderer should return back a string or a dom object")}else{const s=document.createElement("span");let a=MP[e]??(UG.has(e)?e:void 0);return a||(U(`Did not find icon ${e}`),a=""),s.setAttribute("class",`ag-icon ag-icon-${a}`),s.setAttribute("unselectable","on"),hi(s,"presentation"),s}}var KG=class extends ke{constructor(){super(...arguments),this.dragSource=null,this.eIcon=J,this.eLabel=J}postConstruct(){const e=t=>$G(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){var r,n;kt(this.eIcon);let i=null;e||(e=(r=this.dragSource)!=null&&r.getDefaultIconName?(n=this.dragSource)==null?void 0:n.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=_r(e)}};function FP(e,t,i){if(i===0)return!1;const r=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(r,n)<=i}var $n=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Ka,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",r,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",r,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const r={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(r)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!FP(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const i={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function fl(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var YG=`<span class="ag-sort-indicator-container">
        ${fl("Order","order")}
        ${fl("Asc","ascending-icon")}
        ${fl("Desc","descending-icon")}
        ${fl("Mixed","mixed-icon")}
        ${fl("None","none-icon")}
    </span>`,IC=class extends ke{constructor(e){super(),this.eSortOrder=J,this.eSortAsc=J,this.eSortDesc=J,this.eSortMixed=J,this.eSortNone=J,e||this.setTemplate(YG)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,r,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=r,this.eSortNone=n}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),r=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:r,columnRowGroupChanged:r}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;const r=vi(e,this.gos,i);r&&t.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";Je(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";Je(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=e==null;Je(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;Cr(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Je(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some(n=>this.sortController.getDisplaySortIndexForColumn(n)??!1),r=t>=0&&i;Je(this.eSortOrder,r,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():kt(this.eSortOrder)}},XG={selector:"AG-SORT-INDICATOR",component:IC},qG=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,Sm=class extends ke{constructor(){super(...arguments),this.eFilter=J,this.eFilterButton=J,this.eSortIndicator=J,this.eMenu=J,this.eLabel=J,this.eText=J,this.eSortOrder=J,this.eSortAsc=J,this.eSortDesc=J,this.eSortMixed=J,this.eSortNone=J,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??qG;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[XG]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=_r(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(t==null)return;const r=vi(e,this.gos,i);r&&t.appendChild(r)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new $n(this.getGui(),!0),i=this.shouldSuppressMenuHide(),r=i&&Y(this.eMenu),n=r?new $n(this.eMenu,!0):t;if(this.params.enableMenu){const o=r?"tap":"longTap",s=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(n,{[o]:s})}if(this.params.enableSorting){const o=s=>{var l,u;const a=s.touchStart.target;i&&((l=this.eMenu)!=null&&l.contains(a)||(u=this.eFilterButton)!=null&&u.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:o})}if(this.params.enableFilterButton){const o=new $n(this.eFilterButton,!0);this.addManagedListeners(o,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>t.destroy()),r&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){br(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new IC(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{const i=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(i||n)){const a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});const e=()=>{const t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){const i=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),n=!(i==null?void 0:i.every(o=>this.params.column.getSort()==o.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return br(t),!1;const r=this.params.column;return this.addInIcon("filter",t,r),this.addManagedListeners(r,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Je(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},ZG=class extends ke{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=J,this.agClosed=J,this.agLabel=J}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&U("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=n=>{if(Zr(n))return;const o=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),o,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=n=>{Ea(n)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),r=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:r,expandableChanged:r})}addTouchAndClickListeners(e,t){const i=new $n(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc(()=>i.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();Je(this.agOpened,t),Je(this.agClosed,!t)}else Je(this.agOpened,!1),Je(this.agClosed,!1)}addInIcon(e,t){const i=vi(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Je(this.agOpened,!1),Je(this.agClosed,!1);return}}setupLabel(){var i;const{displayName:e,columnGroup:t}=this.params;if(Y(e)){const r=_r(e,!0);this.agLabel.textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!((i=t.getColGroupDef())!=null&&i.suppressStickyLabel))}},jG="",QG="",JG=class extends ke{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),r=e.formatValue(i),n=Y(r)?r:i,o=t>=0;o?this.eDelta.textContent=jG+n:this.eDelta.textContent=QG+n,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),kt(this.eDelta)}refresh(e,t=!1){var r;const i=e.value;if(i===this.lastValue||(Y(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:Y(e.value)?this.eValue.textContent=i:kt(this.eValue),(r=this.filterManager)!=null&&r.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){const n=i-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},eN=class extends ke{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var r;let i=e.value;return Fe(i)&&(i=""),i===this.lastValue||(r=this.filterManager)!=null&&r.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,Y(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:Y(e.value)?this.eCurrent.textContent=i:kt(this.eCurrent),!0)}},N=class{};N.BACKSPACE="Backspace";N.TAB="Tab";N.ENTER="Enter";N.ESCAPE="Escape";N.SPACE=" ";N.LEFT="ArrowLeft";N.UP="ArrowUp";N.RIGHT="ArrowRight";N.DOWN="ArrowDown";N.DELETE="Delete";N.F2="F2";N.PAGE_UP="PageUp";N.PAGE_DOWN="PageDown";N.PAGE_HOME="Home";N.PAGE_END="End";N.A="KeyA";N.C="KeyC";N.D="KeyD";N.V="KeyV";N.X="KeyX";N.Y="KeyY";N.Z="KeyZ";var tN=class extends ke{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:r,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()}refreshLabel(){kt(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Je(this.eLabel,!1),hi(this.eLabel,"presentation")):(Je(this.eLabel,!0),hi(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(_d(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Eu(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},EP=class extends tN{constructor(e,t,i,r){super(e,t,i),this.className=r}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||vG(e)!==null?Fu(e,""):Fu(e,t??"")}setAriaLabel(e){return Ia(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return tr(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},jo=class extends EP{constructor(e,t,i="text",r="input"){super(e,(e==null?void 0:e.template)??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${r} data-ref="eInput" class="ag-input-field-input"></${r}>
                </div>
            </div>`,[],t),this.inputType=i,this.displayFieldTag=r,this.eLabel=J,this.eWrapper=J,this.eInput=J}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return _d(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Vi(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Ia(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Eu(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Vi(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Vi(this.eInput,"autocomplete",t)}return this}},LC=class extends jo{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const r=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:r.id,name:r.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},kC={selector:"AG-CHECKBOX",component:LC},iN=class extends ke{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[kC]),this.eCheckbox=J}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),dP(t,"polite"),this.addManagedListeners(t,{click:i=>{if(Ea(i),this.eCheckbox.isDisabled())return;const r=this.eCheckbox.getValue();this.onCheckboxChanged(r)},dblclick:i=>{Ea(i)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:i=>{if(i.key===N.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===et(this.gos)&&this.eCheckbox.toggle();const r=this.eCheckbox.getValue();this.onCheckboxChanged(r),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var a;let t,i=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{const l=e.column.getColId();l.startsWith(_f)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[l]!==void 0?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);const r=e.disabled!=null?e.disabled:!((a=e.column)!=null&&a.isCellEditable(e.node));this.eCheckbox.setDisabled(r);const n=this.localeService.getLocaleTextFunc(),o=TC(n,t),s=r?o:`${n("ariaToggleCellValue","Press SPACE to toggle cell value")} (${o})`;this.eCheckbox.setInputAriaLabel(s)}onCheckboxChanged(e){const{column:t,node:i,value:r}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:r});const n=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:r,oldValue:r,newValue:e,valueChanged:n}),n||this.updateCheckbox(this.params)}},rN=class extends ke{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=J,this.eLoadingText=J}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=vi("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},nN=class extends ke{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Fu(e.eParentOfValue)),Fu(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Ia(this.getGui(),t)}setupLoading(e){const i=st(this.gos).createElement("div");i.classList.add("ag-skeleton-effect");const r=e.node.rowIndex;if(r!=null){const s=75+25*(r%2===0?Math.sin(r):Math.cos(r));i.style.width=`${s}%`}this.getGui().appendChild(i);const o=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Ia(this.getGui(),o)}refresh(e){return!1}destroy(){super.destroy()}},IP=class extends ke{constructor(){super()}destroy(){super.destroy()}},oN=class extends IP{init(){var t;const e=qr((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("loadingOoo","Loading...")})}}},sN=class extends IP{init(){var t;const e=qr((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("noRowsToShow","No Rows To Show")})}}},qa=class extends ke{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},aN=class extends qa{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=_r(t,!0)}};function LP(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:r,filterByPercentageOfBestMatch:n,addSequentialWeight:o}=e;let s=i.map((u,h)=>({value:u,relevance:uN(t.toLowerCase(),u.toLocaleLowerCase(),o),idx:h}));if(s.sort((u,h)=>h.relevance-u.relevance),r&&(s=s.filter(u=>u.relevance!==0)),s.length>0&&n&&n>0){const h=s[0].relevance*n;s=s.filter(c=>h-c.relevance<0)}const a=[],l=[];for(const u of s)a.push(u.value),l.push(u.idx);return{values:a,indices:l}}function lN(e){const t=[],i=e.length;for(let r=1;r<=i;r++)for(let n=0;n<=i-r;n++){const o=n+r-1;t.push(e.slice(n,o+1))}return t}function uN(e,t,i=!1){const r=e.replace(/\s/g,""),n=t.replace(/\s/g,""),o=r.length,s=n.length,a=new Array(o+1).fill(null).map(()=>new Array(s+1).fill(0));for(let c=0;c<=o;c+=1)a[c][0]=c;for(let c=0;c<=s;c+=1)a[0][c]=c;for(let c=1;c<=o;c++)for(let d=1;d<=s;d++)r[c-1]===n[d-1]?a[c][d]=a[c-1][d-1]:a[c][d]=1+Math.min(a[c][d-1],Math.min(a[c-1][d],a[c-1][d-1]));const l=a[o][s];let h=Math.max(o,s)-l;if(i){const c=lN(r);for(let d=0;d<c.length;d++){const f=c[d];n.indexOf(f)!==-1&&(h+=1,h*=f.length)}}return h}var hN=class extends B{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:KG,agColumnHeader:Sm,agColumnGroupHeader:ZG,agSortIndicator:IC,agAnimateShowChangeCellRenderer:JG,agAnimateSlideCellRenderer:eN,agLoadingCellRenderer:rN,agSkeletonCellRenderer:nN,agCheckboxCellRenderer:iN,agLoadingOverlay:oN,agNoRowsOverlay:sN,agTooltipComponent:aN},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");e!=null&&Qi(e,(t,i)=>this.registerJsComponent(t,i))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(a,l,u)=>({componentFromFramework:l,component:a,params:u}),r=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(r!=null)return i(r,!0);const n=this.jsComps[t];if(n){const a=this.getFrameworkOverrides().isFrameworkComponent(n);return i(n,a)}const o=this.agGridDefaults[t];if(o)return i(o,!1,this.agGridDefaultParams[t]);const s=this.enterpriseAgDefaultCompsModule[t];return s?this.gos.assertModuleRegistered(s,`AG Grid '${e}' component: ${t}`):mC(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter(n=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(n)),...Object.keys(this.jsComps)],r=LP({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;U(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),r.length>0&&U(`         Did you mean: [${r.slice(0,3)}]?`),U(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},pi=class Kl{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new Kl(i=>{let r=t.length;const n=new Array(r);t.forEach((o,s)=>{o.then(a=>{n[s]=a,r--,r===0&&i(n)})})}):Kl.resolve()}static resolve(t=null){return new Kl(i=>i(t))}then(t){return new Kl(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(r=>i(t(r)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){}},cN={propertyName:"dateComponent",cellRenderer:!1},dN={propertyName:"dragAndDropImageComponent",cellRenderer:!1},fN={propertyName:"headerComponent",cellRenderer:!1},pN={propertyName:"headerGroupComponent",cellRenderer:!1},w0={propertyName:"cellRenderer",cellRenderer:!0},gN={propertyName:"cellRenderer",cellRenderer:!1},vN={propertyName:"loadingCellRenderer",cellRenderer:!0},mN={propertyName:"cellEditor",cellRenderer:!1},b0={propertyName:"innerRenderer",cellRenderer:!0},yN={propertyName:"loadingOverlayComponent",cellRenderer:!1},CN={propertyName:"noRowsOverlayComponent",cellRenderer:!1},SN={propertyName:"tooltipComponent",cellRenderer:!1},OC={propertyName:"filter",cellRenderer:!1},wN={propertyName:"floatingFilterComponent",cellRenderer:!1},bN={propertyName:"toolPanel",cellRenderer:!1},xN={propertyName:"statusPanel",cellRenderer:!1},RN={propertyName:"fullWidthCellRenderer",cellRenderer:!0},DN={propertyName:"loadingCellRenderer",cellRenderer:!0},TN={propertyName:"groupRowRenderer",cellRenderer:!0},_N={propertyName:"detailCellRenderer",cellRenderer:!0},AN={propertyName:"menuItem",cellRenderer:!1},kP=class OP extends B{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,dN,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,i){return this.getCompDetails(t,fN,"agColumnHeader",i)}getHeaderGroupCompDetails(t){const i=t.columnGroup.getColGroupDef();return this.getCompDetails(i,pN,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,RN,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,DN,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,TN,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,_N,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,i){return this.getCompDetails(t,b0,null,i)}getFullWidthGroupRowInnerCellRenderer(t,i){return this.getCompDetails(t,b0,null,i)}getCellRendererDetails(t,i){return this.getCompDetails(t,w0,null,i)}getEditorRendererDetails(t,i){return this.getCompDetails(t,gN,null,i)}getLoadingCellRendererDetails(t,i){return this.getCompDetails(t,vN,"agSkeletonCellRenderer",i,!0)}getCellEditorDetails(t,i){return this.getCompDetails(t,mN,"agCellEditor",i,!0)}getFilterDetails(t,i,r){return this.getCompDetails(t,OC,r,i,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,cN,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,yN,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,CN,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,SN,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,i){return this.getCompDetails(t,w0,null,i)}getFloatingFilterCompDetails(t,i,r){return this.getCompDetails(t,wN,r,i)}getToolPanelCompDetails(t,i){return this.getCompDetails(t,bN,null,i,!0)}getStatusPanelCompDetails(t,i){return this.getCompDetails(t,xN,null,i,!0)}getMenuItemCompDetails(t,i){return this.getCompDetails(t,AN,"agMenuItem",i,!0)}getCompDetails(t,i,r,n,o=!1){const{propertyName:s,cellRenderer:a}=i;let{compName:l,jsComp:u,fwComp:h,paramsFromSelector:c,popupFromSelector:d,popupPositionFromSelector:f}=OP.getCompKeys(this.frameworkOverrides,t,i,n),p;const g=C=>{const S=this.userComponentRegistry.retrieve(s,C);S&&(u=S.componentFromFramework?void 0:S.component,h=S.componentFromFramework?S.component:void 0,p=S.params)};if(l!=null&&g(l),u==null&&h==null&&r!=null&&g(r),u&&a&&!this.agComponentUtils.doesImplementIComponent(u)&&(u=this.agComponentUtils.adaptFunction(s,u)),!u&&!h){o&&Ge(`Could not find component ${l}, did you forget to configure this component?`);return}const v=this.mergeParamsWithApplicationProvidedParams(t,i,n,c,p),m=u==null,y=u||h;return{componentFromFramework:m,componentClass:y,params:v,type:i,popupFromSelector:d,popupPositionFromSelector:f,newAgStackInstance:()=>this.newAgStackInstance(y,m,v,i)}}static getCompKeys(t,i,r,n){const{propertyName:o}=r;let s,a,l,u,h,c;if(i){const d=i,f=d[o+"Selector"],p=f?f(n):null,g=v=>{typeof v=="string"?s=v:v!=null&&v!==!0&&(t.isFrameworkComponent(v)?l=v:a=v)};p?(g(p.component),u=p.params,h=p.popup,c=p.popupPosition):g(d[o])}return{compName:s,jsComp:a,fwComp:l,paramsFromSelector:u,popupFromSelector:h,popupPositionFromSelector:c}}newAgStackInstance(t,i,r,n){const o=n.propertyName,s=!i;let a;if(s)a=new t;else{const u=this.componentMetadataProvider.retrieve(o);a=this.frameworkComponentWrapper.wrap(t,u.mandatoryMethodList,u.optionalMethodList,n)}const l=this.initComponent(a,r);return l==null?pi.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,i,r,n=null,o){const s=this.gos.getGridCommonParams();Kt(s,r),o&&Kt(s,o);const a=t,l=a&&a[i.propertyName+"Params"];if(typeof l=="function"){const u=l(r);Kt(s,u)}else typeof l=="object"&&Kt(s,l);return Kt(s,n),s}initComponent(t,i){if(this.createBean(t),t.init!=null)return t.init(i)}};function lu(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var Af=class He{static register(t){He.__register(t,!0,void 0)}static registerModules(t){He.__registerModules(t,!0,void 0)}static __register(t,i,r){He.runVersionChecks(t),r!==void 0?(He.areGridScopedModules=!0,He.gridModulesMap[r]===void 0&&(He.gridModulesMap[r]={}),He.gridModulesMap[r][t.moduleName]=t):He.globalModulesMap[t.moduleName]=t,He.setModuleBased(i)}static __unRegisterGridModules(t){delete He.gridModulesMap[t]}static __registerModules(t,i,r){He.setModuleBased(i),t&&t.forEach(n=>He.__register(n,i,r))}static isValidModuleVersion(t){const[i,r]=t.version.split(".")||[],[n,o]=He.currentModuleVersion.split(".")||[];return i===n&&r===o}static runVersionChecks(t){He.currentModuleVersion||(He.currentModuleVersion=t.version);const i=r=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${r} Please update all modules to the same version.`;if(t.version?He.isValidModuleVersion(t)||Ge(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${He.currentModuleVersion}.`)):Ge(i(`'${t.moduleName}' is incompatible.`)),t.validate){const r=t.validate();r.isValid||Ge(`${r.message}`)}}static setModuleBased(t){He.moduleBased===void 0?He.moduleBased=t:He.moduleBased!==t&&(Ge("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),Ge("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){He.isBundled=!0}static __assertRegistered(t,i,r){var o;if(this.__isRegistered(t,r))return!0;let n;if(He.isBundled)n=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(He.moduleBased||He.moduleBased===void 0){const s=(o=Object.entries(WA).find(([a,l])=>l===t))==null?void 0:o[0];n=`AG Grid: unable to use ${i} as the ${s} is not registered${He.areGridScopedModules?` for gridId: ${r}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${s} } from '${t}';
    
    ModuleRegistry.registerModules([ ${s} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Ge(n),!1}static __isRegistered(t,i){var r;return!!He.globalModulesMap[t]||!!((r=He.gridModulesMap[i])!=null&&r[t])}static __getRegisteredModules(t){return[...$c(He.globalModulesMap),...$c(He.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return $c(He.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!He.moduleBased}};Af.globalModulesMap={};Af.gridModulesMap={};Af.areGridScopedModules=!1;var Kr=Af,PN=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;Object.entries(e.providedBeanInstances).forEach(([i,r])=>{this.beans[i]=r}),e.beanClasses.forEach(i=>{const r=new i;r.beanName?this.beans[r.beanName]=r:console.error(`Bean ${i.name} is missing beanName`),this.createdBeans.push(r)}),(t=e.derivedBeans)==null||t.forEach(i=>{const{beanName:r,bean:n}=i(this);this.beans[r]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(i=>{var r,n;(r=i.preWireBeans)==null||r.call(i,this.beans),(n=i.wireBeans)==null||n.call(i,this.beans)}),e.forEach(i=>{var r;return(r=i.preConstruct)==null?void 0:r.call(i)}),t&&e.forEach(t),e.forEach(i=>{var r;return(r=i.postConstruct)==null?void 0:r.call(i)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},MN=class extends PN{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Kr.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},GP=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(GP||{}),FN=class extends B{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Xt(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var i,r;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),(r=(i=this.dragSource).onDragStarted)==null||r.call(i),this.createDragAndDropImageComponent()}onDragStop(e){var t,i,r;if((i=(t=this.dragSource)==null?void 0:t.onDragStopped)==null||i.call(t),(r=this.lastDropTarget)!=null&&r.onDragStop){const n=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){var e,t,i;(t=(e=this.dragSource)==null?void 0:e.onDragCancelled)==null||t.call(e),(i=this.lastDropTarget)!=null&&i.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){var s,a,l,u;const i=this.getHorizontalDirection(e),r=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const n=this.dropTargets.filter(h=>this.isMouseOnDropTarget(e,h)),o=this.findCurrentDropTarget(e,n);if(o!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,r,t),this.lastDropTarget!==null&&o===null&&((a=(s=this.dragSource)==null?void 0:s.onGridExit)==null||a.call(s,this.dragItem)),this.lastDropTarget===null&&o!==null&&((u=(l=this.dragSource)==null?void 0:l.onGridEnter)==null||u.call(l,this.dragItem)),this.enterDragTargetIfExists(o,e,i,r,t),o&&this.dragAndDropImageComp){const{comp:h,promise:c}=this.dragAndDropImageComp;h?h.setIcon(o.getIconName?o.getIconName():null):c.then(d=>{d&&d.setIcon(o.getIconName?o.getIconName():null)})}this.lastDropTarget=o}else if(o&&o.onDragging){const h=this.createDropTargetEvent(o,e,i,r,t);o.onDragging(h)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const{width:r,height:n,left:o,right:s,top:a,bottom:l}=i.getBoundingClientRect();if(r===0||n===0)return!1;const u=e.clientX>=o&&e.clientX<s,h=e.clientY>=a&&e.clientY<l;if(!u||!h)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let r=!1;for(const s of i)if(this.allContainersIntersect(e,s)){r=!0;break}const{eElement:n,type:o}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(n)?!1:r&&t.isInterestedIn(o,n)}findCurrentDropTarget(e,t){const i=t.length;if(i===0)return null;if(i===1)return t[0];const n=Pu(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const o of n)for(const s of t)if(BO(this.getAllContainersFromDropTarget(s)).indexOf(o)!==-1)return s;return null}enterDragTargetIfExists(e,t,i,r,n){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,r,n);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,i,r){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const o=this.createDropTargetEvent(this.lastDropTarget,e,t,i,r);this.lastDropTarget.onDragLeave(o)}const n=this.getDragAndDropImageComponent();n&&n.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:r}=e;return i.contains(r)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,r,n){const o=e.getContainer(),s=o.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,u=t.clientX-s.left,h=t.clientY-s.top;return this.gos.addGridCommonParams({event:t,x:u,y:h,vDirection:r,hDirection:i,dragSource:l,fromNudge:n,dragItem:a,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const i=t.getGui(),n=i.getBoundingClientRect().height,o=MG()-2,s=FG()-2;if(!i.offsetParent)return;const l=bP(i.offsetParent),{clientY:u,clientX:h}=e;let c=u-l.top-n/2,d=h-l.left-10;const f=st(this.gos),p=f.defaultView||window,g=p.pageYOffset||f.documentElement.scrollTop,v=p.pageXOffset||f.documentElement.scrollLeft;o>0&&d+i.clientWidth>o+v&&(d=o+v-i.clientWidth),d<0&&(d=0),s>0&&c+i.clientHeight>s+g&&(c=s+g-i.clientHeight),c<0&&(c=0),i.style.left=`${d}px`,i.style.top=`${c}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const i=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(r=>{!r||!this.isAlive()||(this.processDragAndDropImageComponent(r),this.dragAndDropImageComp.comp=r)})}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:i,environment:r}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(n),r.applyThemeClasses(n),e.setIcon(null);let{dragItemName:o}=t;yC(o)&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";const s=st(this.gos);let a=null,l=null;try{a=s.fullscreenElement}catch{}finally{a||(a=Pu(this.gos));const u=a.querySelector("body");u?l=u:a instanceof ShadowRoot?l=a:a instanceof Document?l=a==null?void 0:a.documentElement:l=a}this.dragAndDropImageParent=l,l?l.appendChild(n):U("Could not find document body, it is needed for drag and drop.")}},EN=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const r=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<r.left+n,this.tickRight=e.clientX>r.right-n,this.tickUp=e.clientY<r.top+n&&!i,this.tickDown=e.clientY>r.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},IN=class extends B{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){it(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{const t=e.gridBodyCtrl;this.autoScrollService=new EN({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var r;return!!(this.funcColsService.getRowGroupColumns().length||((r=this.filterManager)==null?void 0:r.isAnyFilterPresent())||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const r=[...this.selectionService.getSelectedNodes()].sort((n,o)=>n.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(n)-this.getRowIndexNumber(o));if(r.indexOf(t)!==-1)return r}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),r=this.gos.get("rowDragManaged"),n=e.dragItem.rowNodes;r&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(Ee(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,r=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))n.forEach(s=>{s.rowTop<r&&(o-=1)}),this.moveRows(n,r,o);else{const s=Ya(this.gos);let a=this.clientSideRowModel.getRowIndexAtPixel(r)+1;this.clientSideRowModel.getHighlightPosition(r)===0&&a--,this.clientSideRowModel.updateRowData({add:n.filter(l=>!this.clientSideRowModel.getRowNode((s==null?void 0:s({data:l.data,level:0,rowPinned:l.rowPinned}))??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){var n;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),(n=this.rangeService)==null||n.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){U("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){U("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=r=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",r))}),e.onDragLeave&&(t.onDragLeave=r=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",r))}),e.onDragging&&(t.onDragging=r=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",r))}),e.onDragStop&&(t.onDragStop=r=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",r))}),e.onDragCancel&&(t.onDragCancel=r=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",r))}));const i={isInterestedIn:r=>r===2,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),r=this.onDragLeave.bind(this),n=this.onDragging.bind(this),o=this.onDragStop.bind(this),s=this.onDragCancel.bind(this);let a;return e?a={getContainer:t,onDragEnter:e.onDragEnter?l=>{i(l),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",l))}:i,onDragLeave:e.onDragLeave?l=>{r(l),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",l))}:r,onDragging:e.onDragging?l=>{n(l),e.onDragging(this.draggingToRowDragEvent("rowDragMove",l))}:n,onDragStop:e.onDragStop?l=>{o(l),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",l))}:o,onDragCancel:e.onDragCancel?l=>{s(l),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",l))}:s,fromGrid:!0}:a={getContainer:t,onDragEnter:i,onDragLeave:r,onDragging:n,onDragStop:o,onDragCancel:s,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y,r=i>this.pageBoundsService.getCurrentPageHeight();let n=-1,o;r||(n=this.rowModel.getRowIndexAtPixel(i),o=this.rowModel.getRow(n));let s;switch(t.vDirection){case 1:s="down";break;case 0:s="up";break;default:s=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:o,y:i,vDirection:s})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},LN=class extends B{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const r=e.touchStartListener;t.removeEventListener("touchstart",r,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),Xt(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:r,stopPropagationForTouch:n}=e;i.addEventListener("mousedown",t);let o=null;const s=this.gos.get("suppressTouch");r&&!s&&(o=a=>{PC(a.target)||(n&&a.stopPropagation(),this.onTouchStart(e,a))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!r})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const r=l=>this.onTouchMove(l,e.eElement),n=l=>this.onTouchUp(l,e.eElement),o=l=>{l.cancelable&&l.preventDefault()},s=t.target,a=[{target:Pu(this.gos),type:"touchmove",listener:o,options:{passive:!1}},{target:s,type:"touchmove",listener:r,options:{passive:!0}},{target:s,type:"touchend",listener:n,options:{passive:!0}},{target:s,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const r=u=>this.onMouseMove(u,e.eElement),n=u=>this.onMouseUp(u,e.eElement),o=u=>u.preventDefault(),s=u=>{u.key===N.ESCAPE&&this.cancelDrag(e.eElement)},a=Pu(this.gos),l=[{target:a,type:"mousemove",listener:r},{target:a,type:"mouseup",listener:n},{target:a,type:"contextmenu",listener:o},{target:a,type:"keydown",listener:s}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:r,listener:n,options:o}=t;i.addEventListener(r,n,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:r,listener:n,options:o}=t;i.removeEventListener(r,n,o)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,r=Y(i)?i:4;return FP(e,t,r)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){var r;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}(r=this.currentDragParams)==null||r.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){var i;Fr()&&((i=st(this.gos).getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,i;this.eventService.dispatchEvent({type:"dragCancelled",target:e}),(i=(t=this.currentDragParams)==null?void 0:t.onDragCancel)==null||i.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},wm=class extends ke{constructor(e,t,i,r,n,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=r,this.dragStartPixels=n,this.suppressVisibilityChange=o,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(vi("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new ON(this,this.beans,this.rowNode,this.column):new kN(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&U("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:r=>{r==null||r.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var s;const r=this.getDragItem(),n=((s=r.rowNodes)==null?void 0:s.length)||1,o=this.getRowDragText(this.column);return o?o(r,n):n===1?this.cellValueFn():`${n} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},NP=class extends B{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,r=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),r=yC(this.column.getColDef().rowDrag)),r?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},kN=class extends NP{constructor(e,t,i,r){super(e,i,r),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},ON=class extends NP{constructor(e,t,i,r){super(e,i,r),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),r=this.gos.get("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),o=i&&!n||r;this.setDisplayedOrVisible(o)}},GN=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),dh=class Mn{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Mn.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){var o;const r=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const n=this.createDataChangedEvent(t,r,i);(o=this.localEventService)==null||o.dispatchEvent(n)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,r){return{type:"dataChanged",node:this,oldData:i,newData:t,update:r}}getRowIndexString(){return this.rowIndex==null?(Ge("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?Mn.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?Mn.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new Mn(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){var s;const r=Y(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,r);const o=this.createDataChangedEvent(t,n,!1);(s=this.localEventService)==null||s.dispatchEvent(o)}checkRowSelectable(){const t=CC(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),i)return;if(ws(this.beans.gos)){const n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){var r;const i=Ya(this.beans.gos);if(i)if(this.data){const n=((r=this.parent)==null?void 0:r.getRoute())??[];this.id=i({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Mn.ID_PREFIX_ROW_GROUP)&&Ge(`Row IDs cannot start with ${Mn.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Yt(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){var a;let t=!1,i=!0,r=0;const n=this.__autoHeights;if(n==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(l=>{let u=n[l.getId()];if(u==null)if(this.beans.columnModel.isColSpanActive()){let h=[];switch(l.getPinned()){case"left":h=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":h=this.beans.visibleColsService.getRightColsForRow(this);break;case null:h=this.beans.columnViewportService.getColsWithinViewport(this);break}if(h.includes(l)){t=!0;return}u=-1}else{t=!0;return}else i=!1;u>r&&(r=u)}),t)||((i||r<10)&&(r=Zn(this.beans.gos,this).height),r==this.rowHeight))return;this.setRowHeight(r);const s=this.beans.rowModel;(a=s.onRowHeightChangedDebounced)==null||a.call(s)}setExpanded(t,i,r){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");const n={...this.createGlobalRowEvent("rowGroupOpened"),expanded:t,event:i||null};this.beans.rowNodeEventThrottle.dispatchExpanded(n,r),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,i,r){const o=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),s=this.beans.valueService.getValueForDisplay(o,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:o,colDef:o.getColDef(),data:this.data,node:this,oldValue:s,newValue:i,value:i,source:r}),!1;const a=this.beans.valueService.setValue(this,o,i,r);return this.dispatchCellChangedEvent(o,i,s),this.checkRowSelectable(),a}setGroupValue(t,i){const r=this.beans.columnModel.getCol(t);Fe(this.groupData)&&(this.groupData={});const n=r.getColId(),o=this.groupData[n];o!==i&&(this.groupData[n]=i,this.dispatchCellChangedEvent(r,i,o))}setAggData(t){const i=this.aggData;if(this.aggData=t,this.localEventService){const r=n=>{const o=this.aggData?this.aggData[n]:void 0,s=i?i[n]:void 0;if(o===s)return;const a=this.beans.columnModel.getCol(n);a&&this.dispatchCellChangedEvent(a,o,s)};for(const n in i)r(n);for(const n in t)(!i||!(n in i))&&r(n)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(fn(this.beans.gos)){const r=this.beans.gos.get("treeData"),n=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(r?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,i,r){var o;const n={type:"cellChanged",node:this,column:t,newValue:i,oldValue:r};(o=this.localEventService)==null||o.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var r;let t=!1,i=!1;if(!((r=this.childrenAfterGroup)!=null&&r.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){const o=this.childrenAfterGroup[n];let s=o.isSelected();if(!o.selectable){const a=o.calculateSelectedFromChildren();if(a===null)continue;s=a}switch(s){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){var i;(i=this.localEventService)==null||i.dispatchEvent({type:t,node:this})}selectThisNode(t,i,r="api"){const n=!this.selectable&&t,o=this.selected===t;if(n||o)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");const s=this.sibling;return s&&s.footer&&s.localEventService&&s.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:i||null,source:r}),!0}setSelected(t,i=!1,r="api"){if(typeof r=="boolean"){U("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:r})}setSelectedParams(t){return this.rowPinned?(U("cannot select pinned rows"),0):this.id===void 0?(U("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...t,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(t,i){var n;this.localEventService||(this.localEventService=new Ka),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new xC(this.beans.frameworkOverrides));const r=((n=this.frameworkEventListenerService)==null?void 0:n.wrap(i))??i;this.localEventService.addEventListener(t,r)}removeEventListener(t,i){var n;if(!this.localEventService)return;const r=((n=this.frameworkEventListenerService)==null?void 0:n.unwrap(i))??i;this.localEventService.removeEventListener(t,r),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(U("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const t=[];let i=this;for(;i&&i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new Mn(this.beans);Object.keys(this).forEach(i=>{GN.has(i)||(t[i]=this[i])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};dh.ID_PREFIX_ROW_GROUP="row-group-";dh.ID_PREFIX_TOP_PINNED="t-";dh.ID_PREFIX_BOTTOM_PINNED="b-";dh.OBJECT_ID_SEQUENCE=0;var jr=dh,NN=class extends B{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvancedFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",i=>this.setAdvancedFilterModel(i.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}(i=this.columnFilterService)==null||i.setFilterModel(e,t)}getFilterModel(){var e;return((e=this.columnFilterService)==null?void 0:e.getFilterModel())??{}}isColumnFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isAggregateFilterPresent())}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t,i;e?(t=this.columnFilterService)!=null&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(i=this.advancedFilterService)!=null&&i.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){var e;(e=this.quickFilterService)==null||e.resetQuickFilterCache()}refreshFiltersForAggregations(){cm(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:r=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):pi.resolve()).then(()=>{var o;const n={source:t,type:"filterChanged",columns:r};i&&Kt(n,i),this.eventService.dispatchEvent(n),(o=this.columnFilterService)==null||o.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.columnFilterService)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilterService)!=null&&e.isQuickFilterPresent())}updateAggFiltering(){this.aggFiltering=!!cm(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){var t;return!!((t=this.columnFilterService)!=null&&t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t;return((t=this.columnFilterService)==null?void 0:t.getOrCreateFilterWrapper(e))??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){var t;return this.isAdvancedFilterEnabled()?!1:!!((t=this.columnFilterService)!=null&&t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var i;return(i=this.columnFilterService)==null?void 0:i.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){var i;(i=this.columnFilterService)==null||i.destroyFilter(e,t)}areFilterCompsDifferent(e,t){var i;return!!((i=this.columnFilterService)!=null&&i.areFilterCompsDifferent(e,t))}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){var t;if(this.isAdvancedFilterEnabled()){if((t=this.dataTypeService)!=null&&t.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvancedFilterEnabled()?!1:!!((e=this.columnFilterService)!=null&&e.hasFloatingFilters())}getFilterInstance(e,t){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return(i=this.columnFilterService)==null?void 0:i.getFilterInstance(e,t)}getColumnFilterInstance(e){var t;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):((t=this.columnFilterService)==null?void 0:t.getColumnFilterInstance(e))??Promise.resolve(void 0)}warnAdvancedFilters(){U("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var i;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):((i=this.columnFilterService)==null?void 0:i.setColumnFilterModel(e,t))??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){var r;(r=this.columnFilterService)==null||r.setColDefPropertiesForDataType(e,t,i)}},VN=class extends ke{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e;return((e=this.filterWrapper)==null?void 0:e.filterPromise)??null}afterInit(){var e,t;return((t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))??pi.resolve()}afterGuiAttached(e){var t,i;(i=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||i.then(r=>{var n;(n=r==null?void 0:r.afterGuiAttached)==null||n.call(r,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(i=>{var r;(r=i==null?void 0:i.afterGuiDetached)==null||r.call(i)})}createFilter(e){var r,n;const{column:t,source:i}=this;this.filterWrapper=((r=this.filterManager)==null?void 0:r.getOrCreateFilterWrapper(t))??null,(n=this.filterWrapper)!=null&&n.filterPromise&&this.filterWrapper.filterPromise.then(o=>{const s=o.getGui();Y(s)||U(`getGui method from filter returned ${s}; it should be a DOM element.`),this.appendChild(s),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(kt(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},VP="ag-resizer-wrapper",Cn=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,BN=`<div class="${VP}">
        ${Cn("eTopLeft","topLeft")}
        ${Cn("eTop","top")}
        ${Cn("eTopRight","topRight")}
        ${Cn("eRight","right")}
        ${Cn("eBottomRight","bottomRight")}
        ${Cn("eBottom","bottom")}
        ${Cn("eBottomLeft","bottomLeft")}
        ${Cn("eLeft","left")}
    </div>`,HN=class extends B{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,r=e/2-this.getHeight()/2;this.offsetElement(i,r)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:r,minHeight:n,height:o,x:s,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,u=0;const h=nr(this.element);if(h){const c=this.findBoundaryElement(),d=window.getComputedStyle(c);if(d.minWidth!=null){const f=c.offsetWidth-this.element.offsetWidth;u=parseInt(d.minWidth,10)-f}if(d.minHeight!=null){const f=c.offsetHeight-this.element.offsetHeight;l=parseInt(d.minHeight,10)-f}}if(this.minHeight=n||l,this.minWidth=i||u,r&&this.setWidth(r),o&&this.setHeight(o),(!r||!o)&&this.refreshSize(),e)this.center();else if(s||a)this.offsetElement(s,a);else if(h&&t){let c=this.boundaryEl,d=!0;if(c||(c=this.findBoundaryElement(),d=!1),c){const f=parseFloat(c.style.top),p=parseFloat(c.style.left);d?this.offsetElement(isNaN(p)?0:p,isNaN(f)?0:f):this.setPosition(p,f)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const r=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:s=>this.onResizeStart(s,t),onDragging:this.onResize.bind(this),onDragStop:s=>this.onResizeEnd(s,t)};(r||!this.isAlive()&&!r)&&(r?(this.dragService.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=r)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let r=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)au(i,e),e=wP(i),r=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(r?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?au(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const r=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:r.top,s=e?0:n.top;let a=0;if(t){const u=this.element.parentElement;if(u){const{bottom:h}=u.getBoundingClientRect();a=h-r.bottom}}return i+s-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let r=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)tr(t,e),e=xd(t),r=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;n&&e+o>n&&(e=n-o)}this.getWidth()!==e&&(r?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?tr(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,r=i?this.boundaryEl:this.element;r&&(this.popupService.positionPopup({ePopup:r,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(r.style.left),parseFloat(r.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:r,anywhereWithin:n,topBuffer:o}=e,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!i,!!n,s)?0:s,u=this.shouldSkipY(t,!!r,o,a)?0:a;return{movementX:l,movementY:u}}shouldSkipX(e,t,i,r){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=s.right;return l?!0:(t?l=r<0&&e.clientX>a+o.left||r>0&&e.clientX<a+o.left:i?l=r<0&&e.clientX>s.right||r>0&&e.clientX<a+o.left:l=r<0&&e.clientX>s.right||r>0&&e.clientX<s.right,l)}shouldSkipY(e,t,i=0,r){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=s.bottom;return l?!0:(t?l=r<0&&e.clientY>a+o.top+i||r>0&&e.clientY<a+o.top:l=r<0&&e.clientY>s.bottom||r>0&&e.clientY<s.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(BN,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${VP}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:r}=this.config;!i&&!r&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let r=0;r<e.length;r++){const n=e[r],o=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let s=this.minHeight||0,a=this.minWidth||0;if(o){const l=window.getComputedStyle(n);l.minHeight&&(s=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else s=n.offsetHeight,a=n.offsetWidth;t+=s,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let r=0;r<i.length;r++){const n=i[r];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[r+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:r,isRight:n,isBottom:o,isLeft:s}=this.currentResizer,a=n||s,l=o||r,{movementX:u,movementY:h}=this.calculateMouseMovement({e,isLeft:s,isTop:r}),c=this.position.x,d=this.position.y;let f=0,p=0;if(a&&u){const g=s?-1:1,v=this.getWidth(),m=v+u*g;let y=!1;s&&(f=v-m,(c+f<=0||m<=this.minWidth)&&(y=!0,f=0)),y||this.setWidth(m)}if(l&&h){const g=r?-1:1,v=this.getHeight(),m=v+h*g;let y=!1;r?(p=v-m,(d+p<=0||m<=this.minHeight)&&(y=!0,p=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<m&&this.getMinSizeOfSiblings().height+m>this.element.parentElement.offsetHeight&&(y=!0),y||this.setHeight(m)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&f||p)&&this.offsetElement(c+f,d+p)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let r;this.config.calculateTopBuffer&&(r=this.config.calculateTopBuffer());const{movementX:n,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:r});this.offsetElement(t+n,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},BP=class HP extends B{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:r=>{if(r.defaultPrevented)return;const n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,r.shiftKey);n&&(n.focus(),r.preventDefault())},...i}}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(HP.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:i=>{if(!(i.defaultPrevented||Zr(i))){if(this.callbacks.shouldStopEventPropagation(i)){Ea(i);return}i.key===N.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}}})}};BP.FOCUS_MANAGED_CLASS="ag-focus-managed";var Ms=BP,zP={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function GC(e,t){return Ad(e)?(e.debounceMs!=null&&U("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function Ad(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var zN=class extends ke{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=J,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new Ms(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new HN(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=Ad(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=Ad(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:i,readOnly:r}=t??{},{buttons:n,readOnly:o}=e;if(r===o&&_u(i,n))return;const s=n&&n.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(kt(this.eButtonsPanel),this.buttonListeners.forEach(u=>u()),this.buttonListeners=[]):s&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!s){this.eButtonsPanel&&br(this.eButtonsPanel);return}const a=document.createDocumentFragment(),l=u=>{let h,c;switch(u){case"apply":h=this.translate("applyFilter"),c=p=>this.onBtApply(!1,!1,p);break;case"clear":h=this.translate("clearFilter"),c=()=>this.onBtClear();break;case"reset":h=this.translate("resetFilter"),c=()=>this.onBtReset();break;case"cancel":h=this.translate("cancelFilter"),c=p=>{this.onBtCancel(p)};break;default:U("Unknown button type specified");return}const f=Iu(`<button
                    type="${u==="apply"?"submit":"button"}"
                    data-ref="${u}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${h}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(f,{click:c})),a.append(f)};n.forEach(u=>l(u)),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=GC(this.providedFilterParams,this.getDefaultDebounceMs()),t=Yt(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:r}=this.providedFilterParams;r&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let r;(i==="Enter"||i==="Space")&&(r={keyboardEvent:t}),this.hidePopup(r),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi()),r=this.queryForHtmlElement('[data-ref="applyFilterButton"]');r&&Eu(r,!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:i,gos:r}=this;t?(i.restoreLastSize(),i.setResizable(r.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,zP[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},WN=class extends LC{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},UN=class extends ke{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case N.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}break;case N.DOWN:case N.UP:e.preventDefault(),this.navigate(t);break;case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===N.DOWN;let i;if(!this.highlightedEl)i=this.itemEls[t?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),i=this.itemEls[n]}this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,r=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/r);let o=-1;e===N.PAGE_HOME?o=0:e===N.PAGE_END?o=i:e===N.PAGE_DOWN?o=Math.min(t+n,i):e===N.PAGE_UP&&(o=Math.max(t-n,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:i}=e,r=i||t;return this.options.push({value:t,text:r}),this.renderOption(t,r),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{br(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{wG(t,i+1),SG(t,e.length)})}renderOption(e,t){const i=st(this.gos),r=i.createElement("div");hi(r,"option"),r.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const n=i.createElement("span");r.appendChild(n),n.textContent=t,this.unFocusable||(r.tabIndex=-1),this.itemEls.push(r),this.addManagedListeners(r,{mouseover:()=>this.highlightItem(r),mousedown:o=>{o.preventDefault(),o.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Xa({getTooltipValue:()=>t,getGui:()=>r,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(r)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(r=>r.value===e);if(i!==-1){const r=this.options[i];this.value=r.value,this.displayValue=r.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!nr(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),bd(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:r}=t,{offsetTop:n,offsetHeight:o}=e;(n+o>i+r||n<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!nr(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),bd(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},$N=class extends EP{constructor(e){if(super(e,(e==null?void 0:e.template)||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=J,this.eWrapper=J,this.eDisplayField=J,this.eIcon=J,this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:r,minPickerWidth:n,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!r,i!=null&&this.setPickerMaxHeight(i),n!=null&&this.setPickerMinWidth(n),o!=null&&this.setPickerMaxWidth(o)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:r}=this.config;if(i){const n=vi(i,this.gos);n&&this.eIcon.appendChild(n)}r!=null&&this.setInputWidth(r)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),wd(e,!1),this.ariaRole&&hi(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case N.UP:case N.DOWN:case N.ENTER:case N.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case N.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:r,modalPicker:n=!0}=this.config,o={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const d=YA(this.gos);this.beforeHidePicker(),d&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,r),anchorToElement:this.eWrapper};e.style.position="absolute";const s=this.popupService.addPopup(o),{maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:u,variableWidth:h}=this;h?(l&&(e.style.minWidth=l),e.style.width=FC(xd(this.eWrapper)),u&&(e.style.maxWidth=u)):_d(e,u??xd(this.eWrapper));const c=a??`${MC(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",c),this.alignPickerToComponent(),s.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();wd(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return _d(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},NC=class extends $N{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new UN("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),AG(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;const{key:t}=e;switch(t===N.TAB&&this.hidePicker(),t){case N.ENTER:case N.UP:case N.DOWN:case N.PAGE_UP:case N.PAGE_DOWN:case N.PAGE_HOME:case N.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case N.ESCAPE:super.onKeyDown(e);break;case N.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},KN={selector:"AG-SELECT",component:NC},WP=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=r=>r.some(n=>e[n]!=null)?!0:(U(`ignoring FilterOptionDef as it doesn't contain one of '${r}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(r=>r===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:U("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else U("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},UP=class extends zN{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:r}=t;return r??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,r=!t.operator;if(!i&&r||i&&!r)return!1;let o;if(i){const s=e,a=t;o=this.areSimpleModelsEqual(s,a)}else{const s=e,a=t;o=s.operator===a.operator&&ao(s.conditions,a.conditions,(l,u)=>this.areSimpleModelsEqual(l,u))}return o}shouldRefresh(e){var o;const t=this.getModel(),i=t?t.conditions??[t]:null,r=((o=e.filterOptions)==null?void 0:o.map(s=>typeof s=="string"?s:s.displayKey))??this.getDefaultFilterOptions();return!(!(!i||i.every(s=>r.find(a=>a===s.type)!==void 0))||typeof e.maxNumConditions=="number"&&i&&i.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const i=e;let r=i.conditions;r==null&&(r=[],U("Filter model is missing 'conditions'"));const n=this.validateAndUpdateConditions(r),o=this.getNumConditions();if(n<o)this.removeConditionsAndOperators(n);else if(n>o)for(let a=o;a<n;a++)this.createJoinOperatorPanel(),this.createOption();const s=i.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!s,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(s,!0)),r.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),pi.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),U('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:i}=t,r=[];if(i){const o=t;r.push(...o.conditions??[])}else r.push(t);return r[i&&i==="OR"?"some":"every"](o=>this.individualConditionPasses(e,o))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new WP,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(U('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(U('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(U('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new NC);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,r=>this.resetInput(r)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const r=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,r,n),this.resetJoinOperatorOr(i,r,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const r=this.createManagedBean(new WN);return e.push(r),r.addCssClass("ag-filter-condition-operator"),r.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(r.getGui()),r}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const r=e+1,n=i-r;n>0&&this.removeConditionsAndOperators(r,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((r,n)=>{const o=this.isConditionDisabled(n,e);r.setDisabled(o||this.filterListOptions.length<=1),n===1&&(Eu(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((r,n)=>{Je(r,this.isConditionBodyVisible(n))});const i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(r=>{r.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(r=>{r.setValue(i,!0)}),this.forEachInput((r,n,o,s)=>{this.setElementDisplayed(r,n<s),this.setElementDisabled(r,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(n=>br(n))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(n=>{br(n.getGui()),this.destroyBean(n)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof jo&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,r=!1;const n=this.getJoinOperator();for(let s=this.getNumConditions()-1;s>=0;s--)if(this.isConditionUiComplete(s))t===-1&&(t=s,i=s);else{const a=s>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(s-1),l=s<t;(a||l)&&(this.removeConditionsAndOperators(s,1),r=!0,l&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,n),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(yC(this.filterPlaceholder)){const r=this.filterPlaceholder,n=this.eTypes[t].getValue(),o=this.translate(n);i=r({filterOptionKey:n,filterOption:o,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,r,n)=>{if(!(t instanceof jo))return;const o=i===0&&n>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",s=i===0&&n>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,r)),t.setInputAriaLabel(s)})}setElementValue(e,t,i){e instanceof jo&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof ke&&Je(e.getGui(),t)}setElementDisabled(e,t){e instanceof ke&&Eu(e.getGui(),t)}attachElementOnChange(e,t){e instanceof jo&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const r=this.getNumberOfInputs(t),n=this.getInputs(e);for(let o=0;o<n.length;o++){const s=n[o];s!=null&&i(s,o,e,r)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),pi.resolve()}resetType(e){const i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,r,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(r),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput((r,n,o)=>{o===t&&this.setElementValue(r,i[n]!=null?i[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,r)=>{this.setElementValue(t,i===0&&r===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),r=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(n,r,i);return o??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(r,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;const{predicate:r}=e;if(r!=null&&!t.some(n=>n==null))return r(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},$P=class extends UP{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const r=this.comparator(),n=e[0]!=null?r(e[0],t):0;switch(i.type){case"equals":return n===0;case"notEqual":return n!==0;case"greaterThan":return n>0;case"greaterThanOrEqual":return n>=0;case"lessThan":return n<0;case"lessThanOrEqual":return n<=0;case"inRange":{const o=r(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&o<=0:n>0&&o<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return U('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},YN=65,XN=67,qN=86,ZN=68,jN=90,QN=89;function KP(e){var i;return e.altKey||e.ctrlKey||e.metaKey?!1:((i=e.key)==null?void 0:i.length)===1}function bm(e,t,i,r,n){const o=r?r.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const s=e.addGridCommonParams({event:t,editing:n,column:r,node:i,data:i.data,colDef:r.getColDef()});return!!(o&&o(s))}function JN(e,t,i,r){const n=r.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;if(!Y(o))return!1;const s=e.addGridCommonParams({colDef:n,column:r,headerRowIndex:i,event:t});return!!o(s)}function eV(e){const{keyCode:t}=e;let i;switch(t){case YN:i=N.A;break;case XN:i=N.C;break;case qN:i=N.V;break;case ZN:i=N.D;break;case jN:i=N.Z;break;case QN:i=N.Y;break;default:i=e.code}return i}function tV(e,t=!1){return e===N.DELETE?!0:!t&&e===N.BACKSPACE?mP():!1}var Fs=class extends jo{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=Y(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{KP(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{var n;const r=(n=i.clipboardData)==null?void 0:n.getData("text");r&&r.split("").some(o=>!e.test(o))&&i.preventDefault()}})}},Pf={selector:"AG-INPUT-TEXT-FIELD",component:Fs},VC=class extends Fs{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const n=parseFloat(this.eInput.value),o=isNaN(n)?"":this.normalizeValue(n.toString());this.value!==o&&this.setValue(o)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:r}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof r=="number"&&this.setStep(r)}onWheel(e){et(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const r=parseFloat(e).toFixed(this.precision);return parseFloat(r).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,Vi(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Vi(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Vi(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(Y(i)){let r=this.isScientificNotation(i);if(r&&this.eInput.validity.valid)return e(i);if(!r){i=this.adjustPrecision(i);const n=this.normalizeValue(i);r=i!=n}if(r)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},iV={selector:"AG-INPUT-NUMBER-FIELD",component:VC},YP=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],BC=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){const r=e,o=(r.conditions??[]).map(a=>this.getModelAsString(a)),s=r.operator==="AND"?"andCondition":"orCondition";return o.join(` ${i(s,zP[s])} `)}else{if(e.type==="blank"||e.type==="notBlank")return i(e.type,e.type);{const r=e,n=this.optionsFactory.getCustomOption(r.type),{displayKey:o,displayName:s,numberOfInputs:a}=n||{};return o&&s&&a===0?(i(o,s),s):this.conditionToString(r,n)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},XP=class extends BC{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function xm(e){const{allowedCharPattern:t}=e??{};return t??null}var rV=class extends $P{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:r}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(r))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new XP(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return YP}setElementValue(e,t,i){const r=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,r)}createValueElement(){const e=xm(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),hi(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,r){const n=this.createManagedBean(r?new Fs({allowedCharPattern:r}):new VC);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,r,n,o)=>{r<o&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=qr(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},r=this.getValues(e);return r.length>0&&(i.filter=r[0]),r.length>1&&(i.filterTo=r[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},qP=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],ZP=class extends BC{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function jP(e){const t=e&&e.trim();return t===""?e:t}var nV=class extends UP{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const r=t.lastIndexOf(i);return r>=0&&r===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new ZP(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(U("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:r})=>e(t,i,r)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},r=this.getValuesWithSideEffects(e,!0);return r.length>0&&(i.filter=r[0]),r.length>1&&(i.filterTo=r[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,(r,n,o,s)=>{if(n<s){let a=qr(r.getValue());t&&this.textFilterParams.trimInput&&(a=jP(a)??null,r.setValue(a,!0)),i.push(a)}}),i}getDefaultFilterOptions(){return qP}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),hi(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const r=this.createManagedBean(new Fs);r.addCssClass(`ag-filter-${i}`),r.addCssClass("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:r}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(r))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,r){const n=e.map(d=>this.formatter(d))||[],o=this.formatter(t),{api:s,colDef:a,column:l,context:u,textFormatter:h}=this.textFilterParams;if(i.type==="blank")return this.isBlank(t);if(i.type==="notBlank")return!this.isBlank(t);const c={api:s,colDef:a,column:l,context:u,node:r.node,data:r.data,filterOption:i.type,value:o,textFormatter:h};return n.some(d=>this.matcher({...c,filterText:d}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function QP(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}function hr(e,t=Number.MAX_VALUE){return i=>{const r=QP(i);if(!(r==null||r<e||r>t))return r}}function uu(e,t){return e.toString().padStart(t,"0")}function oV(e,t){const i=[];for(let r=e;r<=t;r++)i.push(r);return i}function sV(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Bi(e,t=!0,i="-"){if(!e)return null;let r=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>uu(n,2)).join(i);return t&&(r+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>uu(n,2)).join(":")),r}var Ep=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function hu(e,t="YYYY-MM-DD"){const i=uu(e.getFullYear(),4),r=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>r[e.getMonth()],MMM:()=>r[e.getMonth()].slice(0,3),MM:()=>uu(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Ep(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Ep(e.getDate())}`,DD:()=>uu(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Ep(e.getDay())}`,d:()=>`${e.getDay()}`},s=new RegExp(Object.keys(o).join("|"),"g");return t.replace(s,a=>a in o?o[a]():a)}function ui(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const r=t.split("-").map(c=>parseInt(c,10));if(r.filter(c=>!isNaN(c)).length!==3)return null;const[n,o,s]=r,a=new Date(n,o-1,s);if(a.getFullYear()!==n||a.getMonth()!==o-1||a.getDate()!==s)return null;if(!i||i==="00:00:00")return a;const[l,u,h]=i.split(":").map(c=>parseInt(c,10));return l>=0&&l<24&&a.setHours(l),u>=0&&u<60&&a.setMinutes(u),h>=0&&h<60&&a.setSeconds(h),a}var JP=class{constructor(e,t,i,r,n){this.alive=!0,this.context=e,this.eParent=r,t.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(r.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),n==null||n(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Je(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var i,r;let t=!1;(i=this.dateComp)!=null&&i.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&((r=this.dateComp)!=null&&r.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&U("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},eM=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],tM=class extends BC{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:r}=t||{},n=i=="inRange"||r===2,o=ui(e.dateFrom),s=ui(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){const l=o!==null?hu(o,a):"null",u=s!==null?hu(s,a):"null";return`${l}-${u}`}return o!=null?hu(o,a):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},x0=1e3,R0=1/0,aV=class extends $P{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=x0,this.maxValidYear=R0,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:r}=e||{};return[t&&ui(t)||null,i&&ui(i)||null].slice(0,this.getNumberOfInputs(r))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(i,r)=>{if(e[i]!=null)if(isNaN(e[i]))U(`DateFilter ${i} is not a number`);else return e[i]==null?r:Number(e[i]);return r};this.minValidYear=t("minValidYear",x0),this.maxValidYear=t("maxValidYear",R0),this.minValidYear>this.maxValidYear&&U("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:ui(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:ui(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&U("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new tM(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new JP(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return eM}createValueElement(){const t=st(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,i,r){const o=st(this.gos).createElement("div");o.classList.add(`ag-filter-${r}`),o.classList.add(`ag-filter-date-${r}`),t.push(o),e.appendChild(o),i.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,r,n,o)=>{n!==e||!t||r>=o||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},r=this.getValues(e);return r.length>0&&(i.dateFrom=Bi(r[0])),r.length>1&&(i.dateTo=Bi(r[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(r=>{r.setInputPlaceholder(t),r.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,r,n,o)=>{r<o&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},HC=class extends B{constructor(e,t,i,r){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=r,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?Ee(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=Y(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),r=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(r),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!Tt(this.beans.gos,"print")||e.getPinned()==="left")return t;const r=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){const n=this.beans.visibleColsService.getBodyContainerWidth();return r+n+t}return r+t}setLeft(e){if(Y(e)&&(this.eCell.style.left=`${e}px`),lt(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&DG(this.ariaEl,t.length)}}},lV="ag-column-first",uV="ag-column-last";function iM(e,t,i,r){return Fe(e)?[]:cV(e.headerClass,e,t,i,r)}function rM(e,t,i){e.addOrRemoveCssClass(lV,i.isColAtEdge(t,"first")),e.addOrRemoveCssClass(uV,i.isColAtEdge(t,"last"))}function hV(e,t,i,r){return t.addGridCommonParams({colDef:e,column:i,columnGroup:r})}function cV(e,t,i,r,n){if(Fe(e))return[];let o;if(typeof e=="function"){const s=hV(t,i,r,n);o=e(s)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}var dV=0,nM=class oM extends B{constructor(t,i,r){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=r,this.beans=i,this.instanceId=t.getUniqueId()+"-"+dV++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){const t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){const{headerRowIndex:i,column:r}=this.focusService.getFocusedHeader();return JN(this.gos,t,i,r)}getWrapperHasFocus(){return et(this.gos)===this.eGui}setGui(t,i){this.eGui=t,this.addDomData(i),i.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),i.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){const{wrapperElement:i,checkMeasuringCallback:r,compBean:n}=t,{animationFrameService:o,resizeObserverService:s,columnModel:a,gos:l}=this.beans,u=g=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:v,paddingBottom:m,borderBottomWidth:y,borderTopWidth:C}=Ps(this.getGui()),S=v+m+y+C,w=i.offsetHeight+S;if(g<5){const x=st(l),R=!x||!x.contains(i),D=w==0;if(R||D){o.requestAnimationFrame(()=>u(g+1));return}}a.setColHeaderHeight(this.column,w)};let h=!1,c;const d=()=>{const g=this.column.isAutoHeaderHeight();g&&!h&&f(),!g&&h&&p()},f=()=>{h=!0,u(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),c=s.observeResize(i,()=>u(0))},p=()=>{h=!1,c&&c(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),c=void 0};d(),n.addDestroyFunc(()=>p()),n.addManagedListeners(this.column,{widthChanged:()=>h&&u(0)}),n.addManagedEventListeners({sortChanged:()=>{h&&window.setTimeout(()=>u(0))}}),r&&r(d)}onDisplayedColumnsChanged(){const{comp:t,column:i,beans:r,eGui:n}=this;!t||!i||!n||(rM(t,i,r.visibleColsService),gP(n,r.visibleColsService.getAriaColIndex(i)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const t=this.focusService.isHeaderFocusSuppressed();this.eGui&&Vi(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){var s;const i=et(this.gos),r=t.key===N.LEFT||t.key===N.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),i!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||r)&&(t.preventDefault(),t.stopImmediatePropagation()),!r))return;const n=t.key===N.LEFT!==this.gos.get("enableRtl"),o=GP[n?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),(s=this.resizeFeature)==null||s.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(t){let i=this.getResizeDiff(t);if(this.column.getPinned()){const n=this.pinnedWidthService.getPinnedLeftWidth(),o=this.pinnedWidthService.getPinnedRightWidth(),s=ch(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(n+o+i>s)if(s>n+o)i=s-n-o;else return 0}return i}getResizeDiff(t){let i=t.key===N.LEFT!==this.gos.get("enableRtl");const r=this.column.getPinned(),n=this.gos.get("enableRtl");return r&&n!==(r==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){const i=this.getWrapperHasFocus();switch(t.key){case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:i&&t.preventDefault()}}addDomData(t){const i=oM.DOM_DATA_KEY_HEADER_CTRL;Ss(this.gos,this.eGui,i,this),t.addDestroyFunc(()=>Ss(this.gos,this.eGui,i,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,i,r){const n=t??i;this.gos.get("preventDefaultOnContextMenu")&&n.preventDefault(),this.menuService.isHeaderContextMenuEnabled(r)&&this.menuService.showHeaderContextMenu(r,t,i),this.dispatchColumnMouseEvent("columnHeaderContextMenu",r)}dispatchColumnMouseEvent(t,i){this.eventService.dispatchEvent({type:t,column:i})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};nM.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var Mf=nM,zC=class extends B{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},fV=class extends Mf{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,r,n){this.comp=e,n=hh(this,this.beans.context,n),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=r,this.setGui(t,n),this.setupActive(),this.setupWidth(n),this.setupLeft(n),this.setupHover(n),this.setupFocus(n),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(n),this.setupUi(),n.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(n),n.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(n)}),n.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=vi("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Ms(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();Ia(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(et(this.gos)===this.eGui)return;const r=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(r){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),r.focus();return}const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case N.UP:case N.DOWN:t||e.preventDefault();case N.LEFT:case N.RIGHT:if(t)return;e.stopPropagation();case N.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case N.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),r=!!e.relatedTarget&&xa(e.relatedTarget,"ag-floating-filter");if(i&&r&&e.target===this.eGui){const o=this.lastFocusEvent,s=!!(o&&o.key===N.TAB);if(o&&s){const a=o.shiftKey;this.focusService.focusInto(this.eGui,a)}}const n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.column)}setupHover(e){e.createManagedBean(new zC([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new HC(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.filterManager)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=r=>{if((r==null?void 0:r.source)==="filterDestroyed"&&!this.isAlive())return;const n=this.comp.getFloatingFilterComp();n&&n.then(o=>{if(o){const s=t==null?void 0:t.getCurrentFloatingFilterParentModel(this.column),a=r?{...r,columns:r.columns??[],source:r.source==="api"?"api":"columnFilter"}:null;o.onParentModelChanged(s,a)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t!=null&&t.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){var o;const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const r=this.active?(o=this.beans.filterManager)==null?void 0:o.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!r?this.updateCompDetails(e,r,i):n.then(s=>{var a;!s||(a=this.beans.filterManager)!=null&&a.areFilterCompsDifferent(this.userCompDetails??null,r)?this.updateCompDetails(e,r,i):this.updateFloatingFilterParams(r)})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){var i;if(!e)return;const t=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(r=>{let n=!1;r!=null&&r.refresh&&typeof r.refresh=="function"&&r.refresh(t)!==null&&(n=!0),!n&&(r!=null&&r.onParamsUpdated)&&typeof r.onParamsUpdated=="function"&&r.onParamsUpdated(t)!==null&&U("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var ye="32.3.3";function pV(e){var t,i;return!!((t=e.filterManager)!=null&&t.isColumnFilterPresent())||!!((i=e.filterManager)!=null&&i.isAggregateFilterPresent())}function gV(e,t,i){var r;return(r=e.filterManager)==null?void 0:r.getFilterInstance(t,i)}function vV(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterInstance(t))??Promise.resolve(void 0)}function mV(e,t){var r;const i=e.columnModel.getColDefCol(t);if(i)return(r=e.filterManager)==null?void 0:r.destroyFilter(i,"api")}function yV(e,t){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=e.filterManager)==null?void 0:i.setFilterModel(t)})}function CV(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function SV(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterModel(t))??null}function wV(e,t,i){var r;return((r=e.filterManager)==null?void 0:r.setColumnFilterModel(t,i))??Promise.resolve()}function bV(e,t){const i=e.columnModel.getCol(t);if(!i){Ge(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function xV(e,t,i){if(t==null)return null;let r=null;const{compName:n,jsComp:o,fwComp:s}=kP.getCompKeys(e,t,OC);return n?r={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:o==null&&s==null&&t.filter===!0&&(r=i()),r}var D0={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},T0=["january","february","march","april","may","june","july","august","september","october","november","december"],RV=class extends B{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)??{}}}setFilterModel(e,t="api"){var n;if((n=this.dataTypeService)!=null&&n.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const i=[],r=this.getFilterModel(!0);if(e){const o=new Set(Object.keys(e));this.allColumnFilters.forEach((s,a)=>{const l=e[a];i.push(this.setModelOnFilterWrapper(s.filterPromise,l)),o.delete(a)}),o.forEach(s=>{const a=this.columnModel.getColDefCol(s)||this.columnModel.getCol(s);if(!a){U("setFilterModel() - no column found for colId: "+s);return}if(!a.isFilterAllowed()){U("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);return}const l=this.getOrCreateFilterWrapper(a);if(!l){U("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s);return}i.push(this.setModelOnFilterWrapper(l.filterPromise,e[s]))})}else this.allColumnFilters.forEach(o=>{i.push(this.setModelOnFilterWrapper(o.filterPromise,null))});pi.all(i).then(()=>{var a;const o=this.getFilterModel(!0),s=[];this.allColumnFilters.forEach((l,u)=>{const h=r?r[u]:null,c=o?o[u]:null;_u(h,c)||s.push(l.column)}),s.length>0&&((a=this.filterManager)==null||a.onFilterChanged({columns:s,source:t}))})}setModelOnFilterWrapper(e,t){return new pi(i=>{e.then(r=>{typeof r.setModel!="function"&&(U("filter missing setModel method, which is needed for setFilterModel"),i()),(r.setModel(t)||pi.resolve()).then(()=>i())})})}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:r}=this;return i.forEach((n,o)=>{const s=this.getModelFromFilterWrapper(n);Y(s)&&(t[o]=s)}),e||Object.entries(r).forEach(([n,o])=>{var s;Y(o)&&!i.has(n)&&((s=this.columnModel.getCol(n))!=null&&s.isFilterAllowed())&&(t[n]=o)}),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(U("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=o=>o?o.isFilterActive?o.isFilterActive():(U("Filter is missing isFilterActive() method"),!1):!1,t=!!cm(this.gos),i=o=>{if(!o.isPrimary())return!0;const a=!this.columnModel.isPivotActive();return!o.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},r=[],n=[];return this.forEachColumnFilter((o,s)=>{e(o)&&(i(s.column)?r.push(o):n.push(o))}).then(()=>{this.activeAggregateFilters=r,this.activeColumnFilters=n})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,r)=>r.column.setFilterActive(i.isFilterActive(),e,t))}forEachColumnFilter(e){return pi.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(i=>e(i,t))))}doColumnFiltersPass(e,t,i){const{data:r,aggData:n}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,s=i?n:r;for(let a=0;a<o.length;a++){const l=o[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:s}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>{var i;return(i=this.filterManager)==null?void 0:i.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(r=>{r.filterPromise&&r.filterPromise.then(n=>{n&&n!==t&&n.onAnyFilterChanged&&n.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const r=i?this.columnModel.getCol(i):e;return r?this.valueService.getValue(r,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){var i;let t;if(xp(this.gos))t="agSetColumnFilter";else{const r=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);r==="number"?t="agNumberColumnFilter":r==="date"||r==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){var i;let t;if(xp(this.gos))t="agSetColumnFloatingFilter";else{const r=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);r==="number"?t="agNumberColumnFloatingFilter":r==="date"||r==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),r=e.getColDef();let n;const o={...this.createFilterParams(e,r),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(n,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(n,a):!0},s=this.userComponentFactory.getFilterDetails(r,o,i);return s?{filterPromise:()=>{const a=s.newAgStackInstance();return a!=null&&a.then(l=>{n=l,t&&(t.filter=l)}),a},compDetails:s}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:rP(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:r}=this.createFilterInstance(e,t);return t.filterPromise=(i==null?void 0:i())??null,t.compDetails=r,t}onColumnsChanged(){var i;const e=[];this.allColumnFilters.forEach((r,n)=>{let o;r.column.isPrimary()?o=this.columnModel.getColDefCol(n):o=this.columnModel.getCol(n),!(o&&o===r.column)&&(e.push(r.column),this.disposeFilterWrapper(r,"columnChanged"),this.disposeColumnListener(n))});const t=e.every(r=>r.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?(i=this.filterManager)==null||i.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:i}=this.allColumnFilters.get(e.getColId())??{};return i&&typeof(i==null?void 0:i.isFilterAllowed)=="function"?i.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const i=l=>{var h;const u=(h=this.getOrCreateFilterWrapper(e))==null?void 0:h.filterPromise;u!=null&&u.then(c=>{l(lu(c))})},r=e.getColDef(),n={...this.createFilterParams(e,r),filterChangedCallback:()=>i(l=>this.filterChangedCallbackFactory(l,e)())},o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(r,OC,n);let s=xV(this.frameworkOverrides,r,()=>this.getDefaultFloatingFilter(e));s==null&&(s="agReadOnlyFloatingFilter");const a={column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(r,a,s)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){var n;const i=e.getColId(),r=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],r&&(this.disposeFilterWrapper(r,t),(n=this.filterManager)==null||n.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const r=(i==null?void 0:i.source)??"columnFilter",n={filter:e,additionalEventAttributes:i,columns:[t],source:r};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:r}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,r)){this.destroyFilter(i,"paramsUpdated");return}const n=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(o=>{(o!=null&&o.refresh?o.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(o,i),filterChangedCallback:this.filterChangedCallbackFactory(o,i),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(o,a):!0,...n}):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:r}=t;return!(i===r||(i==null?void 0:i.render)&&(r==null?void 0:r.render)&&i.render===r.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(i=>{const r=lu(i);t(r)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(i=>{t(lu(i))})})}getFilterInstanceImpl(e){var r;const t=this.columnModel.getColDefCol(e);return t?((r=this.getOrCreateFilterWrapper(t))==null?void 0:r.filterPromise)??pi.resolve(null):pi.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){var o;if((o=this.dataTypeService)!=null&&o.isPendingInference()){let s=()=>{};const a=new Promise(l=>{s=l});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:s}),a}const i=this.columnModel.getColDefCol(e),r=i?this.getOrCreateFilterWrapper(i):null;return r?(s=>new Promise(a=>{s.then(l=>a(l))}))(this.setModelOnFilterWrapper(r.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const r=xp(this.gos),n=this.localeService.getLocaleTextFunc(),o=s=>{const{filterParams:a}=e;e.filterParams=typeof a=="object"?{...a,...s}:s};switch(t.baseDataType){case"number":{r&&o({comparator:(s,a)=>{const l=s==null?0:parseInt(s),u=a==null?0:parseInt(a);return l===u?0:l>u?1:-1}});break}case"boolean":{o(r?{valueFormatter:s=>Y(s.value)?n(String(s.value),s.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(s,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(s,a)=>a===!1,numberOfInputs:0}]});break}case"date":{r&&o({valueFormatter:s=>{const a=i(s);return Y(a)?a:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(s,a)=>{if(a===1&&s!=null){const l=T0[Number(s)-1];return n(l,D0[l])}return s??n("blanks","(Blanks)")}});break}case"dateString":{const s=t.dateParser;o(r?{valueFormatter:a=>{const l=i(a);return Y(l)?l:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{const l=s(a??void 0);return l?[String(l.getFullYear()),String(l.getMonth()+1),String(l.getDate())]:null},treeListFormatter:(a,l)=>{if(l===1&&a!=null){const u=T0[Number(a)-1];return n(u,D0[u])}return a??n("blanks","(Blanks)")}}:{comparator:(a,l)=>{const u=s(l);return l==null||u<a?-1:u>a?1:0}});break}case"object":{r?o({valueFormatter:s=>{const a=i(s);return Y(a)?a:n("blanks","(Blanks)")}}):e.filterValueGetter=s=>i({column:s.column,node:s.node,value:this.valueService.getValue(s.column,s.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function DV(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function TV(e,t="api"){var i;(i=e.filterManager)==null||i.onFilterChanged({source:t})}var _V=class extends ke{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[Pf]),this.eFloatingFilterText=J}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},sM=class extends ke{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new WP,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}},AV=class extends sM{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[Pf]),this.eReadOnlyText=J,this.eDateWrapper=J}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return eM}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new tM(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const i=e;this.dateComp.setDate(ui(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Je(this.eDateWrapper,e),Je(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=Bi(e);this.params.parentFilterInstance(i=>{if(i){const r=ui(t);i.onFloatingFilterChanged(this.getLastType()||null,r)}})}getDateComponentParams(){const e=GC(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Yt(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new JP(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},PV=class extends ke{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[Pf]),this.eDateInput=J}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:i=>{i.target===et(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Fr(),t.type=i?"date":"text";const{minValidYear:r,maxValidYear:n,minValidDate:o,maxValidDate:s}=e.filterParams||{};if(o&&r&&U("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),s&&n&&U("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&s){const[a,l]=[o,s].map(u=>u instanceof Date?u:ui(u));a&&l&&a.getTime()>l.getTime()&&U("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?t.min=hu(o):t.min=o:r&&(t.min=`${r}-01-01`),s?s instanceof Date?t.max=hu(s):t.max=s:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return ui(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Bi(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:_C()||AC()||Fr()&&vP()>=14.1}},aM=class extends B{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=J,this.valueChangedListener=()=>{}}setupGui(e){var r;this.eFloatingFilterTextInput=this.createManagedBean(new Fs((r=this.params)==null?void 0:r.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=n=>this.valueChangedListener(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},lM=class extends sM{constructor(){super(...arguments),this.eFloatingFilterInputContainer=J}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Ad(this.params.filterParams),!this.isReadOnly()){const i=GC(this.params.filterParams,this.getDefaultDebounceMs()),r=Yt(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(r)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();kt(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===N.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=jP(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(r=>{r&&r.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},MV=class extends B{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new VC),this.eFloatingFilterTextInput=this.createManagedBean(new Fs),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,r=>this.valueChangedListener(r)),this.setupListeners(i,r=>this.valueChangedListener(r))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},FV=class extends lM{init(e){var t;super.init(e),this.filterModelFormatter=new XP(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){xm(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return YP}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=xm(e.filterParams),this.allowedCharPattern?this.createManagedBean(new aM({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new MV)}},EV=class extends lM{init(e){super.init(e),this.filterModelFormatter=new ZP(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return qP}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new aM)}};function IV(e){var t;return!!((t=e.filterManager)!=null&&t.isQuickFilterPresent())}function LV(e){return e.gos.get("quickFilterText")}function kV(e){var t;(t=e.filterManager)==null||t.resetQuickFilterCache()}var OV=class extends B{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){var n;const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let r=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?(n=this.pivotResultColsService.getPivotResultCols())==null?void 0:n.list:i)??[];t&&(r=r.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?r:r.filter(o=>o.isVisible()||o.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return Y(e)?it(this.gos)?e.toUpperCase():(U("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){U(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(i=>{const r=this.getQuickFilterTextForColumn(i,e);return Y(r)&&r.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:r,matcher:n}=this;return n(r,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const r=e.getColDef();if(r.getQuickFilterText){const n=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:r});i=r.getQuickFilterText(n)}return Y(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach(i=>{const r=this.getQuickFilterTextForColumn(i,e);Y(r)&&t.push(r)}),t.join(`
`)}},WC={version:ye,moduleName:"@ag-grid-community/filter-core",beans:[NN]},GV={version:ye,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:DV,onFilterChanged:TV},dependantModules:[WC]},UC={version:ye,moduleName:"@ag-grid-community/column-filter",beans:[RV],dependantModules:[WC]},NV={version:ye,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:pV,getFilterInstance:gV,getColumnFilterInstance:vV,destroyFilter:mV,setFilterModel:yV,getFilterModel:CV,getColumnFilterModel:SV,setColumnFilterModel:wV,showColumnFilter:bV},dependantModules:[UC,GV]},uM={version:ye,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:fV}],dependantModules:[UC]},VV={version:ye,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:_V}],dependantModules:[uM]},BV={version:ye,moduleName:"@ag-grid-community/simple-filter",dependantModules:[UC],userComponents:[{name:"agTextColumnFilter",classImp:nV},{name:"agNumberColumnFilter",classImp:rV},{name:"agDateColumnFilter",classImp:aV},{name:"agDateInput",classImp:PV}]},HV={version:ye,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[BV,uM],userComponents:[{name:"agTextColumnFloatingFilter",classImp:EV},{name:"agNumberColumnFloatingFilter",classImp:FV},{name:"agDateColumnFloatingFilter",classImp:AV}]},hM={version:ye,moduleName:"@ag-grid-community/quick-filter-core",beans:[OV],dependantModules:[WC]},zV={version:ye,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:IV,getQuickFilter:LV,resetQuickFilter:kV},dependantModules:[hM]},WV={version:ye,moduleName:"@ag-grid-community/quick-filter",dependantModules:[hM,zV]},UV={version:ye,moduleName:"@ag-grid-community/filter",dependantModules:[HV,VV,WV,NV]},$C=class extends ke{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},$V=class extends $C{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=J,this.eButtonWrapper=J,this.eButtonShowMainFilter=J}postConstruct(){const e=this.getGui(),t={addOrRemoveCssClass:(i,r)=>this.addOrRemoveCssClass(i,r),addOrRemoveBodyCssClass:(i,r)=>this.eFloatingFilterBody.classList.toggle(i,r),setButtonWrapperDisplayed:i=>Je(this.eButtonWrapper,i),setCompDetails:i=>this.setCompDetails(i),getFloatingFilterComp:()=>this.compPromise,setWidth:i=>e.style.width=i,setMenuIcon:i=>this.eButtonShowMainFilter.appendChild(i)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},KV=class extends $C{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=J,this.eHeaderCompWrapper=J,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();((n,o)=>{o!=null&&o!=""?e.setAttribute(n,o):e.removeAttribute(n)})("col-id",this.column.getColId());const i={setWidth:n=>e.style.width=n,addOrRemoveCssClass:(n,o)=>this.addOrRemoveCssClass(n,o),setAriaSort:n=>n?TG(e,n):_G(e),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);const r=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",r)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(i=>this.afterCompCreated(t,i))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},YV=class extends $C{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=J,this.eHeaderCompWrapper=J}postConstruct(){const e=this.getGui(),t=(r,n)=>n!=null?e.setAttribute(r,n):e.removeAttribute(r);e.setAttribute("col-id",this.ctrl.getColId());const i={addOrRemoveCssClass:(r,n)=>this.addOrRemoveCssClass(r,n),setHeaderWrapperHidden:r=>{r?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:r=>{r!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${r}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",r!=null)},setResizableDisplayed:r=>Je(this.eResize,r),setWidth:r=>e.style.width=r,setAriaExpanded:r=>t("aria-expanded",r),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(i,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}const i=this.getGui(),r=e.getGui();this.eHeaderCompWrapper.appendChild(r),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}addOrRemoveHeaderWrapperStyle(e,t){const{eHeaderCompWrapper:i}=this;t?i.style.setProperty(e,t):i.style.removeProperty(e)}},XV=class extends ke{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){pP(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,i)=>this.setHeaderCtrls(t,i),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const i=this.headerComps;if(this.headerComps={},e.forEach(r=>{const n=r.instanceId;let o=i[n];delete i[n],o==null&&(o=this.createHeaderComp(r),this.getGui().appendChild(o.getGui())),this.headerComps[n]=o}),Qi(i,(r,n)=>{this.getGui().removeChild(n.getGui()),this.destroyBean(n)}),t){const r=jn(this.headerComps);r.sort((o,s)=>{const a=o.getCtrl().getColumnGroupChild().getLeft(),l=s.getCtrl().getColumnGroupChild().getLeft();return a-l});const n=r.map(o=>o.getGui());DP(this.getGui(),n)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new YV(e);break;case"filter":t=new $V(e);break;default:t=new KV(e);break}return this.createBean(t),t.setParentComponent(this),t}},qV=class extends B{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});const e=st(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){var e;return((e=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:e.getRowCount())??0}getHeaderPositionForColumn(e,t){let i;if(typeof e=="string"?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const r=this.ctrlsService.getHeaderRowContainerCtrl(),n=r==null?void 0:r.getAllCtrls(),o=Ee(n||[]).getType()==="filter",s=this.getHeaderRowCount()-1;let a=-1,l=i;for(;l;)a++,l=l.getParent();let u=a;return t&&o&&u===s-1&&u++,u===-1?null:{headerRowIndex:u,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:r}=t,n=t.column,o=this.getHeaderRowCount(),s=e===0;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:u}=s?this.headerPositionUtils.getColumnVisibleParent(n,r):this.headerPositionUtils.getColumnVisibleChild(n,r),h=!1;return a<0&&(a=0,l=n,h=!0),a>=o?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):u!==void 0&&(this.currentHeaderRowWithoutSpan=u),!h&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const r=this.focusService.getFocusedHeader(),n=e===2,o=this.gos.get("enableRtl");let s,a;if(this.currentHeaderRowWithoutSpan!==-1?r.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=r.headerRowIndex,n!==o?(a="Before",s=this.headerPositionUtils.findHeader(r,a)):(a="After",s=this.headerPositionUtils.findHeader(r,a)),s||!t)return this.focusService.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:s,direction:a})}return this.focusNextHeaderRow(r,a,i)}focusNextHeaderRow(e,t,i){const r=e.headerRowIndex;let n=null,o;if(t==="Before"?r>0&&(o=r-1,this.currentHeaderRowWithoutSpan-=1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=r+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),!n)return!1;const{column:s,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(n.column,n==null?void 0:n.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(lt(e)){const r=e.getDisplayedLeafColumns();i=t==="Before"?Ee(r):r[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},ZV=class extends B{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new Ms(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const r=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:r}),this.mockContextMenuForIPad(r),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){var o;const{columnModel:e}=this;let t=0;const i=this.columnModel.getGroupRowsHeight().reduce((s,a)=>s+a,0),r=this.columnModel.getColumnHeaderRowHeight();if((o=this.filterManager)!=null&&o.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=r,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.visibleColsService.getAllCols().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,r=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(r,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case N.LEFT:t=2;case N.RIGHT:{Y(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case N.UP:t=0;case N.DOWN:{Y(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(et(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){var n;if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:r}=e??t;(r===this.eGui||r===((n=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:n.getViewportElement()))&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!lo())return;const t=new $n(this.eGui),i=r=>{e(void 0,r.touchStart,r.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}},KC=class extends B{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=Tt(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),r=this.visibleColsService.getDisplayedColumnsRightWidth();let n;e?n=t+i+r:(n=t,this.addSpacer&&(this.gos.get("enableRtl")?i:r)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.scrollVisibleService.getScrollbarWidth())),this.callback(n)}},jV=class extends B{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function cM(e){const{isFromHeader:t,fromLeft:i,xPosition:r,fromEnter:n,fakeEvent:o,pinned:s,gos:a,columnModel:l,columnMoveService:u,visibleColsService:h}=e;let{allMovingColumns:c}=e;if(t){const b=[];c.forEach(w=>{var D;let x=null,R=w.getParent();for(;R!=null&&R.getDisplayedLeafColumns().length===1;)x=R,R=R.getParent();x!=null?(!!((D=x.getColGroupDef())!=null&&D.marryChildren)?x.getProvidedColumnGroup().getLeafColumns():x.getLeafColumns()).forEach(P=>{b.includes(P)||b.push(P)}):b.includes(w)||b.push(w)}),c=b}const d=c.slice();l.sortColsLikeCols(d);const f=tB({movingCols:d,draggingRight:i,xPosition:r,pinned:s,gos:a,columnModel:l,visibleColsService:h}),p=QV(d,l);if(f.length===0)return;const g=f[0];let v=p!==null&&!n;if(t&&(v=p!==null),v&&!o&&(!i&&g>=p||i&&g<=p))return;const m=h.getAllCols(),y=[];let C=null;for(let b=0;b<f.length;b++){const w=f[b],x=u.getProposedColumnOrder(d,w);if(!u.doesOrderPassRules(x))continue;const R=x.filter(T=>m.includes(T));if(C===null)C=R;else if(!ao(R,C))break;const D=JV(x);y.push({move:w,fragCount:D})}if(y.length===0)return;y.sort((b,w)=>b.fragCount-w.fragCount);const S=y[0].move;if(!(S>l.getCols().length-c.length))return{columns:c,toIndex:S}}function YC(e){const{columns:t,toIndex:i}=cM(e)||{},{finished:r,columnMoveService:n}=e;return!t||i==null?null:(n.moveColumns(t,i,"uiColumnMoved",r),r?null:{columns:t,toIndex:i})}function QV(e,t){const i=t.getCols(),r=GO(e.map(l=>i.indexOf(l))),n=r[0];return Ee(r)-n!==r.length-1?null:n}function JV(e){function t(r){const n=[];let o=r.getOriginalParent();for(;o!=null;)n.push(o),o=o.getOriginalParent();return n}let i=0;for(let r=0;r<e.length-1;r++){let n=t(e[r]),o=t(e[r+1]);[n,o]=n.length>o.length?[n,o]:[o,n],n.forEach(s=>{o.indexOf(s)===-1&&i++})}return i}function eB(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function tB(e){const{movingCols:t,draggingRight:i,xPosition:r,pinned:n,gos:o,columnModel:s,visibleColsService:a}=e;if(o.get("suppressMovableColumns")||t.some(C=>C.getColDef().suppressMovable))return[];const u=eB(a,n),h=s.getCols(),c=u.filter(C=>ls(t,C)),d=u.filter(C=>!ls(t,C)),f=h.filter(C=>!ls(t,C));let p=0,g=r;if(i){let C=0;c.forEach(S=>C+=S.getActualWidth()),g-=C}if(g>0){for(let C=0;C<d.length;C++){const S=d[C];if(g-=S.getActualWidth(),g<0)break;p++}i&&p++}let v;if(p>0){const C=d[p-1];v=f.indexOf(C)+1}else v=f.indexOf(d[0]),v===-1&&(v=0);const m=[v],y=(C,S)=>C-S;if(i){let C=v+1;const S=h.length-1;for(;C<=S;)m.push(C),C++;m.sort(y)}else{let C=v;const S=h.length-1;let b=h[C];for(;C<=S&&u.indexOf(b)<0;)C++,m.push(C),b=h[C];C=v-1;const w=0;for(;C>=w;)m.push(C),C--;m.sort(y).reverse()}return m}function Pd(e){var u;const{pinned:t,fromKeyboard:i,gos:r,ctrlsService:n,useHeaderRow:o,skipScrollPadding:s}=e;let a=(u=n.getHeaderRowContainerCtrl(t))==null?void 0:u.getViewportElement(),{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),r.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!s&&(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function Ra(e,t){for(const i of e)i.setMoving(t,"uiColumnMoved")}var _0=7,Rm=100,Gh=Rm/2,iB=5,rB=100,nB=class extends B{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!Y(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){var t;const e=((t=this.lastDraggingEvent)==null?void 0:t.dragItem.columns)??[];for(const i of e){const r=i.getPinned();if(i.getColDef().lockPinned){if(r==this.pinned)return"move";continue}if(r===this.pinned||!this.pinned)return"move";if(!r&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const r=e.dragItem.visibleState,n=(t||[]).filter(o=>r[o.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,r=!1){const n=this.gos.get("suppressMoveWhenColumnDragging");if(r&&!n){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!r&&Fe(e.hDirection))return;const{pinned:o,gos:s,ctrlsService:a}=this,l=Pd({x:e.x,pinned:o,gos:s,ctrlsService:a});t||this.checkCenterForScrolling(l),n?this.handleColumnDragWhileSuppressingMovement(e,t,i,l,r):this.handleColumnDragWhileAllowingMovement(e,t,i,l,r)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const r=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColsVisible(r,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,r,n){const o=this.getAllMovingColumns(e,!0);if(n){const s=this.isAttemptingToPin(o);s&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,s)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:i,fromLeft:a})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,r)}}handleColumnDragWhileAllowingMovement(e,t,i,r,n){const o=this.getAllMovingColumns(e),s=this.normaliseDirection(e.hDirection)===1,a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:r,fromLeft:s,fromEnter:t,fakeEvent:i}),u=YC({...l,finished:n});u&&(this.lastMovedInfo=u)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let r=null;t?(r=i.columnsInSplit,r||(r=i.columns)):r=i.columns;const n=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return r?r.filter(n):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:r,fromLeft:n,fromEnter:o,fakeEvent:s}=e,{pinned:a,gos:l,columnModel:u,columnMoveService:h,visibleColsService:c}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:r,pinned:a,fromEnter:o,fakeEvent:s,gos:l,columnModel:u,columnMoveService:h,visibleColsService:c}}findFirstAndLastMovingColumns(e){const t=e.length;let i,r;for(let n=0;n<=t;n++){if(!i){const o=e[n];o.getLeft()!=null&&(i=o)}if(!r){const o=e[t-1-n];o.getLeft()!=null&&(r=o)}if(i&&r)break}return{firstMovingCol:i,lastMovingCol:r}}highlightHoveredColumn(e,t){var h;const{gos:i,columnModel:r}=this,n=i.get("enableRtl"),o=r.getCols().filter(c=>c.isVisible()&&c.getPinned()===this.pinned);let s=null,a=null,l=null;for(const c of o){if(a=c.getActualWidth(),s=this.getNormalisedColumnLeft(c,0,n),s!=null){const d=s+a;if(s<=t&&d>=t){l=c;break}}s=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let c=o.length-1;c>=0;c--){const d=o[c],f=o[c].getParent();if(!f){l=d;break}const p=f==null?void 0:f.getDisplayedLeafColumns();if(p.length){l=Ee(p);break}}if(!l)return;s=this.getNormalisedColumnLeft(l,0,n),a=l.getActualWidth()}if(((h=this.lastHighlightedColumn)==null?void 0:h.column)!==l&&this.clearHighlighted(),l==null||s==null||a==null)return;let u;t-s<a/2!==n?u=0:u=1,l.setHighlighted(u),this.lastHighlightedColumn={column:l,position:u}}getNormalisedXPositionInfo(e,t){const{gos:i,visibleColsService:r}=this,n=i.get("enableRtl"),{firstMovingCol:o,column:s,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!s||a==null)return;const l=r.getAllCols(),u=l.indexOf(o),h=l.indexOf(s),c=a===0!==n,d=u<h||u===h&&!c;let f=0;if(c?d&&(f-=1):d||(f+=1),h+f===u)return;const p=l[h+f];if(!p)return;const g=this.getNormalisedColumnLeft(p,20,n);return{fromLeft:d,xPosition:g}}getColumnMoveAndTargetInfo(e,t,i){const r=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=this.findFirstAndLastMovingColumns(e);if(!n||!o||r.column||!t)return{firstMovingCol:n,...r};const a=this.getPinDirection()==="left";return{firstMovingCol:n,position:a?1:0,column:a!==i?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){const{gos:r,ctrlsService:n}=this,o=e.getLeft();if(o==null)return null;const s=e.getActualWidth();return Pd({x:i?o+s-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:r,ctrlsService:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>_0;return t&&i||e.some(r=>r.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:r,fakeEvent:n,fromLeft:o}=e,s=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:r,fakeEvent:n}),{columns:a,toIndex:l}=cM(s)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),r=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+Gh,this.needToMoveLeft=e>r-Gh):(this.needToMoveLeft=e<i+Gh,this.needToMoveRight=e>r-Gh),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),rB),(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.getIconName()))}moveInterval(){var r,n;let e;this.intervalCount++,e=10+this.intervalCount*iB,e>Rm&&(e=Rm);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=_0+1)return;if((r=this.dragAndDropService.getDragAndDropImageComponent())==null||r.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const o=(n=this.lastDraggingEvent)==null?void 0:n.dragItem.columns;this.attemptToPinColumns(o,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){const r=(e||[]).filter(n=>!n.getColDef().lockPinned);return r.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(r,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),r.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},oB=class extends B{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new nB(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new jV(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},sB=class extends B{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,r,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=r,this.ctrl=n}postConstruct(){const e=[];let t,i;const r=()=>{if(Je(this.eResize,t),!t)return;const s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(s),i){const a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);const u=new $n(this.eResize);u.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),u.removeEventListener("doubleTap",l),u.destroy()})}},n=()=>{e.forEach(s=>s()),e.length=0},o=()=>{const s=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(s!==t||a!==i)&&(t=s,i=a,n(),r())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:r,resizeStartWidth:n}=this,o=this.normaliseResizeAmount(t),s=n+o,a=[{key:i,newWidth:s}];if(this.column.getPinned()){const l=this.pinnedWidthService.getPinnedLeftWidth(),u=this.pinnedWidthService.getPinnedRightWidth(),h=ch(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+u+(o-r)>h)return}this.lastResizeAmount=o,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",r=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):r&&(t*=-1),t}},aB=class extends B{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(et(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new LC),this.cbSelectAll.addCssClass("ag-header-select-all"),hi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),r=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${r} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return SC(this.gos)?!0:(U(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return it(this.gos)||fn(this.gos)?!0:(U(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let r="uiSelectAll";i?r="uiSelectAllCurrentPage":t&&(r="uiSelectAllFiltered");const n={source:r,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){const e=this.gos.get("rowSelection"),t=typeof e=="object"&&yd(e)&&uh(this.column),i=this.column.getColDef().headerCheckboxSelection;let r=!1;return t?r=!0:typeof i=="function"?r=i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):r=!!i,r&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},lB=class extends Mf{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,r,n){this.comp=e,n=hh(this,this.beans.context,n),this.setGui(t,n),this.updateState(),this.setupWidth(n),this.setupMovingCss(n),this.setupMenuClass(n),this.setupSortableClass(n),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:r,checkMeasuringCallback:s=>this.setRefreshFunction("measuring",s),compBean:n}),this.addColumnHoverListener(n),this.setupFilterClass(n),this.setupClassesFromColDef(),this.setupTooltip(n),this.addActiveHeaderMouseListeners(n),this.setupSelectAll(n),this.setupUserComp(n),this.refreshAria(),this.resizeFeature=n.createManagedBean(new sB(this.getPinned(),this.column,i,e,this)),n.createManagedBean(new zC([this.column],t)),n.createManagedBean(new HC(this.column,t,this.beans)),n.createManagedBean(new Ms(t,{shouldStopEventPropagation:s=>this.shouldStopEventPropagation(s),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(n),n.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(n)),n.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(n)}),n.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const o=()=>this.checkDisplayName(n);n.addManagedEventListeners({columnValueChanged:o,columnRowGroupChanged:o,columnPivotChanged:o,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),n.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),r=this.column.getMinWidth(),n=this.column.getMaxWidth(),o=Math.min(Math.max(i+e,r),n);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:o}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:i,column:r,ctrlsService:n}=this,{gos:o,columnModel:s,columnMoveService:a,visibleColsService:l}=i,u=this.getPinned(),h=t.getBoundingClientRect().left,c=r.getActualWidth(),d=o.get("enableRtl"),p=Pd({x:e===0!==d?h-20:h+c+20,pinned:u,fromKeyboard:!0,gos:o,ctrlsService:n}),g=this.focusService.getFocusedHeader();YC({allMovingColumns:[r],isFromHeader:!0,fromLeft:e===1,xPosition:p,pinned:u,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:s,columnMoveService:a,visibleColsService:l,finished:!0}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&g&&this.restoreFocus(g)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:i=>{this.menuService.showColumnMenu({column:this.column,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:i=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:i,positionBy:"mouse"})},showFilter:i=>{this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"columnFilter",positionBy:"button"})},progressSort:i=>{this.beans.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,r)=>{this.beans.sortController.setSortForColumn(this.column,i,!!r,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(i,r)=>{this.setupTooltip(e,i,r)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new aB(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===N.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===N.ENTER&&this.onEnterKeyDown(e),e.key===N.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();!i||!(i instanceof Sm)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const r=this.gos.get("tooltipShowMode")==="whenTruncated",n=this.eGui,o=this.column.getColDef();!i&&r&&!o.headerComponent&&(i=()=>{const l=n.querySelector(".ag-header-cell-text");return l?l.scrollWidth>l.clientWidth:!0});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>n,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:i},a=e.createManagedBean(new Xa(s));this.setRefreshFunction("tooltip",()=>a.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=iM(t,this.gos,this.column,null),r=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(n=>{r.has(n)?r.delete(n):this.comp.addOrRemoveCssClass(n,!0)}),r.forEach(n=>this.comp.addOrRemoveCssClass(n,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:r,dragAndDropService:n,gos:o}=this,{columnModel:s}=i;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:r,onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),Ra([t],!0)},onDragStopped:()=>Ra([t],!1),onDragCancelled:()=>Ra([t],!1),onGridEnter:u=>{var h;if(a){const c=((h=u==null?void 0:u.columns)==null?void 0:h.filter(d=>!d.getColDef().lockVisible))||[];s.setColsVisible(c,!0,"uiColumnMoved")}},onGridExit:u=>{var h;if(a){const c=((h=u==null?void 0:u.columns)==null?void 0:h.filter(d=>!d.getColDef().lockVisible))||[];s.setColsVisible(c,!1,"uiColumnMoved")}}};n.addDragSource(l,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const i=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:r}=this,n=this.beans.columnModel.getGroupRowsHeight(),o=n.reduce((c,d)=>c+=d,0)===0;if(i.addOrRemoveCssClass("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",s>0);const{columnModel:l}=r,u=l.getColumnHeaderRowHeight();if(s===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${u}px`);return}i.addOrRemoveCssClass("ag-header-span-total",a);let h=0;for(let c=0;c<s;c++)h+=n[n.length-1-c];e.style.setProperty("top",`${-h}px`),e.style.setProperty("height",`${u+h}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(gG(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(et(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),r=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:r})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof Sm?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},uB=class extends B{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,r){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=r}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(n=>{n.getColDef().suppressAutoSize||i.push(n.getColId())}),i.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const r=this.normaliseDragChange(t),n=this.resizeStartWidth+r;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),r=this.getSizeRatiosOfColumns(t,i),n={columnsToResize:t,resizeStartWidth:i,resizeRatios:r};let o=null;if(e&&(o=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),o){const s=o.getDisplayedLeafColumns(),a=n.groupAfterColumns=s.filter(u=>u.isResizable()),l=n.groupAfterStartWidth=this.getInitialSizeOfColumns(a);n.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else n.groupAfterColumns=void 0,n.groupAfterStartWidth=void 0,n.groupAfterRatios=void 0;return n}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:r,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:s}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=r,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=s}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const r={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(r,e,t,i)}resizeColumns(e,t,i,r=!0){const{columnsToResize:n,resizeStartWidth:o,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:u}=e,h=[];if(h.push({columns:n,ratios:s,width:t}),a){const c=t-o;h.push({columns:a,ratios:u,width:l-c})}this.columnSizeService.resizeColumnSets({resizeSets:h,finished:r,source:i}),r&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},hB=class extends B{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},cB=class extends Mf{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const r=this.getGui();this.setDragSource(r)}},this.column=e}setComp(e,t,i,r,n){this.comp=e,n=hh(this,this.beans.context,n),this.setGui(t,n),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(n),this.setupAutoHeight({wrapperElement:r,compBean:n}),this.setupUserComp(n),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const o=this.getParentRowCtrl().getPinned(),s=this.column.getProvidedColumnGroup().getLeafColumns();n.createManagedBean(new zC(s,t)),n.createManagedBean(new HC(this.column,t,this.beans)),n.createManagedBean(new hB(e,this.column)),this.resizeFeature=n.createManagedBean(new uB(e,i,o,this.column)),n.createManagedBean(new Ms(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,s),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,r=Ee(t)===e;if(!i&&!r)return;const n=e.getHighlighted(),o=!!this.getParentRowCtrl().findHeaderCellCtrl(l=>l.getColumnGroupChild().isMoving());let s=!1,a=!1;if(o){const l=this.beans.gos.get("enableRtl"),u=n===1,h=n===0;i&&(l?a=u:s=h),r&&(l?s=h:a=u)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",s),this.comp.addOrRemoveCssClass("ag-header-highlight-after",a)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:r,ctrlsService:n}=this,{gos:o,columnModel:s,columnMoveService:a,visibleColsService:l}=t,u=o.get("enableRtl"),h=e===0,c=this.getPinned(),d=i.getBoundingClientRect(),f=d.left,p=d.width,g=Pd({x:h!==u?f-20:f+p+20,pinned:c,fromKeyboard:!0,gos:o,ctrlsService:n}),v=r.getGroupId(),m=this.focusService.getFocusedHeader();YC({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:g,pinned:c,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:s,columnMoveService:a,visibleColsService:l,finished:!0});const y=r.getDisplayedLeafColumns(),C=h?y[0]:Ee(y);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(C,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&m&&this.restoreFocus(v,r,m)}restoreFocus(e,t,i){const r=t.getLeafColumns();if(!r.length)return;const n=r[0].getParent();if(!n)return;const o=this.findGroupWidthId(n,e);o&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:o}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:r=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),r,"gridInitializing")},setTooltip:(r,n)=>{this.setupTooltip(e,r,n)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),r=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:r})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const r=this.column.getColGroupDef(),n=this.gos.get("tooltipShowMode")==="whenTruncated",o=this.eGui;!i&&n&&!(r!=null&&r.headerGroupComponent)&&(i=()=>{const a=o.querySelector(".ag-header-group-text");return a?a.scrollWidth>a.clientWidth:!0});const s={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(r&&r.headerTooltip),shouldDisplayTooltip:i};r&&(s.getColDef=()=>r),e.createManagedBean(new Xa(s))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=iM(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e!=null&&e.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(e){const i=this.column.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());i.forEach(n=>{e.addManagedListeners(n,{movingChanged:r})}),r()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===N.ENTER){const i=this.column,r=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),r,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:i,displayName:r,gos:n,dragAndDropService:o}=this,{columnModel:s}=t,a=i.getProvidedColumnGroup().getLeafColumns();let l=!n.get("suppressDragLeaveHidesColumns");const u=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:r,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!n.get("suppressDragLeaveHidesColumns"),Ra(a,!0)},onDragStopped:()=>Ra(a,!1),onDragCancelled:()=>Ra(a,!1),onGridEnter:h=>{if(l){const{columns:c=[],visibleState:d}=h??{},f=c.filter(p=>!p.getColDef().lockVisible&&(!d||d[p.getColId()]));s.setColsVisible(f,!0,"uiColumnMoved")}},onGridExit:h=>{var c;if(l){const d=((c=h==null?void 0:h.columns)==null?void 0:c.filter(f=>!f.getColDef().lockVisible))||[];s.setColsVisible(d,!1,"uiColumnMoved")}}};o.addDragSource(u,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(s=>i[s.getId()]=s.isVisible());const r=[];this.beans.visibleColsService.getAllCols().forEach(s=>{t.indexOf(s)>=0&&(r.push(s),Xt(t,s))}),t.forEach(s=>r.push(s));const n=[],o=e.getLeafColumns();for(const s of r)o.indexOf(s)!==-1&&n.push(s);return{columns:r,columnsInSplit:n,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},dB=0,Ip=class extends B{constructor(e,t,i){super(),this.instanceId=dB++,this.rowIndex=e,this.pinned=t,this.type=i;const r=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${r}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=Tt(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,i=!0){this.comp=e,t=hh(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return $c(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=Tt(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,i=[],r=e.getGroupRowsHeight(),n=e.getColumnHeaderRowHeight();i.push(...r),i.push(n),t!=null&&t.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let o=0;for(let a=0;a<this.rowIndex;a++)o+=i[a];const s=i[this.rowIndex];return{topOffset:o,rowHeight:s}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const r of t)this.recycleAndCreateHeaderCtrls(r,e);const i=r=>{const{focusService:n,visibleColsService:o}=this.beans;return n.isHeaderWrapperFocused(r)?o.isVisible(r.getColumnGroupChild()):!1};if(e)for(const[r,n]of e)i(n)?this.headerCellCtrls.set(r,n):this.destroyBean(n);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e;return Array.from(((e=this.headerCellCtrls)==null?void 0:e.values())??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const i=e.getUniqueId();let r;if(t&&(r=t.get(i),t.delete(i)),r&&r.getColumnGroupChild()!=e&&(this.destroyBean(r),r=void 0),r==null)switch(this.type){case"filter":{r=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":r=this.createBean(new cB(e,this.beans,this));break;default:r=this.createBean(new lB(e,this.beans,this));break}this.headerCellCtrls.set(i,r)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach(r=>{const n=i.getHeadersToRender(r,t);e=e.concat(n)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return typeof e=="function"?i=t.find(e):i=t.find(r=>r.getColumnGroupChild()==e),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);return i?i.focus(t):!1}destroy(){var e;(e=this.headerCellCtrls)==null||e.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}},fB=class extends B{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});const r=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(r,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const t=new La,i=this.focusService.getFocusHeaderToUseAfterRefresh(),r=()=>{const a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){const u=this.createBean(new Ip(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(u)}},n=()=>{const a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new Ip(a,this.pinned,"column")))},o=()=>{var u;this.includeFloatingFilter=!!((u=this.filterManager)!=null&&u.hasFloatingFilters())&&!this.hidden;const a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}const l=t.next();if(this.filtersRowCtrl){const h=this.filtersRowCtrl.getRowIndex()!==l;(!e||h)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Ip(l,this.pinned,"filter")))};r(),n(),o();const s=this.getAllCtrls();this.comp.setCtrls(s),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){var t;if(Qn(e))return(t=this.columnsRowCtrl)==null?void 0:t.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const r=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(r)return r}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,i):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new oB(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){var t;const e=((t=this.filterManager)==null?void 0:t.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new KC(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const i=()=>{const r=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(r==null)return;const n=r==0,o=this.hidden!==n,s=this.gos.get("enableRtl"),a=this.scrollVisibleService.getScrollbarWidth(),u=this.scrollVisibleService.isVerticalScrollShowing()&&(s&&e||!s&&t)?r+a:r;this.comp.setPinnedContainerWidth(`${u}px`),this.comp.setDisplayed(!n),o&&(this.hidden=n,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},pB='<div class="ag-pinned-left-header" role="rowgroup"></div>',gB='<div class="ag-pinned-right-header" role="rowgroup"></div>',vB=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,Lp=class extends ke{constructor(e){super(),this.eCenterContainer=J,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:i=>this.setDisplayed(i),setCtrls:i=>this.setCtrls(i),setCenterWidth:i=>this.eCenterContainer.style.width=i,setViewportScrollLeft:i=>this.getGui().scrollLeft=i,setPinnedContainerWidth:i=>{const r=this.getGui();r.style.width=i,r.style.maxWidth=i,r.style.minWidth=i}};this.createManagedBean(new fB(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",t=this.pinned=="right",i=e?pB:t?gB:vB;this.setTemplate(i),this.eRowContainer=this.eCenterContainer!==J?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let i;const r=n=>{const o=n.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),i&&RP(this.eRowContainer,o,i),i=o};e.forEach(n=>{const o=n.instanceId,s=t[o];delete t[o];const a=s||this.createBean(new XV(n));this.headerRowComps[o]=a,this.rowCompsList.push(a),r(a)}),jn(t).forEach(n=>this.destroyRowComp(n))}},mB=class extends ke{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){const e={addOrRemoveCssClass:(r,n)=>this.addOrRemoveCssClass(r,n),setHeightAndMinHeight:r=>{this.getGui().style.height=r,this.getGui().style.minHeight=r}};this.createManagedBean(new ZV).setComp(e,this.getGui(),this.getFocusableElement());const i=r=>{this.createManagedBean(r),this.appendChild(r)};i(new Lp("left")),i(new Lp(null)),i(new Lp("right"))}},yB={selector:"AG-HEADER-ROOT",component:mB},XC=class extends B{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(U(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},CB=class extends ke{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=J,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==N.TAB||e.defaultPrevented||Zr(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=this.focusService.focusGridView(Ee(this.visibleColsService.getAllCols()),!0,!1):i=this.focusService.focusNextGridCoreContainer(!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new XC(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,r){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){const n=et(this.gos);n&&!YA(this.gos)&&(this.elToFocusAfter=n)}e.then(n=>{if(this.activePromise!==e){this.activeOverlay!==n&&(this.destroyBean(n),n=null);return}if(this.activePromise=null,!n)return;if(this.activeOverlay!==n&&(this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,r)){const s=n;this.updateListenerDestroyFunc=this.addManagedPropertyListener(r,({currentValue:a})=>{var l;(l=s.refresh)==null||l.call(s,this.gos.addGridCommonParams({...a??{}}))})}const o=this.focusService;i&&o.isGridFocused()&&o.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var r;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),kt(this.eOverlayWrapper),(r=t==null?void 0:t.focus)==null||r.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},SB={selector:"AG-OVERLAY-WRAPPER",component:CB},dM=class extends ke{constructor(e,t){super(),this.direction=t,this.eViewport=J,this.eContainer=J,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",mP()||lo())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=CP(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();DO(()=>nr(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},wB=class extends dM{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=J,this.eRightSpacer=J}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new KC(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,r=this.scrollVisibleService.getScrollbarWidth();i&&(t+=r),tr(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=r);let n=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(n+=r),tr(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=r)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),r=e&&this.scrollVisibleService.getScrollbarWidth()||0,o=i?0:r===0&&t?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),au(this.getGui(),o),au(this.eViewport,o),au(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Dd(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){nr(this.getViewportElement())||this.attemptSettingScrollPosition(e),Td(this.getViewportElement(),e,this.enableRtl)}},bB={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:wB},fM=class extends B{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},xB=class extends dM{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new fM(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,r=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),tr(this.getGui(),r),tr(this.eViewport,r),tr(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),r=this.getScrollPosition(),n=i.scrollTop;r!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!nr(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},RB={selector:"AG-FAKE-VERTICAL-SCROLL",component:xB},Dm=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(Dm||{}),DB=class extends B{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Yt(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Yt(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(Dm)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Yt(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),r=t?Yt(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,r)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(Dm),"Viewport"]){if(this.lastScrollSource[1]===t)continue;const i=this.getViewportForSource(t);Td(i,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const r=Dd(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(r),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!lo()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=MC(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&Rd()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const r=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&Rd()?e=e>0?0:r:e=Math.min(Math.max(e,0),r)),Td(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let r=-1;for(let n=0;n<i;n++){const o=this.rowModel.getRow(n);if(typeof e=="function"){if(o&&e(o)){r=n;break}}else if(e===o||e===o.data){r=n;break}}r>=0&&this.ensureIndexVisible(r,t)}ensureIndexVisible(e,t){if(Tt(this.gos,"print"))return;const i=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=i){U("Invalid row index for ensureIndexVisible: "+e);return}const n=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{var h;n||(h=this.paginationService)==null||h.goToPageWithIndex(e);const o=this.ctrlsService.getGridBodyCtrl(),s=o.getStickyTopHeight(),a=o.getStickyBottomHeight(),l=this.rowModel.getRow(e);let u;do{const c=l.rowTop,d=l.rowHeight,f=this.pageBoundsService.getPixelOffset(),p=l.rowTop-f,g=p+l.rowHeight,v=this.getVScrollPosition(),m=this.heightScaler.getDivStretchOffset(),y=v.top+m,C=v.bottom+m,S=C-y,b=this.heightScaler.getScrollPositionForPixel(p),w=this.heightScaler.getScrollPositionForPixel(g-S),x=Math.min((b+w)/2,p),R=y+s>p,D=C-a<g;let T=null;t==="top"?T=b:t==="bottom"?T=w:t==="middle"?T=x:R?T=b-s:D&&(T=w+a),T!==null&&(this.setVerticalScrollPosition(T),this.rowRenderer.redraw({afterScroll:!0})),u=c!==l.rowTop||d!==l.rowHeight}while(u);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getCol(e);if(!i||i.isPinned()||!this.visibleColsService.isColDisplayed(i))return;const r=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{r!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(r),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:r}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl;let a=(s?i:r)||n,l=s?r:i;t!=="auto"&&(a=t==="start",l=t==="end");const u=t==="middle";if(a||l||u){const{colLeft:h,colMiddle:c,colRight:d}=this.getColumnBounds(e);return u?c-o/2:a?s?d:h:s?h-o:d-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:r,colRight:n}=this.getColumnBounds(e),o=this.enableRtl,s=o?t>n:i<n,a=o?i<r:t>r;return{columnBeforeStart:s,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),r=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,s=t?i-n:n,a=s+r*o,l=s+r/2*o;return{colLeft:s,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,r=e+t;return{start:i,end:r,width:e}}},TB=class extends B{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=ch(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50);const r=this.gos.getCallback("processUnpinnedColumns");i.length&&(r&&(i=r({columns:i,viewportWidth:t})),this.columnModel.setColsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),r=t+i;if(r<e)return[];const n=[...this.visibleColsService.getLeftCols()],o=[...this.visibleColsService.getRightCols()];let s=0,a=0;const l=0,u=[];let h=r-l-e;for(;(a<n.length||s<o.length)&&h>0;){if(s<o.length){const c=o[s++];h-=c.getActualWidth(),u.push(c)}if(a<n.length&&h>0){const c=n[a++];h-=c.getActualWidth(),u.push(c)}}return u}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=MC(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},_B=class extends B{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Mr(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),Mr(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},AB=class extends ke{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[kC]),this.eCheckbox=J}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=TC(e,t),[r,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(r,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${o} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:r=>Ea(r),click:r=>{Ea(r);const n=wC(this.gos)==="filteredDescendants",o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,n)?this.onClicked(!0,n,r||{})===0&&this.onClicked(!1,n,r):o?this.onClicked(!1,n,r):this.onClicked(!0,n,r||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),CC(this.gos)||typeof this.getIsVisible()=="function"){const r=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:r}),this.addManagedListeners(this.rowNode,{dataChanged:r,cellChanged:r}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&it(this.gos)}showOrHideSelect(){var n,o,s;let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if(typeof t=="function"){const a=(n=this.overrides)==null?void 0:n.callbackParams;if(!this.column)e=t({...a,node:this.rowNode,data:this.rowNode.data});else{const l=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...a,...l})}}else e=t??!1;const i=this.gos.get("rowSelection");if(i&&typeof i!="string"?!MO(i):(o=this.column)==null?void 0:o.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if((s=this.overrides)!=null&&s.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){var t,i;if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&typeof e!="string"?Fa(e):(i=(t=this.column)==null?void 0:t.getColDef())==null?void 0:i.checkboxSelection}},PB=class extends ke{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(vi("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const r=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",r),e.dataTransfer.setData("text/plain",r)}catch{}};if(t){const r=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(r)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},MB=class extends B{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,r=>this.cellComp.addOrRemoveCssClass(r,!0),r=>this.cellComp.addOrRemoveCssClass(r,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),r=e.cellStyle;t=r(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},FB=class extends B{constructor(e,t,i,r,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=r,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case N.ENTER:this.onEnterKeyDown(e);break;case N.F2:this.onF2KeyDown(e);break;case N.ESCAPE:this.onEscapeKeyDown(e);break;case N.TAB:this.onTabKeyDown(e);break;case N.BACKSPACE:case N.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case N.DOWN:case N.UP:case N.RIGHT:case N.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:r,rowNode:n}=this,{gos:o,rangeService:s,eventService:a}=r;if(!i.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),tV(e,o.get("enableCellEditingOnBackspace"))){if(s&&Mr(o))s.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const l=i.getColumn(),u=this.beans.valueService.getDeleteValue(l,n);n.setDataValue(l,u,"cellClear")}}else i.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?N.UP:N.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(N.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(N.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const r=e.key;r===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(r,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&vd(t)){const i=this.rowNode.isSelected(),r=!i,n=wC(t)==="filteredDescendants",o=this.rowNode.setSelectedParams({newValue:r,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});i===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},EB=class extends B{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!Zr(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:i,gos:r}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);const s=this.column.getColDef();s.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{s.onCellClicked(o)})},0),(r.get("singleClickEdit")||s.singleClickEdit)&&!r.get("suppressClickEdit")&&!(e.shiftKey&&(i==null?void 0:i.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!lo()||tP("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:r}=this,{eventService:n,frameworkOverrides:o,gos:s}=i,a=t.getColDef(),l=r.createEvent(e,"cellDoubleClicked");n.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!s.get("singleClickEdit")&&!s.get("suppressClickEdit")&&r.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:r}=e,n=e.target,{cellCtrl:o,beans:s}=this,{eventService:a,rangeService:l,focusService:u,gos:h}=s;if(this.isRightClickInExistingRange(e))return;const c=l&&l.getCellRanges().length!=0;if(!r||!c){const f=h.get("enableCellTextSelection")&&e.defaultPrevented,p=(Fr()||f)&&!o.isEditing()&&!PC(n);o.focusCell(p)}if(r&&c&&!u.isCellFocused(o.getCellPosition())){e.preventDefault();const d=u.getFocusedCell();if(d){const{column:f,rowIndex:p,rowPinned:g}=d,v=s.rowRenderer.getRowByPosition({rowIndex:p,rowPinned:g}),m=v==null?void 0:v.getCellCtrl(f);m!=null&&m.isEditing()&&m.stopEditing(),u.setFocusedCell({column:f,rowIndex:p,rowPinned:g,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(l){const d=this.cellCtrl.getCellPosition();if(r)l.extendLatestRangeToCell(d);else{const f=t||i;l.setRangeToCell(d,f)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),r=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&r)return!0}return!1}containsWidget(e){return xa(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),r=t.contains(e.relatedTarget);return i&&r}destroy(){super.destroy()}},IB=class extends B{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();ao(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column;const r=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),!(!i||Fe(i)||r!==i.getPinned()));n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Ee(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.visibleColsService.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=as(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},pl="ag-cell-range-selected",LB="ag-cell-range-chart",kB="ag-cell-range-single-cell",OB="ag-cell-range-chart-category",GB="ag-cell-range-handle",NB="ag-cell-range-top",VB="ag-cell-range-right",BB="ag-cell-range-bottom",HB="ag-cell-range-left",zB=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(pl,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${pl}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${pl}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${pl}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${pl}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(LB,this.hasChartRange),bd(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(kB,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,r=!t&&e.right,n=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass(NB,i),this.cellComp.addOrRemoveCssClass(VB,r),this.cellComp.addOrRemoveCssClass(BB,n),this.cellComp.addOrRemoveCssClass(HB,o)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>ls([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,r=!1,n=!1;const o=this.cellCtrl.getCellPosition().column,s=this.beans.visibleColsService;let a,l;e?(a=s.getColAfter(o),l=s.getColBefore(o)):(a=s.getColBefore(o),l=s.getColAfter(o));const u=this.rangeService.getCellRanges().filter(h=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),h));a||(n=!0),l||(i=!0);for(let h=0;h<u.length&&!(t&&i&&r&&n);h++){const c=u[h],d=this.rangeService.getRangeStartRow(c),f=this.rangeService.getRangeEndRow(c);!t&&this.beans.rowPositionUtils.sameRow(d,this.cellCtrl.getCellPosition())&&(t=!0),!r&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(r=!0),!n&&a&&c.columns.indexOf(a)<0&&(n=!0),!i&&l&&c.columns.indexOf(l)<0&&(i=!0)}return{top:t,right:i,bottom:r,left:n}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(GB,!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const r=Ee(t),n=this.cellCtrl.getCellPosition(),o=f0(e)&&!this.cellCtrl.isSuppressFillHandle(),s=LO(e);let a=i===1&&!this.cellCtrl.isEditing()&&(o||s);if(this.hasChartRange){const u=t[0].type===1&&this.rangeService.isCellInSpecificRange(n,t[0]);this.cellComp.addOrRemoveCssClass(OB,u),a=r.type===0}return a&&r.endRow!=null&&this.rangeService.isContiguousRange(r)&&this.rangeService.isBottomRightCell(r,n)}addSelectionHandle(){const e=Ee(this.rangeService.getCellRanges()).type,i=f0(this.beans.gos)&&Fe(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},WB="ag-cell",UB="ag-cell-auto-height",$B="ag-cell-normal-height",KB="ag-cell-focus",YB="ag-cell-first-right-pinned",XB="ag-cell-last-left-pinned",qB="ag-cell-not-inline-editing",ZB="ag-column-hover",jB="ag-cell-wrap-text",QB=0,pM=class Tm extends B{constructor(t,i,r,n){super(),this.column=t,this.rowNode=i,this.beans=r,this.rowCtrl=n,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+QB++,this.colIdSanitised=_r(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new IB(this,this.beans),this.cellCustomStyleFeature=new MB(this,this.beans),this.cellMouseListenerFeature=new EB(this,this.beans,this.column),this.cellKeyboardListenerFeature=new FB(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&Mr(this.beans.gos)&&(this.cellRangeFeature=new zB(this.beans,this))}removeFeatures(){const t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,i){const r=()=>{const s=this.column.getColDef(),a=this.rowNode.data;if(s.tooltipField&&Y(a))return su(a,s.tooltipField,this.column.isTooltipFieldContainsDots());const l=s.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},n=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&n&&!this.isCellRenderer()&&(i=()=>{const s=this.getGui(),a=s.children.length===0?s:s.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});const o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:r,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new Xa(o,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,i,r,n,o,s){var a,l,u,h;this.cellComp=t,this.eGui=i,this.printLayout=n,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(r,s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(a=this.cellPositionFeature)==null||a.setComp(i),(l=this.cellCustomStyleFeature)==null||l.setComp(t),(u=this.tooltipFeature)==null||u.refreshToolTip(),(h=this.cellKeyboardListenerFeature)==null||h.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(c=>c()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,i){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const r=t.parentElement,n=Zn(this.beans.gos,this.rowNode).height,o=l=>{if(this.editing||!this.isAlive()||!i.isAlive())return;const{paddingTop:u,paddingBottom:h,borderBottomWidth:c,borderTopWidth:d}=Ps(r),f=u+h+c+d,g=t.offsetHeight+f;if(l<5){const m=st(this.beans.gos),y=!m||!m.contains(t),C=g==0;if(y||C){window.setTimeout(()=>o(l+1),0);return}}const v=Math.max(g,n);this.rowNode.setRowAutoHeight(v,this.column)},s=()=>o(0);s();const a=this.beans.resizeObserverService.observeResize(t,s);i.addDestroyFunc(()=>{a(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){var d;const{beans:i,column:r,rowNode:n,cellRangeFeature:o,cellComp:s}=this,{userComponentFactory:a,animationFrameService:l}=i,u=this.getValueToDisplay();let h;if(n.stub&&((d=n.groupData)==null?void 0:d[this.column.getId()])==null){const f=this.createCellRendererParams();h=a.getLoadingCellRendererDetails(r.getColDef(),f)}else if(this.isCellRenderer()){const f=this.createCellRendererParams();h=a.getCellRendererDetails(r.getColDef(),f)}s.setRenderDetails(h,u,t),l.requestAnimationFrame(()=>o==null?void 0:o.refreshHandle())}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){const{rowSelection:i}=this.beans.gridOptions;return t.checkboxSelection||uh(this.column)&&i&&typeof i!="string"&&Fa(i)}refreshShouldDestroy(){const t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),r=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),n=this.includeDndSource!=this.isIncludeControl(t.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return i||r||n||o}startEditing(t=null,i=!1,r=null){const{editService:n}=this.beans;return!this.isCellEditable()||this.editing||!n?!0:this.cellComp?n.startEditing(this,t,i,r):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,r)}),!0)}setEditing(t,i){this.editCompDetails=i,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];const{editService:i}=this.beans;return!this.editing||!i?!1:i.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,r,n,o)=>this.registerRowDragger(i,r,o),setTooltip:(i,r)=>{var n;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,r),(n=this.tooltipFeature)==null||n.refreshToolTip()}})}setFocusOutOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusOutOnEditor(this))}setFocusInOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusInOnEditor(this))}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(t)}refreshCell(t){var h,c,d,f,p;if(this.suppressRefreshCell||this.editing)return;const i=this.column.getColDef(),r=t!=null&&!!t.newData,n=t!=null&&!!t.suppressFlash||!!i.suppressCellFlash,o=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,s=t&&t.forceRefresh||o||r,a=!!this.cellComp,l=this.updateAndFormatValue(a),u=s||l;if(a){if(u){this.showValue(r);const g=(h=this.beans.filterManager)==null?void 0:h.isSuppressFlashingCellsBecauseFiltering();!n&&!g&&(this.beans.gos.get("enableCellChangeFlash")||i.enableCellChangeFlash)&&this.flashCell(),(c=this.cellCustomStyleFeature)==null||c.applyUserStyles(),(d=this.cellCustomStyleFeature)==null||d.applyClassesFromColDef()}(f=this.tooltipFeature)==null||f.refreshToolTip(),(p=this.cellCustomStyleFeature)==null||p.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){var r;(r=this.beans.editService)==null||r.stopEditingAndFocus(this,t,i)}flashCell(t){const i=(t==null?void 0:t.flashDuration)??(t==null?void 0:t.flashDelay),r=(t==null?void 0:t.fadeDuration)??(t==null?void 0:t.fadeDelay);this.animateCell("data-changed",i,r)}animateCell(t,i,r){if(!this.cellComp)return;const{gos:n}=this.beans;if(i||(i=n.get("cellFlashDuration")),i===0)return;Y(r)||(r=n.get("cellFadeDuration"));const o=`ag-cell-${t}`,s=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(o,!0),this.cellComp.addOrRemoveCssClass(s,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.cellComp.addOrRemoveCssClass(s,!0),this.eGui.style.transition=`background-color ${r}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.eGui.style.transition="")},r))},i)})}onFlashCells(t){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const i=this.value,r=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=r:!0}valuesAreEqual(t,i){const r=this.column.getColDef();return r.equals?r.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const i=this.getGui();Ss(this.beans.gos,i,Tm.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>Ss(this.beans.gos,i,Tm.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(t)}onKeyDown(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(t)}onMouseEvent(t,i){var r;(r=this.cellMouseListenerFeature)==null||r.onMouseEvent(t,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)==null||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:i,beans:r}=this;rM(t,i,r.visibleColsService)}refreshAriaColIndex(){const t=this.beans.visibleColsService.getAriaColIndex(this.column);gP(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&Vi(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(YB,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(XB,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&(t!=null&&t.forceBrowserFocus)&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(KB,i),i&&t&&t.forceBrowserFocus){let n=this.cellComp.getFocusableElement();if(this.editing){const o=this.beans.focusService.findFocusableElements(n,null,!0);o.length&&(n=o[0])}n.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}const r=this.beans.gos.get("editType")==="fullRow";!i&&!r&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:qr(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(WB,!0),this.cellComp.addOrRemoveCssClass(qB,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(UB,t),this.cellComp.addOrRemoveCssClass($B,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(ZB,t)}onColDefChanged(){var i;if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(i=this.beans.editService)==null||i.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(jB,t)}dispatchCellContextMenuEvent(t){const i=this.column.getColDef(),r=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(r),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(r)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new AB;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new PB(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,r){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}const n=this.createRowDragComp(t,i,r);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(t,i,r){const n=this.beans.gos.get("pagination"),o=this.beans.gos.get("rowDragManaged"),s=it(this.beans.gos);if(o){if(!s){U("managed row dragging is only allowed in the Client Side Row Model");return}if(n){U("managed row dragging is not possible when doing pagination");return}}const a=new wm(()=>this.value,this.rowNode,this.column,t,i,r);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};pM.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var us=pM,JB=0,gM=class _m extends B{constructor(t,i,r,n,o){var s;super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=t,this.paginationPage=((s=i.paginationService)==null?void 0:s.getCurrentPage())??0,this.useAnimationFrameForCreate=n,this.printLayout=o,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+JB++,this.rowId=_r(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(r),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=_r(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,i){t==="left"?this.leftGui=i:t==="right"?this.rightGui=i:t==="fullWidth"?this.fullWidthGui=i:this.centerGui=i}setComp(t,i,r,n){n=hh(this,this.beans.context,n);const o={rowComp:t,element:i,containerType:r,compBean:n};this.allRowGuis.push(o),this.updateGui(r,o),this.initialiseRowComp(o),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const i=t?"none":"";this.allRowGuis.forEach(r=>r.element.style.display=i)}initialiseRowComp(t){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),vd(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const r=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(o=>r.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&wd(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(r),this.setRowCompRowBusinessKey(r),Ss(i,t.element,_m.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>Ss(i,t.element,_m.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=_r(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:i}=t;this.slideInAnimation[i]&&(c0(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(c0(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(Mr(this.gos)){U("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}const i=this.beans.localeService.getLocaleTextFunc(),r=new wm(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),n=this.createBean(r,this.beans.context);this.rowDragComps.push(n),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(o=>o!==n),this.destroyBean(n,this.beans.context)})}setupFullWidth(t){const i=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const r=this.createFullWidthCompDetails(t.element,i);t.rowComp.showFullWidth(r)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(r=>{var n;return(n=r==null?void 0:r.rowComp)==null?void 0:n.getFullWidthCellRenderer()}):[(i=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(t){const i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),i=!!this.centerGui,r=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&i&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),i=this.isNodeFullWidthCell(),r=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.columnModel.isPivotMode(),s=!!this.rowNode.group&&!this.rowNode.footer&&Tf(this.gos,n);t?this.rowType="FullWidthLoading":r?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,r=null){const n={list:[],map:{}},o=(s,a)=>{n.list.push(a),n.map[s]=a};return i.forEach(s=>{const a=s.getInstanceId();let l=t.map[a];l||(l=new us(s,this.rowNode,this.beans,this)),o(a,l)}),t.list.forEach(s=>{const a=s.getColumn().getInstanceId();if(n.map[a]!=null)return;if(!this.isCellEligibleToBeRemoved(s,r)){o(a,s);return}s.destroy()}),n}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{const r=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(r,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.columnViewportService,i=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const r=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,r);const n=i.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const o=i.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;const s=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(s||a){const u=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(u)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Tt(this.gos,"print")}listenOnDomOrder(t){const i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],i)}setAnimateFlags(t){if(this.isSticky()||!t)return;const i=Y(this.rowNode.oldRowTop),r=this.beans.visibleColsService.isPinningLeft(),n=this.beans.visibleColsService.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=r,this.slideInAnimation.right=n}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=r,this.fadeInAnimation.right=n}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,i=t(this.fullWidthGui,null),r=t(this.centerGui,null),n=t(this.leftGui,"left"),o=t(this.rightGui,"right");return i&&r&&n&&o}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(i=>{this.addRowDraggerToRow(i)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(r=>r.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(r=>{this.setRowCompRowId(r.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(r.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const r=t===0,n=t===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",r),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass("ag-row-group",t),r.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),r.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),wd(r.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:qr(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(i=>i.element.contains(t))}onKeyboardNavigate(t){const i=this.findFullWidthRowGui(t.target);if(!((i?i.element:null)===t.target))return;const o=this.rowNode,s=this.beans.focusService.getFocusedCell(),a={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:(s==null?void 0:s.column)??this.getColumnForFullWidth(i)};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||Zr(t))return;const i=this.allRowGuis.find(l=>l.element.contains(t.target)),r=i?i.element:null,n=r===t.target,o=et(this.gos);let s=!1;r&&o&&(s=r.contains(o)&&o.classList.contains("ag-cell"));let a=null;!n&&!s&&(a=this.beans.focusService.findNextFocusableElement(r,!1,t.shiftKey)),(this.isFullWidth()&&n||!a)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var i;const t=(i=this.allRowGuis.find(r=>nr(r.element)))==null?void 0:i.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){const i=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(r=>{Vi(r.element,"tabindex",i)})}onFullWidthRowFocused(t){var o;const i=this.rowNode,r=t?this.isFullWidth()&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(o=this.centerGui)==null?void 0:o.element;n&&(n.classList.toggle("ag-full-width-focus",r),r&&(t!=null&&t.forceBrowserFocus)&&n.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,i){const r={list:[],map:{}};return t.list.forEach(n=>{n!==i&&(r.list.push(n),r.map[n.getColumn().getInstanceId()]=n)}),r}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){const r=this.createRowEvent(t,i);return r.source=this,r}onRowDblClick(t){Zr(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){const{visibleColsService:i}=this.beans;switch(t==null?void 0:t.containerType){case"center":return i.getCenterCols()[0];case"left":return i.getLeftCols()[0];case"right":return i.getRightCols()[0];default:return i.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=xa(t.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const r=this.findFullWidthRowGui(t.target),n=r==null?void 0:r.element,o=t.target;let s=!0;n&&n.contains(o)&&PC(o)&&(s=!1),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:this.getColumnForFullWidth(r),rowPinned:i.rowPinned,forceBrowserFocus:s})}onRowClick(t){if(Zr(t)||this.lastMouseDownOnDragger)return;const{gos:r}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));const n=t.ctrlKey||t.metaKey,o=t.shiftKey,s=this.rowNode.isSelected(),a=ws(r),l=p0(r),u=kO(r);if(a&&this.rowNode.group||this.isRowSelectionBlocked()||!u&&!s||!l&&s)return;const h=OO(r),c="rowClicked";if(s)h?this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):n?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):u&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:t,source:c});else{const d=h?!1:!n;this.rowNode.setSelectedParams({newValue:!0,clearSelection:d,rangeSelect:o,event:t,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!vd(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const i=()=>{const n=t.clientHeight;if(n!=null&&n>0){const o=()=>{this.rowNode.setRowHeight(n),(it(this.gos)||fn(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(o,0)}},r=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(r),i()}createFullWidthCompDetails(t,i){const{gos:r,rowNode:n}=this,o=r.addGridCommonParams({fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,u,h)=>this.addFullWidthRowDragging(a,l,u,h),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),s=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return s.getFullWidthDetailCellRendererDetails(o);case"FullWidthGroup":return s.getFullWidthGroupCellRendererDetails(o);case"FullWidthLoading":return s.getFullWidthLoadingCellRendererDetails(o);default:return s.getFullWidthCellRendererDetails(o)}}refreshRowTooltip(t,i){if(!this.fullWidthGui)return;const r={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Xa(r,this.beans))}addFullWidthRowDragging(t,i,r="",n){if(!this.isFullWidth())return;const o=new wm(()=>r,this.rowNode,void 0,t,i,n);this.createBean(o,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(o,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const i="ag-row-level-"+t,r="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass(i,!0),n.rowComp.addOrRemoveCssClass(r,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){var i;this.stoppingRowEdit||(i=this.beans.rowEditService)==null||i.stopEditing(this,t)}setInlineEditingCss(){const t=this.editingRow||this.getAllCellCtrls().some(i=>i.isEditing());this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,i=null,r=null){var n;return this.editingRow?!0:((n=this.beans.rowEditService)==null?void 0:n.startEditing(this,t,i,r))??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,r=>r.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){const i=this.getPinnedForContainer(t),r={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(r)}processStylesFromGridOptions(){const t=this.gos.get("rowStyle");if(t&&typeof t=="function"){U("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const i=this.gos.getCallback("getRowStyle");let r;if(i){const n={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};r=i(n)}return r||t?Object.assign({},t,r):this.emptyStyle}onRowSelected(t){const i=!!this.rowNode.isSelected();this.forEachGui(t,r=>{r.rowComp.addOrRemoveCssClass("ag-row-selected",i),bd(r.element,i),r.element.contains(et(this.gos))&&(r===this.centerGui||r===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&!p0(this.gos))return;const r=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(r,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;const{element:i,compBean:r}=t,{rowNode:n,beans:o,gos:s}=this;r.addManagedListeners(i,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),r.addManagedListeners(n,{mouseEnter:()=>{!o.dragService.isDragging()&&!s.get("suppressRowHoverHighlight")&&(i.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{i.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(t){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),r=this.applyPaginationOffset(i.top,!0)-100,n=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(r,t),n)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const i=this.rowNode.rowHeight,r=this.beans.environment.getDefaultRowHeight(),o=$A(this.gos)?Zn(this.gos,this.rowNode).height:void 0,s=o?`${Math.min(r,o)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${i}px`,s&&a.element.style.setProperty("--ag-line-height",s)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&ba(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){const n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=i=>(i.list.forEach(r=>r.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){var i;const t=((i=this.beans.paginationService)==null?void 0:i.getCurrentPage())??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const r=this.beans.pageBoundsService.getPixelOffset();return t+r*(i?1:-1)}setRowTop(t){if(!this.printLayout&&Y(t)){const i=this.applyPaginationOffset(t),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(o)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";const i=this.rowNode;let r;if(this.isSticky())r=i.stickyRowTop;else{const n=this.slideInAnimation[t]?this.roundRowTopToBounds(i.oldRowTop):i.rowTop,o=this.applyPaginationOffset(n);r=i.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return r+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(r=>{r.getColumn()==t&&(i=r)}),i!=null||this.getAllCellCtrls().forEach(r=>{r.getColSpanningList().indexOf(t)>=0&&(i=r)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){var s;const i=this.rowNode.getRowIndexString();if(i===null)return;const r=this.beans.headerNavigationService.getHeaderRowCount()+(((s=this.beans.filterManager)==null?void 0:s.getHeaderRowCount())??0),n=this.rowNode.rowIndex%2===0,o=r+this.rowNode.rowIndex+1;this.forEachGui(t,a=>{a.rowComp.setRowIndex(i),a.rowComp.addOrRemoveCssClass("ag-row-even",n),a.rowComp.addOrRemoveCssClass("ag-row-odd",!n),pP(a.element,o)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};gM.DOM_DATA_KEY_ROW_CTRL="renderedRow";var hs=gM,eH=class extends B{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",tP("touchstart")?"touchstart":"mousedown"].forEach(i=>{const r=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:r})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||Zr(t))return;const i=this.getRowForEvent(t),r=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,r):(r&&r.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!lo())return;const e=new $n(this.element),t=i=>{const r=this.getRowForEvent(i.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,r,n)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=Au(this.gos,t,hs.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,r){const n=i?i.getRowNode():null,o=r?r.getColumn():null;let s=null;if(o){const u=e||t;r.dispatchCellContextMenuEvent(u??null),s=this.valueService.getValue(o,n)}const a=this.ctrlsService.getGridBodyCtrl(),l=r?r.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:o,value:s,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:dm(this.gos,e,us.DOM_DATA_KEY_CELL_CTRL),rowCtrl:dm(this.gos,e,hs.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:r}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):r&&r.isFullWidth()&&this.processFullWidthRowKeyboardEvent(r,e,t))}processCellKeyboardEvent(e,t,i){const r=e.getRowNode(),n=e.getColumn(),o=e.isEditing();!bm(this.gos,i,r,n,o)&&t==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),KP(i)&&e.processCharacter(i)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const r=e.getRowNode(),n=this.focusService.getFocusedCell(),o=n&&n.column;if(!bm(this.gos,i,r,o,!1)){const a=i.key;if(t==="keydown")switch(a){case N.PAGE_HOME:case N.PAGE_END:case N.PAGE_UP:case N.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case N.UP:case N.DOWN:e.onKeyboardNavigate(i);break;case N.TAB:e.onTabKeyDown(i);break}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=eV(e);if(i===N.A)return this.onCtrlAndA(e);if(i===N.C)return this.onCtrlAndC(e);if(i===N.D)return this.onCtrlAndD(e);if(i===N.V)return this.onCtrlAndV(e);if(i===N.X)return this.onCtrlAndX(e);if(i===N.Y)return this.onCtrlAndY();if(i===N.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:r}=this;if(r&&i.isRowsToRender()){const[n,o]=[t.isEmpty("top"),t.isEmpty("bottom")],s=n?null:"top";let a,l;o?(a=null,l=i.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowCount()-1);const u=this.visibleColsService.getAllCols();if(yi(u))return;r.setCellRange({rowStartIndex:0,rowStartPinned:s,rowEndIndex:l,rowEndPinned:a,columnStart:u[0],columnEnd:Ee(u)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){var e;(e=this.undoRedoService)==null||e.redo("ui")}},tH=class extends B{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Je(this.element,t),tr(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},iH=class extends B{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Je(this.element,t),tr(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Nh=e=>e.getTopRowCtrls(),Vh=e=>e.getStickyTopRowCtrls(),Bh=e=>e.getStickyBottomRowCtrls(),Hh=e=>e.getBottomRowCtrls(),zh=e=>e.getCentreRowCtrls(),rH={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:zh},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:zh},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:zh},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:zh},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Nh},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Nh},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Nh},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Nh},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Vh},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Vh},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Vh},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Vh},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Bh},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Bh},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Bh},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Bh},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:Hh},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Hh},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Hh},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:Hh}};function ma(e){return rH[e]}var nH=["topCenter","topLeft","topRight"],oH=["bottomCenter","bottomLeft","bottomRight"],sH=["center","left","right"],aH=["center","left","right","fullWidth"],lH=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],uH=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],hH=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],vM=["stickyTopCenter","stickyTopLeft","stickyTopRight"],mM=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],cH=[...vM,"stickyTopFullWidth",...mM,"stickyBottomFullWidth"],dH=[...nH,...oH,...sH,...vM,...mM],fH=class extends B{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=ma(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new TB(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new eH(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const r=()=>this.onPinnedWidthChanged();this.forContainers(uH,()=>{this.pinnedWidthFeature=this.createManagedBean(new tH(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:r})}),this.forContainers(hH,()=>{this.pinnedWidthFeature=this.createManagedBean(new iH(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:r})}),this.forContainers(aH,()=>this.createManagedBean(new fM(this.eContainer,this.name==="center"?i:void 0))),this.forContainers(dH,()=>this.createManagedBean(new _B(this.eContainer))),this.forContainers(lH,()=>this.createManagedBean(new KC(n=>this.comp.setContainerWidth(`${n}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(cH.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),r=Tt(this.gos,"print");this.comp.setDomOrder(i||r)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return ch(this.eViewport)}getCenterViewportScrollLeft(){return Dd(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return xP(this.eViewport)}getViewportScrollLeft(){return Dd(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||OG(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Td(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=Tt(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,o=t.filter(s=>{const a=s.isFullWidth();return this.options.fullWidth?!n&&a:n||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},yM="ag-force-vertical-scroll",pH="ag-selectable",gH="ag-column-moving",vH=class extends B{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,r,n,o,s){var a;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=r,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=s,this.eCenterColsViewport=i.querySelector(`.${ma("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${ma("fullWidth").container}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${ma("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=s.querySelector(`.${ma("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",l=>this.setCellTextSelection(l.currentValue)),this.createManagedBean(new XC(this.comp)),this.bodyScrollFeature=this.createManagedBean(new DB(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([r,i,n,o,s]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(a=this.filterManager)==null||a.setupAdvancedFilterHeaderComp(r),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:i=>{const{target:r}=i,n=xa(r,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:i=>{const{target:r,relatedTarget:n}=i,o=t.contains(n),s=xa(n,"ag-root",t);xa(r,"ag-root",t)||(!o||s)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(gH,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(pH,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=CP()?16:0,r=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(r)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const r=i.relatedTarget;if(Cm(r)===null){this.rowRenderer.stopEditing();return}let n=t.some(o=>o.contains(r))&&this.mouseEventService.isElementInThisGrid(r);if(!n){const o=this.popupService;n=o.getActivePopups().some(s=>s.contains(r))||o.isElementWithinCustomPopup(r)}n||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(i=>this.addManagedElementListeners(i,{focusout:e}))}updateRowCount(){var r;const e=this.headerNavigationService.getHeaderRowCount()+(((r=this.filterManager)==null?void 0:r.getHeaderRowCount())??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?yM:null,i=Tt(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&GG(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const i=e&&ba(this.gos)&&!this.rowContainerHeightService.isStretching(),r=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(r,i)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:r}=e;(r||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:r}=e,n=r||Math.abs(t)>Math.abs(i),o=e.target;n?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:r}=e||t;(r===this.eBodyViewport||r===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!lo())return;const t=new $n(this.eBodyViewport),i=r=>{e(void 0,r.touchStart,r.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new IN(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){var n;const t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(((n=this.filterManager)==null?void 0:n.getHeaderHeight())??0),i=this.pinnedRowModel.getPinnedTopTotalHeight();let r=0;t>0&&(r+=t),i>0&&(r+=i),r>0&&(r+=1),this.comp.setStickyTopTop(`${r}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,r=e+i;this.comp.setStickyBottomBottom(`${r}px`)}sizeColumnsToFit(e,t){const r=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,o=ch(this.eGridBody)-r;if(o>0){this.columnSizeService.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):U("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},mH=class extends ke{constructor(e,t,i,r,n){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=r,this.cellCtrl=t;const o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(o);const s=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),hi(s,t.getCellAriaRole()),s.setAttribute("col-id",t.colIdSanitised);const a={addOrRemoveCssClass:(l,u)=>this.addOrRemoveCssClass(l,u),setUserStyles:l=>TP(s,l),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,u,h)=>this.setRenderDetails(l,u,h),setEditDetails:(l,u,h)=>this.setEditDetails(l,u,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(a,this.getGui(),this.eCellWrapper,i,n,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const n=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(i||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,r=i&&this.eCellWrapper==null;if(r){const u=document.createElement("div");u.setAttribute("role","presentation"),u.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=u,this.getGui().appendChild(this.eCellWrapper)}const n=!i&&this.eCellWrapper!=null;n&&(br(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);const o=!e&&i,s=o&&this.eCellValue==null;if(s){const u=document.createElement("span");u.setAttribute("role","presentation"),u.setAttribute("class","ag-cell-value"),this.eCellValue=u,this.eCellWrapper.appendChild(this.eCellValue)}const a=!o&&this.eCellValue!=null;a&&(br(this.eCellValue),this.eCellValue=void 0);const l=r||n||s||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){const r=this.editorVersion,n=e.newAgStackInstance();if(n==null)return;const{params:o}=e;n.then(a=>this.afterCellEditorCreated(r,a,o,t,i)),Fe(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();kt(t);const i=e!=null?_r(e,!0):null;i!=null&&(t.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),br(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),br(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){const i=!this.beans.gos.get("suppressAnimationFrame"),r=this.rendererVersion,{componentClass:n}=e,o=()=>{if(this.rendererVersion!==r||!this.isAlive())return;const a=e.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,r,n);a&&a.then(l)};i&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const n=this.getParentOfValue();kt(n),n.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,i,r,n){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){U(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();const a=r||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(i,n):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),(i=this.rowCtrl)==null||i.setInlineEditingCss()}addInCellEditor(){const e=this.getGui();e.contains(et(this.beans.gos))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){var d;this.beans.gos.get("editType")==="fullRow"&&U("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));const r=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&r.appendChild(this.cellEditorGui);const n=this.beans.popupService,o=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),s=t??((d=i.getPopupPosition)==null?void 0:d.call(i))??"over",a=this.beans.gos.get("enableRtl"),l={ePopup:r,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:s,alignSide:a?"right":"left",keepWithinBounds:!0},u=n.positionPopupByComponent.bind(n,l),h=this.beans.localeService.getLocaleTextFunc(),c=n.addPopup({modal:o,eChild:r,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:u,ariaLabel:h("ariaLabelCellEditor","Cell Editor")});c&&(this.hideEditorPopup=c.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui();e.contains(et(this.beans.gos))&&ym()&&e.focus({preventScroll:!0}),kt(this.getParentOfValue())}},yH=class extends ke{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),r.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(r);const n=this.getGui(),o=n.style;this.domOrder=this.rowCtrl.getDomOrder(),hi(n,"row");const s={setDomOrder:a=>this.domOrder=a,setCellCtrls:a=>this.setCellCtrls(a),showFullWidth:a=>this.showFullWidth(a),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(a,l)=>this.addOrRemoveCssClass(a,l),setUserStyles:a=>TP(n,a),setTop:a=>o.top=a,setTransform:a=>o.transform=a,setRowIndex:a=>n.setAttribute("row-index",a),setRowId:a=>n.setAttribute("row-id",a),setRowBusinessKey:a=>n.setAttribute("row-business-key",a),refreshFullWidth:a=>{var l,u;return((u=(l=this.fullWidthCellRenderer)==null?void 0:l.refresh)==null?void 0:u.call(l,a()))??!1}};e.setComp(s,this.getGui(),i,void 0),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){const t=r=>{if(this.isAlive()){const n=r.getGui();this.getGui().appendChild(n),this.rowCtrl.setupDetailRowAutoHeight(n),this.setFullWidthRowComp(r)}else this.beans.context.destroyBean(r)},i=e.newAgStackInstance();i!=null&&i.then(t)}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach(r=>{const n=r.instanceId;this.cellComps[n]==null?this.newCellComp(r):t[n]=null});const i=jn(t).filter(r=>r!=null);this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach(i=>{const r=this.cellComps[i.instanceId];r&&t.push(r.getGui())}),DP(this.getGui(),t)}newCellComp(e){const t=new mH(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=jn(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&Ge("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(t=>{if(!t)return;const i=t.getCtrl().instanceId;this.cellComps[i]===t&&(t.detach(),t.destroy(),this.cellComps[i]=null)})}};function CH(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer"></div>`,t}var SH=class extends ke{constructor(){super(),this.eViewport=J,this.eContainer=J,this.rowComps={},this.name=ke.elementGettingCreated.getAttribute("name"),this.options=ma(this.name),this.setTemplate(CH(this.options))}wireBeans(e){this.beans=e}postConstruct(){const e={setHorizontalScroll:i=>this.eViewport.scrollLeft=i,setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i,setOffsetTop:i=>this.eContainer.style.transform=`translateY(${i})`};this.createManagedBean(new fH(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){const t={...this.rowComps};this.rowComps={},this.lastPlacedElement=null;const i=r=>{const n=r.instanceId,o=t[n];if(o)this.rowComps[n]=o,delete t[n],this.ensureDomOrder(o.getGui());else{if(!r.getRowNode().displayed)return;const s=new yH(r,this.beans,this.options.type);this.rowComps[n]=s,this.appendRow(s.getGui())}};e.forEach(i),jn(t).forEach(r=>{this.eContainer.removeChild(r.getGui()),r.destroy()}),hi(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?kG(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(RP(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},wH={selector:"AG-ROW-CONTAINER",component:SH};function gl(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var bH=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${gl(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${gl(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${gl(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${gl(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${gl(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,xH=class extends ke{constructor(){super(bH,[SB,bB,RB,yB,wH]),this.eBodyViewport=J,this.eStickyTop=J,this.eStickyBottom=J,this.eTop=J,this.eBottom=J,this.eBody=J}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){const e=(i,r)=>{const n=`${i}px`;r.style.minHeight=n,r.style.height=n},t={setRowAnimationCssOnBodyViewport:(i,r)=>this.setRowAnimationCssOnBodyViewport(i,r),setColumnCount:i=>RG(this.getGui(),i),setRowCount:i=>xG(this.getGui(),i),setTopHeight:i=>e(i,this.eTop),setBottomHeight:i=>e(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setStickyBottomHeight:i=>{this.eStickyBottom.style.height=i,this.eStickyBottom.classList.toggle("ag-hidden",i==="0px")},setStickyBottomBottom:i=>this.eStickyBottom.style.bottom=i,setStickyBottomWidth:i=>this.eStickyBottom.style.width=i,setColumnMovingCss:(i,r)=>this.addOrRemoveCssClass(i,r),updateLayoutClasses:(i,r)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(o=>{o.toggle("ag-layout-auto-height",r.autoHeight),o.toggle("ag-layout-normal",r.normal),o.toggle("ag-layout-print",r.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",r.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",r.normal),this.addOrRemoveCssClass("ag-layout-print",r.print)},setAlwaysVerticalScrollClass:(i,r)=>this.eBodyViewport.classList.toggle(yM,r),registerBodyViewportResizeListener:i=>{const r=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>r())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,r)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(n=>n.classList.toggle(i,r))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new vH),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&Mr(this.gos)||SC(this.gos))&&bG(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},RH={selector:"AG-GRID-BODY",component:xH},DH=class extends B{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:EG();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},A0="__ag_grid_instance",CM=class SM extends B{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=SM.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[A0]=this.gridInstanceId}getRenderedCellForEvent(t){return dm(this.gos,t.target,us.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let i=t;for(;i;){const r=i[A0];if(Y(r))return r===this.gridInstanceId;i=i.parentElement}return!1}getCellPositionForEvent(t){const i=this.getRenderedCellForEvent(t);return i?i.getCellPosition():null}getNormalisedPosition(t){const i=Tt(this.gos,"normal"),r=t;let n,o;if(r.clientX!=null||r.clientY!=null?(n=r.clientX,o=r.clientY):(n=r.x,o=r.y),i){const s=this.ctrlsService.getGridBodyCtrl(),a=s.getScrollFeature().getVScrollPosition(),l=s.getScrollFeature().getHScrollPosition();n+=l.left,o+=a.top}return{x:n,y:o}}};CM.gridInstanceSequence=new La;var TH=CM,_H=class extends B{constructor(){super(),this.beanName="navigationService",this.onPageDown=d0(this.onPageDown,100),this.onPageUp=d0(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,r=e.altKey,n=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,s=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(i){case N.PAGE_HOME:case N.PAGE_END:!n&&!r&&(this.onHomeOrEndKey(i),a=!0);break;case N.LEFT:case N.RIGHT:case N.UP:case N.DOWN:if(!s)return!1;n&&!r&&!o&&(this.onCtrlUpDownLeftRight(i,s),a=!0);break;case N.PAGE_DOWN:case N.PAGE_UP:!n&&!r&&(a=this.handlePageUpDown(i,s,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===N.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){var s;const{scrollIndex:t,scrollType:i,scrollColumn:r,focusIndex:n,focusColumn:o}=e;Y(r)&&!r.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(r),Y(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),(s=this.rangeService)==null||s.setRangeToCell({rowIndex:n,rowPinned:null,column:o})}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.getViewportHeight(),n=this.pageBoundsService.getPixelOffset(),o=i.top+r,s=this.rowModel.getRowIndexAtPixel(o+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,s):this.navigateToNextPage(e,s)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),r=this.pageBoundsService.getPixelOffset(),n=i.top,o=this.rowModel.getRowIndexAtPixel(n+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t,i=!1){const r=this.getViewportHeight(),n=this.pageBoundsService.getFirstRow(),o=this.pageBoundsService.getLastRow(),s=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=i?(a==null?void 0:a.rowHeight)-r-s:r-s,u=(a==null?void 0:a.rowTop)+l;let h=this.rowModel.getRowIndexAtPixel(u+s);if(h===e.rowIndex){const d=i?-1:1;t=h=e.rowIndex+d}let c;i?(c="bottom",h<n&&(h=n),t<n&&(t=n)):(c="top",h>o&&(h=o),t>o&&(t=o)),this.isRowTallerThanView(h)&&(t=h,c="top"),this.navigateTo({scrollIndex:t,scrollType:c,scrollColumn:null,focusIndex:h,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const r=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:r,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,r=this.getViewportHeight(),n=this.pageBoundsService.getLastRow();let o=0,s=e.rowIndex;for(;s>=0&&s<=n;){const a=this.rowModel.getRow(s);if(a){const l=a.rowHeight??0;if(o+l>r)break;o+=l}s+=i}return Math.max(0,Math.min(s,n))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:r}=i,n=i.column;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:n,focusIndex:r,focusColumn:n})}onHomeOrEndKey(e){const t=e===N.PAGE_HOME,i=this.visibleColsService.getAllCols(),r=t?i[0]:Ee(i),n=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:r,focusIndex:n,focusColumn:r})}onTabKeyDown(e,t){const i=t.shiftKey,r=this.tabToNextCellCommon(e,i,t);if(r!==!1){r?t.preventDefault():r===null&&this.focusService.allowFocusForNextGridCoreContainer(i);return}if(i){const{rowIndex:n,rowPinned:o}=e.getRowPosition();(o?n===0:n===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof us&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let r=this.getCellByPosition(i);return!r&&(r=this.rowRenderer.getRowByPosition(i),!r||!r.isFullWidth())?!1:!!this.tabToNextCellCommon(r,e,t)}tabToNextCellCommon(e,t,i){let r=e.isEditing();if(!r&&e instanceof us){const s=e.getRowCtrl();s&&(r=s.isEditing())}let n;return r?this.gos.get("editType")==="fullRow"?n=this.moveToNextEditingRow(e,t,i):n=this.moveToNextEditingCell(e,t,i):n=this.moveToNextCellNotEditing(e,t),n===null?n:n||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const r=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(r,t,!0);return n===!1?null:n==null?!1:(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const r=e.getCellPosition(),n=this.findNextCellToFocusOn(r,t,!0);if(n===!1)return null;if(n==null)return!1;const o=n.getCellPosition(),s=this.isCellEditable(r),a=this.isCellEditable(o),l=o&&r.rowIndex===o.rowIndex&&r.rowPinned===o.rowPinned;return s&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),n.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let r;e instanceof hs?r={...e.getRowPosition(),column:t?i[0]:Ee(i)}:r=e.getCellPosition();const n=this.findNextCellToFocusOn(r,t,!1);if(n===!1)return null;if(n instanceof us)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return Y(n)}findNextCellToFocusOn(e,t,i){var n;let r=e;for(;;){e!==r&&(e=r),t||(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextTabbedCell(r,t);const o=this.gos.getCallback("tabToNextCell");if(Y(o)){const u=o({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:r||null});if(u===!0||u===null)u===null&&U("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),r=e;else{if(u===!1)return!1;r={rowIndex:u.rowIndex,column:u.column,rowPinned:u.rowPinned}}}if(!r)return null;if(r.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+r.rowIndex,column:r.column},fromCell:!0}),null}const s=this.gos.get("editType")==="fullRow";if(i&&!s&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);const a=this.getCellByPosition(r);if(!a){const l=this.rowRenderer.getRowByPosition(r);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return(n=this.rangeService)==null||n.setRangeToCell(r),a}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,r){let n=i,o=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gos.get("enableRtl")?t===N.LEFT&&(n=this.getLastCellOfColSpan(n)):t===N.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),o=Fe(n);if(o&&e&&e.key===N.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),r){const a=this.gos.getCallback("navigateToNextCell");if(Y(a)){const u=a({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});Y(u)?n={rowPinned:u.rowPinned,rowIndex:u.rowIndex,column:u.column}:n=null}}if(!n)return;if(n.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const s=this.getNormalisedPosition(n);s?this.focusPosition(s):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const i=this.visibleColsService.getAllCols(),r=this.rowRenderer.getRowByPosition(e);if(!r||!r.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Ee(i):i[0])};this.focusPosition(o);const s=t??(n!=null&&this.rowPositionUtils.before(o,n));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,fromBelow:s}),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:Ee(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=Df(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&(i==null?void 0:i.sticky))&&Fe(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},AH=class extends B{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},PH=class extends B{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,r=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:r})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let r=-1,n="left";const o=this.menuService.isLegacyMenuEnabled();!o&&this.gos.get("enableRtl")&&(r=1,n="right");const s=o?void 0:4*r,a=o?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:l,nudgeX:s,nudgeY:a,alignSide:n,keepWithinBounds:!0,position:"under",column:e})},i,t,o)}showPopup(e,t,i,r,n){const o=e?this.createBean(new VN(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!(o!=null&&o.hasFilter())||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const s=document.createElement("div");hi(s,"presentation"),s.classList.add("ag-menu"),n||s.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(s,{keydown:p=>this.trapFocusWithin(p,s)}),s.appendChild(o==null?void 0:o.getGui());let a;const l=()=>o==null?void 0:o.afterGuiDetached(),u=this.menuService.isColumnMenuAnchoringEnabled()?r??this.ctrlsService.getGridBodyCtrl().getGui():void 0,h=p=>{e.setMenuVisible(!1,"contextMenu");const g=p instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),g&&r&&nr(r)){const v=this.focusService.findTabbableParent(r);v&&v.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},c=this.localeService.getLocaleTextFunc(),d=n&&i!=="columnFilter"?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),f=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:h,positionCallback:()=>t(s),anchorToElement:u,ariaLabel:d});f&&(this.hidePopup=a=f.hideFunc),o.afterInit().then(()=>{t(s),o.afterGuiAttached({container:i,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==N.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},MH=class extends B{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const r=KA(this.gos).ResizeObserver,n=r?new r(t):null;return n==null||n.observe(e),()=>n==null?void 0:n.disconnect()}},FH=class extends B{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){var i;const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const r=((i=this.paginationService)==null?void 0:i.getCurrentPage())??0;r!==this.lastPage&&(this.lastPage=r,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&U(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const r={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],r),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,r)=>i.index!==r.index?t*(r.index-i.index):r.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,r=this.createTasksP2,n=r.list,o=this.destroyTasks,s=new Date().getTime();let a=new Date().getTime()-s;const l=e<=0,u=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!u.getScrollFeature().scrollGridIfNeeded()){let c;if(i.length)this.sortTaskList(t),c=i.pop().task;else if(n.length)this.sortTaskList(r),c=n.pop().task;else if(o.length)c=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(c)||c()}a=new Date().getTime()-s}i.length||n.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=KA(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}},EH=class extends B{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=it(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,r){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i,r),e.setExpanded(t,void 0,r))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},IH=class extends B{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),r=this.getCellGui(i,t);if(!r)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const n=r.getBoundingClientRect();return{x:n.x+n.width/2,y:n.y+n.height/2}}showContextMenu(e){var o;const t=e.rowNode,i=e.column;let{anchorToElement:r,value:n}=e;t&&i&&n==null&&(n=this.valueService.getValueForDisplay(i,t)),r==null&&(r=this.getContextMenuAnchorElement(t,i)),(o=this.contextMenuFactory)==null||o.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,n,r)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&Qn(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(lo()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var r;const t=e.getColDef(),i=(r=t.floatingFilterComponentParams)==null?void 0:r.suppressFilterButton;return i!=null&&U("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,i,r){const{positionBy:n}=t,o=t.column;if(n==="button"){const{buttonElement:s}=t;e.showMenuAfterButtonClick(o,s,i,r)}else if(n==="mouse"){const{mouseEvent:s}=t;e.showMenuAfterMouseEvent(o,s,i,r)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame(()=>{var a;const s=(a=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()))==null?void 0:a.getHeaderCtrlForColumn(o);s&&e.showMenuAfterButtonClick(o,s.getAnchorElementForMenu(r),i,!0)}))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(i==null?void 0:i.getGui())||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),r=this.getRowCtrl(e);if(!r)return i;const n=this.getCellGui(r,t);return n||(r.isFullWidth()?r.getFullWidthElement():i)}},LH=class extends jo{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},kH={selector:"AG-INPUT-TEXT-AREA",component:LH},OH=class extends qa{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[kH]),this.eTextArea=J}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Y(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===N.LEFT||t===N.UP||t===N.RIGHT||t===N.DOWN||e.shiftKey&&t===N.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!Y(e)&&!Y(this.params.value)?this.params.value:this.params.parseValue(e)}},GH=class extends qa{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Ss(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=r=>{bm(this.gos,r,t.node,t.column,!0)||t.onKeyDown(r)};this.addManagedElementListeners(e,{keydown:i})}},NH=class extends qa{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[KN]),this.eSelect=J,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:r}=this,{values:n,value:o,eventKey:s}=e;if(Fe(n)){U("no values found for select cellEditor");return}this.startedByEnter=s!=null?s===N.ENTER:!1;let a=!1;n.forEach(c=>{const d={value:c},f=i.formatValue(e.column,null,c),p=f!=null;d.text=p?f:c,t.addOption(d),a=a||o===c}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:u,valueListMaxHeight:h}=e;l!=null&&t.setPickerGap(l),h!=null&&t.setPickerMaxHeight(h),u!=null&&t.setPickerMaxWidth(u),r.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},Ff=class extends qa{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=J}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:r}=e,n=this.eInput;this.cellEditorInput.init(n,e);let o,s=!0;t?(this.focusAfterAttached=!0,i===N.BACKSPACE||i===N.DELETE?o="":i&&i.length===1?r?s=!1:o=i:(o=this.cellEditorInput.getStartValue(),i!==N.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.cellEditorInput.getStartValue()),s&&o!=null&&n.setStartValue(o),this.addManagedElementListeners(n.getGui(),{keydown:a=>{const{key:l}=a;(l===N.PAGE_UP||l===N.PAGE_DOWN)&&a.preventDefault()}})}afterGuiAttached(){var r,n;const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Fr()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():(n=(r=this.cellEditorInput).setCaret)==null||n.call(r)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},VH=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[Pf]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!Y(e)&&!Y(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=Y(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},wM=class extends Ff{constructor(){super(new VH)}},BH=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[iV]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===N.UP||e.key===N.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!Y(e)&&!Y(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){Fr()&&this.eInput.getInputElement().focus({preventScroll:!0})}},HH=class extends Ff{constructor(){super(new BH)}},zH=class extends Fs{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Fr();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){et(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Bi(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,Vi(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Bi(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,Vi(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Vi(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return ui(this.getValue())??void 0}setDate(e,t){this.setValue(Bi(e??null,!1),t)}},bM={selector:"AG-INPUT-DATE-FIELD",component:zH},WH=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[bM]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!Y(e)&&!Y(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Bi(e,!1)}},UH=class extends Ff{constructor(){super(new WH)}},$H=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[bM]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!Y(e)&&!Y(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return Bi(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):ui(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Bi(e??null,!1)??void 0}},KH=class extends Ff{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new $H(()=>this.dataTypeService))}},YH=class extends qa{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[kC]),this.eCheckbox=J}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:r=>this.setAriaLabel(r.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=TC(t,e),r=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}},Yl=class{constructor(e){this.cellValueChanges=e}},kp=class extends Yl{constructor(e,t,i,r){super(e),this.initialRange=t,this.finalRange=i,this.ranges=r}},XH=10,P0=class{constructor(e){this.actionStack=[],this.maxStackSize=e||XH,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},qH=class extends B{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),r=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||r||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:s,column:a,oldValue:l,value:u}=e,h={rowPinned:o,rowIndex:s,columnId:a.getColId(),newValue:u,oldValue:l};this.cellValueChanges.push(h)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new P0(e),this.redoStack=new P0(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,r,n){if(!e)return!1;const o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,s=>s[r],n),o instanceof kp?this.processRange(this.rangeService,o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){e.cellValueChanges.forEach(r=>{const{rowIndex:n,rowPinned:o,columnId:s}=r,a={rowIndex:n,rowPinned:o},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(s,t(r),i)})}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach((r,n)=>{if(!r)return;const o=r.startRow,s=r.endRow;n===t.length-1&&(i={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:r.startColumn.getColId()},this.setLastFocusedCell(i));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:r.startColumn,columns:r.columns};e.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:r}=t,n={rowIndex:i,rowPinned:r},o=this.rowPositionUtils.getRowNode(n),s={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(s,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:r,rowPinned:n}=e,o=this.gridBodyCtrl.getScrollFeature(),s=this.columnModel.getCol(r);if(!s)return;o.ensureIndexVisible(i),o.ensureColumnVisible(s);const a={rowIndex:i,column:s,rowPinned:n};this.focusService.setFocusedCell({...a,forceBrowserFocus:!0}),t==null||t.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Yl(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new Yl(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Yl(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new kp(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&Mr(this.gos)?e=new kp(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new Yl(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function ZH(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function jH(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function xM(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function RM(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function QH(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function JH(e){var t;(t=e.undoRedoService)==null||t.undo("api")}function e2(e){var t;(t=e.undoRedoService)==null||t.redo("api")}function t2(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(lu)}function i2(e){return e.rowRenderer.getEditingCells()}function r2(e,t=!1){e.rowRenderer.stopEditing(t)}function n2(e,t){const i=e.columnModel.getCol(t.colKey);if(!i){U(`no column found for ${t.colKey}`);return}const r={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};t.rowPinned==null&&RM(e,t.rowIndex),xM(e,t.colKey);const o=e.navigationService.getCellByPosition(r);if(!o)return;const{focusService:s,gos:a}=e,l=()=>{const h=et(a),c=o.getGui();return h!==c&&!!(c!=null&&c.contains(h))},u=a.get("stopEditingWhenCellsLoseFocus")&&l();(u||!s.isCellFocused(r))&&s.setFocusedCell({...r,forceBrowserFocus:u,preventScrollOnBrowserFocus:!0}),o.startRowOrCellEdit(t.key)}function o2(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentUndoStackSize())??0}function s2(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentRedoStackSize())??0}var a2=class extends B{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,r=null){var u;const n=this.createCellEditorParams(e,t,i),o=e.getColumn().getColDef(),s=this.userComponentFactory.getCellEditorDetails(o,n),a=(s==null?void 0:s.popupFromSelector)!=null?s.popupFromSelector:!!o.cellEditorPopup,l=(s==null?void 0:s.popupPositionFromSelector)!=null?s.popupPositionFromSelector:o.cellEditorPopupPosition;return e.setEditing(!0,s),e.getComp().setEditDetails(s,a,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(r,"cellEditingStarted")),!((u=s==null?void 0:s.params)!=null&&u.suppressPreventDefault)}stopEditing(e,t){const i=e.getComp(),{newValue:r,newValueExists:n}=this.takeValueFromCellEditor(t,i),o=e.getRowNode(),s=e.getColumn(),a=this.valueService.getValueForDisplay(s,o);let l=!1;return n&&(l=this.saveNewValue(e,a,r,o,s)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:r,valueChanged:l}),l}handleColDefChanged(e){const t=e.getCellEditor();if(t!=null&&t.refresh){const{eventKey:i,cellStartedEdit:r}=e.getEditCompDetails().params,n=this.createCellEditorParams(e,i,r),o=e.getColumn().getColDef(),s=this.userComponentFactory.getCellEditorDetails(o,n);t.refresh(s.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),i=t.getCellEditor();i!=null&&i.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>{var r,n;return(n=(r=t.getCellEditor())==null?void 0:r.focusIn)==null?void 0:n.call(r)}))}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new GH(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const r=t.getCellEditor();return!r||r.isCancelAfterEnd&&r.isCancelAfterEnd()?i:{newValue:r.getValue(),newValueExists:!0}}saveNewValue(e,t,i,r,n){if(i===t)return!1;e.setSuppressRefreshCell(!0);const o=r.setDataValue(n,i,"edit");return e.setSuppressRefreshCell(!1),o}createCellEditorParams(e,t,i){const r=e.getColumn(),n=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(r,n),eventKey:t,column:r,colDef:r.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:n,data:n.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:o=>this.valueService.parseValue(r,n,o,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const r=e?N.UP:N.DOWN;this.navigationService.navigateToNextCell(null,r,t,!1)}}},l2=class extends B{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,r=null){let n=!0;return e.getAllCellCtrls().reduce((s,a)=>{const l=a===i;return l?n=a.startEditing(t,l,r):a.startEditing(null,l,r),s?!0:a.isEditing()},!1)&&this.setEditing(e,!0),n}stopEditing(e,t=!1){const i=e.getAllCellCtrls(),r=e.isEditing();e.setStoppingRowEdit(!0);let n=!1;for(const o of i){const s=o.stopEditing(t);r&&!t&&!n&&s&&(n=!0)}n&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),r&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,r=>r.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}},Es={version:ye,moduleName:"@ag-grid-community/edit-core",beans:[a2]},u2={version:ye,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:JH,redoCellEditing:e2,getCellEditorInstances:t2,getEditingCells:i2,stopEditing:r2,startEditingCell:n2,getCurrentUndoSize:o2,getCurrentRedoSize:s2},dependantModules:[Es]},h2={version:ye,moduleName:"@ag-grid-community/undo-redo-edit",beans:[qH],dependantModules:[Es]},c2={version:ye,moduleName:"@ag-grid-community/full-row-edit",beans:[l2],dependantModules:[Es]},DM={version:ye,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:wM}],dependantModules:[Es]},d2={version:ye,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:wM},{name:"agNumberCellEditor",classImp:HH,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:UH},{name:"agDateStringCellEditor",classImp:KH},{name:"agCheckboxCellEditor",classImp:YH}],dependantModules:[DM]},f2={version:ye,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:NH}],dependantModules:[Es]},p2={version:ye,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:OH}],dependantModules:[Es]},g2={version:ye,moduleName:"@ag-grid-community/all-editors",dependantModules:[DM,d2,f2,p2]},v2={version:ye,moduleName:"@ag-grid-community/editing",dependantModules:[Es,h2,c2,g2,u2]},m2=class extends B{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const r=this.rowRenderer.getAllCellsForColumn(e);return t||r.push(i),this.addElementsToContainerAndGetWidth(r)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(o=>this.cloneItemIntoDummy(o,t)),i.appendChild(t);const r=t.offsetWidth;i.removeChild(t);const n=this.getAutoSizePadding();return r+n}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const r=i.getHtmlElementForColumnHeader(e);r!=null&&(t=r)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const r=document.createElement("div"),n=r.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(n.add("ag-header","ag-header-row"),r.style.position="static"):n.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(l=>s.classList.contains(l))){for(let l=0;l<s.classList.length;l++){const u=s.classList[l];u!="ag-row-position-absolute"&&n.add(u)}break}s=s.parentElement}r.appendChild(i),t.appendChild(r)}},y2=class extends B{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=it(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){var t,i;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=(t=e.childStore)==null?void 0:t.getStoreBounds();return e.footer&&(n=(i=e.sibling.childStore)==null?void 0:i.getStoreBounds()),((n==null?void 0:n.heightPx)??0)+((n==null?void 0:n.topPx)??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let r=e.footer?e.sibling:e;for(;r.isExpandable()&&r.expanded;)if(r.master)r=r.detailNode;else if(r.childrenAfterSort){if(r.childrenAfterSort.length===0)break;r=Ee(r.childrenAfterSort)}return r.rowTop+r.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t=e==="top";let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const r=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,n=new Set,o=u=>{if(n.add(u),t){const h=this.getLastPixelOfGroup(u),c=r+i+u.rowHeight;h<c?u.stickyRowTop=i+(h-c):u.stickyRowTop=i}else{const h=this.getFirstPixelOfGroup(u),c=r-(i+u.rowHeight);h>c?u.stickyRowTop=i-(h-c):u.stickyRowTop=i}i=0,n.forEach(h=>{const c=h.stickyRowTop+h.rowHeight;i<c&&(i=c)})},s=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=u=>{if(!u.displayed)return!1;if(u.footer){if(s===!0||s==="grand"&&u.level===-1||s==="group"&&u.level>-1)return!1;const h=u.sibling.rowIndex?u.sibling.rowIndex+1===u.rowIndex:!1;return e==="bottom"&&h?!1:!n.has(u)}return u.isExpandable()?a===!0||e==="bottom"?!1:!n.has(u)&&u.expanded:!1};for(let u=0;u<100;u++){let h=r+i;t||(h=r-i);const c=this.rowModel.getRowIndexAtPixel(h),d=this.rowModel.getRow(c);if(d==null)break;const p=this.getStickyAncestors(d).find(v=>(t?v.rowIndex<c:v.rowIndex>c)&&l(v));if(p){o(p);continue}if((t?d.rowTop<h:d.rowTop+d.rowHeight>h)&&l(d)){o(d);continue}break}return t||n.forEach(u=>{u.stickyRowTop=i-(u.stickyRowTop+u.rowHeight)}),this.refreshNodesAndContainerHeight(e,n,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;const t=!!this.gos.get("groupIncludeFooter")||e==="group",i=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&i?!0:i?"grand":t?"group":!1}canRowsBeSticky(){const e=Df(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const r=this.stickyTopRowCtrls[i].getRowNode();r!==e&&t.add(r)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const r=this.stickyBottomRowCtrls[i].getRowNode();r!==e&&t.add(r)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,i){const r=e==="top",n=r?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},s=[];for(let d=0;d<n.length;d++){const f=n[d].getRowNode();if(!t.has(f)){o[f.id]=n[d],f.sticky=!1;continue}s.push(n[d])}const a=new Set;for(let d=0;d<s.length;d++)a.add(s[d].getRowNode());const l=[];t.forEach(d=>{a.has(d)||(d.sticky=!0,l.push(this.createRowCon(d,!1,!1)))});let u=!!l.length||s.length!==n.length;r?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),u=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),u=!0),this.destroyRowCtrls(o,!1);const h=[...s,...l];h.sort((d,f)=>f.getRowNode().rowIndex-d.getRowNode().rowIndex),r||h.reverse(),h.forEach(d=>d.setRowTop(d.getRowNode().stickyRowTop));let c=0;return r?(t.forEach(d=>{d.rowIndex<this.pageBoundsService.getFirstRow()&&(c+=d.rowHeight)}),c>this.topContainerHeight&&(c=this.topContainerHeight),this.setOffsetTop(c)):(t.forEach(d=>{d.rowIndex>this.pageBoundsService.getLastRow()&&(c+=d.rowHeight)}),c>this.bottomContainerHeight&&(c=this.bottomContainerHeight),this.setOffsetBottom(c)),u?(r?this.stickyTopRowCtrls=h:this.stickyBottomRowCtrls=h,!0):!1}ensureRowHeightsValid(){let e=!1;const t=i=>{const r=i.getRowNode();if(r.rowHeightEstimated){const n=Zn(this.gos,r);r.setRowHeight(n.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},C2=class extends B{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(o=>o.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},r=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>r()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Mr(this.gos)?i():r()}),Mr(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),Df(this.gos)&&(it(this.gos)||fn(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new y2(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Tt(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new S2(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=jn(this.rowCtrlsByRowIndex),t=jn(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{const i=l=>{this.getAllCellCtrls().forEach(u=>{u.getColumn()===t&&l(u)})},r=()=>{i(l=>l.onLeftChanged())},n=()=>{i(l=>l.onWidthChanged())},o=()=>{i(l=>l.onFirstRightPinnedChanged())},s=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};t.addEventListener("leftChanged",r),t.addEventListener("widthChanged",n),t.addEventListener("firstRightPinnedChanged",o),t.addEventListener("lastLeftPinnedChanged",s),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",r),t.removeEventListener("widthChanged",n),t.removeEventListener("firstRightPinnedChanged",o),t.removeEventListener("lastLeftPinnedChanged",s),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const e=Tt(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const r=i.getCellElement(e);r&&t.push(r)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:r,printLayout:n}=this,o=Object.fromEntries(e.map(a=>[a.getRowNode().id,a]));i.forEachPinnedRow(t,(a,l)=>{const u=e[l];u&&i.getPinnedRowById(u.getRowNode().id,t)===void 0&&(u.destroyFirstPass(),u.destroySecondPass()),a.id in o?(e[l]=o[a.id],delete o[a.id]):e[l]=new hs(a,r,!1,!1,n)});const s=t==="top"?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=s}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var i;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const r=n=>{const o=n[e.rowIndex];o&&o.getRowNode()===e&&(o.destroyFirstPass(),o.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":r(this.topRowCtrls);break;case"bottom":r(this.bottomRowCtrls);break;default:r(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const i=et(this.gos),r=Au(this.gos,i,us.DOM_DATA_KEY_CELL_CTRL),n=Au(this.gos,i,hs.DOM_DATA_KEY_ROW_CTRL);return r||n?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,r=e.animate&&ba(this.gos),n=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const o=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();o&&this.updateContainerHeights(o)}this.recycleRows(n,r),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var r;const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),(r=this.stickyRowFeature)==null||r.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,(t=(e=this.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let r=0;r<i;r++){const n=t[r].getAllCellCtrls(),o=n.length;for(let s=0;s<o;s++)e.push(n[s])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const r in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[r]);return i}addRenderedRowListener(e,t,i){const r=this.rowCtrlsByRowIndex[t];r&&r.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&ym()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){var n;const t=this.getCellCtrls(e.rowNodes,e.columns).map(o=>o.getCellRenderer()).filter(o=>o!=null);if((n=e.columns)!=null&&n.length)return t;const i=[],r=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(r&&!this.isRowInMap(o.getRowNode(),r)||!o.isFullWidth())return;const s=o.getFullWidthCellRenderers();for(let a=0;a<s.length;a++){const l=s[a];l!=null&&i.push(l)}}),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const r=i.getCellEditor();r&&t.push(r)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const r=i.id;switch(i.rowPinned){case"top":t.top[r]=i;break;case"bottom":t.bottom[r]=i;break;default:t.normal[r]=i;break}}),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(r=>{const n=r.getRowNode();return this.isRowInMap(n,t)})}getCellCtrls(e,t){let i;Y(t)&&(i={},t.forEach(n=>{const o=this.columnModel.getCol(n);Y(o)&&(i[o.getId()]=!0)}));const r=[];return this.getRowCtrls(e).forEach(n=>{n.getAllCellCtrls().forEach(o=>{const s=o.getColumn().getId();i&&!i[s]||r.push(o)})}),r}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];Qi(this.rowCtrlsByRowIndex,(i,r)=>{r.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const t={};return Qi(this.rowCtrlsByRowIndex,(i,r)=>{const n=r.getRowNode();t[n.id]=r}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{const r=this.rowCtrlsByRowIndex[i];r&&(r.destroyFirstPass(t),r.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&ym()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const r=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature){o=this.stickyRowFeature.checkStickyRows();const a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}const s=this.firstRenderedRow!==r||this.lastRenderedRow!==n;if(!(t&&!o&&!s)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),i!=null)){const a=this.getCellToRestoreFocusToAfterRefresh();i!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(o=>i[o]=!0);const n=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!i[o]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){const t=oV(this.firstRenderedRow,this.lastRenderedRow),i=(n,o)=>{const s=o.getRowNode().rowIndex;s!=null&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&t.push(s)};Qi(this.rowCtrlsByRowIndex,i),Qi(e,i),t.sort((n,o)=>n-o);const r=[];for(let n=0;n<t.length;n++){const o=t[n],s=this.rowModel.getRow(o);s&&!s.sticky&&r.push(o)}return r}recycleRows(e,t=!1,i=!1){const r=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(r,!t),r.forEach(n=>{this.createOrUpdateRowCtrl(n,e,t,i)}),e&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const r=i.getRowNode();return!(t!=null&&!this.isRowInMap(r,t))})}createOrUpdateRowCtrl(e,t,i,r){let n,o=this.rowCtrlsByRowIndex[e];if(o||(n=this.rowModel.getRow(e),Y(n)&&Y(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null)),!o)if(n||(n=this.rowModel.getRow(e)),Y(n))o=this.createRowCon(n,i,r);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];Qi(e,(r,n)=>{if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);return}if(n.destroyFirstPass(!t),t){const o=n.instanceId;this.zombieRowCtrls[o]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[o]})}else n.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),xO(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=as(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),u=this.gos.get("suppressRowVirtualisation");let h=!1,c,d;do{const m=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:y,pageLastPixel:C}=this.pageBoundsService.getCurrentPagePixelRange(),S=this.rowContainerHeightService.getDivStretchOffset(),b=l.getScrollFeature().getVScrollPosition(),w=b.top,x=b.bottom;u?(c=y+S,d=C+S):(c=Math.max(w+m-a,y)+S,d=Math.min(x+m+a,C)+S),this.firstVisibleVPixel=Math.max(w+m,y)+S,this.lastVisibleVPixel=Math.min(x+m,C)+S,h=this.ensureAllRowsInRangeHaveHeightsCalculated(c,d)}while(h);let f=this.rowModel.getRowIndexAtPixel(c),p=this.rowModel.getRowIndexAtPixel(d);const g=this.pageBoundsService.getFirstRow(),v=this.pageBoundsService.getLastRow();f<g&&(f=g),p>v&&(p=v),e=f,t=p}const i=Tt(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!r&&t-e>n&&(t=e+n);const o=e!==this.firstRenderedRow,s=t!==this.lastRenderedRow;(o||s)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var o,s;const i=(o=this.pinnedRowModel)==null?void 0:o.ensureRowHeightsValid(),r=(s=this.stickyRowFeature)==null?void 0:s.ensureRowHeightsValid(),n=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(n||r)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),r||n||i?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const r=e.getRowNode(),n=this.focusService.isRowNodeFocused(r),o=e.isEditing(),s=r.detail;return n||o||s?!!this.isRowPresent(r):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,i){const r=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(r)return r;const n=this.gos.get("suppressAnimationFrame"),o=i&&!n&&!this.printLayout;return new hs(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(r=>r.getRowNode().rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(r=>r.getRowNode().rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const r=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!r}},S2=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Xt(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],Xt(this.entriesList,e)}getEntries(){return this.entriesList}},w2=class extends B{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new M0,this.pinnedBottomRows=new M0}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){var r,n;let e=!1,t=0;const i=o=>{if(o.rowHeightEstimated){const s=Zn(this.gos,o);o.setRowTop(t),o.setRowHeight(s.height),t+=s.height,e=!0}};return(r=this.pinnedBottomRows)==null||r.forEach(i),t=0,(n=this.pinnedTopRows)==null||n.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){i.clear();return}const r=Ya(this.gos),n=t==="top"?jr.ID_PREFIX_TOP_PINNED:jr.ID_PREFIX_BOTTOM_PINNED,o=i.getIds(),s=[],a=new Set;let l=0,u=-1;for(const h of e){const c=(r==null?void 0:r({data:h,level:0,rowPinned:t}))??n+this.nextId++;if(a.has(c)){U("Duplicate ID",c,"found for pinned row with data",h,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}u++,a.add(c),s.push(c);const d=i.getById(c);if(d!==void 0)d.data!==h&&d.setData(h),l+=this.setRowTopAndRowIndex(d,l,u),o.delete(c);else{const f=new jr(this.beans);f.id=c,f.data=h,f.rowPinned=t,l+=this.setRowTopAndRowIndex(f,l,u),i.push(f)}}o.forEach(h=>{var c;(c=i.getById(h))==null||c.clearRowTopAndRowIndex()}),i.removeAllById(o),i.setOrder(s)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(Zn(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(t===0)return 0;const i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}},M0=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,i)=>{const r=this.cache[t];r&&e(r,i)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},b2=class extends B{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},x2=class extends B{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Yt(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Xt(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&Oi("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(fn(this.gos))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:r}=t.getBlockStateJson();e[i]=r}),e}printCacheStatus(){this.gos.get("debug")&&Oi(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},R2={version:ye,moduleName:"@ag-grid-community/row-node-block",beans:[x2]},D2=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){var e;return this.root&&((e=this.root)==null?void 0:e.key)===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){var e;return this.end&&((e=this.end)==null?void 0:e.key)===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.root.id,r=t.findIndex(n=>n.id===e.id);if(r>-1){const n=t.slice(0,r),o=t.slice(r+1);return this.setEndRange(e),i?{keep:n,discard:o}:{keep:o,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const n=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&n.push(o)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find(n=>{var o;return n.id===((o=this.end)==null?void 0:o.id)}))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}},T2=class extends B{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,r){this.processClassRules(void 0,e.cellClassRules,t,i,r),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,r,n){if(t==null&&e==null)return;const o={},s={},a=(l,u)=>{l.split(" ").forEach(h=>{h.trim()!=""&&u(h)})};if(t){const l=Object.keys(t);for(let u=0;u<l.length;u++){const h=l[u],c=t[h];let d;typeof c=="string"?d=this.expressionService.evaluate(c,i):typeof c=="function"&&(d=c(i)),a(h,f=>{d?o[f]=!0:s[f]=!0})}}e&&n&&Object.keys(e).forEach(l=>a(l,u=>{o[u]||(s[u]=!0)})),n&&Object.keys(s).forEach(n),Object.keys(o).forEach(r)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let r;return typeof i=="function"?r=i(t):r=i,typeof r=="string"&&(r=[r]),r||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(n=>{i(n)})}},_2=class extends B{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:r,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:s,focusInnerElement:a,onFocusIn:l,onFocusOut:u,shouldStopEventPropagation:h,onTabKeyDown:c,handleKeyDown:d,eFocusableElement:f}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=r,this.providedFocusInnerElement=a,this.eFocusableElement=f,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!s,this.providedFocusIn=l,this.providedFocusOut=u,this.providedShouldStopEventPropagation=h,this.providedOnTabKeyDown=c,this.providedHandleKeyDown=d}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new Ms(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){var l;const t=st(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),r=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(r===-1)return;let n,o;e?(n=0,o=r):(n=r+1,o=i.length);const s=i.slice(n,o),a=this.gos.get("tabIndex");s.sort((u,h)=>{const c=parseInt(u.getAttribute("tabindex")||"0"),d=parseInt(h.getAttribute("tabindex")||"0");return d===a?1:c===a?-1:c===0?1:d===0?-1:c-d}),(l=s[e?s.length-1:0])==null||l.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},A2=class extends B{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:r}=this,n=[t,i],o={setTabIndex:g=>{n.forEach(v=>g!=null?v.setAttribute("tabindex",g):v.removeAttribute("tabindex"))}};this.addTabGuards(t,i);const{focusTrapActive:s=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:u,handleKeyDown:h,onTabKeyDown:c,shouldStopEventPropagation:d,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:p}=e;this.tabGuardCtrl=this.createManagedBean(new _2({comp:o,focusTrapActive:s,eTopGuard:t,eBottomGuard:i,eFocusableElement:r,onFocusIn:a,onFocusOut:l,focusInnerElement:u,handleKeyDown:h,onTabKeyDown:c,shouldStopEventPropagation:d,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:p}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=st(this.gos).createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),hi(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];kt(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){EC(t)||(t=t.getGui());const{eBottomGuard:r}=this;r?r.insertAdjacentElement("beforebegin",t):e(t,i)}},TM=class extends ke{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new A2(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},P2=0,M2=200,F2=class extends B{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,r=this.getPopupIndex(i);if(r!==-1){const f=this.popupList[r];f.alignedToElement=t}const n=t.getBoundingClientRect(),o=this.getParentRect(),s=this.keepXYWithinBounds(i,n.top-o.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;const u=o.right-o.left-a;let h;this.gos.get("enableRtl")?(h=d(),h<0&&(h=c(),this.setAlignedStyles(i,"left")),h>u&&(h=0,this.setAlignedStyles(i,"right"))):(h=c(),h>u&&(h=d(),this.setAlignedStyles(i,"right")),h<0&&(h=0,this.setAlignedStyles(i,"left"))),i.style.left=`${h}px`,i.style.top=`${s}px`;function c(){return n.right-o.left-2}function d(){return n.left-o.left-a}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:r,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:r,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:r,keepWithinBounds:n,eventSource:o,alignSide:s="left",position:a="over",column:l,rowNode:u,type:h}=e,c=o.getBoundingClientRect(),d=this.getParentRect(),f=this.getPopupIndex(t);if(f!==-1){const g=this.popupList[f];g.alignedToElement=o}const p=()=>{let g=c.left-d.left;s==="right"&&(g-=t.offsetWidth-c.width);let v;return a==="over"?(v=c.top-d.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,c,d,e.nudgeY||0)==="under"?v=c.top-d.top+c.height:v=c.top-t.offsetHeight-(r||0)*2-d.top),{x:g,y:v}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:r,keepWithinBounds:n,updatePosition:p,postProcessCallback:()=>this.callPostProcessPopup(h,t,o,null,l,u)})}shouldRenderUnderOrAbove(e,t,i,r){const n=i.bottom-t.bottom,o=t.top-i.top,s=e.offsetHeight+r;return n>s?"under":o>s||o>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const r=this.popupList[i],{alignedToElement:n}=r;!n||(["right","left","over","above","under"].forEach(s=>{n.classList.remove(`ag-has-popup-positioned-${s}`),e.classList.remove(`ag-popup-positioned-${s}`)}),!t)||(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,r,n,o){const s=this.gos.getCallback("postProcessPopup");s&&s({column:n,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:r})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:r,nudgeY:n,skipObserver:o,updatePosition:s}=e,a={width:0,height:0},l=(u=!1)=>{let{x:h,y:c}=s();u&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,r&&(h+=r),n&&(c+=n),i&&(h=this.keepXYWithinBounds(t,h,1),c=this.keepXYWithinBounds(t,c,0)),t.style.left=`${h}px`,t.style.top=`${c}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){const u=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>u(),M2)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=st(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),bP(t)}keepXYWithinBounds(e,t,i){const r=i===0,n=r?"clientHeight":"clientWidth",o=r?"top":"left",s=r?"height":"width",a=r?"scrollTop":"scrollLeft",l=st(this.gos),u=l.documentElement,h=this.getPopupParent(),c=e.getBoundingClientRect(),d=h.getBoundingClientRect(),f=l.documentElement.getBoundingClientRect(),p=h===l.body,g=Math.ceil(c[s]);let m=p?(r?wP:xd)(u)+u[a]:h[n];p&&(m-=Math.abs(f[o]-d[o]));const y=m-g;return Math.min(Math.max(t,0),Math.abs(y))}addPopup(e){const t=st(this.gos),{eChild:i,ariaLabel:r,alwaysOnTop:n,positionCallback:o,anchorToElement:s}=e;if(!t)return U("could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);const l=this.createPopupWrapper(i,r,!!n),u=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(i,l,u,s),{hideFunc:u}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();Y(e.style.top)||(e.style.top=`${i.top*-1}px`),Y(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){const r=this.getPopupParent(),n=document.createElement("div");return this.environment.applyThemeClasses(n),n.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||hi(e,"dialog"),Ia(e,t),n.appendChild(e),r.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){const t=st(this.gos),i=this.getPopupParent(),{wrapperEl:r,eChild:n,closedCallback:o,afterGuiAttached:s,closeOnEsc:a,modal:l}=e;let u=!1;const h=p=>{if(!r.contains(et(this.gos)))return;p.key===N.ESCAPE&&!Zr(p)&&f({keyboardEvent:p})},c=p=>f({mouseEvent:p}),d=p=>f({touchEvent:p}),f=(p={})=>{const{mouseEvent:g,touchEvent:v,keyboardEvent:m,forceHide:y}=p;!y&&(this.isEventFromCurrentPopup({mouseEvent:g,touchEvent:v},n)||u)||(u=!0,i.removeChild(r),t.removeEventListener("keydown",h),t.removeEventListener("mousedown",c),t.removeEventListener("touchstart",d),t.removeEventListener("contextmenu",c),this.eventService.removeEventListener("dragStarted",c),o&&o(g||v||m),this.removePopupFromPopupList(n))};return s&&s({hidePopup:f}),window.setTimeout(()=>{a&&t.addEventListener("keydown",h),l&&(t.addEventListener("mousedown",c),this.eventService.addEventListener("dragStarted",c),t.addEventListener("touchstart",d),t.addEventListener("contextmenu",c))},0),f}addPopupToPopupList(e,t,i,r){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:P2++,isAnchored:!!r}),r&&this.setPopupPositionRelatedToElement(e,r)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const r=this.popupList[i];if(r.stopAnchoringPromise&&r.stopAnchoringPromise.then(o=>o&&o()),r.stopAnchoringPromise=void 0,r.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:r.hideFunc});return r.stopAnchoringPromise=n,r.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:r,ePopup:n}=e,o=r.getBoundingClientRect(),s=c=>parseInt(c.substring(0,c.length-1),10),a=(c,d)=>{const f=i[c]-o[c],p=s(n.style[c]);return{initialDiff:f,lastDiff:f,initial:p,last:p,direction:d}},l=a("top",0),u=a("left",1),h=this.getFrameworkOverrides();return new pi(c=>{h.wrapIncoming(()=>{h.setInterval(()=>{const d=t.getBoundingClientRect(),f=r.getBoundingClientRect();if(f.top==0&&f.left==0&&f.height==0&&f.width==0){e.hidePopup();return}const g=(v,m)=>{const y=s(n.style[m]);v.last!==y&&(v.initial=y,v.last=y);const C=d[m]-f[m];if(C!=v.lastDiff){const S=this.keepXYWithinBounds(n,v.initial+v.initialDiff-C,v.direction);n.style[m]=`${S}px`,v.last=S}v.lastDiff=C};g(l,"top"),g(u,"left")},200).then(d=>{c(()=>{d!=null&&window.clearInterval(d)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:r}=e,n=i||r;if(!n)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let s=o;s<this.popupList.length;s++){const a=this.popupList[s];if(zO(a.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=st(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),r=i.length,n=this.getWrapper(e);if(!n||r<=1||!t.contains(e))return;const o=[],s=[];for(const d of i)d!==n&&(d.classList.contains("ag-always-on-top")?s.push(d):o.push(d));const a=[],l=s.length,c=n.classList.contains("ag-always-on-top")||!l?[...o,...s,n]:[...o,n,...s];for(let d=0;d<=r;d++){const f=c[d];if(i[d]===c[d]||f===n)continue;f.querySelectorAll("div").forEach(g=>{g.scrollTop!==0&&a.push([g,g.scrollTop])}),d===0?t.insertAdjacentElement("afterbegin",f):c[d-1].insertAdjacentElement("afterend",f)}for(;a.length;){const d=a.pop();d[0].scrollTop=d[1]}}},E2=["touchstart","touchend","touchmove","touchcancel"],I2=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new pi(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,r){const n=ls(E2,t);e.addEventListener(t,i,{capture:!!r,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},L2=class extends B{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===N.UP,r=e===N.DOWN,n=e===N.LEFT;let o,s;if(i||r)s=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),o=t.column;else{const a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");s=t.rowIndex,o=n!==l?a[0]:Ee(a)}return{rowIndex:s,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,r=!1;for(;!r;){switch(e){case N.UP:i=this.getCellAbove(i);break;case N.DOWN:i=this.getCellBelow(i);break;case N.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case N.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,U("unknown key for navigation ",e);break}i?r=this.isCellGoodToFocusOn(i):r=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let r=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(r=!0);const n=this.rowModel.getRow(e.rowIndex),o=r?void 0:this.getNextStickyPosition(n);return o||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!Df(this.gos)||!e||!e.sticky)return;const i=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex);let r=[];i?r=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):r=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);const n=t?-1:1,o=r.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),s=r[o+n];if(s)return{rowIndex:s.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned,r=i?t===0:t===this.pageBoundsService.getFirstRow();let n=!1;if(r)return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(n=!0);const o=this.rowModel.getRow(e.rowIndex),s=n?void 0:this.getNextStickyPosition(o,!0);return s||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){var o;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,r=e.rowPinned,n=this.visibleColsService.getColAfter(e.column);if(!n){n=t[0];const s=this.getRowBelow(e);if(Fe(s)||!s.rowPinned&&!(((o=this.paginationService)==null?void 0:o.isRowInPage(s))??!0))return null;i=s?s.rowIndex:null,r=s?s.rowPinned:null}return{rowIndex:i,column:n,rowPinned:r}}getNextTabbedCellBackwards(e){var o;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,r=e.rowPinned,n=this.visibleColsService.getColBefore(e.column);if(!n){n=Ee(t);const s=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Fe(s)||!s.rowPinned&&!(((o=this.paginationService)==null?void 0:o.isRowInPage(s))??!0))return null;i=s?s.rowIndex:null,r=s?s.rowPinned:null}return{rowIndex:i,column:n,rowPinned:r}}},Nt=(e,t)=>{for(const i in t)t[i]=e;return t},F0={...Nt("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Nt("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...Nt("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...Nt("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Nt("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Nt("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Nt("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Nt("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Nt("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Nt("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...Nt("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Nt("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Nt("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...Nt("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Nt("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},Op={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},k2=(e,t)=>e.eventService.dispatchEvent(t),_M=class{};Reflect.defineProperty(_M,"name",{value:"GridApi"});var O2=class extends B{constructor(){super(),this.beanName="apiFunctionService",this.api=new _M,this.fns={...Op,dispatchEvent:k2},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in F0)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var n;const{fns:i,beans:r}=this;i!==Op&&(i[e]=((n=r==null?void 0:r.validationService)==null?void 0:n.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:r}}=this;return r?r(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:r}=this;if(!t)U(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${r}`);else{const n=F0[e];i.assertModuleRegistered(n,`api.${e}`)&&U(`API function '${e}' not registered to module '${n}'`)}}destroy(){super.destroy(),this.fns=Op,this.beans=null}};function G2(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var N2=class extends B{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const r=[],n={};return e.forEach(o=>{const s=this.createDefFromColumn(o,t,i);let a=!0,l=s,u=o.getOriginalParent(),h=null;for(;u;){let c=null;if(u.isPadding()){u=u.getOriginalParent();continue}const d=n[u.getGroupId()];if(d){d.children.push(l),a=!1;break}if(c=this.createDefFromGroup(u),c&&(c.children=[l],n[c.groupId]=c,l=c,u=u.getOriginalParent()),u!=null&&h===u){a=!1;break}h=u}a&&r.push(l)}),r}createDefFromGroup(e){const t=pm(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const r=pm(e.getColDef());return r.colId=e.getColId(),r.width=e.getActualWidth(),r.rowGroup=e.isRowGroupActive(),r.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,r.pivot=e.isPivotActive(),r.pivotIndex=e.isPivotActive()?i.indexOf(e):null,r.aggFunc=e.isValueActive()?e.getAggFunc():null,r.hide=e.isVisible()?void 0:!0,r.pinned=e.isPinned()?e.getPinned():null,r.sort=e.getSort()?e.getSort():null,r.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,r}},V2=class extends B{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:i,toIndex:r,finished:n}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:r,finished:n,source:i})}columnPinned(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,r=this.getCommonValue(e,n=>n.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:r??null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,r=this.getCommonValue(e,n=>n.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:r,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let r=1;r<e.length;r++)if(i!==t(e[r]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i})}columnResized(e,t,i,r=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:r,finished:t,source:i})}},B2=class extends B{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){const e=this.columnModel.getColDefCols();if(Fe(e)||!this.columnModel.isAlive())return[];const i=this.columnModel.getAllCols().map(r=>this.createStateItemFromColumn(r));return this.orderColumnStateList(i),i}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),r=e.isRowGroupActive()?t.indexOf(e):null,n=e.isPivotActive()?i.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,s=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:r,pivot:e.isPivotActive(),pivotIndex:n,flex:l}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map((r,n)=>[r.getColId(),n]));e.sort((r,n)=>{const o=i.has(r.colId)?i.get(r.colId):-1,s=i.has(n.colId)?i.get(n.colId):-1;return o-s})}},H2=class extends B{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[],t=this.columnModel.getColTree();return nn(null,t,i=>{Ut(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];nn(null,t,r=>{if(Ut(r)){const n=r.getColGroupDef(),o={groupId:r.getGroupId(),open:n?n.openByDefault:void 0};i.push(o)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const r=[];e.forEach(n=>{const o=n.groupId,s=n.open,a=this.columnModel.getProvidedColGroup(o);a&&a.isExpanded()!==s&&(a.setExpanded(s),r.push(a))}),this.visibleColsService.refresh(t,!0),r.length&&this.eventDispatcher.groupOpened(r),this.columnAnimationService.finish()}},z2=class extends B{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const r=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!r)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const o=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=o-this.scrollPosition-this.scrollWidth,this.viewportRight=o-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),r=this.viewportLeft-200,n=this.viewportRight+200,o=t<r&&i<r,s=t>n&&i>n;return!o&&!s}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=n=>{const o=n.getLeft();return Y(o)&&o>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),r=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,r,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach(o=>e[o.getId()]=!0);const n=(o,s,a)=>{let l=!1;for(let u=0;u<o.length;u++){const h=o[u];let c=!1;if(Qn(h))c=e[h.getId()]===!0;else{const f=h.getDisplayedChildren();f&&(c=n(f,s,a+1))}c&&(l=!0,s[a]||(s[a]=[]),s[a].push(h))}return l};n(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),n(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),n(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=r=>`${r.getId()}-${r.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}},W2=class extends B{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(r){const n=e(r),o=typeof n;if(o==="string"||o==="number"||o==="boolean"){this.eGui=Iu("<span>"+n+"</span>");return}if(n==null){this.eGui=Iu("<span></span>");return}this.eGui=n}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},U2=class extends B{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},$2=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],E0=Object.fromEntries($2.map((e,t)=>[e,t]));function K2(e,t){const i=(e.beanName?E0[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,r=(t.beanName?E0[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-r}function Y2(e,t){return(e==null?void 0:e.beanName)==="gridDestroyService"?-1:0}var X2=class extends B{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){const i=this.registry[e];if(i!=null)return new i(...t)}},q2=class extends B{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){var t,i;this.runReadyCallbacksAsync=((i=(t=e.frameworkOverrides).runWhenReadyAsync)==null?void 0:i.call(t))??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>(e==null?void 0:e.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Z2=class extends B{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:r}=e;return this.createIdFromValues({rowIndex:t,column:r,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:r}=e;return`${t}.${i??"null"}.${r.getId()}`}equals(e,t){const i=e.column===t.column,r=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&r&&n}},j2=class extends B{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){it(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(r=>this.eventService.dispatchEvent(r)),this.events=[]};t?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},Q2=class extends B{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),r=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):r&&(t="top",e=r-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Y(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},I0={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},L0={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},k0={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},J2=class extends B{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(I0),this.getSizeEl(L0),this.getSizeEl(k0)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(I0)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(L0)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(k0)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){var e;return((e=this.gridTheme)==null?void 0:e.getCssClass())||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===O0?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${O0}px)`,i.appendChild(t),this.sizeEls.set(e,t);let r=this.measureSizeEl(e);r==="no-styles"&&U(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const n=this.resizeObserverService.observeResize(t,()=>{const o=this.measureSizeEl(e);o==="detached"||o==="no-styles"||(this.lastKnownValues.set(e,o),o!==r&&(r=o,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>n()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver(()=>{const i=this.readAncestorThemeClasses();ez(i,this.ancestorThemeClasses)||(this.ancestorThemeClasses=i,this.fireGridStylesChangedEvent("themeChanged"))});let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const i=Array.from(e.classList).filter(r=>r.startsWith("ag-theme-"));for(const r of i)t.includes(r)||t.unshift(r);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:i}=this,r=e.get("theme")||null;r!==i&&(i==null||i.stopUse(),this.gridTheme=r,r==null||r.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){var e;(e=this.gridTheme)==null||e.stopUse(),this.gridTheme=null}},ez=(e,t)=>e.length===t.length&&e.findIndex((i,r)=>e[r]!==t[r])===-1,O0=15538,tz=class extends B{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new Ka}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=md(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},qC=class Ti extends B{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ti.toggleKeyboardMode),t.addEventListener("mousedown",Ti.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",Ti.toggleKeyboardMode),t.removeEventListener("mousedown",Ti.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=Ti.keyboardModeActive,r=t.type==="keydown";r&&(t.ctrlKey||t.metaKey||t.altKey)||i!==r&&(Ti.keyboardModeActive=r)}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,i=>{this.gridCtrl=i.gridCtrl})}registerKeyboardFocusEvents(){const t=st(this.gos);Ti.addKeyboardModeEvents(t),Ti.instanceCount++,this.addDestroyFunc(()=>{Ti.instanceCount--,Ti.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,i=this.columnModel.getCol(t.getId());t!==i&&this.clearFocusedCell()}isKeyboardMode(){return Ti.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(et(this.gos),hs.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(et(this.gos),Mf.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,i){let r=t;for(;r;){if(Au(this.gos,r,i))return!1;r=r.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,i){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),i())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){const{rowIndex:i,rowPinned:r,column:n}=t,o={rowIndex:i,rowPinned:r,column:n,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:r});return s&&(o.isFullWidthCell=s.isFullWidth()),o}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...t})}setFocusedCell(t){const{column:i,rowIndex:r,rowPinned:n,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:s=!1}=t,a=this.columnModel.getCol(i);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:r,rowPinned:qr(n),column:a},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:o,preventScrollOnBrowserFocus:s})}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const i=t.getColumnGroupChild(),r=t.getRowIndex(),n=t.getPinned(),{column:o,headerRowIndex:s}=this.focusedHeaderPosition;return i===o&&r===s&&n==o.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,i){this.focusedHeaderPosition={headerRowIndex:t,column:i}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){var u;if(this.isHeaderFocusSuppressed())return!1;const{direction:i,fromTab:r,allowUserOverride:n,event:o,fromCell:s,rowWithoutSpanValue:a}=t;let{headerPosition:l}=t;if(s&&((u=this.filterManager)!=null&&u.isAdvancedFilterHeaderActive()))return this.focusAdvancedFilter(l);if(n){const h=this.getFocusedHeader(),c=this.headerNavigationService.getHeaderRowCount();if(r){const d=this.gos.getCallback("tabToNextHeader");d&&(l=this.getHeaderPositionFromUserFunc({userFunc:d,direction:i,currentPosition:h,headerPosition:l,headerRowCount:c}))}else{const d=this.gos.getCallback("navigateToNextHeader");if(d&&o){const f={key:o.key,previousHeaderPosition:h,nextHeaderPosition:l,headerRowCount:c,event:o};l=d(f)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:i,event:o,fromCell:s,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:i,headerPosition:r,direction:n,event:o}=t,s=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:i,direction:n,currentPosition:s,headerPosition:r,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:o})}getHeaderPositionFromUserFunc(t){const{userFunc:i,direction:r,currentPosition:n,headerPosition:o,headerRowCount:s}=t,l=i({backwards:r==="Before",previousHeaderPosition:n,nextHeaderPosition:o,headerRowCount:s});return l===!0||l===null?(l===null&&U("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),n):l===!1?null:l}focusProvidedHeaderPosition(t){var c;const{headerPosition:i,direction:r,fromCell:n,rowWithoutSpanValue:o,event:s}=t,{column:a,headerRowIndex:l}=i;if(l===-1)return(c=this.filterManager)!=null&&c.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(i):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,r);const u=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned()),h=(u==null?void 0:u.focusHeader(i.headerRowIndex,a,s))||!1;return h&&(o!=null||n)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(o??-1),h}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));const i=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const i=this.headerNavigationService.getHeaderRowCount()-1,r=Ee(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:r},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){var i;return(i=this.filterManager)!=null&&i.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,i){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===qr(i)}findFocusableElements(t,i,r=!1){const n=IG;let o=SP;i&&(o+=", "+i),r&&(o+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(t.querySelectorAll(n)).filter(u=>nr(u)),a=Array.prototype.slice.apply(t.querySelectorAll(o));return a.length?((u,h)=>u.filter(c=>h.indexOf(c)===-1))(s,a):s}focusInto(t,i=!1,r=!1){const n=this.findFocusableElements(t,null,r),o=i?Ee(n):n[0];return o?(o.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,i){if(!i)return null;const r=this.findFocusableElements(t),n=r.indexOf(i);if(n===-1)return null;let o=-1;for(let s=n-1;s>=0;s--)if(r[s].classList.contains("ag-tab-guard-top")){o=s;break}return o<=0?null:r[o-1]}findNextFocusableElement(t=this.eGridDiv,i,r){const n=this.findFocusableElements(t,i?':not([tabindex="-1"])':null),o=et(this.gos);let s;i?s=n.findIndex(l=>l.contains(o)):s=n.indexOf(o);const a=s+(r?-1:1);return a<0||a>=n.length?null:n[a]}isTargetUnderManagedComponent(t,i){if(!i)return!1;const r=t.querySelectorAll(`.${Ms.FOCUS_MANAGED_CLASS}`);if(!r.length)return!1;for(let n=0;n<r.length;n++)if(r[n].contains(i))return!0;return!1}findTabbableParent(t,i=5){let r=0;for(;t&&Cm(t)===null&&++r<=i;)t=t.parentElement;return Cm(t)===null?null:t}focusOverlay(t){var r;const i=this.overlayService.isVisible()&&((r=this.overlayService.getOverlayWrapper())==null?void 0:r.getGui());return!!i&&this.focusInto(i,t)}focusGridViewFailed(t,i){return i&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,i=!1,r=!0){var o,s;if(this.overlayService.isExclusive())return r&&this.focusOverlay(i);if(this.isCellFocusSuppressed())return i&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():r&&this.focusOverlay(i)?!0:this.focusNextGridCoreContainer(!1);const n=i?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(n){const{rowIndex:a,rowPinned:l}=n;if(t??(t=(o=this.getFocusedHeader())==null?void 0:o.column),t&&a!==void 0&&a!==null){if(this.navigationService.ensureCellVisible({rowIndex:a,column:t,rowPinned:l}),i){const u=this.rowRenderer.getRowByPosition(n);if(u!=null&&u.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(n,i))return!0}return this.setFocusedCell({rowIndex:a,column:t,rowPinned:qr(l),forceBrowserFocus:!0}),(s=this.rangeService)==null||s.setRangeToCell({rowIndex:a,rowPinned:l,column:t}),!0}}return!!(r&&this.focusOverlay(i)||i&&this.focusLastHeader())}isGridFocused(){const t=et(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,i=!1){return!i&&this.gridCtrl.focusNextInnerContainer(t)?!0:((i||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var i;return this.advancedFilterFocusColumn=t==null?void 0:t.column,((i=this.advancedFilterService)==null?void 0:i.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(t,i){var n;const r=(i?void 0:this.advancedFilterFocusColumn)??((n=this.visibleColsService.getAllCols())==null?void 0:n[0]);return t?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(r)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};qC.keyboardModeActive=!1;qC.instanceCount=0;var iz=qC,rz=class extends B{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=Tt(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},nz=class extends B{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:r,mouseEventService:n,ctrlsService:o,resizeObserverService:s}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:u=>u===1||u===0,getIconName:()=>"notAllowed"};r.addDropTarget(a),this.addDestroyFunc(()=>r.removeDropTarget(a)),n.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new XC(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const l=s.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>l()),o.register("gridCtrl",this)}isDetailGrid(){var t;const e=this.focusService.findTabbableParent(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,i,r,n,o;const e=this.beans;return{paginationSelector:(t=e.paginationService)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(i=e.columnDropZonesService)==null?void 0:i.getDropZoneSelector(),sideBarSelector:(r=e.sideBarService)==null?void 0:r.getSideBarSelector(),statusBarSelector:(n=e.statusBarService)==null?void 0:n.getStatusPanelSelector(),watermarkSelector:(o=e.licenseManager)==null?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:r}=this.getNextFocusableIndex(t,e);if(r<0||r>=t.length)return!1;if(r===0){if(i>0){const n=this.visibleColsService.getAllCols(),o=Ee(n);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[r],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),r=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(Ee(i),!0);const n=Ee(r);if(this.focusService.focusGridView(n,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(r[0]))return!0;for(let n=1;n<i.length;n++)if(this.focusService.focusInto(i[n].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var o;const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:r}=this.getNextFocusableIndex(t,e);if(r===-1||i<0||i>=t.length)return;const n=t[i];(o=n.setAllowFocus)==null||o.call(n,!0),setTimeout(()=>{var s;(s=n.setAllowFocus)==null||s.call(n,!1)})}getNextFocusableIndex(e,t){const i=et(this.gos),r=e.findIndex(o=>o.getGui().contains(i)),n=r+(t?-1:1);return{indexWithFocus:r,nextIndex:n}}focusContainer(e,t){var r,n;(r=e.setAllowFocus)==null||r.call(e,!0);const i=this.focusService.focusInto(e.getGui(),t);return(n=e.setAllowFocus)==null||n.call(e,!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},oz=class extends TM{constructor(e){super(),this.gridBody=J,this.sideBar=J,this.pagination=J,this.rootWrapperBody=J,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:o=>this.addCssClass(o),setGridThemeClass:o=>this.addCssClass(o),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:o=>{this.getGui().style.userSelect=o??"",this.getGui().style.webkitUserSelect=o??""},setCursor:o=>{this.getGui().style.cursor=o??""}},t=this.createManagedBean(new nz),i=t.getOptionalSelectors(),r=this.createTemplate(i),n=[RH,...Object.values(i).filter(o=>!!o)];this.setTemplate(r,n),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>t.focusInnerElement(o),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&Oi("Grid removed from DOM")})}updateLayoutClasses(e,t){const i=this.rootWrapperBody.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",i=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",r=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",n=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",o=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${i}
                </div>
                ${r}
                ${o}
                ${n}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){var t;if(!e&&((t=this.pagination)!=null&&t.isDisplayed())){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){const e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>nr(t.getGui()))}},sz=class extends B{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";typeof e=="function"&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{var s;if(!n){Ge("alignedGrids contains an undefined option."),t||Ge(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),Ge(i());return}if(this.isGridApi(n))return n;const o=n;return"current"in o?(s=o.current)==null?void 0:s.api:(o.api||Ge(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),o.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(r=>{i.push(t(r))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":U("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach(i=>{let r=null;i&&(r=t.getProvidedColGroup(i.getGroupId())),!(i&&!r)&&t.setColumnGroupOpened(r,i.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){var u;const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const r=this.getMasterColumns(e),{columnApplyStateService:n,columnSizeService:o,ctrlsService:s}=this;switch(e.type){case"columnMoved":{const c=e.api.getColumnState().map(d=>({colId:d.colId}));n.applyColumnState({state:c,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const c=e.api.getColumnState().map(d=>({colId:d.colId,hide:d.hide}));n.applyColumnState({state:c},"alignedGridChanged")}break;case"columnPinned":{const c=e.api.getColumnState().map(d=>({colId:d.colId,pinned:d.pinned}));n.applyColumnState({state:c},"alignedGridChanged")}break;case"columnResized":{const h=e,c={};r.forEach(d=>{c[d.getId()]={key:d.getColId(),newWidth:d.getActualWidth()}}),(u=h.flexColumns)==null||u.forEach(d=>{c[d.getId()]&&delete c[d.getId()]}),o.setColumnWidths(Object.values(c),!1,h.finished,"alignedGridChanged");break}}const l=s.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(h=>{h.setGridOption("alwaysShowVerticalScroll",l)})}},az={version:ye,moduleName:"@ag-grid-community/aligned-grid",beans:[sz]};function lz(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null}function uz(e){return e.columnModel.getColumnDefs()}function hz(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function cz(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")}function dz(e,t,i){return e.visibleColsService.getColumnGroup(t,i)}function fz(e,t){return e.columnModel.getProvidedColGroup(t)}function pz(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""}function gz(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""}function vz(e,t){return e.columnModel.getColDefCol(t)}function mz(e){return e.columnModel.getColDefCols()}function yz(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function Cz(e){return e.columnGetStateService.getColumnState()}function Sz(e){e.columnApplyStateService.resetColumnState("api")}function wz(e){return e.columnGroupStateService.getColumnGroupState()}function bz(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function xz(e){e.columnGroupStateService.resetColumnGroupState("api")}function Rz(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function Dz(e){return e.visibleColsService.isPinningLeft()}function Tz(e){return e.visibleColsService.isPinningRight()}function _z(e,t){return e.visibleColsService.getColAfter(t)}function Az(e,t){return e.visibleColsService.getColBefore(t)}function Pz(e,t,i){e.columnModel.setColsVisible([t],i,"api")}function Mz(e,t,i){e.columnModel.setColsVisible(t,i,"api")}function Fz(e,t,i){e.columnModel.setColsPinned([t],i,"api")}function Ez(e,t,i){e.columnModel.setColsPinned(t,i,"api")}function Iz(e){return e.columnModel.getCols()}function Lz(e){return e.visibleColsService.getLeftCols()}function kz(e){return e.visibleColsService.getCenterCols()}function Oz(e){return e.visibleColsService.getRightCols()}function Gz(e){return e.visibleColsService.getAllCols()}function Nz(e){return e.columnViewportService.getViewportColumns()}function Vz(e,t,i){e.columnMoveService.moveColumns([t],i,"api")}function Bz(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")}function Hz(e,t,i){e.columnMoveService.moveColumns(t,i,"api")}function zz(e,t,i,r=!0,n="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,r,n)}function Wz(e,t,i=!0,r="api"){e.columnSizeService.setColumnWidths(t,!1,i,r)}function Uz(e){return e.visibleColsService.getTreeLeft()}function $z(e){return e.visibleColsService.getTreeCenter()}function Kz(e){return e.visibleColsService.getTreeRight()}function Yz(e){return e.visibleColsService.getAllTrees()}function Xz(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})}function qz(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})}function Zz(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var jz=class extends B{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs($o(e.source))})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=r=>n=>{const{column:o,node:s,value:a}=n;let l=o.getColDef().valueFormatter;return l===r.groupSafeValueFormatter&&(l=r.valueFormatter),this.valueService.formatValue(o,s,a,l)};Object.entries(e).forEach(([r,n])=>{const o={...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)};this.dataTypeDefinitions[r]=o,this.formatValueFuncs[r]=t(o)});const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach(([r,n])=>{const o=this.processDataTypeDefinition(n,i,[r],e);o&&(this.dataTypeDefinitions[r]=o,n.dataTypeMatcher&&(this.dataTypeMatchers[r]=n.dataTypeMatcher),this.formatValueFuncs[r]=t(o))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(r=>{const n=this.dataTypeMatchers[r];n&&delete this.dataTypeMatchers[r],this.dataTypeMatchers[r]=n??e[r].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...Yc(e.columnTypes),...Yc(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,r){let n;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let s=r[o];const a=t[o];if(s&&a&&(s=a),!this.validateDataTypeDefinition(e,s,o))return;n=this.mergeDataTypeDefinitions(s,e)}else{if(i.includes(o)){U('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const s=t[o];if(!this.validateDataTypeDefinition(e,s,o))return;const a=this.processDataTypeDefinition(s,t,[...i,o],r);if(!a)return;n=this.mergeDataTypeDefinitions(a,e)}return{...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(U('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(U(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,r;if((i=t.node)!=null&&i.group){const n=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!((r=e.dataTypeMatcher)!=null&&r.call(e,t.value)))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:r}=t;const{field:n}=t;if(r===void 0&&(r=e.cellDataType),(r==null||r===!0)&&(r=this.canInferCellDataType(e,t)?this.inferCellDataType(n,i):!1),!r){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[r];if(!o){U(`Missing data type definition - "${r}"`);return}return e.cellDataType=r,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,r,o,i),o.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=r=>{t.add(r.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){if(!it(this.gos))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const r=t.type===null?e.type:t.type;if(r){const n=this.gos.get("columnTypes")??{};if(Yc(r).some(s=>{const a=n[s.trim()];return a&&this.doColDefPropsPreventInference(a,i)}))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,r])=>this.doesColDefPropPreventInference(e,t,i,r))}doesColDefPropPreventInference(e,t,i,r){if(!t[i])return!1;const n=e[i];return n===null?(t[i]=!1,!1):r===void 0?!!n:n===r}inferCellDataType(e,t){if(!e)return;let i;const r=this.getInitialData();if(r){const o=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=su(r,e,o)}else this.initWaitForRowData(t);if(i==null)return;const[n]=Object.entries(this.dataTypeMatchers).find(([o,s])=>s(i))??["object"];return n}getInitialData(){const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t!=null&&t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:r=>{const{firstRowData:n}=r;n&&(i==null||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(n,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const r={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,s])=>{const a=this.columnModel.getCol(o);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const u=a.getColDef();if(t&&u.type&&u.type!==l.type){const h=this.getUpdatedColumnState(a,s);h.rowGroup&&h.rowGroupIndex==null&&(r[o]=h),h.pivot&&h.pivotIndex==null&&(n[o]=h),i.push(h)}}),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(r,n)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(r=>{delete i[r],r==="rowGroup"?delete i.rowGroupIndex:r==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var r;if(t==null)return!0;const i=(r=this.getDataTypeDefinition(e))==null?void 0:r.dataTypeMatcher;return i?i(t):!0}validateColDef(e){const t=i=>U(`Cell data type is "object" but no Value ${i} has been provided. Please either provide an object data type definition with a Value ${i}, or set "colDef.value${i}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,r){var o;const n=this.formatValueFuncs[t];switch(i.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=s=>!!s.colDef.editable&&s.event.key===N.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=n;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=n;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(s,a)=>{const l=this.columnModel.getColDefCol(r),u=l==null?void 0:l.getColDef();if(!l||!u)return 0;const h=s==null?"":n({column:l,node:null,value:s}),c=a==null?"":n({column:l,node:null,value:a});return h===c?0:h>c?1:-1},e.keyCreator=n;break}}(o=this.filterManager)==null||o.setColDefPropertiesForDataType(e,i,n)}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var r,n;return((n=(r=i.newValue)==null?void 0:r.trim)==null?void 0:n.call(r))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:am(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var r,n;return i.newValue==null?i.newValue:((n=(r=i.newValue)==null?void 0:r.trim)==null?void 0:n.call(r))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>ui(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Bi(i.value,!1)??"",dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>ui(i)??void 0,dateFormatter:i=>Bi(i??null,!1)??void 0,valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>am(i.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},Qz={version:ye,moduleName:"@ag-grid-community/data-type",beans:[jz]},Jz={version:ye,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:lz,getColumnDefs:uz,sizeColumnsToFit:hz,setColumnGroupOpened:cz,getColumnGroup:dz,getProvidedColumnGroup:fz,getDisplayNameForColumn:pz,getDisplayNameForColumnGroup:gz,getColumn:vz,getColumns:mz,applyColumnState:yz,getColumnState:Cz,resetColumnState:Sz,getColumnGroupState:wz,setColumnGroupState:bz,resetColumnGroupState:xz,isPinning:Rz,isPinningLeft:Dz,isPinningRight:Tz,getDisplayedColAfter:_z,getDisplayedColBefore:Az,setColumnVisible:Pz,setColumnsVisible:Mz,setColumnPinned:Fz,setColumnsPinned:Ez,getAllGridColumns:Iz,getDisplayedLeftColumns:Lz,getDisplayedCenterColumns:kz,getDisplayedRightColumns:Oz,getAllDisplayedColumns:Gz,getAllDisplayedVirtualColumns:Nz,moveColumn:Vz,moveColumnByIndex:Bz,moveColumns:Hz,setColumnWidth:zz,setColumnWidths:Wz,getLeftDisplayedColumnGroups:Uz,getCenterDisplayedColumnGroups:$z,getRightDisplayedColumnGroups:Kz,getAllDisplayedColumnGroups:Yz,autoSizeColumn:Xz,autoSizeColumns:qz,autoSizeAllColumns:Zz}};function eW(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function tW(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)}function iW(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var rW={version:ye,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:eW,removeRowDropZone:tW,getRowDropZoneParams:iW}};function nW(e){return e.pinnedRowModel.getPinnedTopRowCount()}function oW(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function sW(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function aW(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var lW={version:ye,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:nW,getPinnedBottomRowCount:oW,getPinnedTopRow:sW,getPinnedBottomRow:aW}};function uW(e){e.overlayService.showLoadingOverlay()}function hW(e){e.overlayService.showNoRowsOverlay()}function cW(e){e.overlayService.hideOverlay()}var dW={version:ye,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:uW,showNoRowsOverlay:hW,hideOverlay:cW}};function fW(e,t,i){if(!t)return;const r=e.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${t}`;i===null?r.removeAttribute(n):r.setAttribute(n,i)}function pW(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function gW(e,t={}){const i=r=>U(`Since v31.1 api.flashCells parameter '${r}Delay' is deprecated. Please use '${r}Duration' instead.`);Y(t.fadeDelay)&&i("fade"),Y(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function vW(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function mW(e){return e.animationFrameService.isQueueEmpty()}function yW(e){e.animationFrameService.flushAllFrames()}function CW(e){return{rowHeight:as(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function SW(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(lu)}var wW={version:ye,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:fW,refreshCells:pW,flashCells:gW,refreshHeader:vW,isAnimationFrameQueueEmpty:mW,flushAllAnimationFrames:yW,getSizesForCurrentTheme:CW,getCellRendererInstances:SW}};function bW(e){e.valueCache.expire()}function xW(e,t,i){return AM(e,{colKey:t,rowNode:i})}function AM(e,t){const{colKey:i,rowNode:r,useFormatter:n}=t,o=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(Fe(o))return null;const s=e.valueService.getValueForDisplay(o,r);return n?e.valueService.formatValue(o,r,s)??_r(s,!0):s}function RW(e){return e.context.getGridId()}function DW(e){e.gridDestroyService.destroy()}function TW(e){return e.gridDestroyService.isDestroyCalled()}function _W(e,t){return e.gos.get(t)}function AW(e,t,i){PM(e,{[t]:i})}function PM(e,t){e.gos.updateGridOptions({options:t})}function PW(e,t,i){e.apiEventService.addEventListener(t,i)}function MW(e,t,i){e.apiEventService.removeEventListener(t,i)}function FW(e,t){e.apiEventService.addGlobalListener(t)}function EW(e,t){e.apiEventService.removeGlobalListener(t)}function IW(e){return e.focusService.getFocusedCell()}function LW(e){return e.focusService.clearFocusedCell()}function kW(e,t,i,r){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:r,forceBrowserFocus:!0})}function OW(e,t){return e.navigationService.tabToNextCell(!1,t)}function GW(e,t){return e.navigationService.tabToNextCell(!0,t)}function NW(e,t,i=!1){const r=e.headerNavigationService.getHeaderPositionForColumn(t,i);r&&e.focusService.focusHeaderPosition({headerPosition:r})}function VW(e,t,i){const r=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:r,buttonElement:i,positionBy:"button"})}function BW(e,t,i){let r=e.columnModel.getCol(t);if(r||(r=e.columnModel.getColDefCol(t)),!r){Ge(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:r,mouseEvent:i,positionBy:"mouse"})}function HW(e,t){const i=e.columnModel.getCol(t);if(!i){Ge(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,positionBy:"auto"})}function zW(e){e.menuService.hidePopupMenu()}function WW(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function UW(e,t,i,r,n){e.expansionService.setRowNodeExpanded(t,i,r,n)}function $W(e,t){return e.rowModel.getRowNode(t)}function KW(e,t,i,r){e.rowRenderer.addRenderedRowListener(t,i,r)}function YW(e){return e.rowRenderer.getRenderedNodes()}function XW(e,t,i){e.rowModel.forEachNode(t,i)}function qW(e){return MM(e)}function MM(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function ZW(e){return FM(e)}function FM(e){return e.rowRenderer.getLastVirtualRenderedRow()}function jW(e,t){return e.rowModel.getRow(t)}function QW(e){return e.rowModel.getRowCount()}function JW(e){return e.rowModel}function e5(e,t){if(!t.nodes.every(a=>a.rowPinned?(U("cannot select pinned rows"),!1):a.id===void 0?(U("cannot select node until id for node is known"),!1):!0))return;const{nodes:r,source:n,newValue:o}=t,s=r;e.selectionService.setNodesSelected({nodes:s,source:n??"api",newValue:o})}function t5(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function i5(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function r5(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function n5(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function o5(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function s5(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function a5(e){return e.selectionService.getSelectedNodes()}function l5(e){return e.selectionService.getSelectedRows()}function u5(e){e.sortController.onSortChanged("api")}var h5={version:ye,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:RW,destroy:DW,isDestroyed:TW,getGridOption:_W,setGridOption:AW,updateGridOptions:PM}},c5={version:ye,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:e5,selectAll:t5,deselectAll:i5,selectAllFiltered:r5,deselectAllFiltered:n5,selectAllOnCurrentPage:o5,deselectAllOnCurrentPage:s5,getSelectedNodes:a5,getSelectedRows:l5}},d5={version:ye,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:WW,setRowNodeExpanded:UW,getRowNode:$W,addRenderedRowListener:KW,getRenderedNodes:YW,forEachNode:XW,getFirstDisplayedRow:qW,getFirstDisplayedRowIndex:MM,getLastDisplayedRow:ZW,getLastDisplayedRowIndex:FM,getDisplayedRowAtIndex:jW,getDisplayedRowCount:QW,getModel:JW}},f5={version:ye,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:ZH,getHorizontalPixelRange:jH,ensureColumnVisible:xM,ensureIndexVisible:RM,ensureNodeVisible:QH}},p5={version:ye,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:IW,clearFocusedCell:LW,setFocusedCell:kW,setFocusedHeader:NW,tabToNextCell:OW,tabToPreviousCell:GW}},g5={version:ye,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:PW,addGlobalListener:FW,removeEventListener:MW,removeGlobalListener:EW}},v5={version:ye,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:bW,getValue:xW,getCellValue:AM}},m5={version:ye,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:VW,showColumnMenuAfterMouseClick:BW,showColumnMenu:HW,hidePopupMenu:zW}},y5={version:ye,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:u5}},C5={version:ye,moduleName:"@ag-grid-community/api",dependantModules:[h5,lW,c5,Jz,d5,rW,f5,dW,p5,g5,wW,v5,m5,y5]};function S5(e){var t;return((t=e.stateService)==null?void 0:t.getState())??{}}function w5(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=b5(e)}return e}function b5(e){return e.cellSelection=x5(e,"rangeSelection"),e}function x5(e,t){if(e&&typeof e=="object")return e[t]}var R5=class extends B{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Yt(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Yt(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Yt(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=it(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",ye),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:r})=>{r==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i==null||i(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return w5(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:r}=this.getInitialState(),n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),r&&this.setPaginationState(r),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const o=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{o()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:s=>{(s.newPage||s.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:r}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!(r!=null&&r.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const n=this.getRangeSelectionState();this.updateCachedState("rangeSelection",n),this.updateCachedState("cellSelection",n),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:o=>{if(o.finished){const s=this.getRangeSelectionState();this.updateCachedState("rangeSelection",s),this.updateCachedState("cellSelection",s)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],r=[],n=[],o=[],s=[],a=[],l=[],u=[];let h=0;const c=this.columnGetStateService.getColumnState();for(let d=0;d<c.length;d++){const{colId:f,sort:p,sortIndex:g,rowGroup:v,rowGroupIndex:m,aggFunc:y,pivot:C,pivotIndex:S,pinned:b,hide:w,width:x,flex:R}=c[d];u.push(f),p&&(t[g??h++]={colId:f,sort:p}),v&&(i[m??0]=f),typeof y=="string"&&r.push({colId:f,aggFunc:y}),C&&(n[S??0]=f),b&&(b==="right"?s:o).push(f),w&&a.push(f),(R||x)&&l.push({colId:f,flex:R??void 0,width:x})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:r.length?{aggregationModel:r}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:o.length||s.length?{leftColIds:o,rightColIds:s}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:r,pivot:n,columnPinning:o,columnVisibility:s,columnSizing:a,columnOrder:l,partialColumnState:u}=e,h={},c=v=>{let m=h[v];return m||(m={colId:v},h[v]=m,m)},d=u?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:v,sort:m},y)=>{const C=c(v);C.sort=m,C.sortIndex=y}),d.sort=null,d.sortIndex=null),i&&(i.groupColIds.forEach((v,m)=>{const y=c(v);y.rowGroup=!0,y.rowGroupIndex=m}),d.rowGroup=null,d.rowGroupIndex=null),r&&(r.aggregationModel.forEach(({colId:v,aggFunc:m})=>{c(v).aggFunc=m}),d.aggFunc=null),n&&(n.pivotColIds.forEach((v,m)=>{const y=c(v);y.pivot=!0,y.pivotIndex=m}),this.gos.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"}),d.pivot=null,d.pivotIndex=null),o&&(o.leftColIds.forEach(v=>{c(v).pinned="left"}),o.rightColIds.forEach(v=>{c(v).pinned="right"}),d.pinned=null),s&&(s.hiddenColIds.forEach(v=>{c(v).hide=!0}),d.hide=null),a&&(a.columnSizingModel.forEach(({colId:v,flex:m,width:y})=>{const C=c(v);C.flex=m??null,C.width=y}),d.flex=null);const f=l==null?void 0:l.orderedColIds,p=!!(f!=null&&f.length),g=p?f.map(v=>c(v)):Object.values(h);g.length&&(this.columnStates=g,this.columnApplyStateService.applyColumnState({state:g,applyOrder:p,defaultState:d},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){const r=[];for(const n of t)this.pivotResultColsService.getPivotResultCol(n.colId)&&r.push(n);this.columnApplyStateService.applyColumnState({state:r,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:r})=>{r&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var n;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set((n=e.columnGroup)==null?void 0:n.openColumnGroupIds),r=this.columnGroupStateService.getColumnGroupState().map(({groupId:o})=>{const s=t.has(o);return s&&t.delete(o),{groupId:o,open:s}});t.forEach(o=>{r.push({groupId:o,open:!0})}),r.length&&(this.columnGroupStates=r),this.columnGroupStateService.setColumnGroupState(r,"gridInitializing")}getFilterState(){var i,r;let e=(i=this.filterManager)==null?void 0:i.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const t=((r=this.filterManager)==null?void 0:r.getAdvancedFilterModel())??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){var n,o;const{filterModel:i,advancedFilterModel:r}=e??{advancedFilterModel:t};i&&((n=this.filterManager)==null||n.setFilterModel(i,"columnFilter")),r&&((o=this.filterManager)==null||o.setAdvancedFilterModel(r))}getRangeSelectionState(){var t;const e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{const{id:r,type:n,startRow:o,endRow:s,columns:a,startColumn:l}=i;return{id:r,type:n,startRow:o,endRow:s,colIds:a.map(u=>u.getColId()),startColId:l.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:i,columnModel:r,visibleColsService:n}=this;if(!Mr(t)||!i)return;const o=[];if(e.cellRanges.forEach(s=>{const a=[];if(s.colIds.forEach(u=>{const h=r.getCol(u);h&&a.push(h)}),!a.length)return;let l=r.getCol(s.startColId);if(!l){const u=n.getAllCols(),h=new Set(a);l=u.find(c=>h.has(c))}o.push({...s,columns:a,startColumn:l})}),EO(t)&&IO(t)&&o.length>1)return U("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(o)}getScrollState(){var r;if(!this.isClientSideRowModel)return;const e=(r=this.ctrlsService.getGridBodyCtrl())==null?void 0:r.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:i}=(e==null?void 0:e.getVScrollPosition())??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){var r;if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;(r=this.ctrlsService.getGridBodyCtrl())==null||r.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:r}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:r}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:r}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){var i;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((i=e==null?void 0:e.toggledNodes)!=null&&i.length)?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach(([r,n])=>{_u(n,this.cachedState[r])||(i=!0)}),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),_u(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},EM={version:ye,moduleName:"@ag-grid-community/state-core",beans:[R5]},D5={version:ye,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:S5},dependantModules:[EM]},T5={version:ye,moduleName:"@ag-grid-community/state",dependantModules:[EM,D5]};function _5(e){return e.rowModel.isLastRowIndexKnown()}function A5(e){var t;return((t=e.paginationService)==null?void 0:t.getPageSize())??100}function P5(e){var t;return((t=e.paginationService)==null?void 0:t.getCurrentPage())??0}function M5(e){var t;return((t=e.paginationService)==null?void 0:t.getTotalPages())??1}function F5(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function E5(e){var t;(t=e.paginationService)==null||t.goToNextPage()}function I5(e){var t;(t=e.paginationService)==null||t.goToPreviousPage()}function L5(e){var t;(t=e.paginationService)==null||t.goToFirstPage()}function k5(e){var t;(t=e.paginationService)==null||t.goToLastPage()}function O5(e,t){var i;(i=e.paginationService)==null||i.goToPage(t)}var G5=class extends B{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=Math.max(as(this.gos),1),r=Math.floor(e/i);this.paginationService.setPageSize(r,"autoCalculated")};this.isBodyRendered?Yt(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function N5(e,t,i){e.addManagedElementListeners(t,{keydown:r=>{if(!r.defaultPrevented&&r.key===N.TAB){const n=r.shiftKey;i.findNextFocusableElement(t,!1,n)||i.focusNextGridCoreContainer(n)&&r.preventDefault()}}})}var vl="paginationPageSizeSelector",V5=class extends ke{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(vl,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){kt(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(vl)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){const n=this.gos.exists("paginationPageSize"),o=this.gos.get(vl)!==!0;U(`'paginationPageSize=${t}'${n?"":" (default value)"}, but ${t} is not included in${o?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),o||U(`Either set '${vl}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const r=String(i?"":t);this.selectPageSizeComp?(ao(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(r,!0)):this.createPageSizeSelectorComp(e,r),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const i=this.localeService.getLocaleTextFunc(),r=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new NC).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(r).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(vl);return!Array.isArray(t)||yi(t)?e:[...t].sort((i,r)=>i-r)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},B5={selector:"AG-PAGE-SIZE-SELECTOR",component:V5},H5=class extends TM{constructor(){super(),this.btFirst=J,this.btPrevious=J,this.btNext=J,this.btLast=J,this.lbRecordCount=J,this.lbFirstRowOnPage=J,this.lbLastRowOnPage=J,this.lbCurrent=J,this.lbTotal=J,this.pageSizeComp=J,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[B5]);const{btFirst:t,btPrevious:i,btNext:r,btLast:n}=this;this.activateTabIndex([t,i,r,n]),t.insertAdjacentElement("afterbegin",vi(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",vi(e?"next":"previous",this.gos)),r.insertAdjacentElement("afterbegin",vi(e?"previous":"next",this.gos)),n.insertAdjacentElement("afterbegin",vi(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):this.focusService.focusGridInnerElement(o)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:r=>{(r.key===N.ENTER||r.key===N.SPACE)&&(r.preventDefault(),i())}})}),N5(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc(),r=i("thousandSeparator",","),n=i("decimalSeparator",".");return sV(e,r,n)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),r=e("of","of"),n=e("firstPage","First Page"),o=e("previousPage","Previous Page"),s=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${i}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${r}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${r}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const r=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||r,this.lastButtonDisabled=!t||r||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){CG(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),r=e?i:null;if(r===1){const y=this.rowModel.getRow(0);if(y&&y.group&&!(y.groupData||y.aggData)){this.setTotalLabelsToZero();return}}const n=this.paginationService.getCurrentPage(),o=this.paginationService.getPageSize();let s,a;this.isZeroPagesToDisplay()?s=a=0:(s=o*n+1,a=s+o-1,e&&a>r&&(a=r));const l=s+o-1,u=!e&&i<l,h=this.formatNumber(s);this.lbFirstRowOnPage.textContent=h;let c;const d=this.localeService.getLocaleTextFunc();u?c=d("pageLastRowUnknown","?"):c=this.formatNumber(a),this.lbLastRowOnPage.textContent=c;const p=t>0?n+1:0,g=this.formatNumber(p);this.lbCurrent.textContent=g;let v,m;if(e)v=this.formatNumber(t),m=this.formatNumber(r);else{const y=d("more","more");v=y,m=y}this.lbTotal.textContent=v,this.lbRecordCount.textContent=m,this.announceAriaStatus(h,c,m,g,v)}announceAriaStatus(e,t,i,r,n){const o=this.localeService.getLocaleTextFunc(),s=o("page","Page"),a=o("to","to"),l=o("of","of"),u=`${e} ${a} ${t} ${l} ${i}`,h=`${s} ${r} ${l} ${n}`;u!==this.ariaRowStatus&&(this.ariaRowStatus=u,this.ariaAnnouncementService.announceValue(u,"paginationRow")),h!==this.ariaPageStatus&&(this.ariaPageStatus=h,this.ariaAnnouncementService.announceValue(h,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},z5={selector:"AG-PAGINATION",component:H5},W5=class extends B{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return z5}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Y(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Y(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Y(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Y(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const r=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=r-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:r=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:r,keepRenderedRows:t})}},IM={version:ye,moduleName:"@ag-grid-community/pagination-core",beans:[W5,G5]},U5={version:ye,moduleName:"@ag-grid-community/pagination-api",dependantModules:[IM],apiFunctions:{paginationIsLastPageFound:_5,paginationGetPageSize:A5,paginationGetCurrentPage:P5,paginationGetTotalPages:M5,paginationGetRowCount:F5,paginationGoToNextPage:E5,paginationGoToPreviousPage:I5,paginationGoToFirstPage:L5,paginationGoToLastPage:k5,paginationGoToPage:O5}},$5={version:ye,moduleName:"@ag-grid-community/pagination",dependantModules:[IM,U5]},ri="clientSide",Vt="serverSide",zs="infinite",K5={onGroupExpandedOrCollapsed:[ri],refreshClientSideRowModel:[ri],isRowDataEmpty:[ri],forEachLeafNode:[ri],forEachNodeAfterFilter:[ri],forEachNodeAfterFilterAndSort:[ri],resetRowHeights:[ri],applyTransaction:[ri],applyTransactionAsync:[ri],flushAsyncTransactions:[ri],getBestCostNodeSelection:[ri],getServerSideSelectionState:[Vt],setServerSideSelectionState:[Vt],applyServerSideTransaction:[Vt],applyServerSideTransactionAsync:[Vt],applyServerSideRowData:[Vt],retryServerSideLoads:[Vt],flushServerSideAsyncTransactions:[Vt],refreshServerSide:[Vt],getServerSideGroupLevelState:[Vt],refreshInfiniteCache:[zs],purgeInfiniteCache:[zs],getInfiniteRowCount:[zs],isLastRowIndexKnown:[zs,Vt],expandAll:[ri,Vt],collapseAll:[ri,Vt],onRowHeightChanged:[ri,Vt],setRowCount:[zs,Vt],getCacheBlockState:[zs,Vt]},Y5={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function X5(e,t,i){const r=Y5[e];if(r){const{version:o,new:s,old:a,message:l}=r,u=a??e;return(...h)=>{const c=s?`Please use ${s} instead. `:"";return U(`Since ${o} api.${u} is deprecated. ${c}${l??""}`),t.apply(t,h)}}const n=K5[e];return n?(...o)=>{const s=i.rowModel.getType();if(!n.includes(s)){Ge(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,o)}:t}var q5={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},Sn=(e,t)=>{const i=t.rowModelType??"clientSide";return i==="clientSide"||i==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},Z5={enableRowGroup:Sn,rowGroup:Sn,rowGroupIndex:Sn,enablePivot:Sn,enableValue:Sn,pivot:Sn,pivotIndex:Sn,aggFunc:Sn,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var i;const t=["columnsMenuTab","generalMenuTab"];return(i=e.menuTabs)!=null&&i.some(r=>t.includes(r))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>ca},j5={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},Q5=Object.keys(j5),ca={objectName:"colDef",allProperties:Q5,docsUrl:"column-properties/",deprecations:q5,validations:Z5},J5=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),eU={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},tU=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>ca,defaultColDef:()=>ca,defaultColGroupDef:()=>ca,autoGroupColumnDef:()=>ca,selectionColumnDef:()=>ca}),iU=()=>({objectName:"gridOptions",allProperties:[...Mu.ALL_PROPERTIES,...uP.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:J5(),validations:tU()}),rU=class extends B{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,iU())}validateApiFunction(e,t){return X5(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:r,allProperties:n,propertyExceptions:o,objectName:s,docsUrl:a}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(r)],n,s,a);const l=new Set;Object.keys(e).forEach(h=>{const c=r[h];if(c)if("renamed"in c){const{renamed:C,version:S}=c;l.add(`As of v${S}, ${String(h)} is deprecated. Please use ${String(C)} instead.`),e[C]=e[h]}else{const{message:C,version:S}=c;l.add(`As of v${S}, ${String(h)} is deprecated. ${C??""}`)}const d=e[h];if(d==null||d===!1)return;const f=i[h];let p;if(f)if(typeof f=="function"){const C=f(e,this.gridOptions);if(!C)return;if("objectName"in C){const S=e[h];if(Array.isArray(S)){S.forEach(b=>{this.processOptions(b,C)});return}this.processOptions(e[h],C);return}p=C}else p=f;else return;const{module:g,dependencies:v,validate:m,supportedRowModels:y}=p;if(y){const C=this.gridOptions.rowModelType??"clientSide";if(!y.includes(C)){l.add(`${String(h)} is not supported with the '${C}' row model.`);return}}if(g){const C=Array.isArray(g)?g:[g];let S=!0;if(C.forEach(b=>{this.gos.assertModuleRegistered(b,String(h))||(S=!1,l.add(`${String(h)} is only available when ${b} is loaded.`))}),!S)return}if(v){const C=this.checkForRequiredDependencies(h,v,e);if(C){l.add(C);return}}if(m){const C=m(e,this.gridOptions);if(C){l.add(C);return}}}),l.size>0&&l.forEach(h=>{U(h)})}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).find(([a,l])=>{const u=i[a];return!l.includes(u)});if(!n)return null;const[o,s]=n;return s.length>1?`'${String(e)}' requires '${o}' to be one of [${s.join(", ")}].`:`'${String(e)}' requires '${o}' to be ${s[0]}.`}checkProperties(e,t,i,r,n){const o=["__ob__","__v_skip","__metadata__"],s=nU(Object.getOwnPropertyNames(e),[...o,...t,...i],i);if(Qi(s,(a,l)=>{let u=`invalid ${r} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;i.includes("context")&&(u+=`
If you are trying to annotate ${r} with application data, use the '${r}.context' property instead.`),U(u)}),Object.keys(s).length>0&&n){const a=this.getFrameworkOverrides().getDocLink(n);U(`to see all the valid ${r} properties please check: ${a}`)}}};function nU(e,t,i){const r={},n=e.filter(o=>!t.some(s=>s===o));return n.length>0&&n.forEach(o=>r[o]=LP({inputValue:o,allSuggestions:i}).values),r}var oU={version:ye,moduleName:"@ag-grid-community/core"},sU={version:ye,moduleName:"@ag-grid-community/core-validations",beans:[rU]},LM={version:ye,moduleName:"@ag-grid-community/core-community-features",dependantModules:[oU,sU,v2,UV,T5,Qz,az,$5,C5]},aU=class extends B{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){var e,t;this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:((e=this.beans.stateService)==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(t=this.beans.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Xc=new Set(["gridPreDestroyed","fillStart","pasteStart"]),lU=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",uU=new Map([...Mu.BOOLEAN_PROPERTIES.map(e=>[e,um]),...Mu.NUMBER_PROPERTIES.map(e=>[e,QP]),["groupAggFiltering",e=>typeof e=="function"?e:um(e)],["pageSize",hr(1)],["autoSizePadding",hr(0)],["keepDetailRowsCount",hr(1)],["rowBuffer",hr(0)],["infiniteInitialRowCount",hr(1)],["cacheOverflowSize",hr(1)],["cacheBlockSize",hr(1)],["serverSideInitialRowCount",hr(1)],["viewportRowModelPageSize",hr(1)],["viewportRowModelBufferSize",hr(0)]]);function kM(e,t){const i=uU.get(e);return i?i(t):t}function hU(e){const t={};return Object.entries(e).forEach(([i,r])=>{const n=kM(i,r);t[i]=n}),t}var OM=class GM extends B{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Ka,this.globalEventHandlerFactory=t=>(i,r)=>{if(!this.isAlive())return;const n=Xc.has(i);if(n&&!t||!n&&t)return;const o=uP.getCallbackForEvent(i),s=this.gridOptions[o];typeof s=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{s(r)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:i})=>{this.updateGridOptions({options:i,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??eU[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return Y(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(r=>{const n=r;return n.api=this.api,n.context=this.gridOptionsContext,t(n)})}updateGridOptions({options:t,force:i,source:r="api"}){var s;const n={id:GM.changeSetId++,properties:[]},o=[];Object.entries(t).forEach(([a,l])=>{r==="api"&&fG[a]&&U(`${a} is an initial property and cannot be updated.`);const u=kM(a,l),h=i||typeof u=="object"&&r==="api",c=this.gridOptions[a];if(h||c!==u){this.gridOptions[a]=u;const d={type:a,currentValue:u,previousValue:c,changeSet:n,source:r};o.push(d)}}),(s=this.validationService)==null||s.processGridOptions(this.gridOptions),n.properties=o.map(a=>a.type),o.forEach(a=>{this.gridOptions.debug&&Oi(`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propertyEventService.dispatchEvent(a)})}addPropertyEventListener(t,i){this.propertyEventService.addEventListener(t,i)}removePropertyEventListener(t,i){this.propertyEventService.removeEventListener(t,i)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){const i=t;return i.api=this.api,i.context=this.gridOptionsContext,i}assertModuleRegistered(t,i){return Kr.__assertRegistered(t,i,this.gridId)}isModuleRegistered(t){return Kr.__isRegistered(t,this.gridId)}};OM.changeSetId=0;var cU=OM,dU=class extends B{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,r;if(lt(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(r=`getCol${t}`,i=this.visibleColsService[r](e.column)),!i)return;const{headerRowIndex:n}=e;if(this.getHeaderRowType(n)!=="filter"){const a=[i];for(;i.getParent();)i=i.getParent(),a.push(i);i=a[a.length-1-n]}const{column:o,headerRowIndex:s}=this.getHeaderIndexToFocus(i,n);return{column:o,headerRowIndex:s}}getHeaderIndexToFocus(e,t){let i;if(lt(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const r=e;i=r.getLeafColumns()[0];let n=i;for(;n!==r;)t++,n=n.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),r=i==="filter",n=i==="column";let o=r?e:e.getParent(),s=t-1,a=s;if(n&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),s--;a=s,s<0&&(o=e,s=t,a=void 0)}return{column:o,headerRowIndex:s,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,i="After"){const r=this.getHeaderRowType(t);let n=e,o=t+1;const s=o;if(r==="group"){const a=e.getDisplayedLeafColumns(),l=i==="After"?a[0]:Ee(a),u=[];let h=l;for(;h.getParent()!==e;)h=h.getParent(),u.push(h);if(n=l,l.isSpanHeaderHeight())for(let c=u.length-1;c>=0;c--){const d=u[c];if(!d.isPadding()){n=d;break}o++}else n=Ee(u),n||(n=l)}return{column:n,headerRowIndex:o,headerRowIndexWithoutSpan:s}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),r=i[t==="start"?0:i.length-1];if(!r)return;const n=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()),o=n==null?void 0:n.getRowType(e);if(o=="group"){const s=this.visibleColsService.getColGroupAtLevel(r,e);return{headerRowIndex:e,column:s}}return{headerRowIndex:o==null?-1:e,column:r}}},fU=class extends B{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(i,r,n)=>e({key:i,defaultValue:r,variableValues:n});const t=this.gos.get("localeText");return(i,r,n)=>{let o=t&&t[i];if(o&&n&&n.length){let s=0;for(;!(s>=n.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",n[s++])}return o??r}}},pU=class extends B{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new xC(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),r=md(this.gos)&&!Xc.has(e),n=r?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventService.addEventListener(e,i,r)}removeEventListener(e,t){var o;const i=this.frameworkEventWrappingService.unwrap(t),r=this.asyncEventListeners.get(e),n=!!(r!=null&&r.delete(i));n||(o=this.syncEventListeners.get(e))==null||o.delete(i),this.eventService.removeEventListener(e,i,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(md(this.gos)){const r=(o,s)=>{Xc.has(o)&&t(o,s)},n=(o,s)=>{Xc.has(o)||t(o,s)};this.globalEventListenerPairs.set(e,{syncListener:r,asyncListener:n}),this.eventService.addGlobalListener(r,!1),this.eventService.addGlobalListener(n,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:r,asyncListener:n}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(r,!1),this.eventService.removeGlobalListener(n,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,r)=>{i.forEach(n=>this.eventService.removeEventListener(r,n,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},gU=class extends B{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},vU=class extends B{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return Fe(this.topRowBounds)||Fe(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=Y(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},mU=class extends B{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=Yt(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=st(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),dP(t,"polite"),yG(t,"additions text"),mG(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(kt(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},yU=class extends B{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}const i=r=>{for(;r.length;){const n=r.pop();n&&n()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),i(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),i(this.executeLaterFuncs)},200)})}},CU=class extends B{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},SU=class extends B{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=it(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){U("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){var n;const r=e.newAgStackInstance();(n=this.overlayWrapperComp)==null||n.showOverlay(r,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;if(this.state===2){const t=this.ctrlsService.get("gridHeaderCtrl");e=(t==null?void 0:t.getHeaderHeight())||0}else this.wrapperPadding!==0&&(e=0);this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},wU=class extends B{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return Y(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),g0(t,this.processClassesFromGridOptions(e.rowNode)),g0(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=o=>{typeof o=="string"?t.push(o):Array.isArray(o)&&o.forEach(s=>t.push(s))},r=this.gos.get("rowClass");if(r){if(typeof r=="function")return U("rowClass should not be a function, please use getRowClass instead"),[];i(r)}const n=this.gos.getCallback("getRowClass");if(n){const o={data:e.data,node:e,rowIndex:e.rowIndex},s=n(o);i(s)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},()=>{}),t}processRowClassRules(e,t,i){const r=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),r,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},bU=class extends B{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=PG(),this.gos.get("debug")&&Oi("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&Oi(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},xU=class extends B{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Cr(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Cr(this.gos))}doFullSort(e,t){const i=(n,o)=>({currentPos:o,rowNode:n}),r=e.map(i);return r.sort(this.compareRowNodes.bind(this,t)),r.map(n=>n.rowNode)}compareRowNodes(e,t,i){const r=t.rowNode,n=i.rowNode;for(let o=0,s=e.length;o<s;o++){const a=e[o],l=a.sort==="desc",u=this.getValue(r,a.column),h=this.getValue(n,a.column);let c;const d=this.getComparator(a,r);if(d?c=d(u,h,r,n,l):c=_O(u,h,this.isAccentedSort),!isNaN(c)&&c!==0)return a.sort==="asc"?c:c*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,r=i.getColDef().comparator;if(r!=null)return r;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const o=this.columnModel.getColDefCol(n);if(o)return o.getColDef().comparator}getValue(e,t){var r,n,o;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(Tf(this.gos,this.columnModel.isPivotActive())){const l=(r=e.allLeafChildren)==null?void 0:r[0];return l?this.valueService.getValue(t,l,!1,!1):void 0}const a=(n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCol(t.getId());return a?(o=e.groupData)==null?void 0:o[a.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},Ef=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let r=0;r<e.childrenAfterGroup.length;r++){const n=e.childrenAfterGroup[r];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[r],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const r={rowNode:t,children:null};this.mapToItems[t.id]=r,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(r=>this.nodeIdsToColumns[i.id][r.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let r=0;r<t;r++){const n=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(n),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>i[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>!i[n.getId()])}},NM=class extends B{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new D2,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=Cd(e),this.groupSelectsChildren=ws(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const r=ws(e),n=Cd(e);(r!==this.groupSelectsChildren||n!==this.rowSelectionMode)&&(this.groupSelectsChildren=r,this.rowSelectionMode=n,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!lU(t))return e;const i=this.selectionCtx.getRoot();return i?i.isSelected()??!1:!0}setNodesSelected(e){var c;const{newValue:t,clearSelection:i,suppressFinishActions:r,rangeSelect:n,nodes:o,event:s,source:a}=e;if(o.length===0)return 0;if(o.length>1&&!this.isMultiSelect())return U("cannot multi select unless selection mode is 'multiRow'"),0;const l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,u=o.map(d=>d.footer?d.sibling:d);if(n){if(u.length>1)return U("cannot range select while selecting multiple rows"),0;const d=u[0],f=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(d)){const p=this.selectionCtx.truncate(d);return f&&this.selectRange(p.discard,!1,a),this.selectRange(p.keep,f,a)}else if(this.selectionCtx.getRoot()!==d){const v=this.selectionCtx.extend(d,this.groupSelectsChildren);return f&&this.selectRange(v.discard,!1,a),this.selectRange(v.keep,f,a)}}}r||this.selectionCtx.setRoot(u[0]);let h=0;for(let d=0;d<u.length;d++){const f=u[d];l&&f.group||f.selectThisNode(t,s,a)&&h++,this.groupSelectsChildren&&((c=f.childrenAfterGroup)!=null&&c.length)&&(h+=this.selectChildren(f,t,l,a))}return r||(t&&(i||!this.isMultiSelect())&&(h+=this.clearOtherNodes(u[0],a)),h>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),h}selectRange(e,t,i){let r=0;return e.forEach(n=>{if(n.group&&this.groupSelectsChildren)return;n.selectThisNode(t,void 0,i)&&r++}),r>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),r}selectChildren(e,t,i,r){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return Fe(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:r,nodes:n})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,r)=>{i&&e(i)&&t.set(r,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!it(this.gos))return!1;const r=this.rowModel.getRootNode();t||(t=new Ef(!0,r),t.setInactive());let n=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==r){const s=o.calculateSelectedFromChildren();n=o.selectThisNode(s===null?!1:s,void 0,e)||n}}),n}clearOtherNodes(e,t){const i=new Map;let r=0;return this.selectedNodes.forEach(n=>{if(n&&n.id!==e.id){const o=this.selectedNodes.get(n.id);r+=o.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&i.set(n.parent.id,n.parent)}}),i.forEach(n=>{const o=n.calculateSelectedFromChildren();n.selectThisNode(o===null?!1:o,void 0,t)}),r}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(Y(t)&&e.id!==t.id&&t){const r=t.id;this.selectedNodes.get(r)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(!it(this.gos))return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const i=[];function r(n){for(let o=0,s=n.length;o<s;o++){const a=n[o];if(a.isSelected())i.push(a);else{const l=a;l.group&&l.children&&r(l.children)}}}return r(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=s=>s.selectThisNode(!1,void 0,r),i=it(this.gos),{source:r,justFiltered:n,justCurrentPage:o}=e;if(o||n){if(!i){Ge("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(n,o).forEach(t)}else this.selectedNodes.forEach(s=>{s&&t(s)}),this.reset(r);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r)}getSelectedCounts(e,t){let i=0,r=0;const n=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?i++:o.selectable&&r++)};return this.getNodesToSelect(e,t).forEach(n),{selectedCount:i,notSelectedCount:r}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:r}=this.getSelectedCounts(e,t);return i===0&&r===0?!1:i>0&&r>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();const i=[];if(t)return this.forEachNodeOnPage(n=>{if(!n.group){i.push(n);return}if(!n.expanded){const o=s=>{var a;i.push(s),(a=s.childrenAfterFilter)!=null&&a.length&&s.childrenAfterFilter.forEach(o)};o(n);return}this.groupSelectsChildren||i.push(n)}),i;const r=this.rowModel;return e?(r.forEachNodeAfterFilter(n=>{i.push(n)}),i):(r.forEachNode(n=>{i.push(n)}),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let r=t;r<=i;r++){const n=this.rowModel.getRow(r);n&&e(n)}}selectAllRowNodes(e){if(FO(this.gos)&&!SC(this.gos))return U("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:i,justCurrentPage:r}=e,n=this.getNodesToSelect(i,r);n.forEach(o=>o.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(n[0]??null),this.selectionCtx.setEndRange(Ee(n)??null),it(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t!=null&&t.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return Ge("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const i=new Set(e),r=[];this.rowModel.forEachNode(n=>{i.has(n.id)&&r.push(n)}),this.setNodesSelected({newValue:!0,nodes:r,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!it(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},RU=class extends B{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const{gos:t}=this,i=vd(t),r=CC(t);if(!i||!r)return;const n=ws(t),o=it(t)&&n,s=[],a=l=>{if(e&&!l.group)return;if(o&&l.group){const h=l.childrenAfterGroup.some(c=>c.selectable===!0);l.setRowSelectable(h,!0);return}const u=(r==null?void 0:r(l))??!0;l.setRowSelectable(u,!0),!u&&l.isSelected()&&s.push(l)};if(o){const l=this.rowModel;new Ef(!1,l.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);s.length&&this.selectionService.setNodesSelected({nodes:s,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof NM&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},G0=["asc","desc",null],DU=class extends B{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const r=this.getNextSortDirection(e);this.setSortForColumn(e,r,t,i)}setSortForColumn(e,t,i,r){t!=="asc"&&t!=="desc"&&(t=null);const n=Cr(this.gos);let o=[e];if(n&&e.getColDef().showRowGroup){const l=this.funcColsService.getSourceColumnsForGroupColumn(e),u=l==null?void 0:l.filter(h=>h.isSortable());u&&(o=[e,...u])}o.forEach(l=>l.setSort(t,r));const s=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!s){const l=this.clearSortBarTheseColumns(o,r);a.push(...l)}this.updateSortIndex(e),a.push(...o),this.dispatchSortChangedEvents(r,a)}updateSortIndex(e){var a;const t=Cr(this.gos),i=(a=this.showRowGroupColsService)==null?void 0:a.getShowRowGroupCol(e.getId()),r=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(l=>l.setSortIndex(null));const o=n.filter(l=>t&&l.getColDef().showRowGroup?!1:l!==r);(r.getSort()?[...o,r]:o).forEach((l,u)=>{l.setSortIndex(u)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getAllCols().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach(r=>{e.includes(r)||(r.getSort()&&i.push(r),r.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=G0,!Array.isArray(t)||t.length<=0)return U(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),r=i<0,n=i==t.length-1;let o;return r||n?o=t[0]:o=t[i+1],G0.indexOf(o)<0?(U("invalid sort type ",o),null):o}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){const o=Cr(this.gos);e=e.filter(s=>{var h;const a=!!s.getAggFunc(),l=!s.isPrimary(),u=o?(h=this.showRowGroupColsService)==null?void 0:h.getShowRowGroupCol(s.getId()):s.getColDef().showRowGroup;return a||l||u})}const t=this.funcColsService.getRowGroupColumns().filter(o=>!!o.getSort()),i={};e.forEach((o,s)=>i[o.getId()]=s),e.sort((o,s)=>{const a=o.getSortIndex(),l=s.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){const u=i[o.getId()],h=i[s.getId()];return u>h?1:-1}else return l==null?-1:1});const r=Cr(this.gos)&&!!t.length;r&&(e=[...new Set(e.map(o=>{var s;return((s=this.showRowGroupColsService)==null?void 0:s.getShowRowGroupCol(o.getId()))??o}))]);const n=new Map;return e.forEach((o,s)=>n.set(o,s)),r&&t.forEach(o=>{const s=this.showRowGroupColsService.getShowRowGroupCol(o.getId());n.set(o,n.get(s))}),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,r])=>t-r).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Cr(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const r=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=r[0].getSort();return r.every(s=>s.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},TU=class extends B{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&Oi(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,$o(e.source))}}},_U="paste",AU=class extends B{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){it(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==_U&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const r=this.gos.get("aggregateOnlyChangedColumns"),n=new Ef(r,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst(o=>{i.push(o)})}this.rowRenderer.refreshCells({rowNodes:i})}},PU=class extends B{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Ge("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return Oi("Processing of the expression failed"),Oi("Expression = ",e),Oi("Params = ",t),Oi("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},MU=class extends B{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},FU=class extends B{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=fn(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=i=>this.callColumnCellValueChangedHandler(i),t=md(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e,t){const i=t.leafGroup&&this.columnModel.isPivotMode(),r=t.group&&t.expanded&&!t.footer&&!i,n=this.gos.get("groupSuppressBlankHeader");if(!r||n)return this.getValue(e,t);let o=!1;const s=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof s!="function"?o=!!s:o=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});const a=r&&o;return this.getValue(e,t,!1,a)}getValue(e,t,i=!1,r=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,s=e.getColId(),a=t.data;let l;const u=t.groupData&&t.groupData[s]!==void 0,h=!r&&t.aggData&&t.aggData[s]!==void 0,c=this.isSsrm&&r&&!!e.getColDef().aggFunc,d=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?l=this.executeFilterValueGetter(n.filterValueGetter,a,e,t):this.isTreeData&&h?l=t.aggData[s]:this.isTreeData&&n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):this.isTreeData&&o&&a?l=su(a,o,e.isFieldContainsDots()):u?l=t.groupData[s]:h?l=t.aggData[s]:n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):d?l=su(a,t.field,e.isFieldContainsDots()):o&&a&&!c&&(l=su(a,o,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const f=l.substring(1);l=this.executeValueGetter(f,a,e,t)}if(l==null){const f=this.getOpenedGroup(t,e);if(f!=null)return f}return l}parseValue(e,t,i,r){const n=e.getColDef(),o=n.valueParser;if(Y(o)){const s=this.gos.addGridCommonParams({node:t,data:t==null?void 0:t.data,oldValue:r,newValue:i,colDef:n,column:e});return typeof o=="function"?o(s):this.expressionService.evaluate(o,s)}return i}getDeleteValue(e,t){return Y(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,r,n=!0){let o=null,s;const a=e.getColDef();if(r?s=r:n&&(s=a.valueFormatter),s){const l=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});typeof s=="function"?o=s(l):o=this.expressionService.evaluate(s,l)}else if(a.refData)return a.refData[i]||"";return o==null&&Array.isArray(i)&&(o=i.join(", ")),o}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const r=t.getColDef().showRowGroup;let n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&(r===!0||r===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,r){const n=this.columnModel.getColDefCol(t);if(!e||!n)return!1;Fe(e.data)&&(e.data={});const{field:o,valueSetter:s}=n.getColDef();if(Fe(o)&&Fe(s))return U("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(n,i))return U("Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n});a.newValue=i;let l;if(Y(s)?typeof s=="function"?l=s(a):l=this.expressionService.evaluate(s,a):l=this.setValueUsingField(e.data,o,i,n.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const u=this.getValue(n,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:u,value:u,source:r}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,r){if(!t)return!1;let n=!1;if(!r)n=e[t]===i,n||(e[t]=i);else{const o=t.split(".");let s=e;for(;o.length>0&&s;){const a=o.shift();o.length===0?(n=s[a]===i,n||(s[a]=i)):s=s[a]}}return!n}executeFilterValueGetter(e,t,i,r){const n=this.gos.addGridCommonParams({data:t,node:r,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,r)});return typeof e=="function"?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,r){const n=i.getColId(),o=this.valueCache.getValue(r,n);if(o!==void 0)return o;const s=this.gos.addGridCommonParams({data:t,node:r,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,r)});let a;return typeof e=="function"?a=e(s):a=this.expressionService.evaluate(e,s),this.valueCache.setValue(r,n,a),a}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),r=e.getColDef().keyCreator;let n=i;if(r){const o=this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});n=r(o)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&U("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}},ZC=class No{static applyGlobalGridOptions(t){if(!No.gridOptions)return t;let i={};return Kt(i,No.gridOptions,!0,!0),No.mergeStrategy==="deep"?Kt(i,t,!0,!0):i={...i,...t},No.gridOptions.context&&(i.context=No.gridOptions.context),t.context&&(No.mergeStrategy==="deep"&&i.context&&Kt(t.context,i.context,!0,!0),i.context=t.context),i}};ZC.gridOptions=void 0;ZC.mergeStrategy="shallow";var EU=ZC;function Rae(e,t,i){if(!t)return Ge("No gridOptions provided to createGrid"),{};const r=new LU().create(e,t,n=>{const o=new oz(e);n.createBean(o)},void 0,i);if(!Object.isFrozen(t)&&!(i!=null&&i.frameworkOverrides)){const n="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{Ge(`gridOptions.api is no longer supported. See ${n}.`)},configurable:!0})}return r}var IU=1,LU=class{create(e,t,i,r,n){const o=EU.applyGlobalGridOptions(t),s=hU(o),a=s.gridId??String(IU++),l=this.getRegisteredModules(n,a),u=this.createBeansList(s.rowModelType,l,a),h=this.createProvidedBeans(e,s,n);if(!u){Ge("Failed to create grid.");return}const c={providedBeanInstances:h,beanClasses:u,gridId:a,beanInitComparator:K2,beanDestroyComparator:Y2,derivedBeans:[G2]},d=new MN(c);return this.registerModuleUserComponents(d,l),this.registerControllers(d,l),this.registerModuleApiFunctions(d,l),i(d),d.getBean("syncService").start(),r&&r(d),d.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach(r=>{r.controllers&&r.controllers.forEach(n=>i.register(n))})}getRegisteredModules(e,t){const i=e?e.modules:null,r=Kr.__getRegisteredModules(t),n=[],o={},s=(a,l,u)=>{(c=>{o[c.moduleName]||(o[c.moduleName]=!0,n.push(c),Kr.__register(c,a,u))})(l),l.dependantModules&&l.dependantModules.forEach(c=>s(a,c,u))};return s(!!(i!=null&&i.length)||!Kr.__isPackageBased(),LM,void 0),i&&i.forEach(a=>s(!0,a,t)),r&&r.forEach(a=>s(!Kr.__isPackageBased(),a,void 0)),n}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]),r=e.getBean("userComponentRegistry");i.forEach(({name:n,classImp:o,params:s})=>{r.registerDefaultComponent(n,o,s)})}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach(r=>{const n=r.apiFunctions;n&&Object.keys(n).forEach(s=>{i==null||i.addFunction(s,n[s])})})}createProvidedBeans(e,t,i){let r=i?i.frameworkOverrides:null;Fe(r)&&(r=new I2);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:r};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(e="clientSide",t,i){const r=t.filter(l=>!l.rowModel||l.rowModel===e),n={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!n[e]){Ge("Could not find row model for rowModelType = ",e);return}if(!Kr.__assertRegistered(n[e],`rowModelType = '${e}'`,i))return;const o=[Q2,Z2,dU,aU,O2,hN,W2,U2,MH,kP,bU,AH,fU,w2,LN,hG,tz,cU,F2,NM,QO,qV,vU,gU,C2,PU,jO,_H,MU,FU,m2,PH,FN,iz,TH,J2,L2,T2,DH,DU,CU,yU,RU,AU,FH,N2,wU,xU,q2,rz,j2,X2,TU,SU,EH,pU,mU,IH,tG,V2,iG,JO,B2,H2,uG,eG,aG,z2,lG,KO],s=this.extractModuleEntity(r,l=>l.beans?l.beans:[]);o.push(...s);const a=[];return o.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},VM=class extends B{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function kU(e){e.expansionService.expandAll(!0)}function OU(e){e.expansionService.expandAll(!1)}function GU(e){var r,n;const t=(r=e.rowModelHelperService)==null?void 0:r.getClientSideRowModel(),i=(n=e.rowModelHelperService)==null?void 0:n.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}function NU(e,t,i){var o,s;const r=(o=e.rowModelHelperService)==null?void 0:o.getServerSideRowModel();if(r){if(e.funcColsService.isRowGroupEmpty()){r.setRowCount(t,i);return}Ge("setRowCount cannot be used while using row grouping.");return}const n=(s=e.rowModelHelperService)==null?void 0:s.getInfiniteRowModel();if(n){n.setRowCount(t,i);return}}function VU(e){var t;return((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function BU(e){return e.rowModel.isLastRowIndexKnown()}var HU={version:ye,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:kU,collapseAll:OU,onRowHeightChanged:GU}},zU={version:ye,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:NU,getCacheBlockState:VU,isLastRowIndexKnown:BU}},Za=typeof global>"u"?{}:global;Za.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Za.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Za.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Za.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Za.Node=typeof Node>"u"?{}:Node;Za.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var WU="ROOT_NODE_ID",Gp=0,UU=class{constructor(e,t,i,r,n,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=r,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=WU,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return rP(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){U("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((r,n)=>this.createNode(r,this.rootNode,Gp,n)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,i=(t==null?void 0:t.length)??0,r=new Map;let n=-1,o=-1;for(let s=0;s<i;++s){const a=t[s],l=a.data;l!==e[s]&&(o<0&&(n=s),o=s,r.set(l,a))}if(n<0)return!1;for(let s=n;s<=o;++s){const a=r.get(e[s]);a!==void 0&&(t[s]=a,a.sourceRowIndex=s)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}updateSelection(e,t){const i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const i=e.add;if(yi(i))return;const r=this.rootNode.allLeafChildren;let n=r.length;if(typeof e.addIndex=="number"&&(n=this.sanitizeAddIndex(e.addIndex),n>0&&this.gos.get("treeData")))for(let l=0;l<r.length;l++){const u=r[l];if((u==null?void 0:u.rowIndex)==n-1){n=l+1;break}}const o=i.map((a,l)=>this.createNode(a,this.rootNode,Gp,n+l));if(n<r.length){const a=r.slice(0,n),l=r.slice(n,r.length),u=a.length+o.length;for(let h=0,c=l.length;h<c;++h)l[h].sourceRowIndex=u+h;this.rootNode.allLeafChildren=[...a,...o,...l],t.rowsInserted=!0}else this.rootNode.allLeafChildren=r.concat(o);const s=this.rootNode.sibling;s&&(s.allLeafChildren=r),t.rowNodeTransaction.add=o}sanitizeAddIndex(e){var i;const t=((i=this.rootNode.allLeafChildren)==null?void 0:i.length)??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},i){var s,a;const{remove:r}=e;if(yi(r))return;const n={};r.forEach(l=>{const u=this.lookupRowNode(l);u&&(u.isSelected()&&i.push(u),u.clearRowTopAndRowIndex(),n[u.id]=!0,delete this.allNodesMap[u.id],t.remove.push(u))}),this.rootNode.allLeafChildren=((s=this.rootNode.allLeafChildren)==null?void 0:s.filter(l=>!n[l.id]))??null,(a=this.rootNode.allLeafChildren)==null||a.forEach((l,u)=>{l.sourceRowIndex=u});const o=this.rootNode.sibling;o&&(o.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},i){const{update:r}=e;yi(r)||r.forEach(n=>{const o=this.lookupRowNode(n);o&&(o.updateData(n),!o.selectable&&o.isSelected()&&i.push(o),this.setMasterForRow(o,n,Gp,!1),t.update.push(o))})}lookupRowNode(e){var r;const t=Ya(this.gos);let i;if(t){const n=t({data:e,level:0});if(i=this.allNodesMap[n],!i)return Ge(`could not find row id=${n}, data item was not found for this id`),null}else if(i=(r=this.rootNode.allLeafChildren)==null?void 0:r.find(n=>n.data===e),!i)return Ge("could not find data item as object was not found",e),Ge("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,r){const n=new jr(this.beans);return n.sourceRowIndex=r,n.group=!1,this.setMasterForRow(n,e,i,!0),t&&(n.parent=t),n.level=i,n.setDataAndId(e,this.nextId.toString()),this.allNodesMap[n.id]&&U(`duplicate node id '${n.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[n.id]=n,this.nextId++,n}setMasterForRow(e,t,i,r){if(this.gos.get("treeData"))e.setMaster(!1),r&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const s=this.gos.get("isRowMaster");s?e.setMaster(s(t)):e.setMaster(!0)}else e.setMaster(!1);if(r){const s=this.funcColsService.getRowGroupColumns(),a=s?s.length:0,l=i+a;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},$U=class extends B{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Yt(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new jr(this.beans),this.nodeManager=new UU(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),r=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),s=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...i,...r,...r,...n,...o,...s,...a];this.addManagedPropertyListeners(l,u=>{var d;const h=(d=u.changeSet)==null?void 0:d.properties;if(!h)return;const c=f=>h.some(p=>f.has(p));if(c(e)){this.setRowData(this.rootNode.allLeafChildren.map(f=>f.data));return}if(c(t)){this.refreshModel({step:"group"});return}if(c(i)){this.refreshModel({step:"filter"});return}if(c(r)){this.refreshModel({step:"pivot"});return}if(c(n)){this.refreshModel({step:"aggregate"});return}if(c(o)){this.refreshModel({step:"sort"});return}if(c(s)){this.refreshModel({step:"filter_aggregates"});return}c(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,r){let n,o=!1;do{n=!1;const s=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(s,i),u=Math.min(a,r);for(let h=l;h<=u;h++){const c=this.getRow(h);if(c.rowHeightEstimated){const d=Zn(this.gos,c);c.setRowHeight(d.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,r=Tt(this.gos,"normal");for(let n=0;n<this.rowsToDisplay.length;n++){const o=this.rowsToDisplay[n];if(o.id!=null&&i.add(o.id),o.rowHeight==null){const s=Zn(this.gos,o,r,e);o.setRowHeight(s.height,s.estimated)}o.setRowTop(t),o.setRowIndex(n),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),r=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},n=o=>{if(r(o),r(o.detailNode),r(o.sibling),o.hasChildren()&&o.childrenAfterGroup){const s=o.level==-1;i&&!s&&!o.expanded||o.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const r=this.getRowIndexAtPixel(t),n=this.getRow(r),o=!this.gos.get("suppressAnimationFrame");if(n===e[0])return!1;const s=this.rootNode.allLeafChildren;return e.forEach(a=>{Xt(s,a)}),e.forEach((a,l)=>{Sd(s,a,Math.max(r+i,0)+l)}),e.forEach((a,l)=>{a.sourceRowIndex=l}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:o,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const i=t!=null?this.getRowIndexAtPixel(t):null,r=i!=null?this.getRow(i):null;if(!r||!e||t==null){this.clearHighlightedRow();return}const n=this.getHighlightPosition(t,r),o=this.isHighlightingCurrentPosition(e,r,n),s=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==r;(o||s)&&(this.clearHighlightedRow(),o)||(r.setHighlighted(n),this.lastHighlightedRow=r)}getHighlightPosition(e,t){if(!t){const n=this.getRowIndexAtPixel(e);if(t=this.getRow(n||0),!t)return 1}const{rowTop:i,rowHeight:r}=t;return e-i<r/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const r=i===0?-1:1;return this.getRow(t.rowIndex+r)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter,i=this.rootNode.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;i-=1}const r=this.rowsToDisplay[this.rowsToDisplay.length-1],n=i>=this.rootNode.childrenAfterSort.length;if(r.footer&&n)return r.rowIndex;let o=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;o.expanded&&o.childrenAfterSort&&o.childrenAfterSort.length>0;)o=o.childrenAfterSort[0];return o.rowIndex}getRowBounds(e){if(Fe(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=ba(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=ba(this.gos),r=e.columns.length===0||e.columns.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:r,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=ba(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=yi(e),i=new Ef(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(r=>r.add!=null&&r.add.length>0||r.remove!=null&&r.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(Y(e)&&(t=i[e]),Fe(t)){Ge(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const r=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:r}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const r=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,r),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=Fe(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Fe(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return Y(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,r=!1;const n=[],o=ws(this.gos);return this.forEachNodeAfterFilterAndSort(s=>{if(r)return;if(i&&(s===t||s===e)&&(r=!0,s.group&&o)){n.push(...s.allLeafChildren);return}if(!i){if(s!==t&&s!==e)return;i=!0}if(!s.group||!o){n.push(s);return}}),n}setDatasource(e){Ge("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(Ee(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let n=-1,o=-1;for(;;){const s=Math.floor((t+i)/2),a=this.rowsToDisplay[s];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=s+1:a.rowTop>e&&(i=s-1),n===t&&o===i))return s;n=t,o=i}}isRowInPixel(e,t){const i=e.rowTop,r=e.rowTop+e.rowHeight;return i<=t&&r>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:r,includeFooterNodes:n}=e;let{index:o}=e;const s=a=>{var f;const l=(f=t[0])==null?void 0:f.parent;if(!l)return;const u=n&&XA(this.gos),h=qA(this.gos),c=n&&h({node:l});if(l===this.rootNode){u===a&&(l.createFooter(),i(l.sibling,o++));return}c===a&&(l.createFooter(),i(l.sibling,o++))};s("top");for(let a=0;a<t.length;a++){const l=t[a];if(i(l,o++),l.hasChildren()&&!l.footer){let u=null;switch(r){case 0:u=l.childrenAfterGroup;break;case 1:u=l.childrenAfterAggFilter;break;case 2:u=l.childrenAfterSort;break;case 3:u=l.leafGroup?null:l.childrenAfterSort;break}u&&(o=this.recursivelyWalkNodesAndCallback({nodes:[...u],callback:i,recursionType:r,index:o,includeFooterNodes:n}))}}return s("bottom"),o}doAggregate(e){var t;(t=this.aggregationStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),r=n=>{n&&n.forEach(o=>{const s=()=>{o.expanded=e,r(o.childrenAfterGroup)};if(t){Y(o.childrenAfterGroup)&&s();return}if(i){!o.leafGroup&&s();return}o.group&&s()})};this.rootNode&&r(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,r){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:r}),ws(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const n=this.rootNode,o=n.sibling;n.childrenAfterGroup=n.allLeafChildren,o&&(o.childrenAfterGroup=n.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(jr.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(r=>{r.id===e&&(i=r)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var r;this.valueCache.onDataChanged();const e=[],t=[];let i=!1;(r=this.rowDataTransactionBatch)==null||r.forEach(n=>{const{rowNodeTransaction:o,rowsInserted:s}=this.nodeManager.updateRowData(n.rowDataTransaction);s&&(i=!0),t.push(o),n.callback&&e.push(n.callback.bind(null,o))}),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function KU(e){e.expansionService.onGroupExpandedOrCollapsed()}function YU(e,t){var i,r;(r=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||r.refreshModel(t)}function XU(e){var t,i;return((i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.isEmpty())??!0}function qU(e,t){var i,r;(r=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||r.forEachLeafNode(t)}function ZU(e,t){var i,r;(r=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||r.forEachNodeAfterFilter(t)}function jU(e,t){var i,r;(r=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||r.forEachNodeAfterFilterAndSort(t)}function QU(e){var t,i;if(e.columnModel.isAutoRowHeightActive()){U("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null||i.resetRowHeights()}function JU(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var i,r;return(r=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null?void 0:r.updateRowData(t)})}function e3(e,t,i){e.frameworkOverrides.wrapIncoming(()=>{var r,n;return(n=(r=e.rowModelHelperService)==null?void 0:r.getClientSideRowModel())==null?void 0:n.batchUpdateRowData(t,i)})}function t3(e){e.frameworkOverrides.wrapIncoming(()=>{var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.flushAsyncTransactions()})}function i3(e){return e.selectionService.getBestCostNodeSelection()}var r3=class extends B{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var i;const t=!!((i=this.filterManager)!=null&&i.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const i=(r,n)=>{r.hasChildren()&&e&&!n?r.childrenAfterFilter=r.childrenAfterGroup.filter(o=>{const s=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return s||a}):r.childrenAfterFilter=r.childrenAfterGroup,r.sibling&&(r.sibling.childrenAfterFilter=r.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const r=(o,s)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){const l=o.childrenAfterGroup[a],u=s||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?r(o.childrenAfterGroup[a],u):i(l,u)}i(o,s)},n=o=>r(o,!1);t.executeFromRootNode(n)}else{const r=n=>i(n,!1);t.forEachChangedNodeDepthFirst(r,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},n3=class extends B{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],r=this.columnModel.isPivotMode(),n=r&&t.leafGroup,o=n?[t]:t.childrenAfterSort,s=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(s,o,i,r,0);const a=i.length>0;if(!n&&a&&s.grandTotalRow){t.createFooter();const u=s.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(s,t.sibling,i,0,u)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:ZA(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:XA(this.gos),groupTotalRow:qA(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,r,n){if(!yi(t))for(let o=0;o<t.length;o++){const s=t[o],a=s.hasChildren(),l=r&&!a,u=e.groupRemoveSingleChildren&&a&&s.childrenAfterGroup.length===1,h=e.groupRemoveLowestSingleChildren&&a&&s.leafGroup&&s.childrenAfterGroup.length===1,c=r&&s.leafGroup,d=e.hideOpenParents&&s.expanded&&!s.master&&!c;if(!l&&!d&&!u&&!h&&this.addRowNodeToRowsToDisplay(e,s,i,n),!(r&&s.leafGroup)){if(a){const p=u||h;if(s.expanded||p){const g=e.groupTotalRow({node:s});g||s.destroyFooter();const v=p?n:n+1;g==="top"&&(s.createFooter(),this.addRowNodeToRowsToDisplay(e,s.sibling,i,v)),this.recursivelyAddToRowsToDisplay(e,s.childrenAfterSort,i,r,v),g==="bottom"&&(s.createFooter(),this.addRowNodeToRowsToDisplay(e,s.sibling,i,v))}}else if(s.master&&s.expanded){const p=this.createDetailNode(s);this.addRowNodeToRowsToDisplay(e,p,i,n)}}}}addRowNodeToRowsToDisplay(e,t,i,r,n){n?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:r)}createDetailNode(e){if(Y(e.detailNode))return e.detailNode;const t=new jr(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,Y(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},o3=class extends B{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){it(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:r,rowsInserted:n}=i.updateRowData(t);let o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(r,o||n)}createTransactionForRowData(e){if(!it(this.gos))return Ge("ImmutableService only works with ClientSideRowModel"),null;const t=Ya(this.gos);if(t==null)return Ge("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),r=[],n=[],o=[];return Y(e)&&e.forEach(s=>{const a=t({data:s,level:0}),l=i[a];l?(l.data!==s&&n.push(s),i[a]=void 0):o.push(s)}),Qi(i,(s,a)=>{a&&r.push(a.data)}),{remove:r,update:n,add:o}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},s3=class extends B{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,r,n,o){const s=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(d=>d.isRowGroupActive());let l={};i&&r&&(l=this.calculateDirtyNodes(r));const u=this.columnModel.isPivotMode(),h=this.gos.getCallback("postSortRows"),c=d=>{var g;this.pullDownGroupDataForHideOpenParents(d.childrenAfterAggFilter,!0);const f=u&&d.leafGroup;if(s&&a&&!d.leafGroup&&!o){const v=(g=this.funcColsService.getRowGroupColumns())==null?void 0:g[d.level+1],m=(v==null?void 0:v.getSort())===null,y=d.childrenAfterAggFilter.slice(0);if(d.childrenAfterSort&&!m){const C={};d.childrenAfterSort.forEach((S,b)=>{C[S.id]=b}),y.sort((S,b)=>(C[S.id]??0)-(C[b.id]??0))}d.childrenAfterSort=y}else!t||f?d.childrenAfterSort=d.childrenAfterAggFilter.slice(0):i?d.childrenAfterSort=this.doDeltaSort(d,l,n,e):d.childrenAfterSort=this.rowNodeSorter.doFullSort(d.childrenAfterAggFilter,e);if(d.sibling&&(d.sibling.childrenAfterSort=d.childrenAfterSort),this.updateChildIndexes(d),h){const v={nodes:d.childrenAfterSort};h(v)}};n&&n.forEachChangedNodeDepthFirst(c),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=r=>{r&&r.forEach(n=>t[n.id]=!0)};return e&&e.forEach(r=>{i(r.add),i(r.update),i(r.remove)}),t}doDeltaSort(e,t,i,r){const n=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(n,r);const s={},a=[];n.forEach(c=>{t[c.id]||!i.canSkip(c)?a.push(c):s[c.id]=!0});const l=o.filter(c=>s[c.id]),u=(c,d)=>({currentPos:d,rowNode:c}),h=a.map(u).sort((c,d)=>this.rowNodeSorter.compareRowNodes(r,c,d));return this.mergeSortedArrays(r,h,l.map(u)).map(({rowNode:c})=>c)}mergeSortedArrays(e,t,i){const r=[];let n=0,o=0;for(;n<t.length&&o<i.length;)this.rowNodeSorter.compareRowNodes(e,t[n],i[o])<0?r.push(t[n++]):r.push(i[o++]);for(;n<t.length;)r.push(t[n++]);for(;o<i.length;)r.push(i[o++]);return r}updateChildIndexes(e){if(Fe(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const r=t[i],n=i===0,o=i===e.childrenAfterSort.length-1;r.setFirstChild(n),r.setLastChild(o),r.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return U("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(r=>{r.hasChildren()&&t(r)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||Fe(e)||e.forEach(i=>{var n;(((n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCols())??[]).forEach(o=>{const s=o.getColDef().showRowGroup;if(typeof s!="string"){Ge("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const a=s,l=this.columnModel.getColDefCol(a);if(l!==i.rowGroupColumn)if(t)i.setGroupValue(o.getId(),void 0);else{const h=this.getFirstChildOfFirstChild(i,l);h&&i.setGroupValue(o.getId(),h.key)}})})}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const r=i.parent;if(r&&i.firstChild){if(r.rowGroupColumn===t)return r}else return null;i=r}return null}},a3=class extends B{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=Y(t)&&t.length>0,r=i&&Y(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some(o=>Cr(this.gos)?o.column.isPrimary()&&o.column.isRowGroupActive():!!o.column.getColDef().showRowGroup);this.sortService.sort(t,i,r,e.rowNodeTransactions,e.changedPath,n)}},jC="32.3.3",BM={version:jC,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[$U,r3,a3,n3,s3,o3]},l3={version:jC,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[VM],apiFunctions:{onGroupExpandedOrCollapsed:KU,refreshClientSideRowModel:YU,isRowDataEmpty:XU,forEachLeafNode:qU,forEachNodeAfterFilter:ZU,forEachNodeAfterFilterAndSort:jU,resetRowHeights:QU,applyTransaction:JU,applyTransactionAsync:e3,flushAsyncTransactions:t3,getBestCostNodeSelection:i3},dependantModules:[BM,HU]},u3={version:jC,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[BM,l3]},h3=class extends B{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},c3=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:r,valueService:n,gos:o,processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:u}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=r,this.valueService=n,this.gos=o,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=u}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,r,n){const s=(!this.gos.get("groupHideOpenParents")||n.footer)&&this.shouldRenderGroupSummaryCell(n,e,t)?this.createValueForGroupNode(e,n):this.valueService.getValue(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:s,processCellCallback:this.processCellCallback,type:r})}shouldRenderGroupSummaryCell(e,t,i){var s;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){const a=(s=e.groupData)==null?void 0:s[t.getId()],l=this.gos.get("suppressGroupMaintainValueType");if(l&&a!=null||!l&&a!==void 0||fn(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){const u=t.getColDef();return u==null||u.showRowGroup===!0||u.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const o=Tf(this.gos,this.columnModel.isPivotMode());return i===0&&o}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),r=this.gos.get("suppressGroupMaintainValueType"),n=l=>{var h;if(i||r)return l.key;const u=(h=l.groupData)==null?void 0:h[e.getId()];return!u||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?u:this.valueService.formatValue(l.rowGroupColumn,l,u)??u},o=t.footer,s=[n(t)];if(!ZA(this.gos))for(;t.parent;)t=t.parent,s.push(n(t));const a=s.reverse().join(" -> ");return o?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:r,value:n,processCellCallback:o,type:s}=e;return o?{value:o(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:r,node:i,value:n,type:s,parseValue:a=>this.valueService.parseValue(r,i,a,this.valueService.getValue(r,i)),formatValue:a=>this.valueService.formatValue(r,i,a)??a}))??""}:r.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(r,i,n)}:{value:n??""}}},d3=class{static download(e,t){const i=document.defaultView||window;if(!i){U("There is no `window` associated with the current `document`");return}const r=document.createElement("a"),n=i.URL.createObjectURL(t);r.setAttribute("href",n),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(r),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}},N0=`\r
`,f3=class extends c3{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,N0),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,r)=>{r!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,r){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(r)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const r=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(r.valueFormatted??r.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(U("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=N0),this.isFirstLine=!1}},p3=class extends h3{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){U("Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),i=this.getData(t),r=new Blob(["\uFEFF",i],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;d3.download(this.getFileName(n),r)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:r,valueService:n,gos:o}=this,{processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:u,suppressQuotes:h,columnSeparator:c}=e;return new f3({columnModel:t,columnNameService:i,funcColsService:r,valueService:n,gos:o,processCellCallback:s||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:u||void 0,suppressQuotes:h||!1,columnSeparator:c||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function g3(e,t){var i;return(i=e.csvCreator)==null?void 0:i.getDataAsCsv(t)}function v3(e,t){var i;(i=e.csvCreator)==null||i.exportDataAsCsv(t)}var m3=class extends B{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){const{allColumns:i,columnKeys:r,skipRowGroups:n}=t,o=this.getColumnsToExport(i,n,r);return TO(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t))(e).parse()}processRow(e,t,i,r){var m;const n=t.shouldRowBeSkipped||(()=>!1),o=this.gos.get("groupRemoveSingleChildren"),s=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,u=this.gos.get("groupHideOpenParents")&&!l,h=this.columnModel.isPivotMode()?r.leafGroup:!r.group,c=!!r.footer,d=s&&r.leafGroup,f=r.allChildrenCount===1&&((m=r.childrenAfterGroup)==null?void 0:m.length)===1&&(o||d);if(!h&&!c&&(t.skipRowGroups||f||u)||t.onlySelected&&!r.isSelected()||t.skipPinnedTop&&r.rowPinned==="top"||t.skipPinnedBottom&&r.rowPinned==="bottom"||r.level===-1&&!h&&!c||n(this.gos.addGridCommonParams({node:r})))return;const v=e.onNewBodyRow(r);if(i.forEach((y,C)=>{v.onColumn(y,C,r)}),t.getCustomContentBelowRow){const y=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:r}));y&&e.addCustomContent(y)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const r=new aP,n=this.visibleColsService.createGroups({columns:t,idCreator:r,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const r=i.onNewHeaderRow();t.forEach((n,o)=>{r.onColumn(n,o,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const r=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="top").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedTopRow(n.rowIndex)).forEach(r):this.pinnedRowModel.forEachPinnedRow("top",r),i}}processRows(e,t){return i=>{const r=this.rowModel,n=it(this.gos),o=fn(this.gos),s=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(u=>u.rowPinned==null).sort((u,h)=>u.rowIndex-h.rowIndex).map(u=>r.getRow(u.rowIndex)).forEach(a);else if(this.columnModel.isPivotMode())n?r.forEachPivotNode(a,!0):o?r.forEachNodeAfterFilterAndSort(a,!0):r.forEachNode(a);else if(e.onlySelectedAllPages||s){const u=this.selectionService.getSelectedNodes();this.replicateSortedOrder(u),u.forEach(a)}else l==="all"?r.forEachNode(a):n||o?r.forEachNodeAfterFilterAndSort(a,!0):r.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(r,n)=>{var o,s;return r.rowIndex!=null&&n.rowIndex!=null?r.rowIndex-n.rowIndex:r.level===n.level?((o=r.parent)==null?void 0:o.id)===((s=n.parent)==null?void 0:s.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:r,currentPos:r.rowIndex??-1},{rowNode:n,currentPos:n.rowIndex??-1}):i(r.parent,n.parent):r.level>n.level?i(r.parent,n):i(r,n.parent)};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const r=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="bottom").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedBottomRow(n.rowIndex)).forEach(r):this.pinnedRowModel.forEachPinnedRow("bottom",r),i}}getColumnsToExport(e=!1,t=!1,i){const r=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const n=this.gos.get("treeData");let o=[];return e&&!r?o=this.columnModel.getCols():o=this.visibleColsService.getAllCols(),t&&!n&&(o=o.filter(s=>fm(s)||uh(s))),o}recursivelyAddHeaderGroups(e,t,i){const r=[];e.forEach(n=>{const o=n;o.getChildren&&o.getChildren().forEach(s=>r.push(s))}),e.length>0&&lt(e[0])&&this.doAddHeaderHeader(t,e,i),r&&r.length>0&&this.recursivelyAddHeaderGroups(r,t,i)}doAddHeaderHeader(e,t,i){const r=e.onNewHeaderGroupingRow();let n=0;t.forEach(o=>{const s=o;let a;i?a=i(this.gos.addGridCommonParams({columnGroup:s})):a=this.columnNameService.getDisplayNameForColumnGroup(s,"header");const l=s.getLeafColumns().reduce((u,h,c,d)=>{let f=Ee(u);return h.getColumnGroupShow()==="open"?(!f||f[1]!=null)&&(f=[c],u.push(f)):f&&f[1]==null&&(f[1]=c-1),c===d.length-1&&f&&f[1]==null&&(f[1]=c),u},[]);r.onColumn(s,a||"",n++,s.getLeafColumns().length-1,l)})}},QC="32.3.3",HM={version:QC,moduleName:"@ag-grid-community/csv-export-core",beans:[p3,m3]},y3={version:QC,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:g3,exportDataAsCsv:v3},dependantModules:[HM]},C3={version:QC,moduleName:"@ag-grid-community/csv-export",dependantModules:[HM,y3]},S3=class extends b2{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){Y(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(Fe(this.params.datasource.getRows)){U("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((r,n)=>{this.startRow+n<i&&e(r,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new jr(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,r)=>{const n=e.rowData?e.rowData[r]:void 0;!i.id&&i.alreadyRendered&&n&&(this.rowNodes[r]=new jr(this.beans),this.rowNodes[r].setRowIndex(i.rowIndex),this.rowNodes[r].setRowTop(i.rowTop),this.rowNodes[r].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[r],n,this.startRow+r)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},w3=2,b3=class extends B{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let r=this.blocks[i];if(!r){if(t)return;r=this.createBlock(i)}return r.getRow(e)}createBlock(e){const t=this.createBean(new S3(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&Oi(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(s=>s!=e),i=(s,a)=>a.getLastAccessed()-s.getLastAccessed();t.sort(i);const r=this.params.maxBlocksInCache>0,n=r?this.params.maxBlocksInCache-1:null,o=w3-1;t.forEach((s,a)=>{const l=s.getState()==="needsLoading"&&a>=o,u=r?a>=n:!1;if(l||u){if(this.isBlockCurrentlyDisplayed(s)||this.isBlockFocused(s))return;this.removeBlockFromCache(s)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const i=e.getStartRow(),r=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<r}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const r=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,t){this.rowCount=e,Y(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new La;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(i,r)=>i.getId()-r.getId();return jn(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let r=-1,n=!1;const o=new La;let s=!1;return this.getBlocksInOrder().forEach(l=>{if(!s){if(n&&r+1!==l.getId()){s=!0;return}r=l.getId(),l.forEachNode(u=>{const h=u===e||u===t;(n||h)&&i.push(u),h&&(n=!n)},o,this.rowCount)}}),s||n?[]:i}},x3=class extends B{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=as(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&U("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=as(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!_u(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;Ya(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var e;this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:((e=this.filterManager)==null?void 0:e.getFilterModel())??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:as(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new La},this.infiniteCache=this.createBean(new b3(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function R3(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.refreshCache()}function D3(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.purgeCache()}function T3(e){var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null?void 0:i.getRowCount()}var JC="32.3.3",zM={version:JC,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[x3],dependantModules:[R2]},_3={version:JC,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[VM],apiFunctions:{refreshInfiniteCache:R3,purgeInfiniteCache:D3,getInfiniteRowCount:T3},dependantModules:[zM,zU]},A3={version:JC,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[zM,_3]};Kr.__registerModules([LM,u3,A3,C3],!1,void 0);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Am=function(e,t){return Am=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])},Am(e,t)};function L(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Am(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var P3=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),M3=function(){function e(){this.browser=new P3,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),xe=new M3;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(xe.wxa=!0,xe.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?xe.worker=!0:!xe.hasGlobalWindow||"Deno"in window?(xe.node=!0,xe.svgSupported=!0):F3(navigator.userAgent,xe);function F3(e,t){var i=t.browser,r=e.match(/Firefox\/([\d.]+)/),n=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(e);r&&(i.firefox=!0,i.version=r[1]),n&&(i.ie=!0,i.version=n[1]),o&&(i.edge=!0,i.version=o[1],i.newEdge=+o[1].split(".")[0]>18),s&&(i.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!i.ie&&!i.edge,t.pointerEventsSupported="onpointerdown"in window&&(i.edge||i.ie&&+i.version>=11),t.domSupported=typeof document<"u";var a=document.documentElement.style;t.transform3dSupported=(i.ie&&"transition"in a||i.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in a)&&!("OTransition"in a),t.transformSupported=t.transform3dSupported||i.ie&&+i.version>=9}var eS=12,WM="sans-serif",Jn=eS+"px "+WM,E3=20,I3=100,L3="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function k3(e){var t={};if(typeof JSON>"u")return t;for(var i=0;i<e.length;i++){var r=String.fromCharCode(i+32),n=(e.charCodeAt(i)-E3)/I3;t[r]=n}return t}var O3=k3(L3),eo={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(i,r){if(!e){var n=eo.createCanvas();e=n&&n.getContext("2d")}if(e)return t!==r&&(t=e.font=r||Jn),e.measureText(i);i=i||"",r=r||Jn;var o=/((?:\d+)?\.?\d*)px/.exec(r),s=o&&+o[1]||eS,a=0;if(r.indexOf("mono")>=0)a=s*i.length;else for(var l=0;l<i.length;l++){var u=O3[i[l]];a+=u==null?s:u*s}return{width:a}}}(),loadImage:function(e,t,i){var r=new Image;return r.onload=t,r.onerror=i,r.src=e,r}},UM=Er(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),$M=Er(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),ja=Object.prototype.toString,If=Array.prototype,G3=If.forEach,N3=If.filter,tS=If.slice,V3=If.map,V0=(function(){}).constructor,Wh=V0?V0.prototype:null,iS="__proto__",B3=2311;function KM(){return B3++}function rS(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function ae(e){if(e==null||typeof e!="object")return e;var t=e,i=ja.call(e);if(i==="[object Array]"){if(!cu(e)){t=[];for(var r=0,n=e.length;r<n;r++)t[r]=ae(e[r])}}else if($M[i]){if(!cu(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var r=0,n=e.length;r<n;r++)t[r]=e[r]}}}else if(!UM[i]&&!cu(e)&&!ka(e)){t={};for(var s in e)e.hasOwnProperty(s)&&s!==iS&&(t[s]=ae(e[s]))}return t}function pe(e,t,i){if(!se(t)||!se(e))return i?ae(t):e;for(var r in t)if(t.hasOwnProperty(r)&&r!==iS){var n=e[r],o=t[r];se(o)&&se(n)&&!H(o)&&!H(n)&&!ka(o)&&!ka(n)&&!B0(o)&&!B0(n)&&!cu(o)&&!cu(n)?pe(n,o,i):(i||!(r in e))&&(e[r]=ae(t[r]))}return e}function nS(e,t){for(var i=e[0],r=1,n=e.length;r<n;r++)i=pe(i,e[r],t);return i}function V(e,t){if(Object.assign)Object.assign(e,t);else for(var i in t)t.hasOwnProperty(i)&&i!==iS&&(e[i]=t[i]);return e}function ne(e,t,i){for(var r=De(t),n=0,o=r.length;n<o;n++){var s=r[n];(i?t[s]!=null:e[s]==null)&&(e[s]=t[s])}return e}function Ce(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i}return-1}function H3(e,t){var i=e.prototype;function r(){}r.prototype=t.prototype,e.prototype=new r;for(var n in i)i.hasOwnProperty(n)&&(e.prototype[n]=i[n]);e.prototype.constructor=e,e.superClass=t}function dt(e,t,i){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n];o!=="constructor"&&(i?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else ne(e,t,i)}function Ot(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function _(e,t,i){if(e&&t)if(e.forEach&&e.forEach===G3)e.forEach(t,i);else if(e.length===+e.length)for(var r=0,n=e.length;r<n;r++)t.call(i,e[r],r,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e)}function z(e,t,i){if(!e)return[];if(!t)return oS(e);if(e.map&&e.map===V3)return e.map(t,i);for(var r=[],n=0,o=e.length;n<o;n++)r.push(t.call(i,e[n],n,e));return r}function Er(e,t,i,r){if(e&&t){for(var n=0,o=e.length;n<o;n++)i=t.call(r,i,e[n],n,e);return i}}function Le(e,t,i){if(!e)return[];if(!t)return oS(e);if(e.filter&&e.filter===N3)return e.filter(t,i);for(var r=[],n=0,o=e.length;n<o;n++)t.call(i,e[n],n,e)&&r.push(e[n]);return r}function z3(e,t,i){if(e&&t){for(var r=0,n=e.length;r<n;r++)if(t.call(i,e[r],r,e))return e[r]}}function De(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}function W3(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return function(){return e.apply(t,i.concat(tS.call(arguments)))}}var Z=Wh&&ie(Wh.bind)?Wh.call.bind(Wh.bind):W3;function fe(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return function(){return e.apply(this,t.concat(tS.call(arguments)))}}function H(e){return Array.isArray?Array.isArray(e):ja.call(e)==="[object Array]"}function ie(e){return typeof e=="function"}function q(e){return typeof e=="string"}function Pm(e){return ja.call(e)==="[object String]"}function Pe(e){return typeof e=="number"}function se(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function B0(e){return!!UM[ja.call(e)]}function ci(e){return!!$M[ja.call(e)]}function ka(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function Lf(e){return e.colorStops!=null}function U3(e){return e.image!=null}function $3(e){return ja.call(e)==="[object RegExp]"}function Lu(e){return e!==e}function xt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,r=e.length;i<r;i++)if(e[i]!=null)return e[i]}function de(e,t){return e??t}function Ar(e,t,i){return e??t??i}function oS(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return tS.apply(e,t)}function sS(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function jt(e,t){if(!e)throw new Error(t)}function Ji(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var YM="__ec_primitive__";function Md(e){e[YM]=!0}function cu(e){return e[YM]}var K3=function(){function e(){this.data={}}return e.prototype.delete=function(t){var i=this.has(t);return i&&delete this.data[t],i},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,i){return this.data[t]=i,this},e.prototype.keys=function(){return De(this.data)},e.prototype.forEach=function(t){var i=this.data;for(var r in i)i.hasOwnProperty(r)&&t(i[r],r)},e}(),XM=typeof Map=="function";function Y3(){return XM?new Map:new K3}var X3=function(){function e(t){var i=H(t);this.data=Y3();var r=this;t instanceof e?t.each(n):t&&_(t,n);function n(o,s){i?r.set(o,s):r.set(s,o)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,i){return this.data.set(t,i),i},e.prototype.each=function(t,i){this.data.forEach(function(r,n){t.call(i,r,n)})},e.prototype.keys=function(){var t=this.data.keys();return XM?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function Q(e){return new X3(e)}function ku(e,t){for(var i=new e.constructor(e.length+t.length),r=0;r<e.length;r++)i[r]=e[r];for(var n=e.length,r=0;r<t.length;r++)i[r+n]=t[r];return i}function kf(e,t){var i;if(Object.create)i=Object.create(e);else{var r=function(){};r.prototype=e,i=new r}return t&&V(i,t),i}function qM(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function j(e,t){return e.hasOwnProperty(t)}function at(){}var qc=180/Math.PI;function Is(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function Ht(e,t){return e[0]=t[0],e[1]=t[1],e}function Qr(e){return[e[0],e[1]]}function q3(e,t,i){return e[0]=t,e[1]=i,e}function H0(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Mm(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function Qo(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function Fm(e){return Math.sqrt(Z3(e))}function Z3(e){return e[0]*e[0]+e[1]*e[1]}function Zc(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Qa(e,t){var i=Fm(t);return i===0?(e[0]=0,e[1]=0):(e[0]=t[0]/i,e[1]=t[1]/i),e}function Em(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var On=Em;function j3(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var cs=j3;function jc(e,t,i,r){return e[0]=t[0]+r*(i[0]-t[0]),e[1]=t[1]+r*(i[1]-t[1]),e}function _t(e,t,i){var r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function Gn(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function Nn(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}var Ws=function(){function e(t,i){this.target=t,this.topTarget=i&&i.topTarget}return e}(),Q3=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var i=t.target;i&&!i.draggable;)i=i.parent||i.__hostTarget;i&&(this._draggingTarget=i,i.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Ws(i,t),"dragstart",t.event))},e.prototype._drag=function(t){var i=this._draggingTarget;if(i){var r=t.offsetX,n=t.offsetY,o=r-this._x,s=n-this._y;this._x=r,this._y=n,i.drift(o,s,t),this.handler.dispatchToElement(new Ws(i,t),"drag",t.event);var a=this.handler.findHover(r,n,i).target,l=this._dropTarget;this._dropTarget=a,i!==a&&(l&&a!==l&&this.handler.dispatchToElement(new Ws(l,t),"dragleave",t.event),a&&a!==l&&this.handler.dispatchToElement(new Ws(a,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var i=this._draggingTarget;i&&(i.dragging=!1),this.handler.dispatchToElement(new Ws(i,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Ws(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}(),Wi=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,i,r,n){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof i=="function"&&(n=r,r=i,i=null),!r||!t)return this;var s=this._$eventProcessor;i!=null&&s&&s.normalizeQuery&&(i=s.normalizeQuery(i)),o[t]||(o[t]=[]);for(var a=0;a<o[t].length;a++)if(o[t][a].h===r)return this;var l={h:r,query:i,ctx:n||this,callAtLast:r.zrEventfulCallAtLast},u=o[t].length-1,h=o[t][u];return h&&h.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var i=this._$handlers;return!i||!i[t]||!i[t].length},e.prototype.off=function(t,i){var r=this._$handlers;if(!r)return this;if(!t)return this._$handlers={},this;if(i){if(r[t]){for(var n=[],o=0,s=r[t].length;o<s;o++)r[t][o].h!==i&&n.push(r[t][o]);r[t]=n}r[t]&&r[t].length===0&&delete r[t]}else delete r[t];return this},e.prototype.trigger=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];if(!this._$handlers)return this;var n=this._$handlers[t],o=this._$eventProcessor;if(n)for(var s=i.length,a=n.length,l=0;l<a;l++){var u=n[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(s){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,i[0]);break;case 2:u.h.call(u.ctx,i[0],i[1]);break;default:u.h.apply(u.ctx,i);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];if(!this._$handlers)return this;var n=this._$handlers[t],o=this._$eventProcessor;if(n)for(var s=i.length,a=i[s-1],l=n.length,u=0;u<l;u++){var h=n[u];if(!(o&&o.filter&&h.query!=null&&!o.filter(t,h.query)))switch(s){case 0:h.h.call(a);break;case 1:h.h.call(a,i[0]);break;case 2:h.h.call(a,i[0],i[1]);break;default:h.h.apply(a,i.slice(1,s-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}(),J3=Math.log(2);function Im(e,t,i,r,n,o){var s=r+"-"+n,a=e.length;if(o.hasOwnProperty(s))return o[s];if(t===1){var l=Math.round(Math.log((1<<a)-1&~n)/J3);return e[i][l]}for(var u=r|1<<i,h=i+1;r&1<<h;)h++;for(var c=0,d=0,f=0;d<a;d++){var p=1<<d;p&n||(c+=(f%2?-1:1)*e[i][d]*Im(e,t-1,h,u,n|p,o),f++)}return o[s]=c,c}function z0(e,t){var i=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},n=Im(i,8,0,0,0,r);if(n!==0){for(var o=[],s=0;s<8;s++)for(var a=0;a<8;a++)o[a]==null&&(o[a]=0),o[a]+=((s+a)%2?-1:1)*Im(i,7,s===0?1:0,1<<s,1<<a,r)/n*t[s];return function(l,u,h){var c=u*o[6]+h*o[7]+1;l[0]=(u*o[0]+h*o[1]+o[2])/c,l[1]=(u*o[3]+h*o[4]+o[5])/c}}}var W0="___zrEVENTSAVED",Np=[];function e$(e,t,i,r,n){return Lm(Np,t,r,n,!0)&&Lm(e,i,Np[0],Np[1])}function Lm(e,t,i,r,n){if(t.getBoundingClientRect&&xe.domSupported&&!ZM(t)){var o=t[W0]||(t[W0]={}),s=t$(t,o),a=i$(s,o,n);if(a)return a(e,i,r),!0}return!1}function t$(e,t){var i=t.markers;if(i)return i;i=t.markers=[];for(var r=["left","right"],n=["top","bottom"],o=0;o<4;o++){var s=document.createElement("div"),a=s.style,l=o%2,u=(o>>1)%2;a.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",n[u]+":0",r[1-l]+":auto",n[1-u]+":auto",""].join("!important;"),e.appendChild(s),i.push(s)}return i}function i$(e,t,i){for(var r=i?"invTrans":"trans",n=t[r],o=t.srcCoords,s=[],a=[],l=!0,u=0;u<4;u++){var h=e[u].getBoundingClientRect(),c=2*u,d=h.left,f=h.top;s.push(d,f),l=l&&o&&d===o[c]&&f===o[c+1],a.push(e[u].offsetLeft,e[u].offsetTop)}return l&&n?n:(t.srcCoords=s,t[r]=i?z0(a,s):z0(s,a))}function ZM(e){return e.nodeName.toUpperCase()==="CANVAS"}var r$=/([&<>"'])/g,n$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function $t(e){return e==null?"":(e+"").replace(r$,function(t,i){return n$[i]})}var o$=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Vp=[],s$=xe.browser.firefox&&+xe.browser.version.split(".")[0]<39;function km(e,t,i,r){return i=i||{},r?U0(e,t,i):s$&&t.layerX!=null&&t.layerX!==t.offsetX?(i.zrX=t.layerX,i.zrY=t.layerY):t.offsetX!=null?(i.zrX=t.offsetX,i.zrY=t.offsetY):U0(e,t,i),i}function U0(e,t,i){if(xe.domSupported&&e.getBoundingClientRect){var r=t.clientX,n=t.clientY;if(ZM(e)){var o=e.getBoundingClientRect();i.zrX=r-o.left,i.zrY=n-o.top;return}else if(Lm(Vp,e,r,n)){i.zrX=Vp[0],i.zrY=Vp[1];return}}i.zrX=i.zrY=0}function aS(e){return e||window.event}function Ai(e,t,i){if(t=aS(t),t.zrX!=null)return t;var r=t.type,n=r&&r.indexOf("touch")>=0;if(n){var s=r!=="touchend"?t.targetTouches[0]:t.changedTouches[0];s&&km(e,s,t,i)}else{km(e,t,t,i);var o=a$(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var a=t.button;return t.which==null&&a!==void 0&&o$.test(t.type)&&(t.which=a&1?1:a&2?3:a&4?2:0),t}function a$(e){var t=e.wheelDelta;if(t)return t;var i=e.deltaX,r=e.deltaY;if(i==null||r==null)return t;var n=Math.abs(r!==0?r:i),o=r>0?-1:r<0?1:i>0?-1:1;return 3*n*o}function Om(e,t,i,r){e.addEventListener(t,i,r)}function l$(e,t,i,r){e.removeEventListener(t,i,r)}var on=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function $0(e){return e.which===2||e.which===3}var u$=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,i,r){return this._doTrack(t,i,r),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,i,r){var n=t.touches;if(n){for(var o={points:[],touches:[],target:i,event:t},s=0,a=n.length;s<a;s++){var l=n[s],u=km(r,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var i in Bp)if(Bp.hasOwnProperty(i)){var r=Bp[i](this._track,t);if(r)return r}},e}();function K0(e){var t=e[1][0]-e[0][0],i=e[1][1]-e[0][1];return Math.sqrt(t*t+i*i)}function h$(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var Bp={pinch:function(e,t){var i=e.length;if(i){var r=(e[i-1]||{}).points,n=(e[i-2]||{}).points||r;if(n&&n.length>1&&r&&r.length>1){var o=K0(r)/K0(n);!isFinite(o)&&(o=1),t.pinchScale=o;var s=h$(r);return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}};function Ci(){return[1,0,0,1,0,0]}function Of(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function lS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Jr(e,t,i){var r=t[0]*i[0]+t[2]*i[1],n=t[1]*i[0]+t[3]*i[1],o=t[0]*i[2]+t[2]*i[3],s=t[1]*i[2]+t[3]*i[3],a=t[0]*i[4]+t[2]*i[5]+t[4],l=t[1]*i[4]+t[3]*i[5]+t[5];return e[0]=r,e[1]=n,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e}function Ir(e,t,i){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+i[0],e[5]=t[5]+i[1],e}function Ls(e,t,i,r){r===void 0&&(r=[0,0]);var n=t[0],o=t[2],s=t[4],a=t[1],l=t[3],u=t[5],h=Math.sin(i),c=Math.cos(i);return e[0]=n*c+a*h,e[1]=-n*h+a*c,e[2]=o*c+l*h,e[3]=-o*h+c*l,e[4]=c*(s-r[0])+h*(u-r[1])+r[0],e[5]=c*(u-r[1])-h*(s-r[0])+r[1],e}function uS(e,t,i){var r=i[0],n=i[1];return e[0]=t[0]*r,e[1]=t[1]*n,e[2]=t[2]*r,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*n,e}function Ja(e,t){var i=t[0],r=t[2],n=t[4],o=t[1],s=t[3],a=t[5],l=i*s-o*r;return l?(l=1/l,e[0]=s*l,e[1]=-o*l,e[2]=-r*l,e[3]=i*l,e[4]=(r*a-s*n)*l,e[5]=(o*n-i*a)*l,e):null}function c$(e){var t=Ci();return lS(t,e),t}var ge=function(){function e(t,i){this.x=t||0,this.y=i||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,i){return this.x=t,this.y=i,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,i){this.x+=t.x*i,this.y+=t.y*i},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var i=this.x-t.x,r=this.y-t.y;return Math.sqrt(i*i+r*r)},e.prototype.distanceSquare=function(t){var i=this.x-t.x,r=this.y-t.y;return i*i+r*r},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var i=this.x,r=this.y;return this.x=t[0]*i+t[2]*r+t[4],this.y=t[1]*i+t[3]*r+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,i,r){t.x=i,t.y=r},e.copy=function(t,i){t.x=i.x,t.y=i.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,i){return t.x*i.x+t.y*i.y},e.add=function(t,i,r){t.x=i.x+r.x,t.y=i.y+r.y},e.sub=function(t,i,r){t.x=i.x-r.x,t.y=i.y-r.y},e.scale=function(t,i,r){t.x=i.x*r,t.y=i.y*r},e.scaleAndAdd=function(t,i,r,n){t.x=i.x+r.x*n,t.y=i.y+r.y*n},e.lerp=function(t,i,r,n){var o=1-n;t.x=o*i.x+n*r.x,t.y=o*i.y+n*r.y},e}(),Uh=Math.min,$h=Math.max,fo=new ge,po=new ge,go=new ge,vo=new ge,ml=new ge,yl=new ge,ve=function(){function e(t,i,r,n){r<0&&(t=t+r,r=-r),n<0&&(i=i+n,n=-n),this.x=t,this.y=i,this.width=r,this.height=n}return e.prototype.union=function(t){var i=Uh(t.x,this.x),r=Uh(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=$h(t.x+t.width,this.x+this.width)-i:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=$h(t.y+t.height,this.y+this.height)-r:this.height=t.height,this.x=i,this.y=r},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var i=this,r=t.width/i.width,n=t.height/i.height,o=Ci();return Ir(o,o,[-i.x,-i.y]),uS(o,o,[r,n]),Ir(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,i){if(!t)return!1;t instanceof e||(t=e.create(t));var r=this,n=r.x,o=r.x+r.width,s=r.y,a=r.y+r.height,l=t.x,u=t.x+t.width,h=t.y,c=t.y+t.height,d=!(o<l||u<n||a<h||c<s);if(i){var f=1/0,p=0,g=Math.abs(o-l),v=Math.abs(u-n),m=Math.abs(a-h),y=Math.abs(c-s),C=Math.min(g,v),S=Math.min(m,y);o<l||u<n?C>p&&(p=C,g<v?ge.set(yl,-g,0):ge.set(yl,v,0)):C<f&&(f=C,g<v?ge.set(ml,g,0):ge.set(ml,-v,0)),a<h||c<s?S>p&&(p=S,m<y?ge.set(yl,0,-m):ge.set(yl,0,y)):C<f&&(f=C,m<y?ge.set(ml,0,m):ge.set(ml,0,-y))}return i&&ge.copy(i,d?ml:yl),d},e.prototype.contain=function(t,i){var r=this;return t>=r.x&&t<=r.x+r.width&&i>=r.y&&i<=r.y+r.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,i){t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height},e.applyTransform=function(t,i,r){if(!r){t!==i&&e.copy(t,i);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var n=r[0],o=r[3],s=r[4],a=r[5];t.x=i.x*n+s,t.y=i.y*o+a,t.width=i.width*n,t.height=i.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}fo.x=go.x=i.x,fo.y=vo.y=i.y,po.x=vo.x=i.x+i.width,po.y=go.y=i.y+i.height,fo.transform(r),vo.transform(r),po.transform(r),go.transform(r),t.x=Uh(fo.x,po.x,go.x,vo.x),t.y=Uh(fo.y,po.y,go.y,vo.y);var l=$h(fo.x,po.x,go.x,vo.x),u=$h(fo.y,po.y,go.y,vo.y);t.width=l-t.x,t.height=u-t.y},e}(),jM="silent";function d$(e,t,i){return{type:e,event:i,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch,which:i.which,stop:f$}}function f$(){on(this.event)}var p$=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.handler=null,i}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Wi),Cl=function(){function e(t,i){this.x=t,this.y=i}return e}(),g$=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Hp=new ve(0,0,0,0),QM=function(e){L(t,e);function t(i,r,n,o,s){var a=e.call(this)||this;return a._hovered=new Cl(0,0),a.storage=i,a.painter=r,a.painterRoot=o,a._pointerSize=s,n=n||new p$,a.proxy=null,a.setHandlerProxy(n),a._draggingMgr=new Q3(a),a}return t.prototype.setHandlerProxy=function(i){this.proxy&&this.proxy.dispose(),i&&(_(g$,function(r){i.on&&i.on(r,this[r],this)},this),i.handler=this),this.proxy=i},t.prototype.mousemove=function(i){var r=i.zrX,n=i.zrY,o=JM(this,r,n),s=this._hovered,a=s.target;a&&!a.__zr&&(s=this.findHover(s.x,s.y),a=s.target);var l=this._hovered=o?new Cl(r,n):this.findHover(r,n),u=l.target,h=this.proxy;h.setCursor&&h.setCursor(u?u.cursor:"default"),a&&u!==a&&this.dispatchToElement(s,"mouseout",i),this.dispatchToElement(l,"mousemove",i),u&&u!==a&&this.dispatchToElement(l,"mouseover",i)},t.prototype.mouseout=function(i){var r=i.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",i),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:i})},t.prototype.resize=function(){this._hovered=new Cl(0,0)},t.prototype.dispatch=function(i,r){var n=this[i];n&&n.call(this,r)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(i){var r=this.proxy;r.setCursor&&r.setCursor(i)},t.prototype.dispatchToElement=function(i,r,n){i=i||{};var o=i.target;if(!(o&&o.silent)){for(var s="on"+r,a=d$(r,i,n);o&&(o[s]&&(a.cancelBubble=!!o[s].call(o,a)),o.trigger(r,a),o=o.__hostTarget?o.__hostTarget:o.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(r,a),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[s]=="function"&&l[s].call(l,a),l.trigger&&l.trigger(r,a)}))}},t.prototype.findHover=function(i,r,n){var o=this.storage.getDisplayList(),s=new Cl(i,r);if(Y0(o,s,i,r,n),this._pointerSize&&!s.target){for(var a=[],l=this._pointerSize,u=l/2,h=new ve(i-u,r-u,l,l),c=o.length-1;c>=0;c--){var d=o[c];d!==n&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&(Hp.copy(d.getBoundingRect()),d.transform&&Hp.applyTransform(d.transform),Hp.intersect(h)&&a.push(d))}if(a.length)for(var f=4,p=Math.PI/12,g=Math.PI*2,v=0;v<u;v+=f)for(var m=0;m<g;m+=p){var y=i+v*Math.cos(m),C=r+v*Math.sin(m);if(Y0(a,s,y,C,n),s.target)return s}}return s},t.prototype.processGesture=function(i,r){this._gestureMgr||(this._gestureMgr=new u$);var n=this._gestureMgr;r==="start"&&n.clear();var o=n.recognize(i,this.findHover(i.zrX,i.zrY,null).target,this.proxy.dom);if(r==="end"&&n.clear(),o){var s=o.type;i.gestureEvent=s;var a=new Cl;a.target=o.target,this.dispatchToElement(a,s,o.event)}},t}(Wi);_(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){QM.prototype[e]=function(t){var i=t.zrX,r=t.zrY,n=JM(this,i,r),o,s;if((e!=="mouseup"||!n)&&(o=this.findHover(i,r),s=o.target),e==="mousedown")this._downEl=s,this._downPoint=[t.zrX,t.zrY],this._upEl=s;else if(e==="mouseup")this._upEl=s;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||On(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function v$(e,t,i){if(e[e.rectHover?"rectContain":"contain"](t,i)){for(var r=e,n=void 0,o=!1;r;){if(r.ignoreClip&&(o=!0),!o){var s=r.getClipPath();if(s&&!s.contain(t,i))return!1}r.silent&&(n=!0);var a=r.__hostTarget;r=a||r.parent}return n?jM:!0}return!1}function Y0(e,t,i,r,n){for(var o=e.length-1;o>=0;o--){var s=e[o],a=void 0;if(s!==n&&!s.ignore&&(a=v$(s,i,r))&&(!t.topTarget&&(t.topTarget=s),a!==jM)){t.target=s;break}}}function JM(e,t,i){var r=e.painter;return t<0||t>r.getWidth()||i<0||i>r.getHeight()}var e1=32,Sl=7;function m$(e){for(var t=0;e>=e1;)t|=e&1,e>>=1;return e+t}function X0(e,t,i,r){var n=t+1;if(n===i)return 1;if(r(e[n++],e[t])<0){for(;n<i&&r(e[n],e[n-1])<0;)n++;y$(e,t,n)}else for(;n<i&&r(e[n],e[n-1])>=0;)n++;return n-t}function y$(e,t,i){for(i--;t<i;){var r=e[t];e[t++]=e[i],e[i--]=r}}function q0(e,t,i,r,n){for(r===t&&r++;r<i;r++){for(var o=e[r],s=t,a=r,l;s<a;)l=s+a>>>1,n(o,e[l])<0?a=l:s=l+1;var u=r-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;u>0;)e[s+u]=e[s+u-1],u--}e[s]=o}}function zp(e,t,i,r,n,o){var s=0,a=0,l=1;if(o(e,t[i+n])>0){for(a=r-n;l<a&&o(e,t[i+n+l])>0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a),s+=n,l+=n}else{for(a=n+1;l<a&&o(e,t[i+n-l])<=0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a);var u=s;s=n-l,l=n-u}for(s++;s<l;){var h=s+(l-s>>>1);o(e,t[i+h])>0?s=h+1:l=h}return l}function Wp(e,t,i,r,n,o){var s=0,a=0,l=1;if(o(e,t[i+n])<0){for(a=n+1;l<a&&o(e,t[i+n-l])<0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a);var u=s;s=n-l,l=n-u}else{for(a=r-n;l<a&&o(e,t[i+n+l])>=0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a),s+=n,l+=n}for(s++;s<l;){var h=s+(l-s>>>1);o(e,t[i+h])<0?l=h:s=h+1}return l}function C$(e,t){var i=Sl,r,n,o=0,s=[];r=[],n=[];function a(f,p){r[o]=f,n[o]=p,o+=1}function l(){for(;o>1;){var f=o-2;if(f>=1&&n[f-1]<=n[f]+n[f+1]||f>=2&&n[f-2]<=n[f]+n[f-1])n[f-1]<n[f+1]&&f--;else if(n[f]>n[f+1])break;h(f)}}function u(){for(;o>1;){var f=o-2;f>0&&n[f-1]<n[f+1]&&f--,h(f)}}function h(f){var p=r[f],g=n[f],v=r[f+1],m=n[f+1];n[f]=g+m,f===o-3&&(r[f+1]=r[f+2],n[f+1]=n[f+2]),o--;var y=Wp(e[v],e,p,g,0,t);p+=y,g-=y,g!==0&&(m=zp(e[p+g-1],e,v,m,m-1,t),m!==0&&(g<=m?c(p,g,v,m):d(p,g,v,m)))}function c(f,p,g,v){var m=0;for(m=0;m<p;m++)s[m]=e[f+m];var y=0,C=g,S=f;if(e[S++]=e[C++],--v===0){for(m=0;m<p;m++)e[S+m]=s[y+m];return}if(p===1){for(m=0;m<v;m++)e[S+m]=e[C+m];e[S+v]=s[y];return}for(var b=i,w,x,R;;){w=0,x=0,R=!1;do if(t(e[C],s[y])<0){if(e[S++]=e[C++],x++,w=0,--v===0){R=!0;break}}else if(e[S++]=s[y++],w++,x=0,--p===1){R=!0;break}while((w|x)<b);if(R)break;do{if(w=Wp(e[C],s,y,p,0,t),w!==0){for(m=0;m<w;m++)e[S+m]=s[y+m];if(S+=w,y+=w,p-=w,p<=1){R=!0;break}}if(e[S++]=e[C++],--v===0){R=!0;break}if(x=zp(s[y],e,C,v,0,t),x!==0){for(m=0;m<x;m++)e[S+m]=e[C+m];if(S+=x,C+=x,v-=x,v===0){R=!0;break}}if(e[S++]=s[y++],--p===1){R=!0;break}b--}while(w>=Sl||x>=Sl);if(R)break;b<0&&(b=0),b+=2}if(i=b,i<1&&(i=1),p===1){for(m=0;m<v;m++)e[S+m]=e[C+m];e[S+v]=s[y]}else{if(p===0)throw new Error;for(m=0;m<p;m++)e[S+m]=s[y+m]}}function d(f,p,g,v){var m=0;for(m=0;m<v;m++)s[m]=e[g+m];var y=f+p-1,C=v-1,S=g+v-1,b=0,w=0;if(e[S--]=e[y--],--p===0){for(b=S-(v-1),m=0;m<v;m++)e[b+m]=s[m];return}if(v===1){for(S-=p,y-=p,w=S+1,b=y+1,m=p-1;m>=0;m--)e[w+m]=e[b+m];e[S]=s[C];return}for(var x=i;;){var R=0,D=0,T=!1;do if(t(s[C],e[y])<0){if(e[S--]=e[y--],R++,D=0,--p===0){T=!0;break}}else if(e[S--]=s[C--],D++,R=0,--v===1){T=!0;break}while((R|D)<x);if(T)break;do{if(R=p-Wp(s[C],e,f,p,p-1,t),R!==0){for(S-=R,y-=R,p-=R,w=S+1,b=y+1,m=R-1;m>=0;m--)e[w+m]=e[b+m];if(p===0){T=!0;break}}if(e[S--]=s[C--],--v===1){T=!0;break}if(D=v-zp(e[y],s,0,v,v-1,t),D!==0){for(S-=D,C-=D,v-=D,w=S+1,b=C+1,m=0;m<D;m++)e[w+m]=s[b+m];if(v<=1){T=!0;break}}if(e[S--]=e[y--],--p===0){T=!0;break}x--}while(R>=Sl||D>=Sl);if(T)break;x<0&&(x=0),x+=2}if(i=x,i<1&&(i=1),v===1){for(S-=p,y-=p,w=S+1,b=y+1,m=p-1;m>=0;m--)e[w+m]=e[b+m];e[S]=s[C]}else{if(v===0)throw new Error;for(b=S-(v-1),m=0;m<v;m++)e[b+m]=s[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:a}}function Qc(e,t,i,r){i||(i=0),r||(r=e.length);var n=r-i;if(!(n<2)){var o=0;if(n<e1){o=X0(e,i,r,t),q0(e,i,r,i+o,t);return}var s=C$(e,t),a=m$(n);do{if(o=X0(e,i,r,t),o<a){var l=n;l>a&&(l=a),q0(e,i,i+l,i+o,t),o=l}s.pushRun(i,o),s.mergeRuns(),n-=o,i+=o}while(n!==0);s.forceMergeRuns()}}var gi=1,Xl=2,da=4,Z0=!1;function Up(){Z0||(Z0=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function j0(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var S$=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=j0}return e.prototype.traverse=function(t,i){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(t,i)},e.prototype.getDisplayList=function(t,i){i=i||!1;var r=this._displayList;return(t||!r.length)&&this.updateDisplayList(i),r},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var i=this._roots,r=this._displayList,n=0,o=i.length;n<o;n++)this._updateAndAddDisplayable(i[n],null,t);r.length=this._displayListLen,Qc(r,j0)},e.prototype._updateAndAddDisplayable=function(t,i,r){if(!(t.ignore&&!r)){t.beforeUpdate(),t.update(),t.afterUpdate();var n=t.getClipPath();if(t.ignoreClip)i=null;else if(n){i?i=i.slice():i=[];for(var o=n,s=t;o;)o.parent=s,o.updateTransform(),i.push(o),s=o,o=o.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),l=0;l<a.length;l++){var u=a[l];t.__dirty&&(u.__dirty|=gi),this._updateAndAddDisplayable(u,i,r)}t.__dirty=0}else{var h=t;i&&i.length?h.__clipPaths=i:h.__clipPaths&&h.__clipPaths.length>0&&(h.__clipPaths=[]),isNaN(h.z)&&(Up(),h.z=0),isNaN(h.z2)&&(Up(),h.z2=0),isNaN(h.zlevel)&&(Up(),h.zlevel=0),this._displayList[this._displayListLen++]=h}var c=t.getDecalElement&&t.getDecalElement();c&&this._updateAndAddDisplayable(c,i,r);var d=t.getTextGuideLine();d&&this._updateAndAddDisplayable(d,i,r);var f=t.getTextContent();f&&this._updateAndAddDisplayable(f,i,r)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var i=0,r=t.length;i<r;i++)this.delRoot(t[i]);return}var n=Ce(this._roots,t);n>=0&&this._roots.splice(n,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),Fd;Fd=xe.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};var du={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,i=.1,r=.4;return e===0?0:e===1?1:(!i||i<1?(i=1,t=r/4):t=r*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)))},elasticOut:function(e){var t,i=.1,r=.4;return e===0?0:e===1?1:(!i||i<1?(i=1,t=r/4):t=r*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/r)+1)},elasticInOut:function(e){var t,i=.1,r=.4;return e===0?0:e===1?1:(!i||i<1?(i=1,t=r/4):t=r*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)):i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-du.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?du.bounceIn(e*2)*.5:du.bounceOut(e*2-1)*.5+.5}},Kh=Math.pow,Kn=Math.sqrt,Ed=1e-8,t1=1e-4,Q0=Kn(3),Yh=1/3,Sr=Is(),Ei=Is(),Da=Is();function Vn(e){return e>-Ed&&e<Ed}function i1(e){return e>Ed||e<-Ed}function vt(e,t,i,r,n){var o=1-n;return o*o*(o*e+3*n*t)+n*n*(n*r+3*o*i)}function J0(e,t,i,r,n){var o=1-n;return 3*(((t-e)*o+2*(i-t)*n)*o+(r-i)*n*n)}function Id(e,t,i,r,n,o){var s=r+3*(t-i)-e,a=3*(i-t*2+e),l=3*(t-e),u=e-n,h=a*a-3*s*l,c=a*l-9*s*u,d=l*l-3*a*u,f=0;if(Vn(h)&&Vn(c))if(Vn(a))o[0]=0;else{var p=-l/a;p>=0&&p<=1&&(o[f++]=p)}else{var g=c*c-4*h*d;if(Vn(g)){var v=c/h,p=-a/s+v,m=-v/2;p>=0&&p<=1&&(o[f++]=p),m>=0&&m<=1&&(o[f++]=m)}else if(g>0){var y=Kn(g),C=h*a+1.5*s*(-c+y),S=h*a+1.5*s*(-c-y);C<0?C=-Kh(-C,Yh):C=Kh(C,Yh),S<0?S=-Kh(-S,Yh):S=Kh(S,Yh);var p=(-a-(C+S))/(3*s);p>=0&&p<=1&&(o[f++]=p)}else{var b=(2*h*a-3*s*c)/(2*Kn(h*h*h)),w=Math.acos(b)/3,x=Kn(h),R=Math.cos(w),p=(-a-2*x*R)/(3*s),m=(-a+x*(R+Q0*Math.sin(w)))/(3*s),D=(-a+x*(R-Q0*Math.sin(w)))/(3*s);p>=0&&p<=1&&(o[f++]=p),m>=0&&m<=1&&(o[f++]=m),D>=0&&D<=1&&(o[f++]=D)}}return f}function r1(e,t,i,r,n){var o=6*i-12*t+6*e,s=9*t+3*r-3*e-9*i,a=3*t-3*e,l=0;if(Vn(s)){if(i1(o)){var u=-a/o;u>=0&&u<=1&&(n[l++]=u)}}else{var h=o*o-4*s*a;if(Vn(h))n[0]=-o/(2*s);else if(h>0){var c=Kn(h),u=(-o+c)/(2*s),d=(-o-c)/(2*s);u>=0&&u<=1&&(n[l++]=u),d>=0&&d<=1&&(n[l++]=d)}}return l}function to(e,t,i,r,n,o){var s=(t-e)*n+e,a=(i-t)*n+t,l=(r-i)*n+i,u=(a-s)*n+s,h=(l-a)*n+a,c=(h-u)*n+u;o[0]=e,o[1]=s,o[2]=u,o[3]=c,o[4]=c,o[5]=h,o[6]=l,o[7]=r}function n1(e,t,i,r,n,o,s,a,l,u,h){var c,d=.005,f=1/0,p,g,v,m;Sr[0]=l,Sr[1]=u;for(var y=0;y<1;y+=.05)Ei[0]=vt(e,i,n,s,y),Ei[1]=vt(t,r,o,a,y),v=cs(Sr,Ei),v<f&&(c=y,f=v);f=1/0;for(var C=0;C<32&&!(d<t1);C++)p=c-d,g=c+d,Ei[0]=vt(e,i,n,s,p),Ei[1]=vt(t,r,o,a,p),v=cs(Ei,Sr),p>=0&&v<f?(c=p,f=v):(Da[0]=vt(e,i,n,s,g),Da[1]=vt(t,r,o,a,g),m=cs(Da,Sr),g<=1&&m<f?(c=g,f=m):d*=.5);return h&&(h[0]=vt(e,i,n,s,c),h[1]=vt(t,r,o,a,c)),Kn(f)}function w$(e,t,i,r,n,o,s,a,l){for(var u=e,h=t,c=0,d=1/l,f=1;f<=l;f++){var p=f*d,g=vt(e,i,n,s,p),v=vt(t,r,o,a,p),m=g-u,y=v-h;c+=Math.sqrt(m*m+y*y),u=g,h=v}return c}function bt(e,t,i,r){var n=1-r;return n*(n*e+2*r*t)+r*r*i}function Gm(e,t,i,r){return 2*((1-r)*(t-e)+r*(i-t))}function b$(e,t,i,r,n){var o=e-2*t+i,s=2*(t-e),a=e-r,l=0;if(Vn(o)){if(i1(s)){var u=-a/s;u>=0&&u<=1&&(n[l++]=u)}}else{var h=s*s-4*o*a;if(Vn(h)){var u=-s/(2*o);u>=0&&u<=1&&(n[l++]=u)}else if(h>0){var c=Kn(h),u=(-s+c)/(2*o),d=(-s-c)/(2*o);u>=0&&u<=1&&(n[l++]=u),d>=0&&d<=1&&(n[l++]=d)}}return l}function o1(e,t,i){var r=e+i-2*t;return r===0?.5:(e-t)/r}function Ou(e,t,i,r,n){var o=(t-e)*r+e,s=(i-t)*r+t,a=(s-o)*r+o;n[0]=e,n[1]=o,n[2]=a,n[3]=a,n[4]=s,n[5]=i}function s1(e,t,i,r,n,o,s,a,l){var u,h=.005,c=1/0;Sr[0]=s,Sr[1]=a;for(var d=0;d<1;d+=.05){Ei[0]=bt(e,i,n,d),Ei[1]=bt(t,r,o,d);var f=cs(Sr,Ei);f<c&&(u=d,c=f)}c=1/0;for(var p=0;p<32&&!(h<t1);p++){var g=u-h,v=u+h;Ei[0]=bt(e,i,n,g),Ei[1]=bt(t,r,o,g);var f=cs(Ei,Sr);if(g>=0&&f<c)u=g,c=f;else{Da[0]=bt(e,i,n,v),Da[1]=bt(t,r,o,v);var m=cs(Da,Sr);v<=1&&m<c?(u=v,c=m):h*=.5}}return l&&(l[0]=bt(e,i,n,u),l[1]=bt(t,r,o,u)),Kn(c)}function x$(e,t,i,r,n,o,s){for(var a=e,l=t,u=0,h=1/s,c=1;c<=s;c++){var d=c*h,f=bt(e,i,n,d),p=bt(t,r,o,d),g=f-a,v=p-l;u+=Math.sqrt(g*g+v*v),a=f,l=p}return u}var R$=/cubic-bezier\(([0-9,\.e ]+)\)/;function hS(e){var t=e&&R$.exec(e);if(t){var i=t[1].split(","),r=+Ji(i[0]),n=+Ji(i[1]),o=+Ji(i[2]),s=+Ji(i[3]);if(isNaN(r+n+o+s))return;var a=[];return function(l){return l<=0?0:l>=1?1:Id(0,r,o,1,l,a)&&vt(0,n,s,1,a[0])}}}var D$=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||at,this.ondestroy=t.ondestroy||at,this.onrestart=t.onrestart||at,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,i){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=i;return}var r=this._life,n=t-this._startTime-this._pausedTime,o=n/r;o<0&&(o=0),o=Math.min(o,1);var s=this.easingFunc,a=s?s(o):o;if(this.onframe(a),o===1)if(this.loop){var l=n%r;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=ie(t)?t:du[t]||hS(t)},e}(),a1=function(){function e(t){this.value=t}return e}(),T$=function(){function e(){this._len=0}return e.prototype.insert=function(t){var i=new a1(t);return this.insertEntry(i),i},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var i=t.prev,r=t.next;i?i.next=r:this.head=r,r?r.prev=i:this.tail=i,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),fh=function(){function e(t){this._list=new T$,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,i){var r=this._list,n=this._map,o=null;if(n[t]==null){var s=r.len(),a=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var l=r.head;r.remove(l),delete n[l.key],o=l.value,this._lastRemovedEntry=l}a?a.value=i:a=new a1(i),a.key=t,r.insertEntry(a),n[t]=a}return o},e.prototype.get=function(t){var i=this._map[t],r=this._list;if(i!=null)return i!==r.tail&&(r.remove(i),r.insertEntry(i)),i.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),eb={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ir(e){return e=Math.round(e),e<0?0:e>255?255:e}function _$(e){return e=Math.round(e),e<0?0:e>360?360:e}function Gu(e){return e<0?0:e>1?1:e}function $p(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?ir(parseFloat(t)/100*255):ir(parseInt(t,10))}function ds(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Gu(parseFloat(t)/100):Gu(parseFloat(t))}function Kp(e,t,i){return i<0?i+=1:i>1&&(i-=1),i*6<1?e+(t-e)*i*6:i*2<1?t:i*3<2?e+(t-e)*(2/3-i)*6:e}function Bn(e,t,i){return e+(t-e)*i}function _i(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function Nm(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var l1=new fh(20),Xh=null;function Us(e,t){Xh&&Nm(Xh,t),Xh=l1.put(e,Xh||t.slice())}function Si(e,t){if(e){t=t||[];var i=l1.get(e);if(i)return Nm(t,i);e=e+"";var r=e.replace(/ /g,"").toLowerCase();if(r in eb)return Nm(t,eb[r]),Us(e,t),t;var n=r.length;if(r.charAt(0)==="#"){if(n===4||n===5){var o=parseInt(r.slice(1,4),16);if(!(o>=0&&o<=4095)){_i(t,0,0,0,1);return}return _i(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,n===5?parseInt(r.slice(4),16)/15:1),Us(e,t),t}else if(n===7||n===9){var o=parseInt(r.slice(1,7),16);if(!(o>=0&&o<=16777215)){_i(t,0,0,0,1);return}return _i(t,(o&16711680)>>16,(o&65280)>>8,o&255,n===9?parseInt(r.slice(7),16)/255:1),Us(e,t),t}return}var s=r.indexOf("("),a=r.indexOf(")");if(s!==-1&&a+1===n){var l=r.substr(0,s),u=r.substr(s+1,a-(s+1)).split(","),h=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?_i(t,+u[0],+u[1],+u[2],1):_i(t,0,0,0,1);h=ds(u.pop());case"rgb":if(u.length>=3)return _i(t,$p(u[0]),$p(u[1]),$p(u[2]),u.length===3?h:ds(u[3])),Us(e,t),t;_i(t,0,0,0,1);return;case"hsla":if(u.length!==4){_i(t,0,0,0,1);return}return u[3]=ds(u[3]),Vm(u,t),Us(e,t),t;case"hsl":if(u.length!==3){_i(t,0,0,0,1);return}return Vm(u,t),Us(e,t),t;default:return}}_i(t,0,0,0,1)}}function Vm(e,t){var i=(parseFloat(e[0])%360+360)%360/360,r=ds(e[1]),n=ds(e[2]),o=n<=.5?n*(r+1):n+r-n*r,s=n*2-o;return t=t||[],_i(t,ir(Kp(s,o,i+1/3)*255),ir(Kp(s,o,i)*255),ir(Kp(s,o,i-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function A$(e){if(e){var t=e[0]/255,i=e[1]/255,r=e[2]/255,n=Math.min(t,i,r),o=Math.max(t,i,r),s=o-n,a=(o+n)/2,l,u;if(s===0)l=0,u=0;else{a<.5?u=s/(o+n):u=s/(2-o-n);var h=((o-t)/6+s/2)/s,c=((o-i)/6+s/2)/s,d=((o-r)/6+s/2)/s;t===o?l=d-c:i===o?l=1/3+h-d:r===o&&(l=2/3+c-h),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,u,a];return e[3]!=null&&f.push(e[3]),f}}function Bm(e,t){var i=Si(e);if(i){for(var r=0;r<3;r++)t<0?i[r]=i[r]*(1-t)|0:i[r]=(255-i[r])*t+i[r]|0,i[r]>255?i[r]=255:i[r]<0&&(i[r]=0);return en(i,i.length===4?"rgba":"rgb")}}function Yp(e,t,i){if(!(!(t&&t.length)||!(e>=0&&e<=1))){i=i||[];var r=e*(t.length-1),n=Math.floor(r),o=Math.ceil(r),s=t[n],a=t[o],l=r-n;return i[0]=ir(Bn(s[0],a[0],l)),i[1]=ir(Bn(s[1],a[1],l)),i[2]=ir(Bn(s[2],a[2],l)),i[3]=Gu(Bn(s[3],a[3],l)),i}}function P$(e,t,i){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var r=e*(t.length-1),n=Math.floor(r),o=Math.ceil(r),s=Si(t[n]),a=Si(t[o]),l=r-n,u=en([ir(Bn(s[0],a[0],l)),ir(Bn(s[1],a[1],l)),ir(Bn(s[2],a[2],l)),Gu(Bn(s[3],a[3],l))],"rgba");return i?{color:u,leftIndex:n,rightIndex:o,value:r}:u}}function fu(e,t,i,r){var n=Si(e);if(e)return n=A$(n),t!=null&&(n[0]=_$(t)),i!=null&&(n[1]=ds(i)),r!=null&&(n[2]=ds(r)),en(Vm(n),"rgba")}function Ld(e,t){var i=Si(e);if(i&&t!=null)return i[3]=Gu(t),en(i,"rgba")}function en(e,t){if(!(!e||!e.length)){var i=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(i+=","+e[3]),t+"("+i+")"}}function kd(e,t){var i=Si(e);return i?(.299*i[0]+.587*i[1]+.114*i[2])*i[3]/255+(1-i[3])*t:0}var tb=new fh(100);function Hm(e){if(q(e)){var t=tb.get(e);return t||(t=Bm(e,-.1),tb.put(e,t)),t}else if(Lf(e)){var i=V({},e);return i.colorStops=z(e.colorStops,function(r){return{offset:r.offset,color:Bm(r.color,-.1)}}),i}return e}var Od=Math.round;function Nu(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var i=Si(e);i&&(e="rgb("+i[0]+","+i[1]+","+i[2]+")",t=i[3])}return{color:e,opacity:t??1}}var ib=1e-4;function Hn(e){return e<ib&&e>-ib}function qh(e){return Od(e*1e3)/1e3}function zm(e){return Od(e*1e4)/1e4}function M$(e){return"matrix("+qh(e[0])+","+qh(e[1])+","+qh(e[2])+","+qh(e[3])+","+zm(e[4])+","+zm(e[5])+")"}var F$={left:"start",right:"end",center:"middle",middle:"middle"};function E$(e,t,i){return i==="top"?e+=t/2:i==="bottom"&&(e-=t/2),e}function I$(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function L$(e){var t=e.style,i=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),i[0],i[1]].join(",")}function u1(e){return e&&!!e.image}function k$(e){return e&&!!e.svgElement}function cS(e){return u1(e)||k$(e)}function h1(e){return e.type==="linear"}function c1(e){return e.type==="radial"}function d1(e){return e&&(e.type==="linear"||e.type==="radial")}function Gf(e){return"url(#"+e+")"}function f1(e){var t=e.getGlobalScale(),i=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(i)/Math.log(10)),1)}function p1(e){var t=e.x||0,i=e.y||0,r=(e.rotation||0)*qc,n=de(e.scaleX,1),o=de(e.scaleY,1),s=e.skewX||0,a=e.skewY||0,l=[];return(t||i)&&l.push("translate("+t+"px,"+i+"px)"),r&&l.push("rotate("+r+")"),(n!==1||o!==1)&&l.push("scale("+n+","+o+")"),(s||a)&&l.push("skew("+Od(s*qc)+"deg, "+Od(a*qc)+"deg)"),l.join(" ")}var O$=function(){return xe.hasGlobalWindow&&ie(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),Wm=Array.prototype.slice;function Wr(e,t,i){return(t-e)*i+e}function Xp(e,t,i,r){for(var n=t.length,o=0;o<n;o++)e[o]=Wr(t[o],i[o],r);return e}function G$(e,t,i,r){for(var n=t.length,o=n&&t[0].length,s=0;s<n;s++){e[s]||(e[s]=[]);for(var a=0;a<o;a++)e[s][a]=Wr(t[s][a],i[s][a],r)}return e}function Zh(e,t,i,r){for(var n=t.length,o=0;o<n;o++)e[o]=t[o]+i[o]*r;return e}function rb(e,t,i,r){for(var n=t.length,o=n&&t[0].length,s=0;s<n;s++){e[s]||(e[s]=[]);for(var a=0;a<o;a++)e[s][a]=t[s][a]+i[s][a]*r}return e}function N$(e,t){for(var i=e.length,r=t.length,n=i>r?t:e,o=Math.min(i,r),s=n[o-1]||{color:[0,0,0,0],offset:0},a=o;a<Math.max(i,r);a++)n.push({offset:s.offset,color:s.color.slice()})}function V$(e,t,i){var r=e,n=t;if(!(!r.push||!n.push)){var o=r.length,s=n.length;if(o!==s){var a=o>s;if(a)r.length=s;else for(var l=o;l<s;l++)r.push(i===1?n[l]:Wm.call(n[l]))}for(var u=r[0]&&r[0].length,l=0;l<r.length;l++)if(i===1)isNaN(r[l])&&(r[l]=n[l]);else for(var h=0;h<u;h++)isNaN(r[l][h])&&(r[l][h]=n[l][h])}}function pu(e){if(Ot(e)){var t=e.length;if(Ot(e[0])){for(var i=[],r=0;r<t;r++)i.push(Wm.call(e[r]));return i}return Wm.call(e)}return e}function Jc(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function B$(e){return Ot(e&&e[0])?2:1}var jh=0,ed=1,g1=2,ql=3,Um=4,$m=5,nb=6;function ob(e){return e===Um||e===$m}function Qh(e){return e===ed||e===g1}var wl=[0,0,0,0],H$=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,i,r){this._needsSort=!0;var n=this.keyframes,o=n.length,s=!1,a=nb,l=i;if(Ot(i)){var u=B$(i);a=u,(u===1&&!Pe(i[0])||u===2&&!Pe(i[0][0]))&&(s=!0)}else if(Pe(i)&&!Lu(i))a=jh;else if(q(i))if(!isNaN(+i))a=jh;else{var h=Si(i);h&&(l=h,a=ql)}else if(Lf(i)){var c=V({},l);c.colorStops=z(i.colorStops,function(f){return{offset:f.offset,color:Si(f.color)}}),h1(i)?a=Um:c1(i)&&(a=$m),l=c}o===0?this.valType=a:(a!==this.valType||a===nb)&&(s=!0),this.discrete=this.discrete||s;var d={time:t,value:l,rawValue:i,percent:0};return r&&(d.easing=r,d.easingFunc=ie(r)?r:du[r]||hS(r)),n.push(d),d},e.prototype.prepare=function(t,i){var r=this.keyframes;this._needsSort&&r.sort(function(g,v){return g.time-v.time});for(var n=this.valType,o=r.length,s=r[o-1],a=this.discrete,l=Qh(n),u=ob(n),h=0;h<o;h++){var c=r[h],d=c.value,f=s.value;c.percent=c.time/t,a||(l&&h!==o-1?V$(d,f,n):u&&N$(d.colorStops,f.colorStops))}if(!a&&n!==$m&&i&&this.needsAnimate()&&i.needsAnimate()&&n===i.valType&&!i._finished){this._additiveTrack=i;for(var p=r[0].value,h=0;h<o;h++)n===jh?r[h].additiveValue=r[h].value-p:n===ql?r[h].additiveValue=Zh([],r[h].value,p,-1):Qh(n)&&(r[h].additiveValue=n===ed?Zh([],r[h].value,p,-1):rb([],r[h].value,p,-1))}},e.prototype.step=function(t,i){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,n=r?"additiveValue":"value",o=this.valType,s=this.keyframes,a=s.length,l=this.propName,u=o===ql,h,c=this._lastFr,d=Math.min,f,p;if(a===1)f=p=s[0];else{if(i<0)h=0;else if(i<this._lastFrP){var g=d(c+1,a-1);for(h=g;h>=0&&!(s[h].percent<=i);h--);h=d(h,a-2)}else{for(h=c;h<a&&!(s[h].percent>i);h++);h=d(h-1,a-2)}p=s[h+1],f=s[h]}if(f&&p){this._lastFr=h,this._lastFrP=i;var v=p.percent-f.percent,m=v===0?1:d((i-f.percent)/v,1);p.easingFunc&&(m=p.easingFunc(m));var y=r?this._additiveValue:u?wl:t[l];if((Qh(o)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?f.rawValue:p.rawValue;else if(Qh(o))o===ed?Xp(y,f[n],p[n],m):G$(y,f[n],p[n],m);else if(ob(o)){var C=f[n],S=p[n],b=o===Um;t[l]={type:b?"linear":"radial",x:Wr(C.x,S.x,m),y:Wr(C.y,S.y,m),colorStops:z(C.colorStops,function(x,R){var D=S.colorStops[R];return{offset:Wr(x.offset,D.offset,m),color:Jc(Xp([],x.color,D.color,m))}}),global:S.global},b?(t[l].x2=Wr(C.x2,S.x2,m),t[l].y2=Wr(C.y2,S.y2,m)):t[l].r=Wr(C.r,S.r,m)}else if(u)Xp(y,f[n],p[n],m),r||(t[l]=Jc(y));else{var w=Wr(f[n],p[n],m);r?this._additiveValue=w:t[l]=w}r&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var i=this.valType,r=this.propName,n=this._additiveValue;i===jh?t[r]=t[r]+n:i===ql?(Si(t[r],wl),Zh(wl,wl,n,1),t[r]=Jc(wl)):i===ed?Zh(t[r],t[r],n,1):i===g1&&rb(t[r],t[r],n,1)},e}(),dS=function(){function e(t,i,r,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=i,i&&n){rS("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=r}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,i,r){return this.whenWithKeys(t,i,De(i),r)},e.prototype.whenWithKeys=function(t,i,r,n){for(var o=this._tracks,s=0;s<r.length;s++){var a=r[s],l=o[a];if(!l){l=o[a]=new H$(a);var u=void 0,h=this._getAdditiveTrack(a);if(h){var c=h.keyframes,d=c[c.length-1];u=d&&d.value,h.valType===ql&&u&&(u=Jc(u))}else u=this._target[a];if(u==null)continue;t>0&&l.addKeyframe(0,pu(u),n),this._trackKeys.push(a)}l.addKeyframe(t,pu(i[a]),n)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var i=t.length,r=0;r<i;r++)t[r].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,i=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,i)for(var r=0;r<i.length;r++)i[r].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,i=this._trackKeys,r=0;r<i.length;r++)t[i[r]].setFinished()},e.prototype._getAdditiveTrack=function(t){var i,r=this._additiveAnimators;if(r)for(var n=0;n<r.length;n++){var o=r[n].getTrack(t);o&&(i=o)}return i},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var i=this,r=[],n=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var s=this._trackKeys[o],a=this._tracks[s],l=this._getAdditiveTrack(s),u=a.keyframes,h=u.length;if(a.prepare(n,l),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var c=u[h-1];c&&(i._target[a.propName]=c.rawValue),a.setFinished()}else r.push(a)}if(r.length||this._force){var d=new D$({life:n,loop:this._loop,delay:this._delay||0,onframe:function(f){i._started=2;var p=i._additiveAnimators;if(p){for(var g=!1,v=0;v<p.length;v++)if(p[v]._clip){g=!0;break}g||(i._additiveAnimators=null)}for(var v=0;v<r.length;v++)r[v].step(i._target,f);var m=i._onframeCbs;if(m)for(var v=0;v<m.length;v++)m[v](i._target,f)},ondestroy:function(){i._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),t&&d.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var i=this._clip;t&&i.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return z(this._trackKeys,function(i){return t._tracks[i]})},e.prototype.stopTracks=function(t,i){if(!t.length||!this._clip)return!0;for(var r=this._tracks,n=this._trackKeys,o=0;o<t.length;o++){var s=r[t[o]];s&&!s.isFinished()&&(i?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var a=!0,o=0;o<n.length;o++)if(!r[n[o]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},e.prototype.saveTo=function(t,i,r){if(t){i=i||this._trackKeys;for(var n=0;n<i.length;n++){var o=i[n],s=this._tracks[o];if(!(!s||s.isFinished())){var a=s.keyframes,l=a[r?0:a.length-1];l&&(t[o]=pu(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,i){i=i||De(t);for(var r=0;r<i.length;r++){var n=i[r],o=this._tracks[n];if(o){var s=o.keyframes;if(s.length>1){var a=s.pop();o.addKeyframe(a.time,t[n]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();function ya(){return new Date().getTime()}var z$=function(e){L(t,e);function t(i){var r=e.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,i=i||{},r.stage=i.stage||{},r}return t.prototype.addClip=function(i){i.animation&&this.removeClip(i),this._head?(this._tail.next=i,i.prev=this._tail,i.next=null,this._tail=i):this._head=this._tail=i,i.animation=this},t.prototype.addAnimator=function(i){i.animation=this;var r=i.getClip();r&&this.addClip(r)},t.prototype.removeClip=function(i){if(i.animation){var r=i.prev,n=i.next;r?r.next=n:this._head=n,n?n.prev=r:this._tail=r,i.next=i.prev=i.animation=null}},t.prototype.removeAnimator=function(i){var r=i.getClip();r&&this.removeClip(r),i.animation=null},t.prototype.update=function(i){for(var r=ya()-this._pausedTime,n=r-this._time,o=this._head;o;){var s=o.next,a=o.step(r,n);a&&(o.ondestroy(),this.removeClip(o)),o=s}this._time=r,i||(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var i=this;this._running=!0;function r(){i._running&&(Fd(r),!i._paused&&i.update())}Fd(r)},t.prototype.start=function(){this._running||(this._time=ya(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=ya(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=ya()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var i=this._head;i;){var r=i.next;i.prev=i.next=i.animation=null,i=r}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(i,r){r=r||{},this.start();var n=new dS(i,r.loop);return this.addAnimator(n),n},t}(Wi),W$=300,qp=xe.domSupported,Zp=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],i={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=z(e,function(n){var o=n.replace("mouse","pointer");return i.hasOwnProperty(o)?o:n});return{mouse:e,touch:t,pointer:r}}(),sb={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},ab=!1;function Km(e){var t=e.pointerType;return t==="pen"||t==="touch"}function U$(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function jp(e){e&&(e.zrByTouch=!0)}function $$(e,t){return Ai(e.dom,new K$(e,t),!0)}function v1(e,t){for(var i=t,r=!1;i&&i.nodeType!==9&&!(r=i.domBelongToZr||i!==t&&i===e.painterRoot);)i=i.parentNode;return r}var K$=function(){function e(t,i){this.stopPropagation=at,this.stopImmediatePropagation=at,this.preventDefault=at,this.type=i.type,this.target=this.currentTarget=t.dom,this.pointerType=i.pointerType,this.clientX=i.clientX,this.clientY=i.clientY}return e}(),qi={mousedown:function(e){e=Ai(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Ai(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Ai(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Ai(this.dom,e);var t=e.toElement||e.relatedTarget;v1(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){ab=!0,e=Ai(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){ab||(e=Ai(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Ai(this.dom,e),jp(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),qi.mousemove.call(this,e),qi.mousedown.call(this,e)},touchmove:function(e){e=Ai(this.dom,e),jp(e),this.handler.processGesture(e,"change"),qi.mousemove.call(this,e)},touchend:function(e){e=Ai(this.dom,e),jp(e),this.handler.processGesture(e,"end"),qi.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<W$&&qi.click.call(this,e)},pointerdown:function(e){qi.mousedown.call(this,e)},pointermove:function(e){Km(e)||qi.mousemove.call(this,e)},pointerup:function(e){qi.mouseup.call(this,e)},pointerout:function(e){Km(e)||qi.mouseout.call(this,e)}};_(["click","dblclick","contextmenu"],function(e){qi[e]=function(t){t=Ai(this.dom,t),this.trigger(e,t)}});var Ym={pointermove:function(e){Km(e)||Ym.mousemove.call(this,e)},pointerup:function(e){Ym.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Y$(e,t){var i=t.domHandlers;xe.pointerEventsSupported?_(Zp.pointer,function(r){td(t,r,function(n){i[r].call(e,n)})}):(xe.touchEventsSupported&&_(Zp.touch,function(r){td(t,r,function(n){i[r].call(e,n),U$(t)})}),_(Zp.mouse,function(r){td(t,r,function(n){n=aS(n),t.touching||i[r].call(e,n)})}))}function X$(e,t){xe.pointerEventsSupported?_(sb.pointer,i):xe.touchEventsSupported||_(sb.mouse,i);function i(r){function n(o){o=aS(o),v1(e,o.target)||(o=$$(e,o),t.domHandlers[r].call(e,o))}td(t,r,n,{capture:!0})}}function td(e,t,i,r){e.mounted[t]=i,e.listenerOpts[t]=r,Om(e.domTarget,t,i,r)}function Qp(e){var t=e.mounted;for(var i in t)t.hasOwnProperty(i)&&l$(e.domTarget,i,t[i],e.listenerOpts[i]);e.mounted={}}var lb=function(){function e(t,i){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=i}return e}(),q$=function(e){L(t,e);function t(i,r){var n=e.call(this)||this;return n.__pointerCapturing=!1,n.dom=i,n.painterRoot=r,n._localHandlerScope=new lb(i,qi),qp&&(n._globalHandlerScope=new lb(document,Ym)),Y$(n,n._localHandlerScope),n}return t.prototype.dispose=function(){Qp(this._localHandlerScope),qp&&Qp(this._globalHandlerScope)},t.prototype.setCursor=function(i){this.dom.style&&(this.dom.style.cursor=i||"default")},t.prototype.__togglePointerCapture=function(i){if(this.__mayPointerCapture=null,qp&&+this.__pointerCapturing^+i){this.__pointerCapturing=i;var r=this._globalHandlerScope;i?X$(this,r):Qp(r)}},t}(Wi),m1=1;xe.hasGlobalWindow&&(m1=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Gd=m1,Xm=.4,qm="#333",Zm="#ccc",Z$="#eee",ub=Of,hb=5e-5;function mo(e){return e>hb||e<-hb}var yo=[],$s=[],Jp=Ci(),eg=Math.abs,Yr=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return mo(this.rotation)||mo(this.x)||mo(this.y)||mo(this.scaleX-1)||mo(this.scaleY-1)||mo(this.skewX)||mo(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,i=this.needLocalTransform(),r=this.transform;if(!(i||t)){r&&(ub(r),this.invTransform=null);return}r=r||Ci(),i?this.getLocalTransform(r):ub(r),t&&(i?Jr(r,t,r):lS(r,t)),this.transform=r,this._resolveGlobalScaleRatio(r)},e.prototype._resolveGlobalScaleRatio=function(t){var i=this.globalScaleRatio;if(i!=null&&i!==1){this.getGlobalScale(yo);var r=yo[0]<0?-1:1,n=yo[1]<0?-1:1,o=((yo[0]-r)*i+r)/yo[0]||0,s=((yo[1]-n)*i+n)/yo[1]||0;t[0]*=o,t[1]*=o,t[2]*=s,t[3]*=s}this.invTransform=this.invTransform||Ci(),Ja(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,i=[];t;)i.push(t),t=t.parent;for(;t=i.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var i=t[0]*t[0]+t[1]*t[1],r=t[2]*t[2]+t[3]*t[3],n=Math.atan2(t[1],t[0]),o=Math.PI/2+n-Math.atan2(t[3],t[2]);r=Math.sqrt(r)*Math.cos(o),i=Math.sqrt(i),this.skewX=o,this.skewY=0,this.rotation=-n,this.x=+t[4],this.y=+t[5],this.scaleX=i,this.scaleY=r,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,i=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||Ci(),Jr($s,t.invTransform,i),i=$s);var r=this.originX,n=this.originY;(r||n)&&(Jp[4]=r,Jp[5]=n,Jr($s,i,Jp),$s[4]-=r,$s[5]-=n,i=$s),this.setLocalTransform(i)}},e.prototype.getGlobalScale=function(t){var i=this.transform;return t=t||[],i?(t[0]=Math.sqrt(i[0]*i[0]+i[1]*i[1]),t[1]=Math.sqrt(i[2]*i[2]+i[3]*i[3]),i[0]<0&&(t[0]=-t[0]),i[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,i){var r=[t,i],n=this.invTransform;return n&&_t(r,r,n),r},e.prototype.transformCoordToGlobal=function(t,i){var r=[t,i],n=this.transform;return n&&_t(r,r,n),r},e.prototype.getLineScale=function(){var t=this.transform;return t&&eg(t[0]-1)>1e-10&&eg(t[3]-1)>1e-10?Math.sqrt(eg(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){y1(this,t)},e.getLocalTransform=function(t,i){i=i||[];var r=t.originX||0,n=t.originY||0,o=t.scaleX,s=t.scaleY,a=t.anchorX,l=t.anchorY,u=t.rotation||0,h=t.x,c=t.y,d=t.skewX?Math.tan(t.skewX):0,f=t.skewY?Math.tan(-t.skewY):0;if(r||n||a||l){var p=r+a,g=n+l;i[4]=-p*o-d*g*s,i[5]=-g*s-f*p*o}else i[4]=i[5]=0;return i[0]=o,i[3]=s,i[1]=f*o,i[2]=d*s,u&&Ls(i,i,u),i[4]+=r+h,i[5]+=n+c,i},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Lr=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function y1(e,t){for(var i=0;i<Lr.length;i++){var r=Lr[i];e[r]=t[r]}}var cb={};function wi(e,t){t=t||Jn;var i=cb[t];i||(i=cb[t]=new fh(500));var r=i.get(e);return r==null&&(r=eo.measureText(e,t).width,i.put(e,r)),r}function db(e,t,i,r){var n=wi(e,t),o=Nf(t),s=Zl(0,n,i),a=fa(0,o,r),l=new ve(s,a,n,o);return l}function ph(e,t,i,r){var n=((e||"")+"").split(`
`),o=n.length;if(o===1)return db(n[0],t,i,r);for(var s=new ve(0,0,0,0),a=0;a<n.length;a++){var l=db(n[a],t,i,r);a===0?s.copy(l):s.union(l)}return s}function Zl(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function fa(e,t,i){return i==="middle"?e-=t/2:i==="bottom"&&(e-=t),e}function Nf(e){return wi("",e)}function or(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Nd(e,t,i){var r=t.position||"inside",n=t.distance!=null?t.distance:5,o=i.height,s=i.width,a=o/2,l=i.x,u=i.y,h="left",c="top";if(r instanceof Array)l+=or(r[0],i.width),u+=or(r[1],i.height),h=null,c=null;else switch(r){case"left":l-=n,u+=a,h="right",c="middle";break;case"right":l+=n+s,u+=a,c="middle";break;case"top":l+=s/2,u-=n,h="center",c="bottom";break;case"bottom":l+=s/2,u+=o+n,h="center";break;case"inside":l+=s/2,u+=a,h="center",c="middle";break;case"insideLeft":l+=n,u+=a,c="middle";break;case"insideRight":l+=s-n,u+=a,h="right",c="middle";break;case"insideTop":l+=s/2,u+=n,h="center";break;case"insideBottom":l+=s/2,u+=o-n,h="center",c="bottom";break;case"insideTopLeft":l+=n,u+=n;break;case"insideTopRight":l+=s-n,u+=n,h="right";break;case"insideBottomLeft":l+=n,u+=o-n,c="bottom";break;case"insideBottomRight":l+=s-n,u+=o-n,h="right",c="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=h,e.verticalAlign=c,e}var tg="__zr_normal__",ig=Lr.concat(["ignore"]),j$=Er(Lr,function(e,t){return e[t]=!0,e},{ignore:!1}),Ks={},Q$=new ve(0,0,0,0),Vf=function(){function e(t){this.id=KM(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,i,r){switch(this.draggable){case"horizontal":i=0;break;case"vertical":t=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=i,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var i=this._textContent;if(i&&(!i.ignore||t)){this.textConfig||(this.textConfig={});var r=this.textConfig,n=r.local,o=i.innerTransformable,s=void 0,a=void 0,l=!1;o.parent=n?this:null;var u=!1;if(o.copyTransform(i),r.position!=null){var h=Q$;r.layoutRect?h.copy(r.layoutRect):h.copy(this.getBoundingRect()),n||h.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Ks,r,h):Nd(Ks,r,h),o.x=Ks.x,o.y=Ks.y,s=Ks.align,a=Ks.verticalAlign;var c=r.origin;if(c&&r.rotation!=null){var d=void 0,f=void 0;c==="center"?(d=h.width*.5,f=h.height*.5):(d=or(c[0],h.width),f=or(c[1],h.height)),u=!0,o.originX=-o.x+d+(n?0:h.x),o.originY=-o.y+f+(n?0:h.y)}}r.rotation!=null&&(o.rotation=r.rotation);var p=r.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var g=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,C=void 0;g&&this.canBeInsideText()?(m=r.insideFill,y=r.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),C=!0)):(m=r.outsideFill,y=r.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),C=!0)),m=m||"#000",(m!==v.fill||y!==v.stroke||C!==v.autoStroke||s!==v.align||a!==v.verticalAlign)&&(l=!0,v.fill=m,v.stroke=y,v.autoStroke=C,v.align=s,v.verticalAlign=a,i.setDefaultTextStyle(v)),i.__dirty|=gi,l&&i.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?Zm:qm},e.prototype.getOutsideStroke=function(t){var i=this.__zr&&this.__zr.getBackgroundColor(),r=typeof i=="string"&&Si(i);r||(r=[255,255,255,1]);for(var n=r[3],o=this.__zr.isDarkMode(),s=0;s<3;s++)r[s]=r[s]*n+(o?0:255)*(1-n);return r[3]=1,en(r,"rgba")},e.prototype.traverse=function(t,i){},e.prototype.attrKV=function(t,i){t==="textConfig"?this.setTextConfig(i):t==="textContent"?this.setTextContent(i):t==="clipPath"?this.setClipPath(i):t==="extra"?(this.extra=this.extra||{},V(this.extra,i)):this[t]=i},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,i){if(typeof t=="string")this.attrKV(t,i);else if(se(t))for(var r=t,n=De(r),o=0;o<n.length;o++){var s=n[o];this.attrKV(s,t[s])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var i=this._normalState,r=0;r<this.animators.length;r++){var n=this.animators[r],o=n.__fromStateTransition;if(!(n.getLoop()||o&&o!==tg)){var s=n.targetName,a=s?i[s]:i;n.saveTo(a)}}},e.prototype._innerSaveToNormal=function(t){var i=this._normalState;i||(i=this._normalState={}),t.textConfig&&!i.textConfig&&(i.textConfig=this.textConfig),this._savePrimaryToNormal(t,i,ig)},e.prototype._savePrimaryToNormal=function(t,i,r){for(var n=0;n<r.length;n++){var o=r[n];t[o]!=null&&!(o in i)&&(i[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var i=this.states;return i[t]||(i[t]={}),i[t]},e.prototype.clearStates=function(t){this.useState(tg,!1,t)},e.prototype.useState=function(t,i,r,n){var o=t===tg,s=this.hasState();if(!(!s&&o)){var a=this.currentStates,l=this.stateTransition;if(!(Ce(a,t)>=0&&(i||a.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){rS("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var h=!!(u&&u.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,i,!r&&!this.__inHover&&l&&l.duration>0,l);var c=this._textContent,d=this._textGuide;return c&&c.useState(t,i,r,h),d&&d.useState(t,i,r,h),o?(this.currentStates=[],this._normalState={}):i?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~gi),u}}},e.prototype.useStates=function(t,i,r){if(!t.length)this.clearStates();else{var n=[],o=this.currentStates,s=t.length,a=s===o.length;if(a){for(var l=0;l<s;l++)if(t[l]!==o[l]){a=!1;break}}if(a)return;for(var l=0;l<s;l++){var u=t[l],h=void 0;this.stateProxy&&(h=this.stateProxy(u,t)),h||(h=this.states[u]),h&&n.push(h)}var c=n[s-1],d=!!(c&&c.hoverLayer||r);d&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(n),p=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(t.join(","),f,this._normalState,!1,!i&&!this.__inHover&&p&&p.duration>0,p);var g=this._textContent,v=this._textGuide;g&&g.useStates(t,i,d),v&&v.useStates(t,i,d),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~gi)}},e.prototype.isSilent=function(){for(var t=this.silent,i=this.parent;!t&&i;){if(i.silent){t=!0;break}i=i.parent}return t},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var i=this.animators[t];i.targetName&&i.changeTarget(this[i.targetName])}},e.prototype.removeState=function(t){var i=Ce(this.currentStates,t);if(i>=0){var r=this.currentStates.slice();r.splice(i,1),this.useStates(r)}},e.prototype.replaceState=function(t,i,r){var n=this.currentStates.slice(),o=Ce(n,t),s=Ce(n,i)>=0;o>=0?s?n.splice(o,1):n[o]=i:r&&!s&&n.push(i),this.useStates(n)},e.prototype.toggleState=function(t,i){i?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var i={},r,n=0;n<t.length;n++){var o=t[n];V(i,o),o.textConfig&&(r=r||{},V(r,o.textConfig))}return r&&(i.textConfig=r),i},e.prototype._applyStateObj=function(t,i,r,n,o,s){var a=!(i&&n);i&&i.textConfig?(this.textConfig=V({},n?this.textConfig:r.textConfig),V(this.textConfig,i.textConfig)):a&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},u=!1,h=0;h<ig.length;h++){var c=ig[h],d=o&&j$[c];i&&i[c]!=null?d?(u=!0,l[c]=i[c]):this[c]=i[c]:a&&r[c]!=null&&(d?(u=!0,l[c]=r[c]):this[c]=r[c])}if(!o)for(var h=0;h<this.animators.length;h++){var f=this.animators[h],p=f.targetName;f.getLoop()||f.__changeFinalValue(p?(i||r)[p]:i||r)}u&&this._transitionState(t,l,s)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var i=this.__zr;i&&t.addSelfToZr(i),t.__zr=i,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var i=this._textContent;i!==t&&(i&&i!==t&&this.removeTextContent(),t.innerTransformable=new Yr,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),V(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=gi;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var i=this._textContent,r=this._textGuide;i&&(i.__inHover=t),r&&(r.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var i=this.animators;if(i)for(var r=0;r<i.length;r++)t.animation.addAnimator(i[r]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var i=this.animators;if(i)for(var r=0;r<i.length;r++)t.animation.removeAnimator(i[r]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,i,r){var n=t?this[t]:this,o=new dS(n,i,r);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,i){var r=this.__zr,n=this;t.during(function(){n.updateDuringAnimation(i)}).done(function(){var o=n.animators,s=Ce(o,t);s>=0&&o.splice(s,1)}),this.animators.push(t),r&&r.animation.addAnimator(t),r&&r.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,i){for(var r=this.animators,n=r.length,o=[],s=0;s<n;s++){var a=r[s];!t||t===a.scope?a.stop(i):o.push(a)}return this.animators=o,this},e.prototype.animateTo=function(t,i,r){rg(this,t,i,r)},e.prototype.animateFrom=function(t,i,r){rg(this,t,i,r,!0)},e.prototype._transitionState=function(t,i,r,n){for(var o=rg(this,i,r,n),s=0;s<o.length;s++)o[s].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=gi;function i(r,n,o,s){Object.defineProperty(t,r,{get:function(){if(!this[n]){var l=this[n]=[];a(this,l)}return this[n]},set:function(l){this[o]=l[0],this[s]=l[1],this[n]=l,a(this,l)}});function a(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(h){l[o]=h}}),Object.defineProperty(u,1,{get:function(){return l[s]},set:function(h){l[s]=h}})}}Object.defineProperty&&(i("position","_legacyPos","x","y"),i("scale","_legacyScale","scaleX","scaleY"),i("origin","_legacyOrigin","originX","originY"))}(),e}();dt(Vf,Wi);dt(Vf,Yr);function rg(e,t,i,r,n){i=i||{};var o=[];C1(e,"",e,t,i,r,o,n);var s=o.length,a=!1,l=i.done,u=i.aborted,h=function(){a=!0,s--,s<=0&&(a?l&&l():u&&u())},c=function(){s--,s<=0&&(a?l&&l():u&&u())};s||l&&l(),o.length>0&&i.during&&o[0].during(function(p,g){i.during(g)});for(var d=0;d<o.length;d++){var f=o[d];h&&f.done(h),c&&f.aborted(c),i.force&&f.duration(i.duration),f.start(i.easing)}return o}function ng(e,t,i){for(var r=0;r<i;r++)e[r]=t[r]}function J$(e){return Ot(e[0])}function e4(e,t,i){if(Ot(t[i]))if(Ot(e[i])||(e[i]=[]),ci(t[i])){var r=t[i].length;e[i].length!==r&&(e[i]=new t[i].constructor(r),ng(e[i],t[i],r))}else{var n=t[i],o=e[i],s=n.length;if(J$(n))for(var a=n[0].length,l=0;l<s;l++)o[l]?ng(o[l],n[l],a):o[l]=Array.prototype.slice.call(n[l]);else ng(o,n,s);o.length=n.length}else e[i]=t[i]}function t4(e,t){return e===t||Ot(e)&&Ot(t)&&i4(e,t)}function i4(e,t){var i=e.length;if(i!==t.length)return!1;for(var r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}function C1(e,t,i,r,n,o,s,a){for(var l=De(r),u=n.duration,h=n.delay,c=n.additive,d=n.setToFinal,f=!se(o),p=e.animators,g=[],v=0;v<l.length;v++){var m=l[v],y=r[m];if(y!=null&&i[m]!=null&&(f||o[m]))if(se(y)&&!Ot(y)&&!Lf(y)){if(t){a||(i[m]=y,e.updateDuringAnimation(t));continue}C1(e,m,i[m],y,n,o&&o[m],s,a)}else g.push(m);else a||(i[m]=y,e.updateDuringAnimation(t),g.push(m))}var C=g.length;if(!c&&C)for(var S=0;S<p.length;S++){var b=p[S];if(b.targetName===t){var w=b.stopTracks(g);if(w){var x=Ce(p,b);p.splice(x,1)}}}if(n.force||(g=Le(g,function(A){return!t4(r[A],i[A])}),C=g.length),C>0||n.force&&!s.length){var R=void 0,D=void 0,T=void 0;if(a){D={},d&&(R={});for(var S=0;S<C;S++){var m=g[S];D[m]=i[m],d?R[m]=r[m]:i[m]=r[m]}}else if(d){T={};for(var S=0;S<C;S++){var m=g[S];T[m]=pu(i[m]),e4(i,r,m)}}var b=new dS(i,!1,!1,c?Le(p,function(P){return P.targetName===t}):null);b.targetName=t,n.scope&&(b.scope=n.scope),d&&R&&b.whenWithKeys(0,R,g),T&&b.whenWithKeys(0,T,g),b.whenWithKeys(u??500,a?D:r,g).delay(h||0),e.addAnimator(b,t),s.push(b)}}var le=function(e){L(t,e);function t(i){var r=e.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(i),r}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(i){return this._children[i]},t.prototype.childOfName=function(i){for(var r=this._children,n=0;n<r.length;n++)if(r[n].name===i)return r[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(i){return i&&i!==this&&i.parent!==this&&(this._children.push(i),this._doAdd(i)),this},t.prototype.addBefore=function(i,r){if(i&&i!==this&&i.parent!==this&&r&&r.parent===this){var n=this._children,o=n.indexOf(r);o>=0&&(n.splice(o,0,i),this._doAdd(i))}return this},t.prototype.replace=function(i,r){var n=Ce(this._children,i);return n>=0&&this.replaceAt(r,n),this},t.prototype.replaceAt=function(i,r){var n=this._children,o=n[r];if(i&&i!==this&&i.parent!==this&&i!==o){n[r]=i,o.parent=null;var s=this.__zr;s&&o.removeSelfFromZr(s),this._doAdd(i)}return this},t.prototype._doAdd=function(i){i.parent&&i.parent.remove(i),i.parent=this;var r=this.__zr;r&&r!==i.__zr&&i.addSelfToZr(r),r&&r.refresh()},t.prototype.remove=function(i){var r=this.__zr,n=this._children,o=Ce(n,i);return o<0?this:(n.splice(o,1),i.parent=null,r&&i.removeSelfFromZr(r),r&&r.refresh(),this)},t.prototype.removeAll=function(){for(var i=this._children,r=this.__zr,n=0;n<i.length;n++){var o=i[n];r&&o.removeSelfFromZr(r),o.parent=null}return i.length=0,this},t.prototype.eachChild=function(i,r){for(var n=this._children,o=0;o<n.length;o++){var s=n[o];i.call(r,s,o)}return this},t.prototype.traverse=function(i,r){for(var n=0;n<this._children.length;n++){var o=this._children[n],s=i.call(r,o);o.isGroup&&!s&&o.traverse(i,r)}return this},t.prototype.addSelfToZr=function(i){e.prototype.addSelfToZr.call(this,i);for(var r=0;r<this._children.length;r++){var n=this._children[r];n.addSelfToZr(i)}},t.prototype.removeSelfFromZr=function(i){e.prototype.removeSelfFromZr.call(this,i);for(var r=0;r<this._children.length;r++){var n=this._children[r];n.removeSelfFromZr(i)}},t.prototype.getBoundingRect=function(i){for(var r=new ve(0,0,0,0),n=i||this._children,o=[],s=null,a=0;a<n.length;a++){var l=n[a];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),h=l.getLocalTransform(o);h?(ve.applyTransform(r,u,h),s=s||r.clone(),s.union(r)):(s=s||u.clone(),s.union(u))}}return s||r},t}(Vf);le.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var id={},S1={};function r4(e){delete S1[e]}function n4(e){if(!e)return!1;if(typeof e=="string")return kd(e,1)<Xm;if(e.colorStops){for(var t=e.colorStops,i=0,r=t.length,n=0;n<r;n++)i+=kd(t[n].color,1);return i/=r,i<Xm}return!1}var o4=function(){function e(t,i,r){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=i,this.id=t;var o=new S$,s=r.renderer||"canvas";id[s]||(s=De(id)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var a=new id[s](i,o,r,t),l=r.ssr||a.ssrOnly;this.storage=o,this.painter=a;var u=!xe.node&&!xe.worker&&!l?new q$(a.getViewportRoot(),a.root):null,h=r.useCoarsePointer,c=h==null||h==="auto"?xe.touchEventsSupported:!!h,d=44,f;c&&(f=de(r.pointerSize,d)),this.handler=new QM(o,a,u,a.root,f),this.animation=new z$({stage:{update:l?null:function(){return n._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,i){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,i),this.refresh())},e.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=n4(t))},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},e.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},e.prototype.flush=function(){this._disposed||this._flush(!1)},e.prototype._flush=function(t){var i,r=ya();this._needsRefresh&&(i=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(i=!0,this.refreshHoverImmediately());var n=ya();i?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},e.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},e.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,i){if(!this._disposed)return this.handler.findHover(t,i)},e.prototype.on=function(t,i,r){return this._disposed||this.handler.on(t,i,r),this},e.prototype.off=function(t,i){this._disposed||this.handler.off(t,i)},e.prototype.trigger=function(t,i){this._disposed||this.handler.trigger(t,i)},e.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),i=0;i<t.length;i++)t[i]instanceof le&&t[i].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},e.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,r4(this.id))},e}();function fb(e,t){var i=new o4(KM(),e,t);return S1[i.id]=i,i}function s4(e,t){id[e]=t}var jm;function a4(e){if(typeof jm=="function")return jm(e)}function l4(e){jm=e}var pb=1e-4,w1=20;function u4(e){return e.replace(/^\s+|\s+$/g,"")}function Oe(e,t,i,r){var n=t[0],o=t[1],s=i[0],a=i[1],l=o-n,u=a-s;if(l===0)return u===0?s:(s+a)/2;if(r)if(l>0){if(e<=n)return s;if(e>=o)return a}else{if(e>=n)return s;if(e<=o)return a}else{if(e===n)return s;if(e===o)return a}return(e-n)/l*u+s}function K(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return q(e)?u4(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function nt(e,t,i){return t==null&&(t=10),t=Math.min(Math.max(0,t),w1),e=(+e).toFixed(t),i?e:+e}function Gi(e){return e.sort(function(t,i){return t-i}),e}function xr(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,i=0;i<15;i++,t*=10)if(Math.round(e*t)/t===e)return i}return h4(e)}function h4(e){var t=e.toString().toLowerCase(),i=t.indexOf("e"),r=i>0?+t.slice(i+1):0,n=i>0?i:t.length,o=t.indexOf("."),s=o<0?0:n-1-o;return Math.max(0,s-r)}function b1(e,t){var i=Math.log,r=Math.LN10,n=Math.floor(i(e[1]-e[0])/r),o=Math.round(i(Math.abs(t[1]-t[0]))/r),s=Math.min(Math.max(-n+o,0),20);return isFinite(s)?s:20}function c4(e,t){var i=Er(e,function(f,p){return f+(isNaN(p)?0:p)},0);if(i===0)return[];for(var r=Math.pow(10,t),n=z(e,function(f){return(isNaN(f)?0:f)/i*r*100}),o=r*100,s=z(n,function(f){return Math.floor(f)}),a=Er(s,function(f,p){return f+p},0),l=z(n,function(f,p){return f-s[p]});a<o;){for(var u=Number.NEGATIVE_INFINITY,h=null,c=0,d=l.length;c<d;++c)l[c]>u&&(u=l[c],h=c);++s[h],l[h]=0,++a}return z(s,function(f){return f/r})}function d4(e,t){var i=Math.max(xr(e),xr(t)),r=e+t;return i>w1?r:nt(r,i)}var gb=9007199254740991;function x1(e){var t=Math.PI*2;return(e%t+t)%t}function Vu(e){return e>-pb&&e<pb}var f4=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function kr(e){if(e instanceof Date)return e;if(q(e)){var t=f4.exec(e);if(!t)return new Date(NaN);if(t[8]){var i=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(i-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,i,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function p4(e){return Math.pow(10,fS(e))}function fS(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function R1(e,t){var i=fS(e),r=Math.pow(10,i),n=e/r,o;return n<1.5?o=1:n<2.5?o=2:n<4?o=3:n<7?o=5:o=10,e=o*r,i>=-20?+e.toFixed(i<0?-i:0):e}function og(e,t){var i=(e.length-1)*t+1,r=Math.floor(i),n=+e[r-1],o=i-r;return o?n+o*(e[r]-n):n}function vb(e){e.sort(function(l,u){return a(l,u,0)?-1:1});for(var t=-1/0,i=1,r=0;r<e.length;){for(var n=e[r].interval,o=e[r].close,s=0;s<2;s++)n[s]<=t&&(n[s]=t,o[s]=s?1:1-i),t=n[s],i=o[s];n[0]===n[1]&&o[0]*o[1]!==1?e.splice(r,1):r++}return e;function a(l,u,h){return l.interval[h]<u.interval[h]||l.interval[h]===u.interval[h]&&(l.close[h]-u.close[h]===(h?-1:1)||!h&&a(l,u,1))}}function sn(e){var t=parseFloat(e);return t==e&&(t!==0||!q(e)||e.indexOf("x")<=0)?t:NaN}function D1(e){return!isNaN(sn(e))}function T1(){return Math.round(Math.random()*9)}function _1(e,t){return t===0?e:_1(t,e%t)}function mb(e,t){return e==null?t:t==null?e:e*t/_1(e,t)}function Ie(e){throw new Error(e)}function yb(e,t,i){return(t-e)*i+e}var A1="series\0",P1="\0_ec_\0";function ze(e){return e instanceof Array?e:e==null?[]:[e]}function bs(e,t,i){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var r=0,n=i.length;r<n;r++){var o=i[r];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var Cb=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function el(e){return se(e)&&!H(e)&&!(e instanceof Date)?e.value:e}function g4(e){return se(e)&&!(e instanceof Array)}function M1(e,t,i){var r=i==="normalMerge",n=i==="replaceMerge",o=i==="replaceAll";e=e||[],t=(t||[]).slice();var s=Q();_(t,function(l,u){if(!se(l)){t[u]=null;return}});var a=v4(e,s,i);return(r||n)&&m4(a,e,s,t),r&&y4(a,t),r||n?C4(a,t,n):o&&S4(a,t),w4(a),a}function v4(e,t,i){var r=[];if(i==="replaceAll")return r;for(var n=0;n<e.length;n++){var o=e[n];o&&o.id!=null&&t.set(o.id,n),r.push({existing:i==="replaceMerge"||Bu(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return r}function m4(e,t,i,r){_(r,function(n,o){if(!(!n||n.id==null)){var s=gu(n.id),a=i.get(s);if(a!=null){var l=e[a];jt(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=n,l.existing=t[a],r[o]=null}}})}function y4(e,t){_(t,function(i,r){if(!(!i||i.name==null))for(var n=0;n<e.length;n++){var o=e[n].existing;if(!e[n].newOption&&o&&(o.id==null||i.id==null)&&!Bu(i)&&!Bu(o)&&F1("name",o,i)){e[n].newOption=i,t[r]=null;return}}})}function C4(e,t,i){_(t,function(r){if(r){for(var n,o=0;(n=e[o])&&(n.newOption||Bu(n.existing)||n.existing&&r.id!=null&&!F1("id",r,n.existing));)o++;n?(n.newOption=r,n.brandNew=i):e.push({newOption:r,brandNew:i,existing:null,keyInfo:null}),o++}})}function S4(e,t){_(t,function(i){e.push({newOption:i,brandNew:!0,existing:null,keyInfo:null})})}function w4(e){var t=Q();_(e,function(i){var r=i.existing;r&&t.set(r.id,i)}),_(e,function(i){var r=i.newOption;jt(!r||r.id==null||!t.get(r.id)||t.get(r.id)===i,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&t.set(r.id,i),!i.keyInfo&&(i.keyInfo={})}),_(e,function(i,r){var n=i.existing,o=i.newOption,s=i.keyInfo;if(se(o)){if(s.name=o.name!=null?gu(o.name):n?n.name:A1+r,n)s.id=gu(n.id);else if(o.id!=null)s.id=gu(o.id);else{var a=0;do s.id="\0"+s.name+"\0"+a++;while(t.get(s.id))}t.set(s.id,i)}})}function F1(e,t,i){var r=ft(t[e],null),n=ft(i[e],null);return r!=null&&n!=null&&r===n}function gu(e){return ft(e,"")}function ft(e,t){return e==null?t:q(e)?e:Pe(e)||Pm(e)?e+"":t}function pS(e){var t=e.name;return!!(t&&t.indexOf(A1))}function Bu(e){return e&&e.id!=null&&gu(e.id).indexOf(P1)===0}function b4(e){return P1+e}function x4(e,t,i){_(e,function(r){var n=r.newOption;se(n)&&(r.keyInfo.mainType=t,r.keyInfo.subType=R4(t,n,r.existing,i))})}function R4(e,t,i,r){var n=t.type?t.type:i?i.subType:r.determineSubType(e,t);return n}function D4(e,t){var i={},r={};return n(e||[],i),n(t||[],r,i),[o(i),o(r)];function n(s,a,l){for(var u=0,h=s.length;u<h;u++){var c=ft(s[u].seriesId,null);if(c==null)return;for(var d=ze(s[u].dataIndex),f=l&&l[c],p=0,g=d.length;p<g;p++){var v=d[p];f&&f[v]?f[v]=null:(a[c]||(a[c]={}))[v]=1}}}function o(s,a){var l=[];for(var u in s)if(s.hasOwnProperty(u)&&s[u]!=null)if(a)l.push(+u);else{var h=o(s[u],!0);h.length&&l.push({seriesId:u,dataIndex:h})}return l}}function xs(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return H(t.dataIndex)?z(t.dataIndex,function(i){return e.indexOfRawIndex(i)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return H(t.name)?z(t.name,function(i){return e.indexOfName(i)}):e.indexOfName(t.name)}function _e(){var e="__ec_inner_"+T4++;return function(t){return t[e]||(t[e]={})}}var T4=T1();function vu(e,t,i){var r=gS(t,i),n=r.mainTypeSpecified,o=r.queryOptionMap,s=r.others,a=s,l=i?i.defaultMainType:null;return!n&&l&&o.set(l,{}),o.each(function(u,h){var c=gh(e,h,u,{useDefault:l===h,enableAll:i&&i.enableAll!=null?i.enableAll:!0,enableNone:i&&i.enableNone!=null?i.enableNone:!0});a[h+"Models"]=c.models,a[h+"Model"]=c.models[0]}),a}function gS(e,t){var i;if(q(e)){var r={};r[e+"Index"]=0,i=r}else i=e;var n=Q(),o={},s=!1;return _(i,function(a,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=a;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],h=u[1],c=(u[2]||"").toLowerCase();if(!(!h||!c||t&&t.includeMainTypes&&Ce(t.includeMainTypes,h)<0)){s=s||!!h;var d=n.get(h)||n.set(h,{});d[c]=a}}),{mainTypeSpecified:s,queryOptionMap:n,others:o}}var ht={useDefault:!0,enableAll:!1,enableNone:!1},_4={useDefault:!1,enableAll:!0,enableNone:!0};function gh(e,t,i,r){r=r||ht;var n=i.index,o=i.id,s=i.name,a={models:null,specified:n!=null||o!=null||s!=null};if(!a.specified){var l=void 0;return a.models=r.useDefault&&(l=e.getComponent(t))?[l]:[],a}return n==="none"||n===!1?(jt(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),a.models=[],a):(n==="all"&&(jt(r.enableAll,'`"all"` is not a valid value on index option.'),n=o=s=null),a.models=e.queryComponents({mainType:t,index:n,id:o,name:s}),a)}function E1(e,t,i){e.setAttribute?e.setAttribute(t,i):e[t]=i}function A4(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function P4(e){return e==="auto"?xe.domSupported?"html":"richText":e||"html"}function Qm(e,t){var i=Q(),r=[];return _(e,function(n){var o=t(n);(i.get(o)||(r.push(o),i.set(o,[]))).push(n)}),{keys:r,buckets:i}}function I1(e,t,i,r,n){var o=t==null||t==="auto";if(r==null)return r;if(Pe(r)){var s=yb(i||0,r,n);return nt(s,o?Math.max(xr(i||0),xr(r)):t)}else{if(q(r))return n<1?i:r;for(var a=[],l=i,u=r,h=Math.max(l?l.length:0,u.length),c=0;c<h;++c){var d=e.getDimensionInfo(c);if(d&&d.type==="ordinal")a[c]=(n<1&&l?l:u)[c];else{var f=l&&l[c]?l[c]:0,p=u[c],s=yb(f,p,n);a[c]=nt(s,o?Math.max(xr(f),xr(p)):t)}}return a}}var M4=".",Co="___EC__COMPONENT__CONTAINER___",L1="___EC__EXTENDED_CLASS___";function Rr(e){var t={main:"",sub:""};if(e){var i=e.split(M4);t.main=i[0]||"",t.sub=i[1]||""}return t}function F4(e){jt(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function E4(e){return!!(e&&e[L1])}function vS(e,t){e.$constructor=e,e.extend=function(i){var r=this,n;return I4(r)?n=function(o){L(s,o);function s(){return o.apply(this,arguments)||this}return s}(r):(n=function(){(i.$constructor||r).apply(this,arguments)},H3(n,this)),V(n.prototype,i),n[L1]=!0,n.extend=this.extend,n.superCall=O4,n.superApply=G4,n.superClass=r,n}}function I4(e){return ie(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function k1(e,t){e.extend=t.extend}var L4=Math.round(Math.random()*10);function k4(e){var t=["__\0is_clz",L4++].join("_");e.prototype[t]=!0,e.isInstance=function(i){return!!(i&&i[t])}}function O4(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return this.superClass.prototype[t].apply(e,i)}function G4(e,t,i){return this.superClass.prototype[t].apply(e,i)}function Bf(e){var t={};e.registerClass=function(r){var n=r.type||r.prototype.type;if(n){F4(n),r.prototype.type=n;var o=Rr(n);if(!o.sub)t[o.main]=r;else if(o.sub!==Co){var s=i(o);s[o.sub]=r}}return r},e.getClass=function(r,n,o){var s=t[r];if(s&&s[Co]&&(s=n?s[n]:null),o&&!s)throw new Error(n?"Component "+r+"."+(n||"")+" is used but not imported.":r+".type should be specified.");return s},e.getClassesByMainType=function(r){var n=Rr(r),o=[],s=t[n.main];return s&&s[Co]?_(s,function(a,l){l!==Co&&o.push(a)}):o.push(s),o},e.hasClass=function(r){var n=Rr(r);return!!t[n.main]},e.getAllClassMainTypes=function(){var r=[];return _(t,function(n,o){r.push(o)}),r},e.hasSubTypes=function(r){var n=Rr(r),o=t[n.main];return o&&o[Co]};function i(r){var n=t[r.main];return(!n||!n[Co])&&(n=t[r.main]={},n[Co]=!0),n}}function Rs(e,t){for(var i=0;i<e.length;i++)e[i][1]||(e[i][1]=e[i][0]);return t=t||!1,function(r,n,o){for(var s={},a=0;a<e.length;a++){var l=e[a][1];if(!(n&&Ce(n,l)>=0||o&&Ce(o,l)<0)){var u=r.getShallow(l,t);u!=null&&(s[e[a][0]]=u)}}return s}}var N4=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],V4=Rs(N4),B4=function(){function e(){}return e.prototype.getAreaStyle=function(t,i){return V4(this,t,i)},e}(),Jm=new fh(50);function H4(e){if(typeof e=="string"){var t=Jm.get(e);return t&&t.image}else return e}function mS(e,t,i,r,n){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!i)return t;var o=Jm.get(e),s={hostEl:i,cb:r,cbPayload:n};return o?(t=o.image,!Hf(t)&&o.pending.push(s)):(t=eo.loadImage(e,Sb,Sb),t.__zrImageSrc=e,Jm.put(e,t.__cachedImgObj={image:t,pending:[s]})),t}else return e;else return t}function Sb(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var i=e.pending[t],r=i.cb;r&&r(this,i.cbPayload),i.hostEl.dirty()}e.pending.length=0}function Hf(e){return e&&e.width&&e.height}var sg=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function z4(e,t,i,r,n,o){if(!i){e.text="",e.isTruncated=!1;return}var s=(t+"").split(`
`);o=O1(i,r,n,o);for(var a=!1,l={},u=0,h=s.length;u<h;u++)G1(l,s[u],o),s[u]=l.textLine,a=a||l.isTruncated;e.text=s.join(`
`),e.isTruncated=a}function O1(e,t,i,r){r=r||{};var n=V({},r);n.font=t,i=de(i,"..."),n.maxIterations=de(r.maxIterations,2);var o=n.minChar=de(r.minChar,0);n.cnCharWidth=wi("",t);var s=n.ascCharWidth=wi("a",t);n.placeholder=de(r.placeholder,"");for(var a=e=Math.max(0,e-1),l=0;l<o&&a>=s;l++)a-=s;var u=wi(i,t);return u>a&&(i="",u=0),a=e-u,n.ellipsis=i,n.ellipsisWidth=u,n.contentWidth=a,n.containerWidth=e,n}function G1(e,t,i){var r=i.containerWidth,n=i.font,o=i.contentWidth;if(!r){e.textLine="",e.isTruncated=!1;return}var s=wi(t,n);if(s<=r){e.textLine=t,e.isTruncated=!1;return}for(var a=0;;a++){if(s<=o||a>=i.maxIterations){t+=i.ellipsis;break}var l=a===0?W4(t,o,i.ascCharWidth,i.cnCharWidth):s>0?Math.floor(t.length*o/s):0;t=t.substr(0,l),s=wi(t,n)}t===""&&(t=i.placeholder),e.textLine=t,e.isTruncated=!0}function W4(e,t,i,r){for(var n=0,o=0,s=e.length;o<s&&n<t;o++){var a=e.charCodeAt(o);n+=0<=a&&a<=127?i:r}return o}function U4(e,t){e!=null&&(e+="");var i=t.overflow,r=t.padding,n=t.font,o=i==="truncate",s=Nf(n),a=de(t.lineHeight,s),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",h=!1,c=t.width,d;c!=null&&(i==="break"||i==="breakAll")?d=e?N1(e,t.font,c,i==="breakAll",0).lines:[]:d=e?e.split(`
`):[];var f=d.length*a,p=de(t.height,f);if(f>p&&u){var g=Math.floor(p/a);h=h||d.length>g,d=d.slice(0,g)}if(e&&o&&c!=null)for(var v=O1(c,n,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m={},y=0;y<d.length;y++)G1(m,d[y],v),d[y]=m.textLine,h=h||m.isTruncated;for(var C=p,S=0,y=0;y<d.length;y++)S=Math.max(wi(d[y],n),S);c==null&&(c=S);var b=S;return r&&(C+=r[0]+r[2],b+=r[1]+r[3],c+=r[1]+r[3]),l&&(b=c),{lines:d,height:p,outerWidth:b,outerHeight:C,lineHeight:a,calculatedLineHeight:s,contentWidth:S,contentHeight:f,width:c,isTruncated:h}}var $4=function(){function e(){}return e}(),wb=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),K4=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return e}();function Y4(e,t){var i=new K4;if(e!=null&&(e+=""),!e)return i;for(var r=t.width,n=t.height,o=t.overflow,s=(o==="break"||o==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:o==="breakAll"}:null,a=sg.lastIndex=0,l;(l=sg.exec(e))!=null;){var u=l.index;u>a&&ag(i,e.substring(a,u),t,s),ag(i,l[2],t,s,l[1]),a=sg.lastIndex}a<e.length&&ag(i,e.substring(a,e.length),t,s);var h=[],c=0,d=0,f=t.padding,p=o==="truncate",g=t.lineOverflow==="truncate",v={};function m(W,$,X){W.width=$,W.lineHeight=X,c+=X,d=Math.max(d,$)}e:for(var y=0;y<i.lines.length;y++){for(var C=i.lines[y],S=0,b=0,w=0;w<C.tokens.length;w++){var x=C.tokens[w],R=x.styleName&&t.rich[x.styleName]||{},D=x.textPadding=R.padding,T=D?D[1]+D[3]:0,A=x.font=R.font||t.font;x.contentHeight=Nf(A);var P=de(R.height,x.contentHeight);if(x.innerHeight=P,D&&(P+=D[0]+D[2]),x.height=P,x.lineHeight=Ar(R.lineHeight,t.lineHeight,P),x.align=R&&R.align||t.align,x.verticalAlign=R&&R.verticalAlign||"middle",g&&n!=null&&c+x.lineHeight>n){var M=i.lines.length;w>0?(C.tokens=C.tokens.slice(0,w),m(C,b,S),i.lines=i.lines.slice(0,y+1)):i.lines=i.lines.slice(0,y),i.isTruncated=i.isTruncated||i.lines.length<M;break e}var F=R.width,E=F==null||F==="auto";if(typeof F=="string"&&F.charAt(F.length-1)==="%")x.percentWidth=F,h.push(x),x.contentWidth=wi(x.text,A);else{if(E){var I=R.backgroundColor,O=I&&I.image;O&&(O=H4(O),Hf(O)&&(x.width=Math.max(x.width,O.width*P/O.height)))}var k=p&&r!=null?r-b:null;k!=null&&k<x.width?!E||k<T?(x.text="",x.width=x.contentWidth=0):(z4(v,x.text,k-T,A,t.ellipsis,{minChar:t.truncateMinChar}),x.text=v.text,i.isTruncated=i.isTruncated||v.isTruncated,x.width=x.contentWidth=wi(x.text,A)):x.contentWidth=wi(x.text,A)}x.width+=T,b+=x.width,R&&(S=Math.max(S,x.lineHeight))}m(C,b,S)}i.outerWidth=i.width=de(r,d),i.outerHeight=i.height=de(n,c),i.contentHeight=c,i.contentWidth=d,f&&(i.outerWidth+=f[1]+f[3],i.outerHeight+=f[0]+f[2]);for(var y=0;y<h.length;y++){var x=h[y],G=x.percentWidth;x.width=parseInt(G,10)/100*i.width}return i}function ag(e,t,i,r,n){var o=t==="",s=n&&i.rich[n]||{},a=e.lines,l=s.font||i.font,u=!1,h,c;if(r){var d=s.padding,f=d?d[1]+d[3]:0;if(s.width!=null&&s.width!=="auto"){var p=or(s.width,r.width)+f;a.length>0&&p+r.accumWidth>r.width&&(h=t.split(`
`),u=!0),r.accumWidth=p}else{var g=N1(t,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=g.accumWidth+f,c=g.linesWidths,h=g.lines}}else h=t.split(`
`);for(var v=0;v<h.length;v++){var m=h[v],y=new $4;if(y.styleName=n,y.text=m,y.isLineHolder=!m&&!o,typeof s.width=="number"?y.width=s.width:y.width=c?c[v]:wi(m,l),!v&&!u){var C=(a[a.length-1]||(a[0]=new wb)).tokens,S=C.length;S===1&&C[0].isLineHolder?C[0]=y:(m||!S||o)&&C.push(y)}else a.push(new wb([y]))}}function X4(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var q4=Er(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function Z4(e){return X4(e)?!!q4[e]:!0}function N1(e,t,i,r,n){for(var o=[],s=[],a="",l="",u=0,h=0,c=0;c<e.length;c++){var d=e.charAt(c);if(d===`
`){l&&(a+=l,h+=u),o.push(a),s.push(h),a="",l="",u=0,h=0;continue}var f=wi(d,t),p=r?!1:!Z4(d);if(o.length?h+f>i:n+h+f>i){h?(a||l)&&(p?(a||(a=l,l="",u=0,h=u),o.push(a),s.push(h-u),l+=d,u+=f,a="",h=u):(l&&(a+=l,l="",u=0),o.push(a),s.push(h),a=d,h=f)):p?(o.push(l),s.push(u),l=d,u=f):(o.push(d),s.push(f));continue}h+=f,p?(l+=d,u+=f):(l&&(a+=l,l="",u=0),a+=d)}return!o.length&&!a&&(a=e,l="",u=0),l&&(a+=l),a&&(o.push(a),s.push(h)),o.length===1&&(h+=n),{accumWidth:h,lines:o,linesWidths:s}}var ey="__zr_style_"+Math.round(Math.random()*10),fs={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},zf={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};fs[ey]=!0;var bb=["z","z2","invisible"],j4=["invisible"],zi=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype._init=function(i){for(var r=De(i),n=0;n<r.length;n++){var o=r[n];o==="style"?this.useStyle(i[o]):e.prototype.attrKV.call(this,o,i[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(i,r,n,o){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Q4(this,i,r)||s&&!s[0]&&!s[3])return!1;if(n&&this.__clipPaths){for(var a=0;a<this.__clipPaths.length;++a)if(this.__clipPaths[a].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(i,r){return this.rectContain(i,r)},t.prototype.traverse=function(i,r){i.call(r,this)},t.prototype.rectContain=function(i,r){var n=this.transformCoordToLocal(i,r),o=this.getBoundingRect();return o.contain(n[0],n[1])},t.prototype.getPaintRect=function(){var i=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,n=this.getBoundingRect(),o=this.style,s=o.shadowBlur||0,a=o.shadowOffsetX||0,l=o.shadowOffsetY||0;i=this._paintRect||(this._paintRect=new ve(0,0,0,0)),r?ve.applyTransform(i,n,r):i.copy(n),(s||a||l)&&(i.width+=s*2+Math.abs(a),i.height+=s*2+Math.abs(l),i.x=Math.min(i.x,i.x+a-s),i.y=Math.min(i.y,i.y+l-s));var u=this.dirtyRectTolerance;i.isZero()||(i.x=Math.floor(i.x-u),i.y=Math.floor(i.y-u),i.width=Math.ceil(i.width+1+u*2),i.height=Math.ceil(i.height+1+u*2))}return i},t.prototype.setPrevPaintRect=function(i){i?(this._prevPaintRect=this._prevPaintRect||new ve(0,0,0,0),this._prevPaintRect.copy(i)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(i){return this.animate("style",i)},t.prototype.updateDuringAnimation=function(i){i==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(i,r){i!=="style"?e.prototype.attrKV.call(this,i,r):this.style?this.setStyle(r):this.useStyle(r)},t.prototype.setStyle=function(i,r){return typeof i=="string"?this.style[i]=r:V(this.style,i),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(i){i||this.markRedraw(),this.__dirty|=Xl,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Xl)},t.prototype.styleUpdated=function(){this.__dirty&=~Xl},t.prototype.createStyle=function(i){return kf(fs,i)},t.prototype.useStyle=function(i){i[ey]||(i=this.createStyle(i)),this.__inHover?this.__hoverStyle=i:this.style=i,this.dirtyStyle()},t.prototype.isStyleObject=function(i){return i[ey]},t.prototype._innerSaveToNormal=function(i){e.prototype._innerSaveToNormal.call(this,i);var r=this._normalState;i.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(i,r,bb)},t.prototype._applyStateObj=function(i,r,n,o,s,a){e.prototype._applyStateObj.call(this,i,r,n,o,s,a);var l=!(r&&o),u;if(r&&r.style?s?o?u=r.style:(u=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(u,r.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:n.style),this._mergeStyle(u,r.style)):l&&(u=n.style),u)if(s){var h=this.style;if(this.style=this.createStyle(l?{}:h),l)for(var c=De(h),d=0;d<c.length;d++){var f=c[d];f in u&&(u[f]=u[f],this.style[f]=h[f])}for(var p=De(u),d=0;d<p.length;d++){var f=p[d];this.style[f]=this.style[f]}this._transitionState(i,{style:u},a,this.getAnimationStyleProps())}else this.useStyle(u);for(var g=this.__inHover?j4:bb,d=0;d<g.length;d++){var f=g[d];r&&r[f]!=null?this[f]=r[f]:l&&n[f]!=null&&(this[f]=n[f])}},t.prototype._mergeStates=function(i){for(var r=e.prototype._mergeStates.call(this,i),n,o=0;o<i.length;o++){var s=i[o];s.style&&(n=n||{},this._mergeStyle(n,s.style))}return n&&(r.style=n),r},t.prototype._mergeStyle=function(i,r){return V(i,r),i},t.prototype.getAnimationStyleProps=function(){return zf},t.initDefaultProps=function(){var i=t.prototype;i.type="displayable",i.invisible=!1,i.z=0,i.z2=0,i.zlevel=0,i.culling=!1,i.cursor="pointer",i.rectHover=!1,i.incremental=!1,i._rect=null,i.dirtyRectTolerance=0,i.__dirty=gi|Xl}(),t}(Vf),lg=new ve(0,0,0,0),ug=new ve(0,0,0,0);function Q4(e,t,i){return lg.copy(e.getBoundingRect()),e.transform&&lg.applyTransform(e.transform),ug.width=t,ug.height=i,!lg.intersect(ug)}var si=Math.min,ai=Math.max,hg=Math.sin,cg=Math.cos,So=Math.PI*2,Jh=Is(),ec=Is(),tc=Is();function Wf(e,t,i){if(e.length!==0){for(var r=e[0],n=r[0],o=r[0],s=r[1],a=r[1],l=1;l<e.length;l++)r=e[l],n=si(n,r[0]),o=ai(o,r[0]),s=si(s,r[1]),a=ai(a,r[1]);t[0]=n,t[1]=s,i[0]=o,i[1]=a}}function xb(e,t,i,r,n,o){n[0]=si(e,i),n[1]=si(t,r),o[0]=ai(e,i),o[1]=ai(t,r)}var Rb=[],Db=[];function J4(e,t,i,r,n,o,s,a,l,u){var h=r1,c=vt,d=h(e,i,n,s,Rb);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var f=0;f<d;f++){var p=c(e,i,n,s,Rb[f]);l[0]=si(p,l[0]),u[0]=ai(p,u[0])}d=h(t,r,o,a,Db);for(var f=0;f<d;f++){var g=c(t,r,o,a,Db[f]);l[1]=si(g,l[1]),u[1]=ai(g,u[1])}l[0]=si(e,l[0]),u[0]=ai(e,u[0]),l[0]=si(s,l[0]),u[0]=ai(s,u[0]),l[1]=si(t,l[1]),u[1]=ai(t,u[1]),l[1]=si(a,l[1]),u[1]=ai(a,u[1])}function eK(e,t,i,r,n,o,s,a){var l=o1,u=bt,h=ai(si(l(e,i,n),1),0),c=ai(si(l(t,r,o),1),0),d=u(e,i,n,h),f=u(t,r,o,c);s[0]=si(e,n,d),s[1]=si(t,o,f),a[0]=ai(e,n,d),a[1]=ai(t,o,f)}function tK(e,t,i,r,n,o,s,a,l){var u=Gn,h=Nn,c=Math.abs(n-o);if(c%So<1e-4&&c>1e-4){a[0]=e-i,a[1]=t-r,l[0]=e+i,l[1]=t+r;return}if(Jh[0]=cg(n)*i+e,Jh[1]=hg(n)*r+t,ec[0]=cg(o)*i+e,ec[1]=hg(o)*r+t,u(a,Jh,ec),h(l,Jh,ec),n=n%So,n<0&&(n=n+So),o=o%So,o<0&&(o=o+So),n>o&&!s?o+=So:n<o&&s&&(n+=So),s){var d=o;o=n,n=d}for(var f=0;f<o;f+=Math.PI/2)f>n&&(tc[0]=cg(f)*i+e,tc[1]=hg(f)*r+t,u(a,tc,a),h(l,tc,l))}var $e={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},wo=[],bo=[],cr=[],wn=[],dr=[],fr=[],dg=Math.min,fg=Math.max,xo=Math.cos,Ro=Math.sin,Br=Math.abs,ty=Math.PI,Fn=ty*2,pg=typeof Float32Array<"u",bl=[];function gg(e){var t=Math.round(e/ty*1e8)/1e8;return t%2*ty}function yS(e,t){var i=gg(e[0]);i<0&&(i+=Fn);var r=i-e[0],n=e[1];n+=r,!t&&n-i>=Fn?n=i+Fn:t&&i-n>=Fn?n=i-Fn:!t&&i>n?n=i+(Fn-gg(i-n)):t&&i<n&&(n=i-(Fn-gg(n-i))),e[0]=i,e[1]=n}var Or=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,i,r){r=r||0,r>0&&(this._ux=Br(r/Gd/t)||0,this._uy=Br(r/Gd/i)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,i){return this._drawPendingPt(),this.addData($e.M,t,i),this._ctx&&this._ctx.moveTo(t,i),this._x0=t,this._y0=i,this._xi=t,this._yi=i,this},e.prototype.lineTo=function(t,i){var r=Br(t-this._xi),n=Br(i-this._yi),o=r>this._ux||n>this._uy;if(this.addData($e.L,t,i),this._ctx&&o&&this._ctx.lineTo(t,i),o)this._xi=t,this._yi=i,this._pendingPtDist=0;else{var s=r*r+n*n;s>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=i,this._pendingPtDist=s)}return this},e.prototype.bezierCurveTo=function(t,i,r,n,o,s){return this._drawPendingPt(),this.addData($e.C,t,i,r,n,o,s),this._ctx&&this._ctx.bezierCurveTo(t,i,r,n,o,s),this._xi=o,this._yi=s,this},e.prototype.quadraticCurveTo=function(t,i,r,n){return this._drawPendingPt(),this.addData($e.Q,t,i,r,n),this._ctx&&this._ctx.quadraticCurveTo(t,i,r,n),this._xi=r,this._yi=n,this},e.prototype.arc=function(t,i,r,n,o,s){this._drawPendingPt(),bl[0]=n,bl[1]=o,yS(bl,s),n=bl[0],o=bl[1];var a=o-n;return this.addData($e.A,t,i,r,r,n,a,0,s?0:1),this._ctx&&this._ctx.arc(t,i,r,n,o,s),this._xi=xo(o)*r+t,this._yi=Ro(o)*r+i,this},e.prototype.arcTo=function(t,i,r,n,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,i,r,n,o),this},e.prototype.rect=function(t,i,r,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,i,r,n),this.addData($e.R,t,i,r,n),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData($e.Z);var t=this._ctx,i=this._x0,r=this._y0;return t&&t.closePath(),this._xi=i,this._yi=r,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var i=t.length;!(this.data&&this.data.length===i)&&pg&&(this.data=new Float32Array(i));for(var r=0;r<i;r++)this.data[r]=t[r];this._len=i},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var i=t.length,r=0,n=this._len,o=0;o<i;o++)r+=t[o].len();pg&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+r));for(var o=0;o<i;o++)for(var s=t[o].data,a=0;a<s.length;a++)this.data[n++]=s[a];this._len=n},e.prototype.addData=function(t,i,r,n,o,s,a,l,u){if(this._saveData){var h=this.data;this._len+arguments.length>h.length&&(this._expandData(),h=this.data);for(var c=0;c<arguments.length;c++)h[this._len++]=arguments[c]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],i=0;i<this._len;i++)t[i]=this.data[i];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,pg&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){cr[0]=cr[1]=dr[0]=dr[1]=Number.MAX_VALUE,wn[0]=wn[1]=fr[0]=fr[1]=-Number.MAX_VALUE;var t=this.data,i=0,r=0,n=0,o=0,s;for(s=0;s<this._len;){var a=t[s++],l=s===1;switch(l&&(i=t[s],r=t[s+1],n=i,o=r),a){case $e.M:i=n=t[s++],r=o=t[s++],dr[0]=n,dr[1]=o,fr[0]=n,fr[1]=o;break;case $e.L:xb(i,r,t[s],t[s+1],dr,fr),i=t[s++],r=t[s++];break;case $e.C:J4(i,r,t[s++],t[s++],t[s++],t[s++],t[s],t[s+1],dr,fr),i=t[s++],r=t[s++];break;case $e.Q:eK(i,r,t[s++],t[s++],t[s],t[s+1],dr,fr),i=t[s++],r=t[s++];break;case $e.A:var u=t[s++],h=t[s++],c=t[s++],d=t[s++],f=t[s++],p=t[s++]+f;s+=1;var g=!t[s++];l&&(n=xo(f)*c+u,o=Ro(f)*d+h),tK(u,h,c,d,f,p,g,dr,fr),i=xo(p)*c+u,r=Ro(p)*d+h;break;case $e.R:n=i=t[s++],o=r=t[s++];var v=t[s++],m=t[s++];xb(n,o,n+v,o+m,dr,fr);break;case $e.Z:i=n,r=o;break}Gn(cr,cr,dr),Nn(wn,wn,fr)}return s===0&&(cr[0]=cr[1]=wn[0]=wn[1]=0),new ve(cr[0],cr[1],wn[0]-cr[0],wn[1]-cr[1])},e.prototype._calculateLength=function(){var t=this.data,i=this._len,r=this._ux,n=this._uy,o=0,s=0,a=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,h=0,c=0,d=0;d<i;){var f=t[d++],p=d===1;p&&(o=t[d],s=t[d+1],a=o,l=s);var g=-1;switch(f){case $e.M:o=a=t[d++],s=l=t[d++];break;case $e.L:{var v=t[d++],m=t[d++],y=v-o,C=m-s;(Br(y)>r||Br(C)>n||d===i-1)&&(g=Math.sqrt(y*y+C*C),o=v,s=m);break}case $e.C:{var S=t[d++],b=t[d++],v=t[d++],m=t[d++],w=t[d++],x=t[d++];g=w$(o,s,S,b,v,m,w,x,10),o=w,s=x;break}case $e.Q:{var S=t[d++],b=t[d++],v=t[d++],m=t[d++];g=x$(o,s,S,b,v,m,10),o=v,s=m;break}case $e.A:var R=t[d++],D=t[d++],T=t[d++],A=t[d++],P=t[d++],M=t[d++],F=M+P;d+=1,p&&(a=xo(P)*T+R,l=Ro(P)*A+D),g=fg(T,A)*dg(Fn,Math.abs(M)),o=xo(F)*T+R,s=Ro(F)*A+D;break;case $e.R:{a=o=t[d++],l=s=t[d++];var E=t[d++],I=t[d++];g=E*2+I*2;break}case $e.Z:{var y=a-o,C=l-s;g=Math.sqrt(y*y+C*C),o=a,s=l;break}}g>=0&&(u[c++]=g,h+=g)}return this._pathLen=h,h},e.prototype.rebuildPath=function(t,i){var r=this.data,n=this._ux,o=this._uy,s=this._len,a,l,u,h,c,d,f=i<1,p,g,v=0,m=0,y,C=0,S,b;if(!(f&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,g=this._pathLen,y=i*g,!y)))e:for(var w=0;w<s;){var x=r[w++],R=w===1;switch(R&&(u=r[w],h=r[w+1],a=u,l=h),x!==$e.L&&C>0&&(t.lineTo(S,b),C=0),x){case $e.M:a=u=r[w++],l=h=r[w++],t.moveTo(u,h);break;case $e.L:{c=r[w++],d=r[w++];var D=Br(c-u),T=Br(d-h);if(D>n||T>o){if(f){var A=p[m++];if(v+A>y){var P=(y-v)/A;t.lineTo(u*(1-P)+c*P,h*(1-P)+d*P);break e}v+=A}t.lineTo(c,d),u=c,h=d,C=0}else{var M=D*D+T*T;M>C&&(S=c,b=d,C=M)}break}case $e.C:{var F=r[w++],E=r[w++],I=r[w++],O=r[w++],k=r[w++],G=r[w++];if(f){var A=p[m++];if(v+A>y){var P=(y-v)/A;to(u,F,I,k,P,wo),to(h,E,O,G,P,bo),t.bezierCurveTo(wo[1],bo[1],wo[2],bo[2],wo[3],bo[3]);break e}v+=A}t.bezierCurveTo(F,E,I,O,k,G),u=k,h=G;break}case $e.Q:{var F=r[w++],E=r[w++],I=r[w++],O=r[w++];if(f){var A=p[m++];if(v+A>y){var P=(y-v)/A;Ou(u,F,I,P,wo),Ou(h,E,O,P,bo),t.quadraticCurveTo(wo[1],bo[1],wo[2],bo[2]);break e}v+=A}t.quadraticCurveTo(F,E,I,O),u=I,h=O;break}case $e.A:var W=r[w++],$=r[w++],X=r[w++],te=r[w++],re=r[w++],he=r[w++],Be=r[w++],rt=!r[w++],me=X>te?X:te,oe=Br(X-te)>.001,Se=re+he,ee=!1;if(f){var A=p[m++];v+A>y&&(Se=re+he*(y-v)/A,ee=!0),v+=A}if(oe&&t.ellipse?t.ellipse(W,$,X,te,Be,re,Se,rt):t.arc(W,$,me,re,Se,rt),ee)break e;R&&(a=xo(re)*X+W,l=Ro(re)*te+$),u=xo(Se)*X+W,h=Ro(Se)*te+$;break;case $e.R:a=u=r[w],l=h=r[w+1],c=r[w++],d=r[w++];var ce=r[w++],Ke=r[w++];if(f){var A=p[m++];if(v+A>y){var Ve=y-v;t.moveTo(c,d),t.lineTo(c+dg(Ve,ce),d),Ve-=ce,Ve>0&&t.lineTo(c+ce,d+dg(Ve,Ke)),Ve-=Ke,Ve>0&&t.lineTo(c+fg(ce-Ve,0),d+Ke),Ve-=ce,Ve>0&&t.lineTo(c,d+fg(Ke-Ve,0));break e}v+=A}t.rect(c,d,ce,Ke);break;case $e.Z:if(f){var A=p[m++];if(v+A>y){var P=(y-v)/A;t.lineTo(u*(1-P)+a*P,h*(1-P)+l*P);break e}v+=A}t.closePath(),u=a,h=l}}},e.prototype.clone=function(){var t=new e,i=this.data;return t.data=i.slice?i.slice():Array.prototype.slice.call(i),t._len=this._len,t},e.CMD=$e,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();function Ln(e,t,i,r,n,o,s){if(n===0)return!1;var a=n,l=0,u=e;if(s>t+a&&s>r+a||s<t-a&&s<r-a||o>e+a&&o>i+a||o<e-a&&o<i-a)return!1;if(e!==i)l=(t-r)/(e-i),u=(e*r-i*t)/(e-i);else return Math.abs(o-e)<=a/2;var h=l*o-s+u,c=h*h/(l*l+1);return c<=a/2*a/2}function iK(e,t,i,r,n,o,s,a,l,u,h){if(l===0)return!1;var c=l;if(h>t+c&&h>r+c&&h>o+c&&h>a+c||h<t-c&&h<r-c&&h<o-c&&h<a-c||u>e+c&&u>i+c&&u>n+c&&u>s+c||u<e-c&&u<i-c&&u<n-c&&u<s-c)return!1;var d=n1(e,t,i,r,n,o,s,a,u,h,null);return d<=c/2}function V1(e,t,i,r,n,o,s,a,l){if(s===0)return!1;var u=s;if(l>t+u&&l>r+u&&l>o+u||l<t-u&&l<r-u&&l<o-u||a>e+u&&a>i+u&&a>n+u||a<e-u&&a<i-u&&a<n-u)return!1;var h=s1(e,t,i,r,n,o,a,l,null);return h<=u/2}var Tb=Math.PI*2;function mi(e){return e%=Tb,e<0&&(e+=Tb),e}var xl=Math.PI*2;function rK(e,t,i,r,n,o,s,a,l){if(s===0)return!1;var u=s;a-=e,l-=t;var h=Math.sqrt(a*a+l*l);if(h-u>i||h+u<i)return!1;if(Math.abs(r-n)%xl<1e-4)return!0;if(o){var c=r;r=mi(n),n=mi(c)}else r=mi(r),n=mi(n);r>n&&(n+=xl);var d=Math.atan2(l,a);return d<0&&(d+=xl),d>=r&&d<=n||d+xl>=r&&d+xl<=n}function Ur(e,t,i,r,n,o){if(o>t&&o>r||o<t&&o<r||r===t)return 0;var s=(o-t)/(r-t),a=r<t?1:-1;(s===1||s===0)&&(a=r<t?.5:-.5);var l=s*(i-e)+e;return l===n?1/0:l>n?a:0}var bn=Or.CMD,Do=Math.PI*2,nK=1e-4;function oK(e,t){return Math.abs(e-t)<nK}var zt=[-1,-1,-1],Mi=[-1,-1];function sK(){var e=Mi[0];Mi[0]=Mi[1],Mi[1]=e}function aK(e,t,i,r,n,o,s,a,l,u){if(u>t&&u>r&&u>o&&u>a||u<t&&u<r&&u<o&&u<a)return 0;var h=Id(t,r,o,a,u,zt);if(h===0)return 0;for(var c=0,d=-1,f=void 0,p=void 0,g=0;g<h;g++){var v=zt[g],m=v===0||v===1?.5:1,y=vt(e,i,n,s,v);y<l||(d<0&&(d=r1(t,r,o,a,Mi),Mi[1]<Mi[0]&&d>1&&sK(),f=vt(t,r,o,a,Mi[0]),d>1&&(p=vt(t,r,o,a,Mi[1]))),d===2?v<Mi[0]?c+=f<t?m:-m:v<Mi[1]?c+=p<f?m:-m:c+=a<p?m:-m:v<Mi[0]?c+=f<t?m:-m:c+=a<f?m:-m)}return c}function lK(e,t,i,r,n,o,s,a){if(a>t&&a>r&&a>o||a<t&&a<r&&a<o)return 0;var l=b$(t,r,o,a,zt);if(l===0)return 0;var u=o1(t,r,o);if(u>=0&&u<=1){for(var h=0,c=bt(t,r,o,u),d=0;d<l;d++){var f=zt[d]===0||zt[d]===1?.5:1,p=bt(e,i,n,zt[d]);p<s||(zt[d]<u?h+=c<t?f:-f:h+=o<c?f:-f)}return h}else{var f=zt[0]===0||zt[0]===1?.5:1,p=bt(e,i,n,zt[0]);return p<s?0:o<t?f:-f}}function uK(e,t,i,r,n,o,s,a){if(a-=t,a>i||a<-i)return 0;var l=Math.sqrt(i*i-a*a);zt[0]=-l,zt[1]=l;var u=Math.abs(r-n);if(u<1e-4)return 0;if(u>=Do-1e-4){r=0,n=Do;var h=o?1:-1;return s>=zt[0]+e&&s<=zt[1]+e?h:0}if(r>n){var c=r;r=n,n=c}r<0&&(r+=Do,n+=Do);for(var d=0,f=0;f<2;f++){var p=zt[f];if(p+e>s){var g=Math.atan2(a,p),h=o?1:-1;g<0&&(g=Do+g),(g>=r&&g<=n||g+Do>=r&&g+Do<=n)&&(g>Math.PI/2&&g<Math.PI*1.5&&(h=-h),d+=h)}}return d}function B1(e,t,i,r,n){for(var o=e.data,s=e.len(),a=0,l=0,u=0,h=0,c=0,d,f,p=0;p<s;){var g=o[p++],v=p===1;switch(g===bn.M&&p>1&&(i||(a+=Ur(l,u,h,c,r,n))),v&&(l=o[p],u=o[p+1],h=l,c=u),g){case bn.M:h=o[p++],c=o[p++],l=h,u=c;break;case bn.L:if(i){if(Ln(l,u,o[p],o[p+1],t,r,n))return!0}else a+=Ur(l,u,o[p],o[p+1],r,n)||0;l=o[p++],u=o[p++];break;case bn.C:if(i){if(iK(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,r,n))return!0}else a+=aK(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],r,n)||0;l=o[p++],u=o[p++];break;case bn.Q:if(i){if(V1(l,u,o[p++],o[p++],o[p],o[p+1],t,r,n))return!0}else a+=lK(l,u,o[p++],o[p++],o[p],o[p+1],r,n)||0;l=o[p++],u=o[p++];break;case bn.A:var m=o[p++],y=o[p++],C=o[p++],S=o[p++],b=o[p++],w=o[p++];p+=1;var x=!!(1-o[p++]);d=Math.cos(b)*C+m,f=Math.sin(b)*S+y,v?(h=d,c=f):a+=Ur(l,u,d,f,r,n);var R=(r-m)*S/C+m;if(i){if(rK(m,y,S,b,b+w,x,t,R,n))return!0}else a+=uK(m,y,S,b,b+w,x,R,n);l=Math.cos(b+w)*C+m,u=Math.sin(b+w)*S+y;break;case bn.R:h=l=o[p++],c=u=o[p++];var D=o[p++],T=o[p++];if(d=h+D,f=c+T,i){if(Ln(h,c,d,c,t,r,n)||Ln(d,c,d,f,t,r,n)||Ln(d,f,h,f,t,r,n)||Ln(h,f,h,c,t,r,n))return!0}else a+=Ur(d,c,d,f,r,n),a+=Ur(h,f,h,c,r,n);break;case bn.Z:if(i){if(Ln(l,u,h,c,t,r,n))return!0}else a+=Ur(l,u,h,c,r,n);l=h,u=c;break}}return!i&&!oK(u,c)&&(a+=Ur(l,u,h,c,r,n)||0),a!==0}function hK(e,t,i){return B1(e,0,!1,t,i)}function cK(e,t,i,r){return B1(e,t,!0,i,r)}var Vd=ne({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},fs),dK={style:ne({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},zf.style)},vg=Lr.concat(["invisible","culling","z","z2","zlevel","parent"]),be=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.update=function(){var i=this;e.prototype.update.call(this);var r=this.style;if(r.decal){var n=this._decalEl=this._decalEl||new t;n.buildPath===t.prototype.buildPath&&(n.buildPath=function(l){i.buildPath(l,i.shape)}),n.silent=!0;var o=n.style;for(var s in r)o[s]!==r[s]&&(o[s]=r[s]);o.fill=r.fill?r.decal:null,o.decal=null,o.shadowColor=null,r.strokeFirst&&(o.stroke=null);for(var a=0;a<vg.length;++a)n[vg[a]]=this[vg[a]];n.__dirty|=gi}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(i){var r=De(i);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var o=0;o<r.length;o++){var s=r[o],a=i[s];s==="style"?this.style?V(this.style,a):this.useStyle(a):s==="shape"?V(this.shape,a):e.prototype.attrKV.call(this,s,a)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var i=this.style.fill;if(i!=="none"){if(q(i)){var r=kd(i,0);return r>.5?qm:r>.2?Z$:Zm}else if(i)return Zm}return qm},t.prototype.getInsideTextStroke=function(i){var r=this.style.fill;if(q(r)){var n=this.__zr,o=!!(n&&n.isDarkMode()),s=kd(i,0)<Xm;if(o===s)return r}},t.prototype.buildPath=function(i,r,n){},t.prototype.pathUpdated=function(){this.__dirty&=~da},t.prototype.getUpdatedPathProxy=function(i){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,i),this.path},t.prototype.createPathProxy=function(){this.path=new Or(!1)},t.prototype.hasStroke=function(){var i=this.style,r=i.stroke;return!(r==null||r==="none"||!(i.lineWidth>0))},t.prototype.hasFill=function(){var i=this.style,r=i.fill;return r!=null&&r!=="none"},t.prototype.getBoundingRect=function(){var i=this._rect,r=this.style,n=!i;if(n){var o=!1;this.path||(o=!0,this.createPathProxy());var s=this.path;(o||this.__dirty&da)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),i=s.getBoundingRect()}if(this._rect=i,this.hasStroke()&&this.path&&this.path.len()>0){var a=this._rectStroke||(this._rectStroke=i.clone());if(this.__dirty||n){a.copy(i);var l=r.strokeNoScale?this.getLineScale():1,u=r.lineWidth;if(!this.hasFill()){var h=this.strokeContainThreshold;u=Math.max(u,h??4)}l>1e-10&&(a.width+=u/l,a.height+=u/l,a.x-=u/l/2,a.y-=u/l/2)}return a}return i},t.prototype.contain=function(i,r){var n=this.transformCoordToLocal(i,r),o=this.getBoundingRect(),s=this.style;if(i=n[0],r=n[1],o.contain(i,r)){var a=this.path;if(this.hasStroke()){var l=s.lineWidth,u=s.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),cK(a,l/u,i,r)))return!0}if(this.hasFill())return hK(a,i,r)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=da,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(i){return this.animate("shape",i)},t.prototype.updateDuringAnimation=function(i){i==="style"?this.dirtyStyle():i==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(i,r){i==="shape"?this.setShape(r):e.prototype.attrKV.call(this,i,r)},t.prototype.setShape=function(i,r){var n=this.shape;return n||(n=this.shape={}),typeof i=="string"?n[i]=r:V(n,i),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&da)},t.prototype.createStyle=function(i){return kf(Vd,i)},t.prototype._innerSaveToNormal=function(i){e.prototype._innerSaveToNormal.call(this,i);var r=this._normalState;i.shape&&!r.shape&&(r.shape=V({},this.shape))},t.prototype._applyStateObj=function(i,r,n,o,s,a){e.prototype._applyStateObj.call(this,i,r,n,o,s,a);var l=!(r&&o),u;if(r&&r.shape?s?o?u=r.shape:(u=V({},n.shape),V(u,r.shape)):(u=V({},o?this.shape:n.shape),V(u,r.shape)):l&&(u=n.shape),u)if(s){this.shape=V({},this.shape);for(var h={},c=De(u),d=0;d<c.length;d++){var f=c[d];typeof u[f]=="object"?this.shape[f]=u[f]:h[f]=u[f]}this._transitionState(i,{shape:h},a)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(i){for(var r=e.prototype._mergeStates.call(this,i),n,o=0;o<i.length;o++){var s=i[o];s.shape&&(n=n||{},this._mergeStyle(n,s.shape))}return n&&(r.shape=n),r},t.prototype.getAnimationStyleProps=function(){return dK},t.prototype.isZeroArea=function(){return!1},t.extend=function(i){var r=function(o){L(s,o);function s(a){var l=o.call(this,a)||this;return i.init&&i.init.call(l,a),l}return s.prototype.getDefaultStyle=function(){return ae(i.style)},s.prototype.getDefaultShape=function(){return ae(i.shape)},s}(t);for(var n in i)typeof i[n]=="function"&&(r.prototype[n]=i[n]);return r},t.initDefaultProps=function(){var i=t.prototype;i.type="path",i.strokeContainThreshold=5,i.segmentIgnoreThreshold=0,i.subPixelOptimize=!1,i.autoBatch=!1,i.__dirty=gi|Xl|da}(),t}(zi),fK=ne({strokeFirst:!0,font:Jn,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Vd),Oa=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var i=this.style,r=i.stroke;return r!=null&&r!=="none"&&i.lineWidth>0},t.prototype.hasFill=function(){var i=this.style,r=i.fill;return r!=null&&r!=="none"},t.prototype.createStyle=function(i){return kf(fK,i)},t.prototype.setBoundingRect=function(i){this._rect=i},t.prototype.getBoundingRect=function(){var i=this.style;if(!this._rect){var r=i.text;r!=null?r+="":r="";var n=ph(r,i.font,i.textAlign,i.textBaseline);if(n.x+=i.x||0,n.y+=i.y||0,this.hasStroke()){var o=i.lineWidth;n.x-=o/2,n.y-=o/2,n.width+=o,n.height+=o}this._rect=n}return this._rect},t.initDefaultProps=function(){var i=t.prototype;i.dirtyRectTolerance=10}(),t}(zi);Oa.prototype.type="tspan";var pK=ne({x:0,y:0},fs),gK={style:ne({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},zf.style)};function vK(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var Rt=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(i){return kf(pK,i)},t.prototype._getSize=function(i){var r=this.style,n=r[i];if(n!=null)return n;var o=vK(r.image)?r.image:this.__image;if(!o)return 0;var s=i==="width"?"height":"width",a=r[s];return a==null?o[i]:o[i]/o[s]*a},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return gK},t.prototype.getBoundingRect=function(){var i=this.style;return this._rect||(this._rect=new ve(i.x||0,i.y||0,this.getWidth(),this.getHeight())),this._rect},t}(zi);Rt.prototype.type="image";function mK(e,t){var i=t.x,r=t.y,n=t.width,o=t.height,s=t.r,a,l,u,h;n<0&&(i=i+n,n=-n),o<0&&(r=r+o,o=-o),typeof s=="number"?a=l=u=h=s:s instanceof Array?s.length===1?a=l=u=h=s[0]:s.length===2?(a=u=s[0],l=h=s[1]):s.length===3?(a=s[0],l=h=s[1],u=s[2]):(a=s[0],l=s[1],u=s[2],h=s[3]):a=l=u=h=0;var c;a+l>n&&(c=a+l,a*=n/c,l*=n/c),u+h>n&&(c=u+h,u*=n/c,h*=n/c),l+u>o&&(c=l+u,l*=o/c,u*=o/c),a+h>o&&(c=a+h,a*=o/c,h*=o/c),e.moveTo(i+a,r),e.lineTo(i+n-l,r),l!==0&&e.arc(i+n-l,r+l,l,-Math.PI/2,0),e.lineTo(i+n,r+o-u),u!==0&&e.arc(i+n-u,r+o-u,u,0,Math.PI/2),e.lineTo(i+h,r+o),h!==0&&e.arc(i+h,r+o-h,h,Math.PI/2,Math.PI),e.lineTo(i,r+a),a!==0&&e.arc(i+a,r+a,a,Math.PI,Math.PI*1.5)}var Ca=Math.round;function H1(e,t,i){if(t){var r=t.x1,n=t.x2,o=t.y1,s=t.y2;e.x1=r,e.x2=n,e.y1=o,e.y2=s;var a=i&&i.lineWidth;return a&&(Ca(r*2)===Ca(n*2)&&(e.x1=e.x2=Jo(r,a,!0)),Ca(o*2)===Ca(s*2)&&(e.y1=e.y2=Jo(o,a,!0))),e}}function z1(e,t,i){if(t){var r=t.x,n=t.y,o=t.width,s=t.height;e.x=r,e.y=n,e.width=o,e.height=s;var a=i&&i.lineWidth;return a&&(e.x=Jo(r,a,!0),e.y=Jo(n,a,!0),e.width=Math.max(Jo(r+o,a,!1)-e.x,o===0?0:1),e.height=Math.max(Jo(n+s,a,!1)-e.y,s===0?0:1)),e}}function Jo(e,t,i){if(!t)return e;var r=Ca(e*2);return(r+Ca(t))%2===0?r/2:(r+(i?1:-1))/2}var yK=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),CK={},Te=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultShape=function(){return new yK},t.prototype.buildPath=function(i,r){var n,o,s,a;if(this.subPixelOptimize){var l=z1(CK,r,this.style);n=l.x,o=l.y,s=l.width,a=l.height,l.r=r.r,r=l}else n=r.x,o=r.y,s=r.width,a=r.height;r.r?mK(i,r):i.rect(n,o,s,a)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(be);Te.prototype.type="rect";var _b={fill:"#000"},Ab=2,SK={style:ne({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},zf.style)},Ae=function(e){L(t,e);function t(i){var r=e.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=_b,r.attr(i),r}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var i=0;i<this._children.length;i++){var r=this._children[i];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},t.prototype.updateTransform=function(){var i=this.innerTransformable;i?(i.updateTransform(),i.transform&&(this.transform=i.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(i){var r=this.innerTransformable;return r?r.getLocalTransform(i):e.prototype.getLocalTransform.call(this,i)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,xK(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(i){e.prototype.addSelfToZr.call(this,i);for(var r=0;r<this._children.length;r++)this._children[r].__zr=i},t.prototype.removeSelfFromZr=function(i){e.prototype.removeSelfFromZr.call(this,i);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var i=new ve(0,0,0,0),r=this._children,n=[],o=null,s=0;s<r.length;s++){var a=r[s],l=a.getBoundingRect(),u=a.getLocalTransform(n);u?(i.copy(l),i.applyTransform(u),o=o||i.clone(),o.union(i)):(o=o||l.clone(),o.union(l))}this._rect=o||i}return this._rect},t.prototype.setDefaultTextStyle=function(i){this._defaultStyle=i||_b},t.prototype.setTextContent=function(i){},t.prototype._mergeStyle=function(i,r){if(!r)return i;var n=r.rich,o=i.rich||n&&{};return V(i,r),n&&o?(this._mergeRich(o,n),i.rich=o):o&&(i.rich=o),i},t.prototype._mergeRich=function(i,r){for(var n=De(r),o=0;o<n.length;o++){var s=n[o];i[s]=i[s]||{},V(i[s],r[s])}},t.prototype.getAnimationStyleProps=function(){return SK},t.prototype._getOrCreateChild=function(i){var r=this._children[this._childCursor];return(!r||!(r instanceof i))&&(r=new i),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},t.prototype._updatePlainTexts=function(){var i=this.style,r=i.font||Jn,n=i.padding,o=kb(i),s=U4(o,i),a=mg(i),l=!!i.backgroundColor,u=s.outerHeight,h=s.outerWidth,c=s.contentWidth,d=s.lines,f=s.lineHeight,p=this._defaultStyle;this.isTruncated=!!s.isTruncated;var g=i.x||0,v=i.y||0,m=i.align||p.align||"left",y=i.verticalAlign||p.verticalAlign||"top",C=g,S=fa(v,s.contentHeight,y);if(a||n){var b=Zl(g,h,m),w=fa(v,u,y);a&&this._renderBackground(i,i,b,w,h,u)}S+=f/2,n&&(C=Lb(g,m,n),y==="top"?S+=n[0]:y==="bottom"&&(S-=n[2]));for(var x=0,R=!1,D=Ib("fill"in i?i.fill:(R=!0,p.fill)),T=Eb("stroke"in i?i.stroke:!l&&(!p.autoStroke||R)?(x=Ab,p.stroke):null),A=i.textShadowBlur>0,P=i.width!=null&&(i.overflow==="truncate"||i.overflow==="break"||i.overflow==="breakAll"),M=s.calculatedLineHeight,F=0;F<d.length;F++){var E=this._getOrCreateChild(Oa),I=E.createStyle();E.useStyle(I),I.text=d[F],I.x=C,I.y=S,m&&(I.textAlign=m),I.textBaseline="middle",I.opacity=i.opacity,I.strokeFirst=!0,A&&(I.shadowBlur=i.textShadowBlur||0,I.shadowColor=i.textShadowColor||"transparent",I.shadowOffsetX=i.textShadowOffsetX||0,I.shadowOffsetY=i.textShadowOffsetY||0),I.stroke=T,I.fill=D,T&&(I.lineWidth=i.lineWidth||x,I.lineDash=i.lineDash,I.lineDashOffset=i.lineDashOffset||0),I.font=r,Mb(I,i),S+=f,P&&E.setBoundingRect(new ve(Zl(I.x,c,I.textAlign),fa(I.y,M,I.textBaseline),c,M))}},t.prototype._updateRichTexts=function(){var i=this.style,r=kb(i),n=Y4(r,i),o=n.width,s=n.outerWidth,a=n.outerHeight,l=i.padding,u=i.x||0,h=i.y||0,c=this._defaultStyle,d=i.align||c.align,f=i.verticalAlign||c.verticalAlign;this.isTruncated=!!n.isTruncated;var p=Zl(u,s,d),g=fa(h,a,f),v=p,m=g;l&&(v+=l[3],m+=l[0]);var y=v+o;mg(i)&&this._renderBackground(i,i,p,g,s,a);for(var C=!!i.backgroundColor,S=0;S<n.lines.length;S++){for(var b=n.lines[S],w=b.tokens,x=w.length,R=b.lineHeight,D=b.width,T=0,A=v,P=y,M=x-1,F=void 0;T<x&&(F=w[T],!F.align||F.align==="left");)this._placeToken(F,i,R,m,A,"left",C),D-=F.width,A+=F.width,T++;for(;M>=0&&(F=w[M],F.align==="right");)this._placeToken(F,i,R,m,P,"right",C),D-=F.width,P-=F.width,M--;for(A+=(o-(A-v)-(y-P)-D)/2;T<=M;)F=w[T],this._placeToken(F,i,R,m,A+F.width/2,"center",C),A+=F.width,T++;m+=R}},t.prototype._placeToken=function(i,r,n,o,s,a,l){var u=r.rich[i.styleName]||{};u.text=i.text;var h=i.verticalAlign,c=o+n/2;h==="top"?c=o+i.height/2:h==="bottom"&&(c=o+n-i.height/2);var d=!i.isLineHolder&&mg(u);d&&this._renderBackground(u,r,a==="right"?s-i.width:a==="center"?s-i.width/2:s,c-i.height/2,i.width,i.height);var f=!!u.backgroundColor,p=i.textPadding;p&&(s=Lb(s,a,p),c-=i.height/2-p[0]-i.innerHeight/2);var g=this._getOrCreateChild(Oa),v=g.createStyle();g.useStyle(v);var m=this._defaultStyle,y=!1,C=0,S=Ib("fill"in u?u.fill:"fill"in r?r.fill:(y=!0,m.fill)),b=Eb("stroke"in u?u.stroke:"stroke"in r?r.stroke:!f&&!l&&(!m.autoStroke||y)?(C=Ab,m.stroke):null),w=u.textShadowBlur>0||r.textShadowBlur>0;v.text=i.text,v.x=s,v.y=c,w&&(v.shadowBlur=u.textShadowBlur||r.textShadowBlur||0,v.shadowColor=u.textShadowColor||r.textShadowColor||"transparent",v.shadowOffsetX=u.textShadowOffsetX||r.textShadowOffsetX||0,v.shadowOffsetY=u.textShadowOffsetY||r.textShadowOffsetY||0),v.textAlign=a,v.textBaseline="middle",v.font=i.font||Jn,v.opacity=Ar(u.opacity,r.opacity,1),Mb(v,u),b&&(v.lineWidth=Ar(u.lineWidth,r.lineWidth,C),v.lineDash=de(u.lineDash,r.lineDash),v.lineDashOffset=r.lineDashOffset||0,v.stroke=b),S&&(v.fill=S);var x=i.contentWidth,R=i.contentHeight;g.setBoundingRect(new ve(Zl(v.x,x,v.textAlign),fa(v.y,R,v.textBaseline),x,R))},t.prototype._renderBackground=function(i,r,n,o,s,a){var l=i.backgroundColor,u=i.borderWidth,h=i.borderColor,c=l&&l.image,d=l&&!c,f=i.borderRadius,p=this,g,v;if(d||i.lineHeight||u&&h){g=this._getOrCreateChild(Te),g.useStyle(g.createStyle()),g.style.fill=null;var m=g.shape;m.x=n,m.y=o,m.width=s,m.height=a,m.r=f,g.dirtyShape()}if(d){var y=g.style;y.fill=l||null,y.fillOpacity=de(i.fillOpacity,1)}else if(c){v=this._getOrCreateChild(Rt),v.onload=function(){p.dirtyStyle()};var C=v.style;C.image=l.image,C.x=n,C.y=o,C.width=s,C.height=a}if(u&&h){var y=g.style;y.lineWidth=u,y.stroke=h,y.strokeOpacity=de(i.strokeOpacity,1),y.lineDash=i.borderDash,y.lineDashOffset=i.borderDashOffset||0,g.strokeContainThreshold=0,g.hasFill()&&g.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var S=(g||v).style;S.shadowBlur=i.shadowBlur||0,S.shadowColor=i.shadowColor||"transparent",S.shadowOffsetX=i.shadowOffsetX||0,S.shadowOffsetY=i.shadowOffsetY||0,S.opacity=Ar(i.opacity,r.opacity,1)},t.makeFont=function(i){var r="";return U1(i)&&(r=[i.fontStyle,i.fontWeight,W1(i.fontSize),i.fontFamily||"sans-serif"].join(" ")),r&&Ji(r)||i.textFont||i.font},t}(zi),wK={left:!0,right:1,center:1},bK={top:1,bottom:1,middle:1},Pb=["fontStyle","fontWeight","fontSize","fontFamily"];function W1(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?eS+"px":e+"px"}function Mb(e,t){for(var i=0;i<Pb.length;i++){var r=Pb[i],n=t[r];n!=null&&(e[r]=n)}}function U1(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function xK(e){return Fb(e),_(e.rich,Fb),e}function Fb(e){if(e){e.font=Ae.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||wK[t]?t:"left";var i=e.verticalAlign;i==="center"&&(i="middle"),e.verticalAlign=i==null||bK[i]?i:"top";var r=e.padding;r&&(e.padding=sS(e.padding))}}function Eb(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function Ib(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function Lb(e,t,i){return t==="right"?e-i[1]:t==="center"?e+i[3]/2-i[1]/2:e+i[3]}function kb(e){var t=e.text;return t!=null&&(t+=""),t}function mg(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}var ue=_e(),iy=function(e,t,i,r){if(r){var n=ue(r);n.dataIndex=i,n.dataType=t,n.seriesIndex=e,n.ssrType="chart",r.type==="group"&&r.traverse(function(o){var s=ue(o);s.seriesIndex=e,s.dataIndex=i,s.dataType=t,s.ssrType="chart"})}},Ob=1,Gb={},$1=_e(),CS=_e(),SS=0,vh=1,Uf=2,Qt=["emphasis","blur","select"],Hu=["normal","emphasis","blur","select"],tl=10,RK=9,ps="highlight",rd="downplay",mu="select",nd="unselect",yu="toggleSelect";function Ys(e){return e!=null&&e!=="none"}function $f(e,t,i){e.onHoverStateChange&&(e.hoverState||0)!==i&&e.onHoverStateChange(t),e.hoverState=i}function K1(e){$f(e,"emphasis",Uf)}function Y1(e){e.hoverState===Uf&&$f(e,"normal",SS)}function wS(e){$f(e,"blur",vh)}function X1(e){e.hoverState===vh&&$f(e,"normal",SS)}function DK(e){e.selected=!0}function TK(e){e.selected=!1}function Nb(e,t,i){t(e,i)}function gn(e,t,i){Nb(e,t,i),e.isGroup&&e.traverse(function(r){Nb(r,t,i)})}function Bd(e,t){switch(t){case"emphasis":e.hoverState=Uf;break;case"normal":e.hoverState=SS;break;case"blur":e.hoverState=vh;break;case"select":e.selected=!0}}function _K(e,t,i,r){for(var n=e.style,o={},s=0;s<t.length;s++){var a=t[s],l=n[a];o[a]=l??(r&&r[a])}for(var s=0;s<e.animators.length;s++){var u=e.animators[s];u.__fromStateTransition&&u.__fromStateTransition.indexOf(i)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function AK(e,t,i,r){var n=i&&Ce(i,"select")>=0,o=!1;if(e instanceof be){var s=$1(e),a=n&&s.selectFill||s.normalFill,l=n&&s.selectStroke||s.normalStroke;if(Ys(a)||Ys(l)){r=r||{};var u=r.style||{};u.fill==="inherit"?(o=!0,r=V({},r),u=V({},u),u.fill=a):!Ys(u.fill)&&Ys(a)?(o=!0,r=V({},r),u=V({},u),u.fill=Hm(a)):!Ys(u.stroke)&&Ys(l)&&(o||(r=V({},r),u=V({},u)),u.stroke=Hm(l)),r.style=u}}if(r&&r.z2==null){o||(r=V({},r));var h=e.z2EmphasisLift;r.z2=e.z2+(h??tl)}return r}function PK(e,t,i){if(i&&i.z2==null){i=V({},i);var r=e.z2SelectLift;i.z2=e.z2+(r??RK)}return i}function MK(e,t,i){var r=Ce(e.currentStates,t)>=0,n=e.style.opacity,o=r?null:_K(e,["opacity"],t,{opacity:1});i=i||{};var s=i.style||{};return s.opacity==null&&(i=V({},i),s=V({opacity:r?n:o.opacity*.1},s),i.style=s),i}function yg(e,t){var i=this.states[e];if(this.style){if(e==="emphasis")return AK(this,e,t,i);if(e==="blur")return MK(this,e,i);if(e==="select")return PK(this,e,i)}return i}function Ds(e){e.stateProxy=yg;var t=e.getTextContent(),i=e.getTextGuideLine();t&&(t.stateProxy=yg),i&&(i.stateProxy=yg)}function Vb(e,t){!Q1(e,t)&&!e.__highByOuter&&gn(e,K1)}function Bb(e,t){!Q1(e,t)&&!e.__highByOuter&&gn(e,Y1)}function an(e,t){e.__highByOuter|=1<<(t||0),gn(e,K1)}function ln(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&gn(e,Y1)}function q1(e){gn(e,wS)}function bS(e){gn(e,X1)}function Z1(e){gn(e,DK)}function j1(e){gn(e,TK)}function Q1(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function J1(e){var t=e.getModel(),i=[],r=[];t.eachComponent(function(n,o){var s=CS(o),a=n==="series",l=a?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!a&&r.push(l),s.isBlured&&(l.group.traverse(function(u){X1(u)}),a&&i.push(o)),s.isBlured=!1}),_(r,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(i,!1,t)})}function ry(e,t,i,r){var n=r.getModel();i=i||"coordinateSystem";function o(u,h){for(var c=0;c<h.length;c++){var d=u.getItemGraphicEl(h[c]);d&&bS(d)}}if(e!=null&&!(!t||t==="none")){var s=n.getSeriesByIndex(e),a=s.coordinateSystem;a&&a.master&&(a=a.master);var l=[];n.eachSeries(function(u){var h=s===u,c=u.coordinateSystem;c&&c.master&&(c=c.master);var d=c&&a?c===a:h;if(!(i==="series"&&!h||i==="coordinateSystem"&&!d||t==="series"&&h)){var f=r.getViewOfSeriesModel(u);if(f.group.traverse(function(v){v.__highByOuter&&h&&t==="self"||wS(v)}),Ot(t))o(u.getData(),t);else if(se(t))for(var p=De(t),g=0;g<p.length;g++)o(u.getData(p[g]),t[p[g]]);l.push(u),CS(u).isBlured=!0}}),n.eachComponent(function(u,h){if(u!=="series"){var c=r.getViewOfComponentModel(h);c&&c.toggleBlurSeries&&c.toggleBlurSeries(l,!0,n)}})}}function ny(e,t,i){if(!(e==null||t==null)){var r=i.getModel().getComponent(e,t);if(r){CS(r).isBlured=!0;var n=i.getViewOfComponentModel(r);!n||!n.focusBlurEnabled||n.group.traverse(function(o){wS(o)})}}}function FK(e,t,i){var r=e.seriesIndex,n=e.getData(t.dataType);if(n){var o=xs(n,t);o=(H(o)?o[0]:o)||0;var s=n.getItemGraphicEl(o);if(!s)for(var a=n.count(),l=0;!s&&l<a;)s=n.getItemGraphicEl(l++);if(s){var u=ue(s);ry(r,u.focus,u.blurScope,i)}else{var h=e.get(["emphasis","focus"]),c=e.get(["emphasis","blurScope"]);h!=null&&ry(r,h,c,i)}}}function xS(e,t,i,r){var n={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||i==null)return n;var o=r.getModel().getComponent(e,t);if(!o)return n;var s=r.getViewOfComponentModel(o);if(!s||!s.findHighDownDispatchers)return n;for(var a=s.findHighDownDispatchers(i),l,u=0;u<a.length;u++)if(ue(a[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:a}}function EK(e,t,i){var r=ue(e),n=xS(r.componentMainType,r.componentIndex,r.componentHighDownName,i),o=n.dispatchers,s=n.focusSelf;o?(s&&ny(r.componentMainType,r.componentIndex,i),_(o,function(a){return Vb(a,t)})):(ry(r.seriesIndex,r.focus,r.blurScope,i),r.focus==="self"&&ny(r.componentMainType,r.componentIndex,i),Vb(e,t))}function IK(e,t,i){J1(i);var r=ue(e),n=xS(r.componentMainType,r.componentIndex,r.componentHighDownName,i).dispatchers;n?_(n,function(o){return Bb(o,t)}):Bb(e,t)}function LK(e,t,i){if(sy(t)){var r=t.dataType,n=e.getData(r),o=xs(n,t);H(o)||(o=[o]),e[t.type===yu?"toggleSelect":t.type===mu?"select":"unselect"](o,r)}}function Hb(e){var t=e.getAllData();_(t,function(i){var r=i.data,n=i.type;r.eachItemGraphicEl(function(o,s){e.isSelected(s,n)?Z1(o):j1(o)})})}function kK(e){var t=[];return e.eachSeries(function(i){var r=i.getAllData();_(r,function(n){n.data;var o=n.type,s=i.getSelectedDataIndices();if(s.length>0){var a={dataIndex:s,seriesIndex:i.seriesIndex};o!=null&&(a.dataType=o),t.push(a)}})}),t}function gs(e,t,i){es(e,!0),gn(e,Ds),oy(e,t,i)}function OK(e){es(e,!1)}function tt(e,t,i,r){r?OK(e):gs(e,t,i)}function oy(e,t,i){var r=ue(e);t!=null?(r.focus=t,r.blurScope=i):r.focus&&(r.focus=null)}var zb=["emphasis","blur","select"],GK={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function At(e,t,i,r){i=i||"itemStyle";for(var n=0;n<zb.length;n++){var o=zb[n],s=t.getModel([o,i]),a=e.ensureState(o);a.style=r?r(s):s[GK[i]]()}}function es(e,t){var i=t===!1,r=e;e.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!i||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!i)}function zu(e){return!!(e&&e.__highDownDispatcher)}function NK(e,t,i){var r=ue(e);r.componentMainType=t.mainType,r.componentIndex=t.componentIndex,r.componentHighDownName=i}function VK(e){var t=Gb[e];return t==null&&Ob<=32&&(t=Gb[e]=Ob++),t}function sy(e){var t=e.type;return t===mu||t===nd||t===yu}function Wb(e){var t=e.type;return t===ps||t===rd}function BK(e){var t=$1(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var i=e.states.select||{};t.selectFill=i.style&&i.style.fill||null,t.selectStroke=i.style&&i.style.stroke||null}var Xs=Or.CMD,HK=[[],[],[]],Ub=Math.sqrt,zK=Math.atan2;function eF(e,t){if(t){var i=e.data,r=e.len(),n,o,s,a,l,u,h=Xs.M,c=Xs.C,d=Xs.L,f=Xs.R,p=Xs.A,g=Xs.Q;for(s=0,a=0;s<r;){switch(n=i[s++],a=s,o=0,n){case h:o=1;break;case d:o=1;break;case c:o=3;break;case g:o=2;break;case p:var v=t[4],m=t[5],y=Ub(t[0]*t[0]+t[1]*t[1]),C=Ub(t[2]*t[2]+t[3]*t[3]),S=zK(-t[1]/C,t[0]/y);i[s]*=y,i[s++]+=v,i[s]*=C,i[s++]+=m,i[s++]*=y,i[s++]*=C,i[s++]+=S,i[s++]+=S,s+=2,a=s;break;case f:u[0]=i[s++],u[1]=i[s++],_t(u,u,t),i[a++]=u[0],i[a++]=u[1],u[0]+=i[s++],u[1]+=i[s++],_t(u,u,t),i[a++]=u[0],i[a++]=u[1]}for(l=0;l<o;l++){var b=HK[l];b[0]=i[s++],b[1]=i[s++],_t(b,b,t),i[a++]=b[0],i[a++]=b[1]}}e.increaseVersion()}}var Cg=Math.sqrt,ic=Math.sin,rc=Math.cos,Rl=Math.PI;function $b(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ay(e,t){return(e[0]*t[0]+e[1]*t[1])/($b(e)*$b(t))}function Kb(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(ay(e,t))}function Yb(e,t,i,r,n,o,s,a,l,u,h){var c=l*(Rl/180),d=rc(c)*(e-i)/2+ic(c)*(t-r)/2,f=-1*ic(c)*(e-i)/2+rc(c)*(t-r)/2,p=d*d/(s*s)+f*f/(a*a);p>1&&(s*=Cg(p),a*=Cg(p));var g=(n===o?-1:1)*Cg((s*s*(a*a)-s*s*(f*f)-a*a*(d*d))/(s*s*(f*f)+a*a*(d*d)))||0,v=g*s*f/a,m=g*-a*d/s,y=(e+i)/2+rc(c)*v-ic(c)*m,C=(t+r)/2+ic(c)*v+rc(c)*m,S=Kb([1,0],[(d-v)/s,(f-m)/a]),b=[(d-v)/s,(f-m)/a],w=[(-1*d-v)/s,(-1*f-m)/a],x=Kb(b,w);if(ay(b,w)<=-1&&(x=Rl),ay(b,w)>=1&&(x=0),x<0){var R=Math.round(x/Rl*1e6)/1e6;x=Rl*2+R%2*Rl}h.addData(u,y,C,s,a,S,x,c,o)}var WK=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,UK=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function $K(e){var t=new Or;if(!e)return t;var i=0,r=0,n=i,o=r,s,a=Or.CMD,l=e.match(WK);if(!l)return t;for(var u=0;u<l.length;u++){for(var h=l[u],c=h.charAt(0),d=void 0,f=h.match(UK)||[],p=f.length,g=0;g<p;g++)f[g]=parseFloat(f[g]);for(var v=0;v<p;){var m=void 0,y=void 0,C=void 0,S=void 0,b=void 0,w=void 0,x=void 0,R=i,D=r,T=void 0,A=void 0;switch(c){case"l":i+=f[v++],r+=f[v++],d=a.L,t.addData(d,i,r);break;case"L":i=f[v++],r=f[v++],d=a.L,t.addData(d,i,r);break;case"m":i+=f[v++],r+=f[v++],d=a.M,t.addData(d,i,r),n=i,o=r,c="l";break;case"M":i=f[v++],r=f[v++],d=a.M,t.addData(d,i,r),n=i,o=r,c="L";break;case"h":i+=f[v++],d=a.L,t.addData(d,i,r);break;case"H":i=f[v++],d=a.L,t.addData(d,i,r);break;case"v":r+=f[v++],d=a.L,t.addData(d,i,r);break;case"V":r=f[v++],d=a.L,t.addData(d,i,r);break;case"C":d=a.C,t.addData(d,f[v++],f[v++],f[v++],f[v++],f[v++],f[v++]),i=f[v-2],r=f[v-1];break;case"c":d=a.C,t.addData(d,f[v++]+i,f[v++]+r,f[v++]+i,f[v++]+r,f[v++]+i,f[v++]+r),i+=f[v-2],r+=f[v-1];break;case"S":m=i,y=r,T=t.len(),A=t.data,s===a.C&&(m+=i-A[T-4],y+=r-A[T-3]),d=a.C,R=f[v++],D=f[v++],i=f[v++],r=f[v++],t.addData(d,m,y,R,D,i,r);break;case"s":m=i,y=r,T=t.len(),A=t.data,s===a.C&&(m+=i-A[T-4],y+=r-A[T-3]),d=a.C,R=i+f[v++],D=r+f[v++],i+=f[v++],r+=f[v++],t.addData(d,m,y,R,D,i,r);break;case"Q":R=f[v++],D=f[v++],i=f[v++],r=f[v++],d=a.Q,t.addData(d,R,D,i,r);break;case"q":R=f[v++]+i,D=f[v++]+r,i+=f[v++],r+=f[v++],d=a.Q,t.addData(d,R,D,i,r);break;case"T":m=i,y=r,T=t.len(),A=t.data,s===a.Q&&(m+=i-A[T-4],y+=r-A[T-3]),i=f[v++],r=f[v++],d=a.Q,t.addData(d,m,y,i,r);break;case"t":m=i,y=r,T=t.len(),A=t.data,s===a.Q&&(m+=i-A[T-4],y+=r-A[T-3]),i+=f[v++],r+=f[v++],d=a.Q,t.addData(d,m,y,i,r);break;case"A":C=f[v++],S=f[v++],b=f[v++],w=f[v++],x=f[v++],R=i,D=r,i=f[v++],r=f[v++],d=a.A,Yb(R,D,i,r,w,x,C,S,b,d,t);break;case"a":C=f[v++],S=f[v++],b=f[v++],w=f[v++],x=f[v++],R=i,D=r,i+=f[v++],r+=f[v++],d=a.A,Yb(R,D,i,r,w,x,C,S,b,d,t);break}}(c==="z"||c==="Z")&&(d=a.Z,t.addData(d),i=n,r=o),s=d}return t.toStatic(),t}var tF=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(i){},t}(be);function iF(e){return e.setData!=null}function rF(e,t){var i=$K(e),r=V({},t);return r.buildPath=function(n){if(iF(n)){n.setData(i.data);var o=n.getContext();o&&n.rebuildPath(o,1)}else{var o=n;i.rebuildPath(o,1)}},r.applyTransform=function(n){eF(i,n),this.dirtyShape()},r}function nF(e,t){return new tF(rF(e,t))}function KK(e,t){var i=rF(e,t),r=function(n){L(o,n);function o(s){var a=n.call(this,s)||this;return a.applyTransform=i.applyTransform,a.buildPath=i.buildPath,a}return o}(tF);return r}function YK(e,t){for(var i=[],r=e.length,n=0;n<r;n++){var o=e[n];i.push(o.getUpdatedPathProxy(!0))}var s=new be(t);return s.createPathProxy(),s.buildPath=function(a){if(iF(a)){a.appendPath(i);var l=a.getContext();l&&a.rebuildPath(l,1)}},s}function RS(e,t){t=t||{};var i=new be;return e.shape&&i.setShape(e.shape),i.setStyle(e.style),t.bakeTransform?eF(i.path,e.getComputedTransform()):t.toLocal?i.setLocalTransform(e.getComputedTransform()):i.copyTransform(e),i.buildPath=e.buildPath,i.applyTransform=i.applyTransform,i.z=e.z,i.z2=e.z2,i.zlevel=e.zlevel,i}var XK=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),vn=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultShape=function(){return new XK},t.prototype.buildPath=function(i,r){i.moveTo(r.cx+r.r,r.cy),i.arc(r.cx,r.cy,r.r,0,Math.PI*2)},t}(be);vn.prototype.type="circle";var qK=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),Kf=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultShape=function(){return new qK},t.prototype.buildPath=function(i,r){var n=.5522848,o=r.cx,s=r.cy,a=r.rx,l=r.ry,u=a*n,h=l*n;i.moveTo(o-a,s),i.bezierCurveTo(o-a,s-h,o-u,s-l,o,s-l),i.bezierCurveTo(o+u,s-l,o+a,s-h,o+a,s),i.bezierCurveTo(o+a,s+h,o+u,s+l,o,s+l),i.bezierCurveTo(o-u,s+l,o-a,s+h,o-a,s),i.closePath()},t}(be);Kf.prototype.type="ellipse";var oF=Math.PI,Sg=oF*2,To=Math.sin,qs=Math.cos,ZK=Math.acos,Mt=Math.atan2,Xb=Math.abs,Cu=Math.sqrt,jl=Math.max,pr=Math.min,Xi=1e-4;function jK(e,t,i,r,n,o,s,a){var l=i-e,u=r-t,h=s-n,c=a-o,d=c*l-h*u;if(!(d*d<Xi))return d=(h*(t-o)-c*(e-n))/d,[e+d*l,t+d*u]}function nc(e,t,i,r,n,o,s){var a=e-i,l=t-r,u=(s?o:-o)/Cu(a*a+l*l),h=u*l,c=-u*a,d=e+h,f=t+c,p=i+h,g=r+c,v=(d+p)/2,m=(f+g)/2,y=p-d,C=g-f,S=y*y+C*C,b=n-o,w=d*g-p*f,x=(C<0?-1:1)*Cu(jl(0,b*b*S-w*w)),R=(w*C-y*x)/S,D=(-w*y-C*x)/S,T=(w*C+y*x)/S,A=(-w*y+C*x)/S,P=R-v,M=D-m,F=T-v,E=A-m;return P*P+M*M>F*F+E*E&&(R=T,D=A),{cx:R,cy:D,x0:-h,y0:-c,x1:R*(n/b-1),y1:D*(n/b-1)}}function QK(e){var t;if(H(e)){var i=e.length;if(!i)return e;i===1?t=[e[0],e[0],0,0]:i===2?t=[e[0],e[0],e[1],e[1]]:i===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function JK(e,t){var i,r=jl(t.r,0),n=jl(t.r0||0,0),o=r>0,s=n>0;if(!(!o&&!s)){if(o||(r=n,n=0),n>r){var a=r;r=n,n=a}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var h=t.cx,c=t.cy,d=!!t.clockwise,f=Xb(u-l),p=f>Sg&&f%Sg;if(p>Xi&&(f=p),!(r>Xi))e.moveTo(h,c);else if(f>Sg-Xi)e.moveTo(h+r*qs(l),c+r*To(l)),e.arc(h,c,r,l,u,!d),n>Xi&&(e.moveTo(h+n*qs(u),c+n*To(u)),e.arc(h,c,n,u,l,d));else{var g=void 0,v=void 0,m=void 0,y=void 0,C=void 0,S=void 0,b=void 0,w=void 0,x=void 0,R=void 0,D=void 0,T=void 0,A=void 0,P=void 0,M=void 0,F=void 0,E=r*qs(l),I=r*To(l),O=n*qs(u),k=n*To(u),G=f>Xi;if(G){var W=t.cornerRadius;W&&(i=QK(W),g=i[0],v=i[1],m=i[2],y=i[3]);var $=Xb(r-n)/2;if(C=pr($,m),S=pr($,y),b=pr($,g),w=pr($,v),D=x=jl(C,S),T=R=jl(b,w),(x>Xi||R>Xi)&&(A=r*qs(u),P=r*To(u),M=n*qs(l),F=n*To(l),f<oF)){var X=jK(E,I,M,F,A,P,O,k);if(X){var te=E-X[0],re=I-X[1],he=A-X[0],Be=P-X[1],rt=1/To(ZK((te*he+re*Be)/(Cu(te*te+re*re)*Cu(he*he+Be*Be)))/2),me=Cu(X[0]*X[0]+X[1]*X[1]);D=pr(x,(r-me)/(rt+1)),T=pr(R,(n-me)/(rt-1))}}}if(!G)e.moveTo(h+E,c+I);else if(D>Xi){var oe=pr(m,D),Se=pr(y,D),ee=nc(M,F,E,I,r,oe,d),ce=nc(A,P,O,k,r,Se,d);e.moveTo(h+ee.cx+ee.x0,c+ee.cy+ee.y0),D<x&&oe===Se?e.arc(h+ee.cx,c+ee.cy,D,Mt(ee.y0,ee.x0),Mt(ce.y0,ce.x0),!d):(oe>0&&e.arc(h+ee.cx,c+ee.cy,oe,Mt(ee.y0,ee.x0),Mt(ee.y1,ee.x1),!d),e.arc(h,c,r,Mt(ee.cy+ee.y1,ee.cx+ee.x1),Mt(ce.cy+ce.y1,ce.cx+ce.x1),!d),Se>0&&e.arc(h+ce.cx,c+ce.cy,Se,Mt(ce.y1,ce.x1),Mt(ce.y0,ce.x0),!d))}else e.moveTo(h+E,c+I),e.arc(h,c,r,l,u,!d);if(!(n>Xi)||!G)e.lineTo(h+O,c+k);else if(T>Xi){var oe=pr(g,T),Se=pr(v,T),ee=nc(O,k,A,P,n,-Se,d),ce=nc(E,I,M,F,n,-oe,d);e.lineTo(h+ee.cx+ee.x0,c+ee.cy+ee.y0),T<R&&oe===Se?e.arc(h+ee.cx,c+ee.cy,T,Mt(ee.y0,ee.x0),Mt(ce.y0,ce.x0),!d):(Se>0&&e.arc(h+ee.cx,c+ee.cy,Se,Mt(ee.y0,ee.x0),Mt(ee.y1,ee.x1),!d),e.arc(h,c,n,Mt(ee.cy+ee.y1,ee.cx+ee.x1),Mt(ce.cy+ce.y1,ce.cx+ce.x1),d),oe>0&&e.arc(h+ce.cx,c+ce.cy,oe,Mt(ce.y1,ce.x1),Mt(ce.y0,ce.x0),!d))}else e.lineTo(h+O,c+k),e.arc(h,c,n,u,l,d)}e.closePath()}}}var eY=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),Jt=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultShape=function(){return new eY},t.prototype.buildPath=function(i,r){JK(i,r)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(be);Jt.prototype.type="sector";var tY=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),mh=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultShape=function(){return new tY},t.prototype.buildPath=function(i,r){var n=r.cx,o=r.cy,s=Math.PI*2;i.moveTo(n+r.r,o),i.arc(n,o,r.r,0,s,!1),i.moveTo(n+r.r0,o),i.arc(n,o,r.r0,0,s,!0)},t}(be);mh.prototype.type="ring";function iY(e,t,i,r){var n=[],o=[],s=[],a=[],l,u,h,c;if(r){h=[1/0,1/0],c=[-1/0,-1/0];for(var d=0,f=e.length;d<f;d++)Gn(h,h,e[d]),Nn(c,c,e[d]);Gn(h,h,r[0]),Nn(c,c,r[1])}for(var d=0,f=e.length;d<f;d++){var p=e[d];if(i)l=e[d?d-1:f-1],u=e[(d+1)%f];else if(d===0||d===f-1){n.push(Qr(e[d]));continue}else l=e[d-1],u=e[d+1];Qo(o,u,l),Zc(o,o,t);var g=Em(p,l),v=Em(p,u),m=g+v;m!==0&&(g/=m,v/=m),Zc(s,o,-g),Zc(a,o,v);var y=H0([],p,s),C=H0([],p,a);r&&(Nn(y,y,h),Gn(y,y,c),Nn(C,C,h),Gn(C,C,c)),n.push(y),n.push(C)}return i&&n.push(n.shift()),n}function sF(e,t,i){var r=t.smooth,n=t.points;if(n&&n.length>=2){if(r){var o=iY(n,r,i,t.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var s=n.length,a=0;a<(i?s:s-1);a++){var l=o[a*2],u=o[a*2+1],h=n[(a+1)%s];e.bezierCurveTo(l[0],l[1],u[0],u[1],h[0],h[1])}}else{e.moveTo(n[0][0],n[0][1]);for(var a=1,c=n.length;a<c;a++)e.lineTo(n[a][0],n[a][1])}i&&e.closePath()}}var rY=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),ei=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultShape=function(){return new rY},t.prototype.buildPath=function(i,r){sF(i,r,!0)},t}(be);ei.prototype.type="polygon";var nY=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),ti=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new nY},t.prototype.buildPath=function(i,r){sF(i,r,!1)},t}(be);ti.prototype.type="polyline";var oY={},sY=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),mt=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new sY},t.prototype.buildPath=function(i,r){var n,o,s,a;if(this.subPixelOptimize){var l=H1(oY,r,this.style);n=l.x1,o=l.y1,s=l.x2,a=l.y2}else n=r.x1,o=r.y1,s=r.x2,a=r.y2;var u=r.percent;u!==0&&(i.moveTo(n,o),u<1&&(s=n*(1-u)+s*u,a=o*(1-u)+a*u),i.lineTo(s,a))},t.prototype.pointAt=function(i){var r=this.shape;return[r.x1*(1-i)+r.x2*i,r.y1*(1-i)+r.y2*i]},t}(be);mt.prototype.type="line";var ni=[],aY=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function qb(e,t,i){var r=e.cpx2,n=e.cpy2;return r!=null||n!=null?[(i?J0:vt)(e.x1,e.cpx1,e.cpx2,e.x2,t),(i?J0:vt)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(i?Gm:bt)(e.x1,e.cpx1,e.x2,t),(i?Gm:bt)(e.y1,e.cpy1,e.y2,t)]}var yh=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new aY},t.prototype.buildPath=function(i,r){var n=r.x1,o=r.y1,s=r.x2,a=r.y2,l=r.cpx1,u=r.cpy1,h=r.cpx2,c=r.cpy2,d=r.percent;d!==0&&(i.moveTo(n,o),h==null||c==null?(d<1&&(Ou(n,l,s,d,ni),l=ni[1],s=ni[2],Ou(o,u,a,d,ni),u=ni[1],a=ni[2]),i.quadraticCurveTo(l,u,s,a)):(d<1&&(to(n,l,h,s,d,ni),l=ni[1],h=ni[2],s=ni[3],to(o,u,c,a,d,ni),u=ni[1],c=ni[2],a=ni[3]),i.bezierCurveTo(l,u,h,c,s,a)))},t.prototype.pointAt=function(i){return qb(this.shape,i,!1)},t.prototype.tangentAt=function(i){var r=qb(this.shape,i,!0);return Qa(r,r)},t}(be);yh.prototype.type="bezier-curve";var lY=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Yf=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new lY},t.prototype.buildPath=function(i,r){var n=r.cx,o=r.cy,s=Math.max(r.r,0),a=r.startAngle,l=r.endAngle,u=r.clockwise,h=Math.cos(a),c=Math.sin(a);i.moveTo(h*s+n,c*s+o),i.arc(n,o,s,a,l,!u)},t}(be);Yf.prototype.type="arc";var DS=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type="compound",i}return t.prototype._updatePathDirty=function(){for(var i=this.shape.paths,r=this.shapeChanged(),n=0;n<i.length;n++)r=r||i[n].shapeChanged();r&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var i=this.shape.paths||[],r=this.getGlobalScale(),n=0;n<i.length;n++)i[n].path||i[n].createPathProxy(),i[n].path.setScale(r[0],r[1],i[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(i,r){for(var n=r.paths||[],o=0;o<n.length;o++)n[o].buildPath(i,n[o].shape,!0)},t.prototype.afterBrush=function(){for(var i=this.shape.paths||[],r=0;r<i.length;r++)i[r].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),be.prototype.getBoundingRect.call(this)},t}(be),aF=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,i){this.colorStops.push({offset:t,color:i})},e}(),Ch=function(e){L(t,e);function t(i,r,n,o,s,a){var l=e.call(this,s)||this;return l.x=i??0,l.y=r??0,l.x2=n??1,l.y2=o??0,l.type="linear",l.global=a||!1,l}return t}(aF),lF=function(e){L(t,e);function t(i,r,n,o,s){var a=e.call(this,o)||this;return a.x=i??.5,a.y=r??.5,a.r=n??.5,a.type="radial",a.global=s||!1,a}return t}(aF),_o=[0,0],Ao=[0,0],oc=new ge,sc=new ge,Hd=function(){function e(t,i){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new ge;for(var r=0;r<2;r++)this._axes[r]=new ge;t&&this.fromBoundingRect(t,i)}return e.prototype.fromBoundingRect=function(t,i){var r=this._corners,n=this._axes,o=t.x,s=t.y,a=o+t.width,l=s+t.height;if(r[0].set(o,s),r[1].set(a,s),r[2].set(a,l),r[3].set(o,l),i)for(var u=0;u<4;u++)r[u].transform(i);ge.sub(n[0],r[1],r[0]),ge.sub(n[1],r[3],r[0]),n[0].normalize(),n[1].normalize();for(var u=0;u<2;u++)this._origin[u]=n[u].dot(r[0])},e.prototype.intersect=function(t,i){var r=!0,n=!i;return oc.set(1/0,1/0),sc.set(0,0),!this._intersectCheckOneSide(this,t,oc,sc,n,1)&&(r=!1,n)||!this._intersectCheckOneSide(t,this,oc,sc,n,-1)&&(r=!1,n)||n||ge.copy(i,r?oc:sc),r},e.prototype._intersectCheckOneSide=function(t,i,r,n,o,s){for(var a=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,_o),this._getProjMinMaxOnAxis(l,i._corners,Ao),_o[1]<Ao[0]||_o[0]>Ao[1]){if(a=!1,o)return a;var h=Math.abs(Ao[0]-_o[1]),c=Math.abs(_o[0]-Ao[1]);Math.min(h,c)>n.len()&&(h<c?ge.scale(n,u,-h*s):ge.scale(n,u,c*s))}else if(r){var h=Math.abs(Ao[0]-_o[1]),c=Math.abs(_o[0]-Ao[1]);Math.min(h,c)<r.len()&&(h<c?ge.scale(r,u,h*s):ge.scale(r,u,-c*s))}}return a},e.prototype._getProjMinMaxOnAxis=function(t,i,r){for(var n=this._axes[t],o=this._origin,s=i[0].dot(n)+o[t],a=s,l=s,u=1;u<i.length;u++){var h=i[u].dot(n)+o[t];a=Math.min(h,a),l=Math.max(h,l)}r[0]=a,r[1]=l},e}(),uY=[],hY=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.notClear=!0,i.incremental=!0,i._displayables=[],i._temporaryDisplayables=[],i._cursor=0,i}return t.prototype.traverse=function(i,r){i.call(r,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(i,r){r?this._temporaryDisplayables.push(i):this._displayables.push(i),this.markRedraw()},t.prototype.addDisplayables=function(i,r){r=r||!1;for(var n=0;n<i.length;n++)this.addDisplayable(i[n],r)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(i){for(var r=this._cursor;r<this._displayables.length;r++)i&&i(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)i&&i(this._temporaryDisplayables[r])},t.prototype.update=function(){this.updateTransform();for(var i=this._cursor;i<this._displayables.length;i++){var r=this._displayables[i];r.parent=this,r.update(),r.parent=null}for(var i=0;i<this._temporaryDisplayables.length;i++){var r=this._temporaryDisplayables[i];r.parent=this,r.update(),r.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var i=new ve(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var n=this._displayables[r],o=n.getBoundingRect().clone();n.needLocalTransform()&&o.applyTransform(n.getLocalTransform(uY)),i.union(o)}this._rect=i}return this._rect},t.prototype.contain=function(i,r){var n=this.transformCoordToLocal(i,r),o=this.getBoundingRect();if(o.contain(n[0],n[1]))for(var s=0;s<this._displayables.length;s++){var a=this._displayables[s];if(a.contain(i,r))return!0}return!1},t}(zi),uF=_e();function il(e,t,i,r,n){var o;if(t&&t.ecModel){var s=t.ecModel.getUpdatePayload();o=s&&s.animation}var a=t&&t.isAnimationEnabled(),l=e==="update";if(a){var u=void 0,h=void 0,c=void 0;r?(u=de(r.duration,200),h=de(r.easing,"cubicOut"),c=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),h=t.getShallow(l?"animationEasingUpdate":"animationEasing"),c=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(h=o.easing),o.delay!=null&&(c=o.delay)),ie(c)&&(c=c(i,n)),ie(u)&&(u=u(i));var d={duration:u||0,delay:c,easing:h};return d}else return null}function TS(e,t,i,r,n,o,s){var a=!1,l;ie(n)?(s=o,o=n,n=null):se(n)&&(o=n.cb,s=n.during,a=n.isFrom,l=n.removeOpt,n=n.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var h=il(e,r,n,u?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(t,n):null);if(h&&h.duration>0){var c=h.duration,d=h.delay,f=h.easing,p={duration:c,delay:d||0,easing:f,done:o,force:!!o||!!s,setToFinal:!u,scope:e,during:s};a?t.animateFrom(i,p):t.animateTo(i,p)}else t.stopAnimation(),!a&&t.attr(i),s&&s(1),o&&o()}function Me(e,t,i,r,n,o){TS("update",e,t,i,r,n,o)}function Ze(e,t,i,r,n,o){TS("enter",e,t,i,r,n,o)}function Ta(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var i=e.animators[t];if(i.scope==="leave")return!0}return!1}function io(e,t,i,r,n,o){Ta(e)||TS("leave",e,t,i,r,n,o)}function Zb(e,t,i,r){e.removeTextContent(),e.removeTextGuideLine(),io(e,{style:{opacity:0}},t,i,r)}function Wu(e,t,i){function r(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(n){n.isGroup||Zb(n,t,i,r)}):Zb(e,t,i,r)}function sr(e){uF(e).oldStyle=e.style}function cY(e){return uF(e).oldStyle}var zd=Math.max,Wd=Math.min,ly={};function dY(e){return be.extend(e)}var fY=KK;function pY(e,t){return fY(e,t)}function lr(e,t){ly[e]=t}function _S(e){if(ly.hasOwnProperty(e))return ly[e]}function Xf(e,t,i,r){var n=nF(e,t);return i&&(r==="center"&&(i=cF(i,n.getBoundingRect())),dF(n,i)),n}function hF(e,t,i){var r=new Rt({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(n){if(i==="center"){var o={width:n.width,height:n.height};r.setStyle(cF(t,o))}}});return r}function cF(e,t){var i=t.width/t.height,r=e.height*i,n;r<=e.width?n=e.height:(r=e.width,n=r/i);var o=e.x+e.width/2,s=e.y+e.height/2;return{x:o-r/2,y:s-n/2,width:r,height:n}}var Li=YK;function dF(e,t){if(e.applyTransform){var i=e.getBoundingRect(),r=i.calculateTransform(t);e.applyTransform(r)}}function Ga(e,t){return H1(e,e,{lineWidth:t}),e}function gY(e){return z1(e.shape,e.shape,e.style),e}var od=Jo;function vs(e,t){for(var i=Of([]);e&&e!==t;)Jr(i,e.getLocalTransform(),i),e=e.parent;return i}function rr(e,t,i){return t&&!Ot(t)&&(t=Yr.getLocalTransform(t)),i&&(t=Ja([],t)),_t([],e,t)}function qf(e,t,i){var r=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),n=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-r:e==="right"?r:0,e==="top"?-n:e==="bottom"?n:0];return o=rr(o,t,i),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function jb(e){return!e.isGroup}function vY(e){return e.shape!=null}function Sh(e,t,i){if(!e||!t)return;function r(s){var a={};return s.traverse(function(l){jb(l)&&l.anid&&(a[l.anid]=l)}),a}function n(s){var a={x:s.x,y:s.y,rotation:s.rotation};return vY(s)&&(a.shape=V({},s.shape)),a}var o=r(e);t.traverse(function(s){if(jb(s)&&s.anid){var a=o[s.anid];if(a){var l=n(s);s.attr(n(a)),Me(s,l,i,ue(s).dataIndex)}}})}function fF(e,t){return z(e,function(i){var r=i[0];r=zd(r,t.x),r=Wd(r,t.x+t.width);var n=i[1];return n=zd(n,t.y),n=Wd(n,t.y+t.height),[r,n]})}function mY(e,t){var i=zd(e.x,t.x),r=Wd(e.x+e.width,t.x+t.width),n=zd(e.y,t.y),o=Wd(e.y+e.height,t.y+t.height);if(r>=i&&o>=n)return{x:i,y:n,width:r-i,height:o-n}}function wh(e,t,i){var r=V({rectHover:!0},t),n=r.style={strokeNoScale:!0};if(i=i||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(n.image=e.slice(8),ne(n,i),new Rt(r)):Xf(e.replace("path://",""),r,i,"center")}function Ql(e,t,i,r,n){for(var o=0,s=n[n.length-1];o<n.length;o++){var a=n[o];if(pF(e,t,i,r,a[0],a[1],s[0],s[1]))return!0;s=a}}function pF(e,t,i,r,n,o,s,a){var l=i-e,u=r-t,h=s-n,c=a-o,d=wg(h,c,l,u);if(yY(d))return!1;var f=e-n,p=t-o,g=wg(f,p,l,u)/d;if(g<0||g>1)return!1;var v=wg(f,p,h,c)/d;return!(v<0||v>1)}function wg(e,t,i,r){return e*r-i*t}function yY(e){return e<=1e-6&&e>=-1e-6}function ks(e){var t=e.itemTooltipOption,i=e.componentModel,r=e.itemName,n=q(t)?{formatter:t}:t,o=i.mainType,s=i.componentIndex,a={componentType:o,name:r,$vars:["name"]};a[o+"Index"]=s;var l=e.formatterParamsExtra;l&&_(De(l),function(h){j(a,h)||(a[h]=l[h],a.$vars.push(h))});var u=ue(e.el);u.componentMainType=o,u.componentIndex=s,u.tooltipConfig={name:r,option:ne({content:r,encodeHTMLContent:!0,formatterParams:a},n)}}function Qb(e,t){var i;e.isGroup&&(i=t(e)),i||e.traverse(t)}function uo(e,t){if(e)if(H(e))for(var i=0;i<e.length;i++)Qb(e[i],t);else Qb(e,t)}lr("circle",vn);lr("ellipse",Kf);lr("sector",Jt);lr("ring",mh);lr("polygon",ei);lr("polyline",ti);lr("rect",Te);lr("line",mt);lr("bezierCurve",yh);lr("arc",Yf);const Os=Object.freeze(Object.defineProperty({__proto__:null,Arc:Yf,BezierCurve:yh,BoundingRect:ve,Circle:vn,CompoundPath:DS,Ellipse:Kf,Group:le,Image:Rt,IncrementalDisplayable:hY,Line:mt,LinearGradient:Ch,OrientedBoundingRect:Hd,Path:be,Point:ge,Polygon:ei,Polyline:ti,RadialGradient:lF,Rect:Te,Ring:mh,Sector:Jt,Text:Ae,applyTransform:rr,clipPointsByRect:fF,clipRectByRect:mY,createIcon:wh,extendPath:pY,extendShape:dY,getShapeClass:_S,getTransform:vs,groupTransition:Sh,initProps:Ze,isElementRemoved:Ta,lineLineIntersect:pF,linePolygonIntersect:Ql,makeImage:hF,makePath:Xf,mergePath:Li,registerShape:lr,removeElement:io,removeElementWithFadeOut:Wu,resizePath:dF,setTooltipConfig:ks,subPixelOptimize:od,subPixelOptimizeLine:Ga,subPixelOptimizeRect:gY,transformDirection:qf,traverseElements:uo,updateProps:Me},Symbol.toStringTag,{value:"Module"}));var Zf={};function gF(e,t){for(var i=0;i<Qt.length;i++){var r=Qt[i],n=t[r],o=e.ensureState(r);o.style=o.style||{},o.style.text=n}var s=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(s,!0)}function uy(e,t,i){var r=e.labelFetcher,n=e.labelDataIndex,o=e.labelDimIndex,s=t.normal,a;r&&(a=r.getFormattedLabel(n,"normal",null,o,s&&s.get("formatter"),i!=null?{interpolatedValue:i}:null)),a==null&&(a=ie(e.defaultText)?e.defaultText(n,e,i):e.defaultText);for(var l={normal:a},u=0;u<Qt.length;u++){var h=Qt[u],c=t[h];l[h]=de(r?r.getFormattedLabel(n,h,null,o,c&&c.get("formatter")):null,a)}return l}function Pt(e,t,i,r){i=i||Zf;for(var n=e instanceof Ae,o=!1,s=0;s<Hu.length;s++){var a=t[Hu[s]];if(a&&a.getShallow("show")){o=!0;break}}var l=n?e:e.getTextContent();if(o){n||(l||(l=new Ae,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=uy(i,t),h=t.normal,c=!!h.getShallow("show"),d=Xe(h,r&&r.normal,i,!1,!n);d.text=u.normal,n||e.setTextConfig(Ud(h,i,!1));for(var s=0;s<Qt.length;s++){var f=Qt[s],a=t[f];if(a){var p=l.ensureState(f),g=!!de(a.getShallow("show"),c);if(g!==c&&(p.ignore=!g),p.style=Xe(a,r&&r[f],i,!0,!n),p.style.text=u[f],!n){var v=e.ensureState(f);v.textConfig=Ud(a,i,!0)}}}l.silent=!!h.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!c,l.useStyle(d),l.dirty(),i.enableTextSetter&&(rl(l).setLabelText=function(m){var y=uy(i,t,m);gF(l,y)})}else l&&(l.ignore=!0);e.dirty()}function St(e,t){t=t||"label";for(var i={normal:e.getModel(t)},r=0;r<Qt.length;r++){var n=Qt[r];i[n]=e.getModel([n,t])}return i}function Xe(e,t,i,r,n){var o={};return CY(o,e,i,r,n),t&&V(o,t),o}function Ud(e,t,i){t=t||{};var r={},n,o=e.getShallow("rotate"),s=de(e.getShallow("distance"),i?null:5),a=e.getShallow("offset");return n=e.getShallow("position")||(i?null:"inside"),n==="outside"&&(n=t.defaultOutsidePosition||"top"),n!=null&&(r.position=n),a!=null&&(r.offset=a),o!=null&&(o*=Math.PI/180,r.rotation=o),s!=null&&(r.distance=s),r.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",r}function CY(e,t,i,r,n){i=i||Zf;var o=t.ecModel,s=o&&o.option.textStyle,a=SY(t),l;if(a){l={};for(var u in a)if(a.hasOwnProperty(u)){var h=t.getModel(["rich",u]);ix(l[u]={},h,s,i,r,n,!1,!0)}}l&&(e.rich=l);var c=t.get("overflow");c&&(e.overflow=c);var d=t.get("minMargin");d!=null&&(e.margin=d),ix(e,t,s,i,r,n,!0,!1)}function SY(e){for(var t;e&&e!==e.ecModel;){var i=(e.option||Zf).rich;if(i){t=t||{};for(var r=De(i),n=0;n<r.length;n++){var o=r[n];t[o]=1}}e=e.parentModel}return t}var Jb=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],ex=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],tx=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function ix(e,t,i,r,n,o,s,a){i=!n&&i||Zf;var l=r&&r.inheritColor,u=t.getShallow("color"),h=t.getShallow("textBorderColor"),c=de(t.getShallow("opacity"),i.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(h==="inherit"||h==="auto")&&(l?h=l:h=null),o||(u=u||i.color,h=h||i.textBorderColor),u!=null&&(e.fill=u),h!=null&&(e.stroke=h);var d=de(t.getShallow("textBorderWidth"),i.textBorderWidth);d!=null&&(e.lineWidth=d);var f=de(t.getShallow("textBorderType"),i.textBorderType);f!=null&&(e.lineDash=f);var p=de(t.getShallow("textBorderDashOffset"),i.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!n&&c==null&&!a&&(c=r&&r.defaultOpacity),c!=null&&(e.opacity=c),!n&&!o&&e.fill==null&&r.inheritColor&&(e.fill=r.inheritColor);for(var g=0;g<Jb.length;g++){var v=Jb[g],m=de(t.getShallow(v),i[v]);m!=null&&(e[v]=m)}for(var g=0;g<ex.length;g++){var v=ex[g],m=t.getShallow(v);m!=null&&(e[v]=m)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!s||!r.disableBox){for(var g=0;g<tx.length;g++){var v=tx[g],m=t.getShallow(v);m!=null&&(e[v]=m)}var C=t.getShallow("borderType");C!=null&&(e.borderDash=C),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function AS(e,t){var i=t&&t.getModel("textStyle");return Ji([e.fontStyle||i&&i.getShallow("fontStyle")||"",e.fontWeight||i&&i.getShallow("fontWeight")||"",(e.fontSize||i&&i.getShallow("fontSize")||12)+"px",e.fontFamily||i&&i.getShallow("fontFamily")||"sans-serif"].join(" "))}var rl=_e();function vF(e,t,i,r){if(e){var n=rl(e);n.prevValue=n.value,n.value=i;var o=t.normal;n.valueAnimation=o.get("valueAnimation"),n.valueAnimation&&(n.precision=o.get("precision"),n.defaultInterpolatedText=r,n.statesModels=t)}}function mF(e,t,i,r,n){var o=rl(e);if(!o.valueAnimation||o.prevValue===o.value)return;var s=o.defaultInterpolatedText,a=de(o.interpolatedValue,o.prevValue),l=o.value;function u(h){var c=I1(i,o.precision,a,l,h);o.interpolatedValue=h===1?null:c;var d=uy({labelDataIndex:t,labelFetcher:n,defaultText:s?s(c):c+""},o.statesModels,c);gF(e,d)}e.percent=0,(o.prevValue==null?Ze:Me)(e,{percent:1},r,t,null,u)}var wY=["textStyle","color"],bg=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],xg=new Ae,bY=function(){function e(){}return e.prototype.getTextColor=function(t){var i=this.ecModel;return this.getShallow("color")||(!t&&i?i.get(wY):null)},e.prototype.getFont=function(){return AS({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var i={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<bg.length;r++)i[bg[r]]=this.getShallow(bg[r]);return xg.useStyle(i),xg.update(),xg.getBoundingRect()},e}(),yF=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],xY=Rs(yF),RY=function(){function e(){}return e.prototype.getLineStyle=function(t){return xY(this,t)},e}(),CF=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],DY=Rs(CF),TY=function(){function e(){}return e.prototype.getItemStyle=function(t,i){return DY(this,t,i)},e}(),Ne=function(){function e(t,i,r){this.parentModel=i,this.ecModel=r,this.option=t}return e.prototype.init=function(t,i,r){},e.prototype.mergeOption=function(t,i){pe(this.option,t,!0)},e.prototype.get=function(t,i){return t==null?this.option:this._doGet(this.parsePath(t),!i&&this.parentModel)},e.prototype.getShallow=function(t,i){var r=this.option,n=r==null?r:r[t];if(n==null&&!i){var o=this.parentModel;o&&(n=o.getShallow(t))}return n},e.prototype.getModel=function(t,i){var r=t!=null,n=r?this.parsePath(t):null,o=r?this._doGet(n):this.option;return i=i||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new e(o,i,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(ae(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!xe.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,i){var r=this.option;if(!t)return r;for(var n=0;n<t.length&&!(t[n]&&(r=r&&typeof r=="object"?r[t[n]]:null,r==null));n++);return r==null&&i&&(r=i._doGet(this.resolveParentPath(t),i.parentModel)),r},e}();vS(Ne);k4(Ne);dt(Ne,RY);dt(Ne,TY);dt(Ne,B4);dt(Ne,bY);var _Y=Math.round(Math.random()*10);function nl(e){return[e||"",_Y++].join("_")}function AY(e){var t={};e.registerSubTypeDefaulter=function(i,r){var n=Rr(i);t[n.main]=r},e.determineSubType=function(i,r){var n=r.type;if(!n){var o=Rr(i).main;e.hasSubTypes(i)&&t[o]&&(n=t[o](r))}return n}}function PY(e,t){e.topologicalTravel=function(o,s,a,l){if(!o.length)return;var u=i(s),h=u.graph,c=u.noEntryList,d={};for(_(o,function(y){d[y]=!0});c.length;){var f=c.pop(),p=h[f],g=!!d[f];g&&(a.call(l,f,p.originalDeps.slice()),delete d[f]),_(p.successor,g?m:v)}_(d,function(){var y="";throw new Error(y)});function v(y){h[y].entryCount--,h[y].entryCount===0&&c.push(y)}function m(y){d[y]=!0,v(y)}};function i(o){var s={},a=[];return _(o,function(l){var u=r(s,l),h=u.originalDeps=t(l),c=n(h,o);u.entryCount=c.length,u.entryCount===0&&a.push(l),_(c,function(d){Ce(u.predecessor,d)<0&&u.predecessor.push(d);var f=r(s,d);Ce(f.successor,d)<0&&f.successor.push(l)})}),{graph:s,noEntryList:a}}function r(o,s){return o[s]||(o[s]={predecessor:[],successor:[]}),o[s]}function n(o,s){var a=[];return _(o,function(l){Ce(s,l)>=0&&a.push(l)}),a}}function ho(e,t){return pe(pe({},e,!0),t,!0)}const MY={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},FY={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var $d="ZH",PS="EN",_a=PS,sd={},MS={},SF=xe.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage||_a).toUpperCase();return e.indexOf($d)>-1?$d:_a}():_a;function wF(e,t){e=e.toUpperCase(),MS[e]=new Ne(t),sd[e]=t}function EY(e){if(q(e)){var t=sd[e.toUpperCase()]||{};return e===$d||e===PS?ae(t):pe(ae(t),ae(sd[_a]),!1)}else return pe(ae(e),ae(sd[_a]),!1)}function hy(e){return MS[e]}function IY(){return MS[_a]}wF(PS,MY);wF($d,FY);var FS=1e3,ES=FS*60,Su=ES*60,ki=Su*24,rx=ki*365,Jl={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},ac="{yyyy}-{MM}-{dd}",nx={year:"{yyyy}",month:"{yyyy}-{MM}",day:ac,hour:ac+" "+Jl.hour,minute:ac+" "+Jl.minute,second:ac+" "+Jl.second,millisecond:Jl.none},Rg=["year","month","day","hour","minute","second","millisecond"],bF=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function xn(e,t){return e+="","0000".substr(0,t-e.length)+e}function Aa(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function LY(e){return e===Aa(e)}function kY(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function jf(e,t,i,r){var n=kr(e),o=n[IS(i)](),s=n[Pa(i)]()+1,a=Math.floor((s-1)/3)+1,l=n[Qf(i)](),u=n["get"+(i?"UTC":"")+"Day"](),h=n[Uu(i)](),c=(h-1)%12+1,d=n[Jf(i)](),f=n[ep(i)](),p=n[tp(i)](),g=h>=12?"pm":"am",v=g.toUpperCase(),m=r instanceof Ne?r:hy(r||SF)||IY(),y=m.getModel("time"),C=y.get("month"),S=y.get("monthAbbr"),b=y.get("dayOfWeek"),w=y.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,g+"").replace(/{A}/g,v+"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,xn(o%100+"",2)).replace(/{Q}/g,a+"").replace(/{MMMM}/g,C[s-1]).replace(/{MMM}/g,S[s-1]).replace(/{MM}/g,xn(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,xn(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,b[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,xn(h,2)).replace(/{H}/g,h+"").replace(/{hh}/g,xn(c+"",2)).replace(/{h}/g,c+"").replace(/{mm}/g,xn(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,xn(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,xn(p,3)).replace(/{S}/g,p+"")}function OY(e,t,i,r,n){var o=null;if(q(i))o=i;else if(ie(i))o=i(e.value,t,{level:e.level});else{var s=V({},Jl);if(e.level>0)for(var a=0;a<Rg.length;++a)s[Rg[a]]="{primary|"+s[Rg[a]]+"}";var l=i?i.inherit===!1?i:ne(i,s):s,u=xF(e.value,n);if(l[u])o=l[u];else if(l.inherit){for(var h=bF.indexOf(u),a=h-1;a>=0;--a)if(l[u]){o=l[u];break}o=o||s.none}if(H(o)){var c=e.level==null?0:e.level>=0?e.level:o.length+e.level;c=Math.min(c,o.length-1),o=o[c]}}return jf(new Date(e.value),o,n,r)}function xF(e,t){var i=kr(e),r=i[Pa(t)]()+1,n=i[Qf(t)](),o=i[Uu(t)](),s=i[Jf(t)](),a=i[ep(t)](),l=i[tp(t)](),u=l===0,h=u&&a===0,c=h&&s===0,d=c&&o===0,f=d&&n===1,p=f&&r===1;return p?"year":f?"month":d?"day":c?"hour":h?"minute":u?"second":"millisecond"}function ox(e,t,i){var r=Pe(e)?kr(e):e;switch(t=t||xF(e,i),t){case"year":return r[IS(i)]();case"half-year":return r[Pa(i)]()>=6?1:0;case"quarter":return Math.floor((r[Pa(i)]()+1)/4);case"month":return r[Pa(i)]();case"day":return r[Qf(i)]();case"half-day":return r[Uu(i)]()/24;case"hour":return r[Uu(i)]();case"minute":return r[Jf(i)]();case"second":return r[ep(i)]();case"millisecond":return r[tp(i)]()}}function IS(e){return e?"getUTCFullYear":"getFullYear"}function Pa(e){return e?"getUTCMonth":"getMonth"}function Qf(e){return e?"getUTCDate":"getDate"}function Uu(e){return e?"getUTCHours":"getHours"}function Jf(e){return e?"getUTCMinutes":"getMinutes"}function ep(e){return e?"getUTCSeconds":"getSeconds"}function tp(e){return e?"getUTCMilliseconds":"getMilliseconds"}function GY(e){return e?"setUTCFullYear":"setFullYear"}function RF(e){return e?"setUTCMonth":"setMonth"}function DF(e){return e?"setUTCDate":"setDate"}function TF(e){return e?"setUTCHours":"setHours"}function _F(e){return e?"setUTCMinutes":"setMinutes"}function AF(e){return e?"setUTCSeconds":"setSeconds"}function PF(e){return e?"setUTCMilliseconds":"setMilliseconds"}function MF(e){if(!D1(e))return q(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function FF(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(i,r){return r.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var ol=sS;function cy(e,t,i){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(h){return h&&Ji(h)?h:"-"}function o(h){return!!(h!=null&&!isNaN(h)&&isFinite(h))}var s=t==="time",a=e instanceof Date;if(s||a){var l=s?kr(e):e;if(isNaN(+l)){if(a)return"-"}else return jf(l,r,i)}if(t==="ordinal")return Pm(e)?n(e):Pe(e)&&o(e)?e+"":"-";var u=sn(e);return o(u)?MF(u):Pm(e)?n(e):typeof e=="boolean"?e+"":"-"}var sx=["a","b","c","d","e","f","g"],Dg=function(e,t){return"{"+e+(t??"")+"}"};function EF(e,t,i){H(t)||(t=[t]);var r=t.length;if(!r)return"";for(var n=t[0].$vars||[],o=0;o<n.length;o++){var s=sx[o];e=e.replace(Dg(s),Dg(s,0))}for(var a=0;a<r;a++)for(var l=0;l<n.length;l++){var u=t[a][n[l]];e=e.replace(Dg(sx[l],a),i?$t(u):u)}return e}function NY(e,t,i){return _(t,function(r,n){e=e.replace("{"+n+"}",r)}),e}function VY(e,t){var i=q(e)?{color:e,extraCssText:t}:e||{},r=i.color,n=i.type;t=i.extraCssText;var o=i.renderMode||"html";if(!r)return"";if(o==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+$t(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+$t(r)+";"+(t||"")+'"></span>';var s=i.markerId||"markerX";return{renderMode:o,content:"{"+s+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function Ts(e,t){return t=t||"transparent",q(e)?e:se(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function Kd(e,t){if(t==="_blank"||t==="blank"){var i=window.open();i.opener=null,i.location.href=e}else window.open(e,t)}var ad=_,IF=["left","right","top","bottom","width","height"],ts=[["width","left","right"],["height","top","bottom"]];function LS(e,t,i,r,n){var o=0,s=0;r==null&&(r=1/0),n==null&&(n=1/0);var a=0;t.eachChild(function(l,u){var h=l.getBoundingRect(),c=t.childAt(u+1),d=c&&c.getBoundingRect(),f,p;if(e==="horizontal"){var g=h.width+(d?-d.x+h.x:0);f=o+g,f>r||l.newline?(o=0,f=g,s+=a+i,a=h.height):a=Math.max(a,h.height)}else{var v=h.height+(d?-d.y+h.y:0);p=s+v,p>n||l.newline?(o+=a+i,s=0,p=v,a=h.width):a=Math.max(a,h.width)}l.newline||(l.x=o,l.y=s,l.markRedraw(),e==="horizontal"?o=f+i:s=p+i)})}var ms=LS;fe(LS,"vertical");fe(LS,"horizontal");function BY(e,t,i){var r=t.width,n=t.height,o=K(e.left,r),s=K(e.top,n),a=K(e.right,r),l=K(e.bottom,n);return(isNaN(o)||isNaN(parseFloat(e.left)))&&(o=0),(isNaN(a)||isNaN(parseFloat(e.right)))&&(a=r),(isNaN(s)||isNaN(parseFloat(e.top)))&&(s=0),(isNaN(l)||isNaN(parseFloat(e.bottom)))&&(l=n),i=ol(i||0),{width:Math.max(a-o-i[1]-i[3],0),height:Math.max(l-s-i[0]-i[2],0)}}function pt(e,t,i){i=ol(i||0);var r=t.width,n=t.height,o=K(e.left,r),s=K(e.top,n),a=K(e.right,r),l=K(e.bottom,n),u=K(e.width,r),h=K(e.height,n),c=i[2]+i[0],d=i[1]+i[3],f=e.aspect;switch(isNaN(u)&&(u=r-a-d-o),isNaN(h)&&(h=n-l-c-s),f!=null&&(isNaN(u)&&isNaN(h)&&(f>r/n?u=r*.8:h=n*.8),isNaN(u)&&(u=f*h),isNaN(h)&&(h=u/f)),isNaN(o)&&(o=r-a-u-d),isNaN(s)&&(s=n-l-h-c),e.left||e.right){case"center":o=r/2-u/2-i[3];break;case"right":o=r-u-d;break}switch(e.top||e.bottom){case"middle":case"center":s=n/2-h/2-i[0];break;case"bottom":s=n-h-c;break}o=o||0,s=s||0,isNaN(u)&&(u=r-d-o-(a||0)),isNaN(h)&&(h=n-c-s-(l||0));var p=new ve(o+i[3],s+i[0],u,h);return p.margin=i,p}function ip(e,t,i,r,n,o){var s=!n||!n.hv||n.hv[0],a=!n||!n.hv||n.hv[1],l=n&&n.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!s&&!a)return!1;var u;if(l==="raw")u=e.type==="group"?new ve(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var h=e.getLocalTransform();u=u.clone(),u.applyTransform(h)}var c=pt(ne({width:u.width,height:u.height},t),i,r),d=s?c.x-u.x:0,f=a?c.y-u.y:0;return l==="raw"?(o.x=d,o.y=f):(o.x+=d,o.y+=f),o===e&&e.markRedraw(),!0}function HY(e,t){return e[ts[t][0]]!=null||e[ts[t][1]]!=null&&e[ts[t][2]]!=null}function $u(e){var t=e.layoutMode||e.constructor.layoutMode;return se(t)?t:t?{type:t}:null}function ro(e,t,i){var r=i&&i.ignoreSize;!H(r)&&(r=[r,r]);var n=s(ts[0],0),o=s(ts[1],1);u(ts[0],e,n),u(ts[1],e,o);function s(h,c){var d={},f=0,p={},g=0,v=2;if(ad(h,function(C){p[C]=e[C]}),ad(h,function(C){a(t,C)&&(d[C]=p[C]=t[C]),l(d,C)&&f++,l(p,C)&&g++}),r[c])return l(t,h[1])?p[h[2]]=null:l(t,h[2])&&(p[h[1]]=null),p;if(g===v||!f)return p;if(f>=v)return d;for(var m=0;m<h.length;m++){var y=h[m];if(!a(d,y)&&a(e,y)){d[y]=e[y];break}}return d}function a(h,c){return h.hasOwnProperty(c)}function l(h,c){return h[c]!=null&&h[c]!=="auto"}function u(h,c,d){ad(h,function(f){c[f]=d[f]})}}function sl(e){return LF({},e)}function LF(e,t){return t&&e&&ad(IF,function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e}var zY=_e(),Re=function(e){L(t,e);function t(i,r,n){var o=e.call(this,i,r,n)||this;return o.uid=nl("ec_cpt_model"),o}return t.prototype.init=function(i,r,n){this.mergeDefaultAndTheme(i,n)},t.prototype.mergeDefaultAndTheme=function(i,r){var n=$u(this),o=n?sl(i):{},s=r.getTheme();pe(i,s.get(this.mainType)),pe(i,this.getDefaultOption()),n&&ro(i,o,n)},t.prototype.mergeOption=function(i,r){pe(this.option,i,!0);var n=$u(this);n&&ro(this.option,i,n)},t.prototype.optionUpdated=function(i,r){},t.prototype.getDefaultOption=function(){var i=this.constructor;if(!E4(i))return i.defaultOption;var r=zY(this);if(!r.defaultOption){for(var n=[],o=i;o;){var s=o.prototype.defaultOption;s&&n.push(s),o=o.superClass}for(var a={},l=n.length-1;l>=0;l--)a=pe(a,n[l],!0);r.defaultOption=a}return r.defaultOption},t.prototype.getReferringComponents=function(i,r){var n=i+"Index",o=i+"Id";return gh(this.ecModel,i,{index:this.get(n,!0),id:this.get(o,!0)},r)},t.prototype.getBoxLayoutParams=function(){var i=this;return{left:i.get("left"),top:i.get("top"),right:i.get("right"),bottom:i.get("bottom"),width:i.get("width"),height:i.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(i){this.option.zlevel=i},t.protoInitialize=function(){var i=t.prototype;i.type="component",i.id="",i.name="",i.mainType="",i.subType="",i.componentIndex=0}(),t}(Ne);k1(Re,Ne);Bf(Re);AY(Re);PY(Re,WY);function WY(e){var t=[];return _(Re.getClassesByMainType(e),function(i){t=t.concat(i.dependencies||i.prototype.dependencies||[])}),t=z(t,function(i){return Rr(i).main}),e!=="dataset"&&Ce(t,"dataset")<=0&&t.unshift("dataset"),t}var kF="";typeof navigator<"u"&&(kF=navigator.platform||"");var Zs="rgba(0, 0, 0, 0.2)";const UY={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Zs,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Zs,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Zs,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Zs,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Zs,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Zs,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:kF.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var OF=Q(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Ui="original",Gt="arrayRows",$i="objectRows",Gr="keyedColumns",Yn="typedArray",GF="unknown",Pr="column",al="row",Dt={Must:1,Might:2,Not:3},NF=_e();function $Y(e){NF(e).datasetMap=Q()}function VF(e,t,i){var r={},n=OS(t);if(!n||!e)return r;var o=[],s=[],a=t.ecModel,l=NF(a).datasetMap,u=n.uid+"_"+i.seriesLayoutBy,h,c;e=e.slice(),_(e,function(g,v){var m=se(g)?g:e[v]={name:g};m.type==="ordinal"&&h==null&&(h=v,c=p(m)),r[m.name]=[]});var d=l.get(u)||l.set(u,{categoryWayDim:c,valueWayDim:0});_(e,function(g,v){var m=g.name,y=p(g);if(h==null){var C=d.valueWayDim;f(r[m],C,y),f(s,C,y),d.valueWayDim+=y}else if(h===v)f(r[m],0,y),f(o,0,y);else{var C=d.categoryWayDim;f(r[m],C,y),f(s,C,y),d.categoryWayDim+=y}});function f(g,v,m){for(var y=0;y<m;y++)g.push(v+y)}function p(g){var v=g.dimsDef;return v?v.length:1}return o.length&&(r.itemName=o),s.length&&(r.seriesName=s),r}function kS(e,t,i){var r={},n=OS(e);if(!n)return r;var o=t.sourceFormat,s=t.dimensionsDefine,a;(o===$i||o===Gr)&&_(s,function(h,c){(se(h)?h.name:h)==="name"&&(a=c)});var l=function(){for(var h={},c={},d=[],f=0,p=Math.min(5,i);f<p;f++){var g=HF(t.data,o,t.seriesLayoutBy,s,t.startIndex,f);d.push(g);var v=g===Dt.Not;if(v&&h.v==null&&f!==a&&(h.v=f),(h.n==null||h.n===h.v||!v&&d[h.n]===Dt.Not)&&(h.n=f),m(h)&&d[h.n]!==Dt.Not)return h;v||(g===Dt.Might&&c.v==null&&f!==a&&(c.v=f),(c.n==null||c.n===c.v)&&(c.n=f))}function m(y){return y.v!=null&&y.n!=null}return m(h)?h:m(c)?c:null}();if(l){r.value=[l.v];var u=a??l.n;r.itemName=[u],r.seriesName=[u]}return r}function OS(e){var t=e.get("data",!0);if(!t)return gh(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},ht).models[0]}function KY(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:gh(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},ht).models}function BF(e,t){return HF(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function HF(e,t,i,r,n,o){var s,a=5;if(ci(e))return Dt.Not;var l,u;if(r){var h=r[o];se(h)?(l=h.name,u=h.type):q(h)&&(l=h)}if(u!=null)return u==="ordinal"?Dt.Must:Dt.Not;if(t===Gt){var c=e;if(i===al){for(var d=c[o],f=0;f<(d||[]).length&&f<a;f++)if((s=S(d[n+f]))!=null)return s}else for(var f=0;f<c.length&&f<a;f++){var p=c[n+f];if(p&&(s=S(p[o]))!=null)return s}}else if(t===$i){var g=e;if(!l)return Dt.Not;for(var f=0;f<g.length&&f<a;f++){var v=g[f];if(v&&(s=S(v[l]))!=null)return s}}else if(t===Gr){var m=e;if(!l)return Dt.Not;var d=m[l];if(!d||ci(d))return Dt.Not;for(var f=0;f<d.length&&f<a;f++)if((s=S(d[f]))!=null)return s}else if(t===Ui)for(var y=e,f=0;f<y.length&&f<a;f++){var v=y[f],C=el(v);if(!H(C))return Dt.Not;if((s=S(C[o]))!=null)return s}function S(b){var w=q(b);if(b!=null&&Number.isFinite(Number(b))&&b!=="")return w?Dt.Might:Dt.Not;if(w&&b!=="-")return Dt.Must}return Dt.Not}var dy=Q();function YY(e,t){jt(dy.get(e)==null&&t),dy.set(e,t)}function XY(e,t,i){var r=dy.get(t);if(!r)return i;var n=r(e);return n?i.concat(n):i}var ax=_e(),qY=_e(),GS=function(){function e(){}return e.prototype.getColorFromPalette=function(t,i,r){var n=ze(this.get("color",!0)),o=this.get("colorLayer",!0);return zF(this,ax,n,o,t,i,r)},e.prototype.clearColorPalette=function(){jY(this,ax)},e}();function fy(e,t,i,r){var n=ze(e.get(["aria","decal","decals"]));return zF(e,qY,n,null,t,i,r)}function ZY(e,t){for(var i=e.length,r=0;r<i;r++)if(e[r].length>t)return e[r];return e[i-1]}function zF(e,t,i,r,n,o,s){o=o||e;var a=t(o),l=a.paletteIdx||0,u=a.paletteNameMap=a.paletteNameMap||{};if(u.hasOwnProperty(n))return u[n];var h=s==null||!r?i:ZY(r,s);if(h=h||i,!(!h||!h.length)){var c=h[l];return n&&(u[n]=c),a.paletteIdx=(l+1)%h.length,c}}function jY(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var lc,Dl,lx,ux="\0_ec_inner",QY=1,NS=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(i,r,n,o,s,a){o=o||{},this.option=null,this._theme=new Ne(o),this._locale=new Ne(s),this._optionManager=a},t.prototype.setOption=function(i,r,n){var o=dx(r);this._optionManager.setOption(i,n,o),this._resetOption(null,o)},t.prototype.resetOption=function(i,r){return this._resetOption(i,dx(r))},t.prototype._resetOption=function(i,r){var n=!1,o=this._optionManager;if(!i||i==="recreate"){var s=o.mountOption(i==="recreate");!this.option||i==="recreate"?lx(this,s):(this.restoreData(),this._mergeOption(s,r)),n=!0}if((i==="timeline"||i==="media")&&this.restoreData(),!i||i==="recreate"||i==="timeline"){var a=o.getTimelineOption(this);a&&(n=!0,this._mergeOption(a,r))}if(!i||i==="recreate"||i==="media"){var l=o.getMediaOption(this);l.length&&_(l,function(u){n=!0,this._mergeOption(u,r)},this)}return n},t.prototype.mergeOption=function(i){this._mergeOption(i,null)},t.prototype._mergeOption=function(i,r){var n=this.option,o=this._componentsMap,s=this._componentsCount,a=[],l=Q(),u=r&&r.replaceMergeMainTypeMap;$Y(this),_(i,function(c,d){c!=null&&(Re.hasClass(d)?d&&(a.push(d),l.set(d,!0)):n[d]=n[d]==null?ae(c):pe(n[d],c,!0))}),u&&u.each(function(c,d){Re.hasClass(d)&&!l.get(d)&&(a.push(d),l.set(d,!0))}),Re.topologicalTravel(a,Re.getAllClassMainTypes(),h,this);function h(c){var d=XY(this,c,ze(i[c])),f=o.get(c),p=f?u&&u.get(c)?"replaceMerge":"normalMerge":"replaceAll",g=M1(f,d,p);x4(g,c,Re),n[c]=null,o.set(c,null),s.set(c,0);var v=[],m=[],y=0,C;_(g,function(S,b){var w=S.existing,x=S.newOption;if(!x)w&&(w.mergeOption({},this),w.optionUpdated({},!1));else{var R=c==="series",D=Re.getClass(c,S.keyInfo.subType,!R);if(!D)return;if(c==="tooltip"){if(C)return;C=!0}if(w&&w.constructor===D)w.name=S.keyInfo.name,w.mergeOption(x,this),w.optionUpdated(x,!1);else{var T=V({componentIndex:b},S.keyInfo);w=new D(x,this,this,T),V(w,T),S.brandNew&&(w.__requireNewView=!0),w.init(x,this,this),w.optionUpdated(null,!0)}}w?(v.push(w.option),m.push(w),y++):(v.push(void 0),m.push(void 0))},this),n[c]=v,o.set(c,m),s.set(c,y),c==="series"&&lc(this)}this._seriesIndices||lc(this)},t.prototype.getOption=function(){var i=ae(this.option);return _(i,function(r,n){if(Re.hasClass(n)){for(var o=ze(r),s=o.length,a=!1,l=s-1;l>=0;l--)o[l]&&!Bu(o[l])?a=!0:(o[l]=null,!a&&s--);o.length=s,i[n]=o}}),delete i[ux],i},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(i){this._payload=i},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(i,r){var n=this._componentsMap.get(i);if(n){var o=n[r||0];if(o)return o;if(r==null){for(var s=0;s<n.length;s++)if(n[s])return n[s]}}},t.prototype.queryComponents=function(i){var r=i.mainType;if(!r)return[];var n=i.index,o=i.id,s=i.name,a=this._componentsMap.get(r);if(!a||!a.length)return[];var l;return n!=null?(l=[],_(ze(n),function(u){a[u]&&l.push(a[u])})):o!=null?l=hx("id",o,a):s!=null?l=hx("name",s,a):l=Le(a,function(u){return!!u}),cx(l,i)},t.prototype.findComponents=function(i){var r=i.query,n=i.mainType,o=a(r),s=o?this.queryComponents(o):Le(this._componentsMap.get(n),function(u){return!!u});return l(cx(s,i));function a(u){var h=n+"Index",c=n+"Id",d=n+"Name";return u&&(u[h]!=null||u[c]!=null||u[d]!=null)?{mainType:n,index:u[h],id:u[c],name:u[d]}:null}function l(u){return i.filter?Le(u,i.filter):u}},t.prototype.eachComponent=function(i,r,n){var o=this._componentsMap;if(ie(i)){var s=r,a=i;o.each(function(c,d){for(var f=0;c&&f<c.length;f++){var p=c[f];p&&a.call(s,d,p,p.componentIndex)}})}else for(var l=q(i)?o.get(i):se(i)?this.findComponents(i):null,u=0;l&&u<l.length;u++){var h=l[u];h&&r.call(n,h,h.componentIndex)}},t.prototype.getSeriesByName=function(i){var r=ft(i,null);return Le(this._componentsMap.get("series"),function(n){return!!n&&r!=null&&n.name===r})},t.prototype.getSeriesByIndex=function(i){return this._componentsMap.get("series")[i]},t.prototype.getSeriesByType=function(i){return Le(this._componentsMap.get("series"),function(r){return!!r&&r.subType===i})},t.prototype.getSeries=function(){return Le(this._componentsMap.get("series"),function(i){return!!i})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(i,r){Dl(this),_(this._seriesIndices,function(n){var o=this._componentsMap.get("series")[n];i.call(r,o,n)},this)},t.prototype.eachRawSeries=function(i,r){_(this._componentsMap.get("series"),function(n){n&&i.call(r,n,n.componentIndex)})},t.prototype.eachSeriesByType=function(i,r,n){Dl(this),_(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];s.subType===i&&r.call(n,s,o)},this)},t.prototype.eachRawSeriesByType=function(i,r,n){return _(this.getSeriesByType(i),r,n)},t.prototype.isSeriesFiltered=function(i){return Dl(this),this._seriesIndicesMap.get(i.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(i,r){Dl(this);var n=[];_(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];i.call(r,s,o)&&n.push(o)},this),this._seriesIndices=n,this._seriesIndicesMap=Q(n)},t.prototype.restoreData=function(i){lc(this);var r=this._componentsMap,n=[];r.each(function(o,s){Re.hasClass(s)&&n.push(s)}),Re.topologicalTravel(n,Re.getAllClassMainTypes(),function(o){_(r.get(o),function(s){s&&(o!=="series"||!JY(s,i))&&s.restoreData()})})},t.internalField=function(){lc=function(i){var r=i._seriesIndices=[];_(i._componentsMap.get("series"),function(n){n&&r.push(n.componentIndex)}),i._seriesIndicesMap=Q(r)},Dl=function(i){},lx=function(i,r){i.option={},i.option[ux]=QY,i._componentsMap=Q({series:[]}),i._componentsCount=Q();var n=r.aria;se(n)&&n.enabled==null&&(n.enabled=!0),e6(r,i._theme.option),pe(r,UY,!1),i._mergeOption(r,null)}}(),t}(Ne);function JY(e,t){if(t){var i=t.seriesIndex,r=t.seriesId,n=t.seriesName;return i!=null&&e.componentIndex!==i||r!=null&&e.id!==r||n!=null&&e.name!==n}}function e6(e,t){var i=e.color&&!e.colorLayer;_(t,function(r,n){n==="colorLayer"&&i||Re.hasClass(n)||(typeof r=="object"?e[n]=e[n]?pe(e[n],r,!1):ae(r):e[n]==null&&(e[n]=r))})}function hx(e,t,i){if(H(t)){var r=Q();return _(t,function(o){if(o!=null){var s=ft(o,null);s!=null&&r.set(o,!0)}}),Le(i,function(o){return o&&r.get(o[e])})}else{var n=ft(t,null);return Le(i,function(o){return o&&n!=null&&o[e]===n})}}function cx(e,t){return t.hasOwnProperty("subType")?Le(e,function(i){return i&&i.subType===t.subType}):e}function dx(e){var t=Q();return e&&_(ze(e.replaceMerge),function(i){t.set(i,!0)}),{replaceMergeMainTypeMap:t}}dt(NS,GS);var t6=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],WF=function(){function e(t){_(t6,function(i){this[i]=Z(t[i],t)},this)}return e}(),Tg={},bh=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,i){var r=[];_(Tg,function(n,o){var s=n.create(t,i);r=r.concat(s||[])}),this._coordinateSystems=r},e.prototype.update=function(t,i){_(this._coordinateSystems,function(r){r.update&&r.update(t,i)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,i){Tg[t]=i},e.get=function(t){return Tg[t]},e}(),i6=/^(min|max)?(.+)$/,r6=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,i,r){t&&(_(ze(t.series),function(s){s&&s.data&&ci(s.data)&&Md(s.data)}),_(ze(t.dataset),function(s){s&&s.source&&ci(s.source)&&Md(s.source)})),t=ae(t);var n=this._optionBackup,o=n6(t,i,!n);this._newBaseOption=o.baseOption,n?(o.timelineOptions.length&&(n.timelineOptions=o.timelineOptions),o.mediaList.length&&(n.mediaList=o.mediaList),o.mediaDefault&&(n.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var i=this._optionBackup;return this._timelineOptions=i.timelineOptions,this._mediaList=i.mediaList,this._mediaDefault=i.mediaDefault,this._currentMediaIndices=[],ae(t?i.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var i,r=this._timelineOptions;if(r.length){var n=t.getComponent("timeline");n&&(i=ae(r[n.getCurrentIndex()]))}return i},e.prototype.getMediaOption=function(t){var i=this._api.getWidth(),r=this._api.getHeight(),n=this._mediaList,o=this._mediaDefault,s=[],a=[];if(!n.length&&!o)return a;for(var l=0,u=n.length;l<u;l++)o6(n[l].query,i,r)&&s.push(l);return!s.length&&o&&(s=[-1]),s.length&&!a6(s,this._currentMediaIndices)&&(a=z(s,function(h){return ae(h===-1?o.option:n[h].option)})),this._currentMediaIndices=s,a},e}();function n6(e,t,i){var r=[],n,o,s=e.baseOption,a=e.timeline,l=e.options,u=e.media,h=!!e.media,c=!!(l||a||s&&s.timeline);s?(o=s,o.timeline||(o.timeline=a)):((c||h)&&(e.options=e.media=null),o=e),h&&H(u)&&_(u,function(f){f&&f.option&&(f.query?r.push(f):n||(n=f))}),d(o),_(l,function(f){return d(f)}),_(r,function(f){return d(f.option)});function d(f){_(t,function(p){p(f,i)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:n,mediaList:r}}function o6(e,t,i){var r={width:t,height:i,aspectratio:t/i},n=!0;return _(e,function(o,s){var a=s.match(i6);if(!(!a||!a[1]||!a[2])){var l=a[1],u=a[2].toLowerCase();s6(r[u],o,l)||(n=!1)}}),n}function s6(e,t,i){return i==="min"?e>=t:i==="max"?e<=t:e===t}function a6(e,t){return e.join(",")===t.join(",")}var Ki=_,Ku=se,fx=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function _g(e){var t=e&&e.itemStyle;if(t)for(var i=0,r=fx.length;i<r;i++){var n=fx[i],o=t.normal,s=t.emphasis;o&&o[n]&&(e[n]=e[n]||{},e[n].normal?pe(e[n].normal,o[n]):e[n].normal=o[n],o[n]=null),s&&s[n]&&(e[n]=e[n]||{},e[n].emphasis?pe(e[n].emphasis,s[n]):e[n].emphasis=s[n],s[n]=null)}}function Lt(e,t,i){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,n=e[t].emphasis;r&&(i?(e[t].normal=e[t].emphasis=null,ne(e[t],r)):e[t]=r),n&&(e.emphasis=e.emphasis||{},e.emphasis[t]=n,n.focus&&(e.emphasis.focus=n.focus),n.blurScope&&(e.emphasis.blurScope=n.blurScope))}}function eu(e){Lt(e,"itemStyle"),Lt(e,"lineStyle"),Lt(e,"areaStyle"),Lt(e,"label"),Lt(e,"labelLine"),Lt(e,"upperLabel"),Lt(e,"edgeLabel")}function ut(e,t){var i=Ku(e)&&e[t],r=Ku(i)&&i.textStyle;if(r)for(var n=0,o=Cb.length;n<o;n++){var s=Cb[n];r.hasOwnProperty(s)&&(i[s]=r[s])}}function Pi(e){e&&(eu(e),ut(e,"label"),e.emphasis&&ut(e.emphasis,"label"))}function l6(e){if(Ku(e)){_g(e),eu(e),ut(e,"label"),ut(e,"upperLabel"),ut(e,"edgeLabel"),e.emphasis&&(ut(e.emphasis,"label"),ut(e.emphasis,"upperLabel"),ut(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(_g(t),Pi(t));var i=e.markLine;i&&(_g(i),Pi(i));var r=e.markArea;r&&Pi(r);var n=e.data;if(e.type==="graph"){n=n||e.nodes;var o=e.links||e.edges;if(o&&!ci(o))for(var s=0;s<o.length;s++)Pi(o[s]);_(e.categories,function(u){eu(u)})}if(n&&!ci(n))for(var s=0;s<n.length;s++)Pi(n[s]);if(t=e.markPoint,t&&t.data)for(var a=t.data,s=0;s<a.length;s++)Pi(a[s]);if(i=e.markLine,i&&i.data)for(var l=i.data,s=0;s<l.length;s++)H(l[s])?(Pi(l[s][0]),Pi(l[s][1])):Pi(l[s]);e.type==="gauge"?(ut(e,"axisLabel"),ut(e,"title"),ut(e,"detail")):e.type==="treemap"?(Lt(e.breadcrumb,"itemStyle"),_(e.levels,function(u){eu(u)})):e.type==="tree"&&eu(e.leaves)}}function Hr(e){return H(e)?e:e?[e]:[]}function px(e){return(H(e)?e[0]:e)||{}}function u6(e,t){Ki(Hr(e.series),function(r){Ku(r)&&l6(r)});var i=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&i.push("valueAxis","categoryAxis","logAxis","timeAxis"),Ki(i,function(r){Ki(Hr(e[r]),function(n){n&&(ut(n,"axisLabel"),ut(n.axisPointer,"label"))})}),Ki(Hr(e.parallel),function(r){var n=r&&r.parallelAxisDefault;ut(n,"axisLabel"),ut(n&&n.axisPointer,"label")}),Ki(Hr(e.calendar),function(r){Lt(r,"itemStyle"),ut(r,"dayLabel"),ut(r,"monthLabel"),ut(r,"yearLabel")}),Ki(Hr(e.radar),function(r){ut(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Ki(Hr(e.geo),function(r){Ku(r)&&(Pi(r),Ki(Hr(r.regions),function(n){Pi(n)}))}),Ki(Hr(e.timeline),function(r){Pi(r),Lt(r,"label"),Lt(r,"itemStyle"),Lt(r,"controlStyle",!0);var n=r.data;H(n)&&_(n,function(o){se(o)&&(Lt(o,"label"),Lt(o,"itemStyle"))})}),Ki(Hr(e.toolbox),function(r){Lt(r,"iconStyle"),Ki(r.feature,function(n){Lt(n,"iconStyle")})}),ut(px(e.axisPointer),"label"),ut(px(e.tooltip).axisPointer,"label")}function h6(e,t){for(var i=t.split(","),r=e,n=0;n<i.length&&(r=r&&r[i[n]],r!=null);n++);return r}function c6(e,t,i,r){for(var n=t.split(","),o=e,s,a=0;a<n.length-1;a++)s=n[a],o[s]==null&&(o[s]={}),o=o[s];o[n[a]]==null&&(o[n[a]]=i)}function gx(e){e&&_(d6,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var d6=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],f6=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Ag=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Tl(e){var t=e&&e.itemStyle;if(t)for(var i=0;i<Ag.length;i++){var r=Ag[i][1],n=Ag[i][0];t[r]!=null&&(t[n]=t[r])}}function vx(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function mx(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function p6(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function UF(e,t){if(e)for(var i=0;i<e.length;i++)t(e[i]),e[i]&&UF(e[i].children,t)}function $F(e,t){u6(e,t),e.series=ze(e.series),_(e.series,function(i){if(se(i)){var r=i.type;if(r==="line")i.clipOverflow!=null&&(i.clip=i.clipOverflow);else if(r==="pie"||r==="gauge"){i.clockWise!=null&&(i.clockwise=i.clockWise),vx(i.label);var n=i.data;if(n&&!ci(n))for(var o=0;o<n.length;o++)vx(n[o]);i.hoverOffset!=null&&(i.emphasis=i.emphasis||{},(i.emphasis.scaleSize=null)&&(i.emphasis.scaleSize=i.hoverOffset))}else if(r==="gauge"){var s=h6(i,"pointer.color");s!=null&&c6(i,"itemStyle.color",s)}else if(r==="bar"){Tl(i),Tl(i.backgroundStyle),Tl(i.emphasis);var n=i.data;if(n&&!ci(n))for(var o=0;o<n.length;o++)typeof n[o]=="object"&&(Tl(n[o]),Tl(n[o]&&n[o].emphasis))}else if(r==="sunburst"){var a=i.highlightPolicy;a&&(i.emphasis=i.emphasis||{},i.emphasis.focus||(i.emphasis.focus=a)),mx(i),UF(i.data,mx)}else r==="graph"||r==="sankey"?p6(i):r==="map"&&(i.mapType&&!i.map&&(i.map=i.mapType),i.mapLocation&&ne(i,i.mapLocation));i.hoverAnimation!=null&&(i.emphasis=i.emphasis||{},i.emphasis&&i.emphasis.scale==null&&(i.emphasis.scale=i.hoverAnimation)),gx(i)}}),e.dataRange&&(e.visualMap=e.dataRange),_(f6,function(i){var r=e[i];r&&(H(r)||(r=[r]),_(r,function(n){gx(n)}))})}function g6(e){var t=Q();e.eachSeries(function(i){var r=i.get("stack");if(r){var n=t.get(r)||t.set(r,[]),o=i.getData(),s={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:i};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;n.length&&o.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(s)}}),t.each(v6)}function v6(e){_(e,function(t,i){var r=[],n=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],s=t.data,a=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";s.modify(o,function(u,h,c){var d=s.get(t.stackedDimension,c);if(isNaN(d))return n;var f,p;a?p=s.getRawIndex(c):f=s.get(t.stackedByDimension,c);for(var g=NaN,v=i-1;v>=0;v--){var m=e[v];if(a||(p=m.data.rawIndexOf(m.stackedByDimension,f)),p>=0){var y=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&d>=0&&y>0||l==="samesign"&&d<=0&&y<0){d=d4(d,y),g=y;break}}}return r[0]=d,r[1]=g,r})})}var rp=function(){function e(t){this.data=t.data||(t.sourceFormat===Gr?{}:[]),this.sourceFormat=t.sourceFormat||GF,this.seriesLayoutBy=t.seriesLayoutBy||Pr,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var i=this.dimensionsDefine=t.dimensionsDefine;if(i)for(var r=0;r<i.length;r++){var n=i[r];n.type==null&&BF(this,r)===Dt.Must&&(n.type="ordinal")}}return e}();function VS(e){return e instanceof rp}function py(e,t,i){i=i||KF(e);var r=t.seriesLayoutBy,n=y6(e,i,r,t.sourceHeader,t.dimensions),o=new rp({data:e,sourceFormat:i,seriesLayoutBy:r,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:ae(t)});return o}function BS(e){return new rp({data:e,sourceFormat:ci(e)?Yn:Ui})}function m6(e){return new rp({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:ae(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function KF(e){var t=GF;if(ci(e))t=Yn;else if(H(e)){e.length===0&&(t=Gt);for(var i=0,r=e.length;i<r;i++){var n=e[i];if(n!=null){if(H(n)||ci(n)){t=Gt;break}else if(se(n)){t=$i;break}}}}else if(se(e)){for(var o in e)if(j(e,o)&&Ot(e[o])){t=Gr;break}}return t}function y6(e,t,i,r,n){var o,s;if(!e)return{dimensionsDefine:yx(n),startIndex:s,dimensionsDetectedCount:o};if(t===Gt){var a=e;r==="auto"||r==null?Cx(function(u){u!=null&&u!=="-"&&(q(u)?s==null&&(s=1):s=0)},i,a,10):s=Pe(r)?r:r?1:0,!n&&s===1&&(n=[],Cx(function(u,h){n[h]=u!=null?u+"":""},i,a,1/0)),o=n?n.length:i===al?a.length:a[0]?a[0].length:null}else if(t===$i)n||(n=C6(e));else if(t===Gr)n||(n=[],_(e,function(u,h){n.push(h)}));else if(t===Ui){var l=el(e[0]);o=H(l)&&l.length||1}return{startIndex:s,dimensionsDefine:yx(n),dimensionsDetectedCount:o}}function C6(e){for(var t=0,i;t<e.length&&!(i=e[t++]););if(i)return De(i)}function yx(e){if(e){var t=Q();return z(e,function(i,r){i=se(i)?i:{name:i};var n={name:i.name,displayName:i.displayName,type:i.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var o=t.get(n.name);return o?n.name+="-"+o.count++:t.set(n.name,{count:1}),n})}}function Cx(e,t,i,r){if(t===al)for(var n=0;n<i.length&&n<r;n++)e(i[n]?i[n][0]:null,n);else for(var o=i[0]||[],n=0;n<o.length&&n<r;n++)e(o[n],n)}function YF(e){var t=e.sourceFormat;return t===$i||t===Gr}var Po,Mo,Fo,Sx,bx,XF=function(){function e(t,i){var r=VS(t)?t:BS(t);this._source=r;var n=this._data=r.data;r.sourceFormat===Yn&&(this._offset=0,this._dimSize=i,this._data=n),bx(this,n,r)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,i){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;bx=function(s,a,l){var u=l.sourceFormat,h=l.seriesLayoutBy,c=l.startIndex,d=l.dimensionsDefine,f=Sx[HS(u,h)];if(V(s,f),u===Yn)s.getItem=i,s.count=n,s.fillStorage=r;else{var p=qF(u,h);s.getItem=Z(p,null,a,c,d);var g=ZF(u,h);s.count=Z(g,null,a,c,d)}};var i=function(s,a){s=s-this._offset,a=a||[];for(var l=this._data,u=this._dimSize,h=u*s,c=0;c<u;c++)a[c]=l[h+c];return a},r=function(s,a,l,u){for(var h=this._data,c=this._dimSize,d=0;d<c;d++){for(var f=u[d],p=f[0]==null?1/0:f[0],g=f[1]==null?-1/0:f[1],v=a-s,m=l[d],y=0;y<v;y++){var C=h[y*c+d];m[s+y]=C,C<p&&(p=C),C>g&&(g=C)}f[0]=p,f[1]=g}},n=function(){return this._data?this._data.length/this._dimSize:0};Sx=(t={},t[Gt+"_"+Pr]={pure:!0,appendData:o},t[Gt+"_"+al]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[$i]={pure:!0,appendData:o},t[Gr]={pure:!0,appendData:function(s){var a=this._data;_(s,function(l,u){for(var h=a[u]||(a[u]=[]),c=0;c<(l||[]).length;c++)h.push(l[c])})}},t[Ui]={appendData:o},t[Yn]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(s){for(var a=0;a<s.length;a++)this._data.push(s[a])}}(),e}(),xx=function(e,t,i,r){return e[r]},S6=(Po={},Po[Gt+"_"+Pr]=function(e,t,i,r){return e[r+t]},Po[Gt+"_"+al]=function(e,t,i,r,n){r+=t;for(var o=n||[],s=e,a=0;a<s.length;a++){var l=s[a];o[a]=l?l[r]:null}return o},Po[$i]=xx,Po[Gr]=function(e,t,i,r,n){for(var o=n||[],s=0;s<i.length;s++){var a=i[s].name,l=e[a];o[s]=l?l[r]:null}return o},Po[Ui]=xx,Po);function qF(e,t){var i=S6[HS(e,t)];return i}var Rx=function(e,t,i){return e.length},w6=(Mo={},Mo[Gt+"_"+Pr]=function(e,t,i){return Math.max(0,e.length-t)},Mo[Gt+"_"+al]=function(e,t,i){var r=e[0];return r?Math.max(0,r.length-t):0},Mo[$i]=Rx,Mo[Gr]=function(e,t,i){var r=i[0].name,n=e[r];return n?n.length:0},Mo[Ui]=Rx,Mo);function ZF(e,t){var i=w6[HS(e,t)];return i}var Pg=function(e,t,i){return e[t]},b6=(Fo={},Fo[Gt]=Pg,Fo[$i]=function(e,t,i){return e[i]},Fo[Gr]=Pg,Fo[Ui]=function(e,t,i){var r=el(e);return r instanceof Array?r[t]:r},Fo[Yn]=Pg,Fo);function jF(e){var t=b6[e];return t}function HS(e,t){return e===Gt?e+"_"+t:e}function Na(e,t,i){if(e){var r=e.getRawDataItem(t);if(r!=null){var n=e.getStore(),o=n.getSource().sourceFormat;if(i!=null){var s=e.getDimensionIndex(i),a=n.getDimensionProperty(s);return jF(o)(r,s,a)}else{var l=r;return o===Ui&&(l=el(r)),l}}}}var x6=/\{@(.+?)\}/g,np=function(){function e(){}return e.prototype.getDataParams=function(t,i){var r=this.getData(i),n=this.getRawValue(t,i),o=r.getRawIndex(t),s=r.getName(t),a=r.getRawDataItem(t),l=r.getItemVisual(t,"style"),u=l&&l[r.getItemVisual(t,"drawType")||"fill"],h=l&&l.stroke,c=this.mainType,d=c==="series",f=r.userOutput&&r.userOutput.get();return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:s,dataIndex:o,data:a,dataType:i,value:n,color:u,borderColor:h,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,i,r,n,o,s){i=i||"normal";var a=this.getData(r),l=this.getDataParams(t,r);if(s&&(l.value=s.interpolatedValue),n!=null&&H(l.value)&&(l.value=l.value[n]),!o){var u=a.getItemModel(t);o=u.get(i==="normal"?["label","formatter"]:[i,"label","formatter"])}if(ie(o))return l.status=i,l.dimensionIndex=n,o(l);if(q(o)){var h=EF(o,l);return h.replace(x6,function(c,d){var f=d.length,p=d;p.charAt(0)==="["&&p.charAt(f-1)==="]"&&(p=+p.slice(1,f-1));var g=Na(a,t,p);if(s&&H(s.interpolatedValue)){var v=a.getDimensionIndex(p);v>=0&&(g=s.interpolatedValue[v])}return g!=null?g+"":""})}},e.prototype.getRawValue=function(t,i){return Na(this.getData(i),t)},e.prototype.formatTooltip=function(t,i,r){},e}();function Dx(e){var t,i;return se(e)?e.type&&(i=e):t=e,{text:t,frag:i}}function wu(e){return new R6(e)}var R6=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var i=this._upstream,r=t&&t.skip;if(this._dirty&&i){var n=this.context;n.data=n.outputData=i.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!r&&(o=this._plan(this.context));var s=h(this._modBy),a=this._modDataCount||0,l=h(t&&t.modBy),u=t&&t.modDataCount||0;(s!==l||a!==u)&&(o="reset");function h(y){return!(y>=1)&&(y=1),y}var c;(this._dirty||o==="reset")&&(this._dirty=!1,c=this._doReset(r)),this._modBy=l,this._modDataCount=u;var d=t&&t.step;if(i?this._dueEnd=i._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,p=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!r&&(c||f<p)){var g=this._progress;if(H(g))for(var v=0;v<g.length;v++)this._doProgress(g[v],f,p,l,u);else this._doProgress(g,f,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,i,r,n,o){Tx.reset(i,r,n,o),this._callingProgress=t,this._callingProgress({start:i,end:r,count:r-i,next:Tx.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var i,r;!t&&this._reset&&(i=this._reset(this.context),i&&i.progress&&(r=i.forceFirstProgress,i=i.progress),H(i)&&!i.length&&(i=null)),this._progress=i,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),r},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),Tx=function(){var e,t,i,r,n,o={reset:function(l,u,h,c){t=l,e=u,i=h,r=c,n=Math.ceil(r/i),o.next=i>1&&r>0?a:s}};return o;function s(){return t<e?t++:null}function a(){var l=t%n*i+Math.ceil(t/n),u=t>=e?null:l<r?l:t;return t++,u}}();function Xn(e,t){var i=t&&t.type;return i==="ordinal"?e:(i==="time"&&!Pe(e)&&e!=null&&e!=="-"&&(e=+kr(e)),e==null||e===""?NaN:Number(e))}var D6=Q({number:function(e){return parseFloat(e)},time:function(e){return+kr(e)},trim:function(e){return q(e)?Ji(e):e}});function QF(e){return D6.get(e)}var JF={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},T6=function(){function e(t,i){if(!Pe(i)){var r="";Ie(r)}this._opFn=JF[t],this._rvalFloat=sn(i)}return e.prototype.evaluate=function(t){return Pe(t)?this._opFn(t,this._rvalFloat):this._opFn(sn(t),this._rvalFloat)},e}(),eE=function(){function e(t,i){var r=t==="desc";this._resultLT=r?1:-1,i==null&&(i=r?"min":"max"),this._incomparable=i==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,i){var r=Pe(t)?t:sn(t),n=Pe(i)?i:sn(i),o=isNaN(r),s=isNaN(n);if(o&&(r=this._incomparable),s&&(n=this._incomparable),o&&s){var a=q(t),l=q(i);a&&(r=l?t:0),l&&(n=a?i:0)}return r<n?this._resultLT:r>n?-this._resultLT:0},e}(),_6=function(){function e(t,i){this._rval=i,this._isEQ=t,this._rvalTypeof=typeof i,this._rvalFloat=sn(i)}return e.prototype.evaluate=function(t){var i=t===this._rval;if(!i){var r=typeof t;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(i=sn(t)===this._rvalFloat)}return this._isEQ?i:!i},e}();function A6(e,t){return e==="eq"||e==="ne"?new _6(e==="eq",t):j(JF,e)?new T6(e,t):null}var P6=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,i){},e.prototype.retrieveValueFromItem=function(t,i){},e.prototype.convertValue=function(t,i){return Xn(t,i)},e}();function M6(e,t){var i=new P6,r=e.data,n=i.sourceFormat=e.sourceFormat,o=e.startIndex,s="";e.seriesLayoutBy!==Pr&&Ie(s);var a=[],l={},u=e.dimensionsDefine;if(u)_(u,function(g,v){var m=g.name,y={index:v,name:m,displayName:g.displayName};if(a.push(y),m!=null){var C="";j(l,m)&&Ie(C),l[m]=y}});else for(var h=0;h<e.dimensionsDetectedCount;h++)a.push({index:h});var c=qF(n,Pr);t.__isBuiltIn&&(i.getRawDataItem=function(g){return c(r,o,a,g)},i.getRawData=Z(F6,null,e)),i.cloneRawData=Z(E6,null,e);var d=ZF(n,Pr);i.count=Z(d,null,r,o,a);var f=jF(n);i.retrieveValue=function(g,v){var m=c(r,o,a,g);return p(m,v)};var p=i.retrieveValueFromItem=function(g,v){if(g!=null){var m=a[v];if(m)return f(g,v,m.name)}};return i.getDimensionInfo=Z(I6,null,a,l),i.cloneAllDimensionInfo=Z(L6,null,a),i}function F6(e){var t=e.sourceFormat;if(!zS(t)){var i="";Ie(i)}return e.data}function E6(e){var t=e.sourceFormat,i=e.data;if(!zS(t)){var r="";Ie(r)}if(t===Gt){for(var n=[],o=0,s=i.length;o<s;o++)n.push(i[o].slice());return n}else if(t===$i){for(var n=[],o=0,s=i.length;o<s;o++)n.push(V({},i[o]));return n}}function I6(e,t,i){if(i!=null){if(Pe(i)||!isNaN(i)&&!j(t,i))return e[i];if(j(t,i))return t[i]}}function L6(e){return ae(e)}var tE=Q();function k6(e){e=ae(e);var t=e.type,i="";t||Ie(i);var r=t.split(":");r.length!==2&&Ie(i);var n=!1;r[0]==="echarts"&&(t=r[1],n=!0),e.__isBuiltIn=n,tE.set(t,e)}function O6(e,t,i){var r=ze(e),n=r.length,o="";n||Ie(o);for(var s=0,a=n;s<a;s++){var l=r[s];t=G6(l,t),s!==a-1&&(t.length=Math.max(t.length,1))}return t}function G6(e,t,i,r){var n="";t.length||Ie(n),se(e)||Ie(n);var o=e.type,s=tE.get(o);s||Ie(n);var a=z(t,function(u){return M6(u,s)}),l=ze(s.transform({upstream:a[0],upstreamList:a,config:ae(e.config)}));return z(l,function(u,h){var c="";se(u)||Ie(c),u.data||Ie(c);var d=KF(u.data);zS(d)||Ie(c);var f,p=t[0];if(p&&h===0&&!u.dimensions){var g=p.startIndex;g&&(u.data=p.data.slice(0,g).concat(u.data)),f={seriesLayoutBy:Pr,sourceHeader:g,dimensions:p.metaRawOption.dimensions}}else f={seriesLayoutBy:Pr,sourceHeader:0,dimensions:u.dimensions};return py(u.data,f,null)})}function zS(e){return e===Gt||e===$i}var op="undefined",N6=typeof Uint32Array===op?Array:Uint32Array,V6=typeof Uint16Array===op?Array:Uint16Array,iE=typeof Int32Array===op?Array:Int32Array,_x=typeof Float64Array===op?Array:Float64Array,rE={float:_x,int:iE,ordinal:Array,number:Array,time:_x},Mg;function js(e){return e>65535?N6:V6}function Qs(){return[1/0,-1/0]}function B6(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function Ax(e,t,i,r,n){var o=rE[i||"float"];if(n){var s=e[t],a=s&&s.length;if(a!==r){for(var l=new o(r),u=0;u<a;u++)l[u]=s[u];e[t]=l}}else e[t]=new o(r)}var gy=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Q()}return e.prototype.initData=function(t,i,r){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=t.getSource(),o=this.defaultDimValueGetter=Mg[n.sourceFormat];this._dimValueGetter=r||o,this._rawExtent=[],YF(n),this._dimensions=z(i,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,i){var r=this._calcDimNameToIdx,n=this._dimensions,o=r.get(t);if(o!=null){if(n[o].type===i)return o}else o=n.length;return n[o]={type:i},r.set(t,o),this._chunks[o]=new rE[i||"float"](this._rawCount),this._rawExtent[o]=Qs(),o},e.prototype.collectOrdinalMeta=function(t,i){var r=this._chunks[t],n=this._dimensions[t],o=this._rawExtent,s=n.ordinalOffset||0,a=r.length;s===0&&(o[t]=Qs());for(var l=o[t],u=s;u<a;u++){var h=r[u]=i.parseAndCollect(r[u]);isNaN(h)||(l[0]=Math.min(h,l[0]),l[1]=Math.max(h,l[1]))}n.ordinalMeta=i,n.ordinalOffset=a,n.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var i=this._dimensions[t],r=i.ordinalMeta;return r},e.prototype.getDimensionProperty=function(t){var i=this._dimensions[t];return i&&i.property},e.prototype.appendData=function(t){var i=this._provider,r=this.count();i.appendData(t);var n=i.count();return i.persistent||(n+=r),r<n&&this._initDataFromProvider(r,n,!0),[r,n]},e.prototype.appendValues=function(t,i){for(var r=this._chunks,n=this._dimensions,o=n.length,s=this._rawExtent,a=this.count(),l=a+Math.max(t.length,i||0),u=0;u<o;u++){var h=n[u];Ax(r,u,h.type,l,!0)}for(var c=[],d=a;d<l;d++)for(var f=d-a,p=0;p<o;p++){var h=n[p],g=Mg.arrayRows.call(this,t[f]||c,h.property,f,p);r[p][d]=g;var v=s[p];g<v[0]&&(v[0]=g),g>v[1]&&(v[1]=g)}return this._rawCount=this._count=l,{start:a,end:l}},e.prototype._initDataFromProvider=function(t,i,r){for(var n=this._provider,o=this._chunks,s=this._dimensions,a=s.length,l=this._rawExtent,u=z(s,function(y){return y.property}),h=0;h<a;h++){var c=s[h];l[h]||(l[h]=Qs()),Ax(o,h,c.type,i,r)}if(n.fillStorage)n.fillStorage(t,i,o,l);else for(var d=[],f=t;f<i;f++){d=n.getItem(f,d);for(var p=0;p<a;p++){var g=o[p],v=this._dimValueGetter(d,u[p],f,p);g[f]=v;var m=l[p];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=i,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,i){if(!(i>=0&&i<this._count))return NaN;var r=this._chunks[t];return r?r[this.getRawIndex(i)]:NaN},e.prototype.getValues=function(t,i){var r=[],n=[];if(i==null){i=t,t=[];for(var o=0;o<this._dimensions.length;o++)n.push(o)}else n=t;for(var o=0,s=n.length;o<s;o++)r.push(this.get(n[o],i));return r},e.prototype.getByRawIndex=function(t,i){if(!(i>=0&&i<this._rawCount))return NaN;var r=this._chunks[t];return r?r[i]:NaN},e.prototype.getSum=function(t){var i=this._chunks[t],r=0;if(i)for(var n=0,o=this.count();n<o;n++){var s=this.get(t,n);isNaN(s)||(r+=s)}return r},e.prototype.getMedian=function(t){var i=[];this.each([t],function(o){isNaN(o)||i.push(o)});var r=i.sort(function(o,s){return o-s}),n=this.count();return n===0?0:n%2===1?r[(n-1)/2]:(r[n/2]+r[n/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var i=this._indices,r=i[t];if(r!=null&&r<this._count&&r===t)return t;for(var n=0,o=this._count-1;n<=o;){var s=(n+o)/2|0;if(i[s]<t)n=s+1;else if(i[s]>t)o=s-1;else return s}return-1},e.prototype.indicesOfNearest=function(t,i,r){var n=this._chunks,o=n[t],s=[];if(!o)return s;r==null&&(r=1/0);for(var a=1/0,l=-1,u=0,h=0,c=this.count();h<c;h++){var d=this.getRawIndex(h),f=i-o[d],p=Math.abs(f);p<=r&&((p<a||p===a&&f>=0&&l<0)&&(a=p,l=f,u=0),f===l&&(s[u++]=h))}return s.length=u,s},e.prototype.getIndices=function(){var t,i=this._indices;if(i){var r=i.constructor,n=this._count;if(r===Array){t=new r(n);for(var o=0;o<n;o++)t[o]=i[o]}else t=new r(i.buffer,0,n)}else{var r=js(this._rawCount);t=new r(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,i){if(!this._count)return this;for(var r=this.clone(),n=r.count(),o=js(r._rawCount),s=new o(n),a=[],l=t.length,u=0,h=t[0],c=r._chunks,d=0;d<n;d++){var f=void 0,p=r.getRawIndex(d);if(l===0)f=i(d);else if(l===1){var g=c[h][p];f=i(g,d)}else{for(var v=0;v<l;v++)a[v]=c[t[v]][p];a[v]=d,f=i.apply(null,a)}f&&(s[u++]=p)}return u<n&&(r._indices=s),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.selectRange=function(t){var i=this.clone(),r=i._count;if(!r)return this;var n=De(t),o=n.length;if(!o)return this;var s=i.count(),a=js(i._rawCount),l=new a(s),u=0,h=n[0],c=t[h][0],d=t[h][1],f=i._chunks,p=!1;if(!i._indices){var g=0;if(o===1){for(var v=f[n[0]],m=0;m<r;m++){var y=v[m];(y>=c&&y<=d||isNaN(y))&&(l[u++]=g),g++}p=!0}else if(o===2){for(var v=f[n[0]],C=f[n[1]],S=t[n[1]][0],b=t[n[1]][1],m=0;m<r;m++){var y=v[m],w=C[m];(y>=c&&y<=d||isNaN(y))&&(w>=S&&w<=b||isNaN(w))&&(l[u++]=g),g++}p=!0}}if(!p)if(o===1)for(var m=0;m<s;m++){var x=i.getRawIndex(m),y=f[n[0]][x];(y>=c&&y<=d||isNaN(y))&&(l[u++]=x)}else for(var m=0;m<s;m++){for(var R=!0,x=i.getRawIndex(m),D=0;D<o;D++){var T=n[D],y=f[T][x];(y<t[T][0]||y>t[T][1])&&(R=!1)}R&&(l[u++]=i.getRawIndex(m))}return u<s&&(i._indices=l),i._count=u,i._extent=[],i._updateGetRawIdx(),i},e.prototype.map=function(t,i){var r=this.clone(t);return this._updateDims(r,t,i),r},e.prototype.modify=function(t,i){this._updateDims(this,t,i)},e.prototype._updateDims=function(t,i,r){for(var n=t._chunks,o=[],s=i.length,a=t.count(),l=[],u=t._rawExtent,h=0;h<i.length;h++)u[i[h]]=Qs();for(var c=0;c<a;c++){for(var d=t.getRawIndex(c),f=0;f<s;f++)l[f]=n[i[f]][d];l[s]=c;var p=r&&r.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var h=0;h<p.length;h++){var g=i[h],v=p[h],m=u[g],y=n[g];y&&(y[d]=v),v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}}},e.prototype.lttbDownSample=function(t,i){var r=this.clone([t],!0),n=r._chunks,o=n[t],s=this.count(),a=0,l=Math.floor(1/i),u=this.getRawIndex(0),h,c,d,f=new(js(this._rawCount))(Math.min((Math.ceil(s/l)+2)*2,s));f[a++]=u;for(var p=1;p<s-1;p+=l){for(var g=Math.min(p+l,s-1),v=Math.min(p+l*2,s),m=(v+g)/2,y=0,C=g;C<v;C++){var S=this.getRawIndex(C),b=o[S];isNaN(b)||(y+=b)}y/=v-g;var w=p,x=Math.min(p+l,s),R=p-1,D=o[u];h=-1,d=w;for(var T=-1,A=0,C=w;C<x;C++){var S=this.getRawIndex(C),b=o[S];if(isNaN(b)){A++,T<0&&(T=S);continue}c=Math.abs((R-m)*(b-D)-(R-C)*(y-D)),c>h&&(h=c,d=S)}A>0&&A<x-w&&(f[a++]=Math.min(T,d),d=Math.max(T,d)),f[a++]=d,u=d}return f[a++]=this.getRawIndex(s-1),r._count=a,r._indices=f,r.getRawIndex=this._getRawIdx,r},e.prototype.minmaxDownSample=function(t,i){for(var r=this.clone([t],!0),n=r._chunks,o=Math.floor(1/i),s=n[t],a=this.count(),l=new(js(this._rawCount))(Math.ceil(a/o)*2),u=0,h=0;h<a;h+=o){var c=h,d=s[this.getRawIndex(c)],f=h,p=s[this.getRawIndex(f)],g=o;h+o>a&&(g=a-h);for(var v=0;v<g;v++){var m=this.getRawIndex(h+v),y=s[m];y<d&&(d=y,c=h+v),y>p&&(p=y,f=h+v)}var C=this.getRawIndex(c),S=this.getRawIndex(f);c<f?(l[u++]=C,l[u++]=S):(l[u++]=S,l[u++]=C)}return r._count=u,r._indices=l,r._updateGetRawIdx(),r},e.prototype.downSample=function(t,i,r,n){for(var o=this.clone([t],!0),s=o._chunks,a=[],l=Math.floor(1/i),u=s[t],h=this.count(),c=o._rawExtent[t]=Qs(),d=new(js(this._rawCount))(Math.ceil(h/l)),f=0,p=0;p<h;p+=l){l>h-p&&(l=h-p,a.length=l);for(var g=0;g<l;g++){var v=this.getRawIndex(p+g);a[g]=u[v]}var m=r(a),y=this.getRawIndex(Math.min(p+n(a,m)||0,h-1));u[y]=m,m<c[0]&&(c[0]=m),m>c[1]&&(c[1]=m),d[f++]=y}return o._count=f,o._indices=d,o._updateGetRawIdx(),o},e.prototype.each=function(t,i){if(this._count)for(var r=t.length,n=this._chunks,o=0,s=this.count();o<s;o++){var a=this.getRawIndex(o);switch(r){case 0:i(o);break;case 1:i(n[t[0]][a],o);break;case 2:i(n[t[0]][a],n[t[1]][a],o);break;default:for(var l=0,u=[];l<r;l++)u[l]=n[t[l]][a];u[l]=o,i.apply(null,u)}}},e.prototype.getDataExtent=function(t){var i=this._chunks[t],r=Qs();if(!i)return r;var n=this.count(),o=!this._indices,s;if(o)return this._rawExtent[t].slice();if(s=this._extent[t],s)return s.slice();s=r;for(var a=s[0],l=s[1],u=0;u<n;u++){var h=this.getRawIndex(u),c=i[h];c<a&&(a=c),c>l&&(l=c)}return s=[a,l],this._extent[t]=s,s},e.prototype.getRawDataItem=function(t){var i=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(i);for(var r=[],n=this._chunks,o=0;o<n.length;o++)r.push(n[o][i]);return r},e.prototype.clone=function(t,i){var r=new e,n=this._chunks,o=t&&Er(t,function(a,l){return a[l]=!0,a},{});if(o)for(var s=0;s<n.length;s++)r._chunks[s]=o[s]?B6(n[s]):n[s];else r._chunks=n;return this._copyCommonProps(r),i||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=ae(this._extent),t._rawExtent=ae(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,i=void 0;if(t===Array){var r=this._indices.length;i=new t(r);for(var n=0;n<r;n++)i[n]=this._indices[n]}else i=new t(this._indices);return i}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(i,r,n,o){return Xn(i[o],this._dimensions[o])}Mg={arrayRows:t,objectRows:function(i,r,n,o){return Xn(i[r],this._dimensions[o])},keyedColumns:t,original:function(i,r,n,o){var s=i&&(i.value==null?i:i.value);return Xn(s instanceof Array?s[o]:s,this._dimensions[o])},typedArray:function(i,r,n,o){return i[o]}}}(),e}(),nE=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,i){this._sourceList=t,this._upstreamSignList=i,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,i=this._getUpstreamSourceManagers(),r=!!i.length,n,o;if(uc(t)){var s=t,a=void 0,l=void 0,u=void 0;if(r){var h=i[0];h.prepareSource(),u=h.getSource(),a=u.data,l=u.sourceFormat,o=[h._getVersionSign()]}else a=s.get("data",!0),l=ci(a)?Yn:Ui,o=[];var c=this._getSourceMetaRawOption()||{},d=u&&u.metaRawOption||{},f=de(c.seriesLayoutBy,d.seriesLayoutBy)||null,p=de(c.sourceHeader,d.sourceHeader),g=de(c.dimensions,d.dimensions),v=f!==d.seriesLayoutBy||!!p!=!!d.sourceHeader||g;n=v?[py(a,{seriesLayoutBy:f,sourceHeader:p,dimensions:g},l)]:[]}else{var m=t;if(r){var y=this._applyTransform(i);n=y.sourceList,o=y.upstreamSignList}else{var C=m.get("source",!0);n=[py(C,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(n,o)},e.prototype._applyTransform=function(t){var i=this._sourceHost,r=i.get("transform",!0),n=i.get("fromTransformResult",!0);if(n!=null){var o="";t.length!==1&&Mx(o)}var s,a=[],l=[];return _(t,function(u){u.prepareSource();var h=u.getSource(n||0),c="";n!=null&&!h&&Mx(c),a.push(h),l.push(u._getVersionSign())}),r?s=O6(r,a,{datasetIndex:i.componentIndex}):n!=null&&(s=[m6(a[0])]),{sourceList:s,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),i=0;i<t.length;i++){var r=t[i];if(r._isDirty()||this._upstreamSignList[i]!==r._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var i=this._sourceList[t];if(!i){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(t)}return i},e.prototype.getSharedDataStore=function(t){var i=t.makeStoreSchema();return this._innerGetDataStore(i.dimensions,t.source,i.hash)},e.prototype._innerGetDataStore=function(t,i,r){var n=0,o=this._storeList,s=o[n];s||(s=o[n]={});var a=s[r];if(!a){var l=this._getUpstreamSourceManagers()[0];uc(this._sourceHost)&&l?a=l._innerGetDataStore(t,i,r):(a=new gy,a.initData(new XF(i,t.length),t)),s[r]=a}return a},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(uc(t)){var i=OS(t);return i?[i.getSourceManager()]:[]}else return z(KY(t),function(r){return r.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,i,r,n;if(uc(t))i=t.get("seriesLayoutBy",!0),r=t.get("sourceHeader",!0),n=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;i=o.get("seriesLayoutBy",!0),r=o.get("sourceHeader",!0),n=o.get("dimensions",!0)}return{seriesLayoutBy:i,sourceHeader:r,dimensions:n}},e}();function Px(e){var t=e.option.transform;t&&Md(e.option.transform)}function uc(e){return e.mainType==="series"}function Mx(e){throw new Error(e)}var H6="line-height:1";function oE(e){var t=e.lineHeight;return t==null?H6:"line-height:"+$t(t+"")+"px"}function sE(e,t){var i=e.color||"#6e7079",r=e.fontSize||12,n=e.fontWeight||"400",o=e.color||"#464646",s=e.fontSize||14,a=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+$t(r+"")+"px;color:"+$t(i)+";font-weight:"+$t(n+""),valueStyle:"font-size:"+$t(s+"")+"px;color:"+$t(o)+";font-weight:"+$t(a+"")}:{nameStyle:{fontSize:r,fill:i,fontWeight:n},valueStyle:{fontSize:s,fill:o,fontWeight:a}}}var z6=[0,10,20,30],W6=["",`
`,`

`,`


`];function wt(e,t){return t.type=e,t}function vy(e){return e.type==="section"}function aE(e){return vy(e)?U6:$6}function lE(e){if(vy(e)){var t=0,i=e.blocks.length,r=i>1||i>0&&!e.noHeader;return _(e.blocks,function(n){var o=lE(n);o>=t&&(t=o+ +(r&&(!o||vy(n)&&!n.noHeader)))}),t}return 0}function U6(e,t,i,r){var n=t.noHeader,o=K6(lE(t)),s=[],a=t.blocks||[];jt(!a||H(a)),a=a||[];var l=e.orderMode;if(t.sortBlocks&&l){a=a.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(j(u,l)){var h=new eE(u[l],null);a.sort(function(g,v){return h.evaluate(g.sortParam,v.sortParam)})}else l==="seriesDesc"&&a.reverse()}_(a,function(g,v){var m=t.valueFormatter,y=aE(g)(m?V(V({},e),{valueFormatter:m}):e,g,v>0?o.html:0,r);y!=null&&s.push(y)});var c=e.renderMode==="richText"?s.join(o.richText):my(r,s.join(""),n?i:o.html);if(n)return c;var d=cy(t.header,"ordinal",e.useUTC),f=sE(r,e.renderMode).nameStyle,p=oE(r);return e.renderMode==="richText"?uE(e,d,f)+o.richText+c:my(r,'<div style="'+f+";"+p+';">'+$t(d)+"</div>"+c,i)}function $6(e,t,i,r){var n=e.renderMode,o=t.noName,s=t.noValue,a=!t.markerType,l=t.name,u=e.useUTC,h=t.valueFormatter||e.valueFormatter||function(S){return S=H(S)?S:[S],z(S,function(b,w){return cy(b,H(f)?f[w]:f,u)})};if(!(o&&s)){var c=a?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",n),d=o?"":cy(l,"ordinal",u),f=t.valueType,p=s?[]:h(t.value,t.dataIndex),g=!a||!o,v=!a&&o,m=sE(r,n),y=m.nameStyle,C=m.valueStyle;return n==="richText"?(a?"":c)+(o?"":uE(e,d,y))+(s?"":q6(e,p,g,v,C)):my(r,(a?"":c)+(o?"":Y6(d,!a,y))+(s?"":X6(p,g,v,C)),i)}}function Fx(e,t,i,r,n,o){if(e){var s=aE(e),a={useUTC:n,renderMode:i,orderMode:r,markupStyleCreator:t,valueFormatter:e.valueFormatter};return s(a,e,0,o)}}function K6(e){return{html:z6[e],richText:W6[e]}}function my(e,t,i){var r='<div style="clear:both"></div>',n="margin: "+i+"px 0 0",o=oE(e);return'<div style="'+n+";"+o+';">'+t+r+"</div>"}function Y6(e,t,i){var r=t?"margin-left:2px":"";return'<span style="'+i+";"+r+'">'+$t(e)+"</span>"}function X6(e,t,i,r){var n=i?"10px":"20px",o=t?"float:right;margin-left:"+n:"";return e=H(e)?e:[e],'<span style="'+o+";"+r+'">'+z(e,function(s){return $t(s)}).join("&nbsp;&nbsp;")+"</span>"}function uE(e,t,i){return e.markupStyleCreator.wrapRichTextStyle(t,i)}function q6(e,t,i,r,n){var o=[n],s=r?10:20;return i&&o.push({padding:[0,0,0,s],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(H(t)?t.join("  "):t,o)}function hE(e,t){var i=e.getData().getItemVisual(t,"style"),r=i[e.visualDrawType];return Ts(r)}function cE(e,t){var i=e.get("padding");return i??(t==="richText"?[8,10]:10)}var Fg=function(){function e(){this.richTextStyles={},this._nextStyleNameId=T1()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,i,r){var n=r==="richText"?this._generateStyleName():null,o=VY({color:i,type:t,renderMode:r,markerId:n});return q(o)?o:(this.richTextStyles[n]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,i){var r={};H(i)?_(i,function(o){return V(r,o)}):V(r,i);var n=this._generateStyleName();return this.richTextStyles[n]=r,"{"+n+"|"+t+"}"},e}();function dE(e){var t=e.series,i=e.dataIndex,r=e.multipleSeries,n=t.getData(),o=n.mapDimensionsAll("defaultedTooltip"),s=o.length,a=t.getRawValue(i),l=H(a),u=hE(t,i),h,c,d,f;if(s>1||l&&!s){var p=Z6(a,t,i,o,u);h=p.inlineValues,c=p.inlineValueTypes,d=p.blocks,f=p.inlineValues[0]}else if(s){var g=n.getDimensionInfo(o[0]);f=h=Na(n,i,o[0]),c=g.type}else f=h=l?a[0]:a;var v=pS(t),m=v&&t.name||"",y=n.getName(i),C=r?m:y;return wt("section",{header:m,noHeader:r||!v,sortParam:f,blocks:[wt("nameValue",{markerType:"item",markerColor:u,name:C,noName:!Ji(C),value:h,valueType:c,dataIndex:i})].concat(d||[])})}function Z6(e,t,i,r,n){var o=t.getData(),s=Er(e,function(c,d,f){var p=o.getDimensionInfo(f);return c=c||p&&p.tooltip!==!1&&p.displayName!=null},!1),a=[],l=[],u=[];r.length?_(r,function(c){h(Na(o,i,c),c)}):_(e,h);function h(c,d){var f=o.getDimensionInfo(d);!f||f.otherDims.tooltip===!1||(s?u.push(wt("nameValue",{markerType:"subItem",markerColor:n,name:f.displayName,value:c,valueType:f.type})):(a.push(c),l.push(f.type)))}return{inlineValues:a,inlineValueTypes:l,blocks:u}}var Rn=_e();function hc(e,t){return e.getName(t)||e.getId(t)}var ld="__universalTransitionEnabled",qe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i._selectedDataIndicesMap={},i}return t.prototype.init=function(i,r,n){this.seriesIndex=this.componentIndex,this.dataTask=wu({count:Q6,reset:J6}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(i,n);var o=Rn(this).sourceManager=new nE(this);o.prepareSource();var s=this.getInitialData(i,n);Ix(s,this),this.dataTask.context.data=s,Rn(this).dataBeforeProcessed=s,Ex(this),this._initSelectedMapFromData(s)},t.prototype.mergeDefaultAndTheme=function(i,r){var n=$u(this),o=n?sl(i):{},s=this.subType;Re.hasClass(s)&&(s+="Series"),pe(i,r.getTheme().get(this.subType)),pe(i,this.getDefaultOption()),bs(i,"label",["show"]),this.fillDataTextStyle(i.data),n&&ro(i,o,n)},t.prototype.mergeOption=function(i,r){i=pe(this.option,i,!0),this.fillDataTextStyle(i.data);var n=$u(this);n&&ro(this.option,i,n);var o=Rn(this).sourceManager;o.dirty(),o.prepareSource();var s=this.getInitialData(i,r);Ix(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,Rn(this).dataBeforeProcessed=s,Ex(this),this._initSelectedMapFromData(s)},t.prototype.fillDataTextStyle=function(i){if(i&&!ci(i))for(var r=["show"],n=0;n<i.length;n++)i[n]&&i[n].label&&bs(i[n],"label",r)},t.prototype.getInitialData=function(i,r){},t.prototype.appendData=function(i){var r=this.getRawData();r.appendData(i.data)},t.prototype.getData=function(i){var r=yy(this);if(r){var n=r.context.data;return i==null||!n.getLinkedData?n:n.getLinkedData(i)}else return Rn(this).data},t.prototype.getAllData=function(){var i=this.getData();return i&&i.getLinkedDataAll?i.getLinkedDataAll():[{data:i}]},t.prototype.setData=function(i){var r=yy(this);if(r){var n=r.context;n.outputData=i,r!==this.dataTask&&(n.data=i)}Rn(this).data=i},t.prototype.getEncode=function(){var i=this.get("encode",!0);if(i)return Q(i)},t.prototype.getSourceManager=function(){return Rn(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Rn(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var i=this.get("colorBy");return i||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var i=this.coordinateSystem;return i&&i.getBaseAxis&&i.getBaseAxis()},t.prototype.formatTooltip=function(i,r,n){return dE({series:this,dataIndex:i,multipleSeries:r})},t.prototype.isAnimationEnabled=function(){var i=this.ecModel;if(xe.node&&!(i&&i.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(i,r,n){var o=this.ecModel,s=GS.prototype.getColorFromPalette.call(this,i,r,n);return s||(s=o.getColorFromPalette(i,r,n)),s},t.prototype.coordDimToDataDim=function(i){return this.getRawData().mapDimensionsAll(i)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(i,r){this._innerSelect(this.getData(r),i)},t.prototype.unselect=function(i,r){var n=this.option.selectedMap;if(n){var o=this.option.selectedMode,s=this.getData(r);if(o==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var a=0;a<i.length;a++){var l=i[a],u=hc(s,l);n[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(i,r){for(var n=[],o=0;o<i.length;o++)n[0]=i[o],this.isSelected(i[o],r)?this.unselect(n,r):this.select(n,r)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var i=this._selectedDataIndicesMap,r=De(i),n=[],o=0;o<r.length;o++){var s=i[r[o]];s>=0&&n.push(s)}return n},t.prototype.isSelected=function(i,r){var n=this.option.selectedMap;if(!n)return!1;var o=this.getData(r);return(n==="all"||n[hc(o,i)])&&!o.getItemModel(i).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[ld])return!0;var i=this.option.universalTransition;return i?i===!0?!0:i&&i.enabled:!1},t.prototype._innerSelect=function(i,r){var n,o,s=this.option,a=s.selectedMode,l=r.length;if(!(!a||!l)){if(a==="series")s.selectedMap="all";else if(a==="multiple"){se(s.selectedMap)||(s.selectedMap={});for(var u=s.selectedMap,h=0;h<l;h++){var c=r[h],d=hc(i,c);u[d]=!0,this._selectedDataIndicesMap[d]=i.getRawIndex(c)}}else if(a==="single"||a===!0){var f=r[l-1],d=hc(i,f);s.selectedMap=(n={},n[d]=!0,n),this._selectedDataIndicesMap=(o={},o[d]=i.getRawIndex(f),o)}}},t.prototype._initSelectedMapFromData=function(i){if(!this.option.selectedMap){var r=[];i.hasItemOption&&i.each(function(n){var o=i.getRawDataItem(n);o&&o.selected&&r.push(n)}),r.length>0&&this._innerSelect(i,r)}},t.registerClass=function(i){return Re.registerClass(i)},t.protoInitialize=function(){var i=t.prototype;i.type="series.__base__",i.seriesIndex=0,i.ignoreStyleOnData=!1,i.hasSymbolVisual=!1,i.defaultSymbol="circle",i.visualStyleAccessPath="itemStyle",i.visualDrawType="fill"}(),t}(Re);dt(qe,np);dt(qe,GS);k1(qe,Re);function Ex(e){var t=e.name;pS(e)||(e.name=j6(e)||t)}function j6(e){var t=e.getRawData(),i=t.mapDimensionsAll("seriesName"),r=[];return _(i,function(n){var o=t.getDimensionInfo(n);o.displayName&&r.push(o.displayName)}),r.join(" ")}function Q6(e){return e.model.getRawData().count()}function J6(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),eX}function eX(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function Ix(e,t){_(ku(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(i){e.wrapMethod(i,fe(tX,t))})}function tX(e,t){var i=yy(e);return i&&i.setOutputEnd((t||this).count()),t}function yy(e){var t=(e.ecModel||{}).scheduler,i=t&&t.getPipeline(e.uid);if(i){var r=i.currentTask;if(r){var n=r.agentStubMap;n&&(r=n.get(e.uid))}return r}}var Qe=function(){function e(){this.group=new le,this.uid=nl("viewComponent")}return e.prototype.init=function(t,i){},e.prototype.render=function(t,i,r,n){},e.prototype.dispose=function(t,i){},e.prototype.updateView=function(t,i,r,n){},e.prototype.updateLayout=function(t,i,r,n){},e.prototype.updateVisual=function(t,i,r,n){},e.prototype.toggleBlurSeries=function(t,i,r){},e.prototype.eachRendered=function(t){var i=this.group;i&&i.traverse(t)},e}();vS(Qe);Bf(Qe);function ll(){var e=_e();return function(t){var i=e(t),r=t.pipelineContext,n=!!i.large,o=!!i.progressiveRender,s=i.large=!!(r&&r.large),a=i.progressiveRender=!!(r&&r.progressiveRender);return(n!==s||o!==a)&&"reset"}}var fE=_e(),iX=ll(),We=function(){function e(){this.group=new le,this.uid=nl("viewChart"),this.renderTask=wu({plan:rX,reset:nX}),this.renderTask.context={view:this}}return e.prototype.init=function(t,i){},e.prototype.render=function(t,i,r,n){},e.prototype.highlight=function(t,i,r,n){var o=t.getData(n&&n.dataType);o&&kx(o,n,"emphasis")},e.prototype.downplay=function(t,i,r,n){var o=t.getData(n&&n.dataType);o&&kx(o,n,"normal")},e.prototype.remove=function(t,i){this.group.removeAll()},e.prototype.dispose=function(t,i){},e.prototype.updateView=function(t,i,r,n){this.render(t,i,r,n)},e.prototype.updateLayout=function(t,i,r,n){this.render(t,i,r,n)},e.prototype.updateVisual=function(t,i,r,n){this.render(t,i,r,n)},e.prototype.eachRendered=function(t){uo(this.group,t)},e.markUpdateMethod=function(t,i){fE(t).updateMethod=i},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function Lx(e,t,i){e&&zu(e)&&(t==="emphasis"?an:ln)(e,i)}function kx(e,t,i){var r=xs(e,t),n=t&&t.highlightKey!=null?VK(t.highlightKey):null;r!=null?_(ze(r),function(o){Lx(e.getItemGraphicEl(o),i,n)}):e.eachItemGraphicEl(function(o){Lx(o,i,n)})}vS(We);Bf(We);function rX(e){return iX(e.model)}function nX(e){var t=e.model,i=e.ecModel,r=e.api,n=e.payload,o=t.pipelineContext.progressiveRender,s=e.view,a=n&&fE(n).updateMethod,l=o?"incrementalPrepareRender":a&&s[a]?a:"render";return l!=="render"&&s[l](t,i,r,n),oX[l]}var oX={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Yd="\0__throttleOriginMethod",Ox="\0__throttleRate",Gx="\0__throttleType";function WS(e,t,i){var r,n=0,o=0,s=null,a,l,u,h;t=t||0;function c(){o=new Date().getTime(),s=null,e.apply(l,u||[])}var d=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];r=new Date().getTime(),l=this,u=f;var g=h||t,v=h||i;h=null,a=r-(v?n:o)-g,clearTimeout(s),v?s=setTimeout(c,g):a>=0?c():s=setTimeout(c,-a),n=r};return d.clear=function(){s&&(clearTimeout(s),s=null)},d.debounceNextCall=function(f){h=f},d}function ul(e,t,i,r){var n=e[t];if(n){var o=n[Yd]||n,s=n[Gx],a=n[Ox];if(a!==i||s!==r){if(i==null||!r)return e[t]=o;n=e[t]=WS(o,i,r==="debounce"),n[Yd]=o,n[Gx]=r,n[Ox]=i}return n}}function Yu(e,t){var i=e[t];i&&i[Yd]&&(i.clear&&i.clear(),e[t]=i[Yd])}var Nx=_e(),Vx={itemStyle:Rs(CF,!0),lineStyle:Rs(yF,!0)},sX={lineStyle:"stroke",itemStyle:"fill"};function pE(e,t){var i=e.visualStyleMapper||Vx[t];return i||(console.warn("Unknown style type '"+t+"'."),Vx.itemStyle)}function gE(e,t){var i=e.visualDrawType||sX[t];return i||(console.warn("Unknown style type '"+t+"'."),"fill")}var aX={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var i=e.getData(),r=e.visualStyleAccessPath||"itemStyle",n=e.getModel(r),o=pE(e,r),s=o(n),a=n.getShallow("decal");a&&(i.setVisual("decal",a),a.dirty=!0);var l=gE(e,r),u=s[l],h=ie(u)?u:null,c=s.fill==="auto"||s.stroke==="auto";if(!s[l]||h||c){var d=e.getColorFromPalette(e.name,null,t.getSeriesCount());s[l]||(s[l]=d,i.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||ie(s.fill)?d:s.fill,s.stroke=s.stroke==="auto"||ie(s.stroke)?d:s.stroke}if(i.setVisual("style",s),i.setVisual("drawType",l),!t.isSeriesFiltered(e)&&h)return i.setVisual("colorFromPalette",!1),{dataEach:function(f,p){var g=e.getDataParams(p),v=V({},s);v[l]=h(g),f.setItemVisual(p,"style",v)}}}},_l=new Ne,lX={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var i=e.getData(),r=e.visualStyleAccessPath||"itemStyle",n=pE(e,r),o=i.getVisual("drawType");return{dataEach:i.hasItemOption?function(s,a){var l=s.getRawDataItem(a);if(l&&l[r]){_l.option=l[r];var u=n(_l),h=s.ensureUniqueItemVisual(a,"style");V(h,u),_l.option.decal&&(s.setItemVisual(a,"decal",_l.option.decal),_l.option.decal.dirty=!0),o in u&&s.setItemVisual(a,"colorFromPalette",!1)}}:null}}}},uX={performRawSeries:!0,overallReset:function(e){var t=Q();e.eachSeries(function(i){var r=i.getColorBy();if(!i.isColorBySeries()){var n=i.type+"-"+r,o=t.get(n);o||(o={},t.set(n,o)),Nx(i).scope=o}}),e.eachSeries(function(i){if(!(i.isColorBySeries()||e.isSeriesFiltered(i))){var r=i.getRawData(),n={},o=i.getData(),s=Nx(i).scope,a=i.visualStyleAccessPath||"itemStyle",l=gE(i,a);o.each(function(u){var h=o.getRawIndex(u);n[h]=u}),r.each(function(u){var h=n[u],c=o.getItemVisual(h,"colorFromPalette");if(c){var d=o.ensureUniqueItemVisual(h,"style"),f=r.getName(u)||u+"",p=r.count();d[l]=i.getColorFromPalette(f,s,p)}})}})}},cc=Math.PI;function hX(e,t){t=t||{},ne(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var i=new le,r=new Te({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});i.add(r);var n=new Ae({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Te({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});i.add(o);var s;return t.showSpinner&&(s=new Yf({shape:{startAngle:-cc/2,endAngle:-cc/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:cc*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:cc*3/2}).delay(300).start("circularInOut"),i.add(s)),i.resize=function(){var a=n.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&a?10:0)-a)/2-(t.showSpinner&&a?0:5+a/2)+(t.showSpinner?0:a/2)+(a?0:l),h=e.getHeight()/2;t.showSpinner&&s.setShape({cx:u,cy:h}),o.setShape({x:u-l,y:h-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},i.resize(),i}var vE=function(){function e(t,i,r,n){this._stageTaskMap=Q(),this.ecInstance=t,this.api=i,r=this._dataProcessorHandlers=r.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=r.concat(n)}return e.prototype.restoreData=function(t,i){t.restoreData(i),this._stageTaskMap.each(function(r){var n=r.overallTask;n&&n.dirty()})},e.prototype.getPerformArgs=function(t,i){if(t.__pipeline){var r=this._pipelineMap.get(t.__pipeline.id),n=r.context,o=!i&&r.progressiveEnabled&&(!n||n.progressiveRender)&&t.__idxInPipeline>r.blockIndex,s=o?r.step:null,a=n&&n.modDataCount,l=a!=null?Math.ceil(a/s):null;return{step:s,modBy:l,modDataCount:a}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,i){var r=this._pipelineMap.get(t.uid),n=t.getData(),o=n.count(),s=r.progressiveEnabled&&i.incrementalPrepareRender&&o>=r.threshold,a=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=r.context={progressiveRender:s,modDataCount:l,large:a}},e.prototype.restorePipelines=function(t){var i=this,r=i._pipelineMap=Q();t.eachSeries(function(n){var o=n.getProgressive(),s=n.uid;r.set(s,{id:s,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:o&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),i._pipe(n,n.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,i=this.api.getModel(),r=this.api;_(this._allHandlers,function(n){var o=t.get(n.uid)||t.set(n.uid,{}),s="";jt(!(n.reset&&n.overallReset),s),n.reset&&this._createSeriesStageTask(n,o,i,r),n.overallReset&&this._createOverallStageTask(n,o,i,r)},this)},e.prototype.prepareView=function(t,i,r,n){var o=t.renderTask,s=o.context;s.model=i,s.ecModel=r,s.api=n,o.__block=!t.incrementalPrepareRender,this._pipe(i,o)},e.prototype.performDataProcessorTasks=function(t,i){this._performStageTasks(this._dataProcessorHandlers,t,i,{block:!0})},e.prototype.performVisualTasks=function(t,i,r){this._performStageTasks(this._visualHandlers,t,i,r)},e.prototype._performStageTasks=function(t,i,r,n){n=n||{};var o=!1,s=this;_(t,function(l,u){if(!(n.visualType&&n.visualType!==l.visualType)){var h=s._stageTaskMap.get(l.uid),c=h.seriesTaskMap,d=h.overallTask;if(d){var f,p=d.agentStubMap;p.each(function(v){a(n,v)&&(v.dirty(),f=!0)}),f&&d.dirty(),s.updatePayload(d,r);var g=s.getPerformArgs(d,n.block);p.each(function(v){v.perform(g)}),d.perform(g)&&(o=!0)}else c&&c.each(function(v,m){a(n,v)&&v.dirty();var y=s.getPerformArgs(v,n.block);y.skip=!l.performRawSeries&&i.isSeriesFiltered(v.context.model),s.updatePayload(v,r),v.perform(y)&&(o=!0)})}});function a(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var i;t.eachSeries(function(r){i=r.dataTask.perform()||i}),this.unfinished=i||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var i=t.tail;do{if(i.__block){t.blockIndex=i.__idxInPipeline;break}i=i.getUpstream()}while(i)})},e.prototype.updatePayload=function(t,i){i!=="remain"&&(t.context.payload=i)},e.prototype._createSeriesStageTask=function(t,i,r,n){var o=this,s=i.seriesTaskMap,a=i.seriesTaskMap=Q(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?r.eachRawSeries(h):l?r.eachRawSeriesByType(l,h):u&&u(r,n).each(h);function h(c){var d=c.uid,f=a.set(d,s&&s.get(d)||wu({plan:gX,reset:vX,count:yX}));f.context={model:c,ecModel:r,api:n,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(c,f)}},e.prototype._createOverallStageTask=function(t,i,r,n){var o=this,s=i.overallTask=i.overallTask||wu({reset:cX});s.context={ecModel:r,api:n,overallReset:t.overallReset,scheduler:o};var a=s.agentStubMap,l=s.agentStubMap=Q(),u=t.seriesType,h=t.getTargetSeries,c=!0,d=!1,f="";jt(!t.createOnAllSeries,f),u?r.eachRawSeriesByType(u,p):h?h(r,n).each(p):(c=!1,_(r.getSeries(),p));function p(g){var v=g.uid,m=l.set(v,a&&a.get(v)||(d=!0,wu({reset:dX,onDirty:pX})));m.context={model:g,overallProgress:c},m.agent=s,m.__block=c,o._pipe(g,m)}d&&s.dirty()},e.prototype._pipe=function(t,i){var r=t.uid,n=this._pipelineMap.get(r);!n.head&&(n.head=i),n.tail&&n.tail.pipe(i),n.tail=i,i.__idxInPipeline=n.count++,i.__pipeline=n},e.wrapStageHandler=function(t,i){return ie(t)&&(t={overallReset:t,seriesType:CX(t)}),t.uid=nl("stageHandler"),i&&(t.visualType=i),t},e}();function cX(e){e.overallReset(e.ecModel,e.api,e.payload)}function dX(e){return e.overallProgress&&fX}function fX(){this.agent.dirty(),this.getDownstream().dirty()}function pX(){this.agent&&this.agent.dirty()}function gX(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function vX(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=ze(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?z(t,function(i,r){return mE(r)}):mX}var mX=mE(0);function mE(e){return function(t,i){var r=i.data,n=i.resetDefines[e];if(n&&n.dataEach)for(var o=t.start;o<t.end;o++)n.dataEach(r,o);else n&&n.progress&&n.progress(t,r)}}function yX(e){return e.data.count()}function CX(e){Xd=null;try{e(Xu,yE)}catch{}return Xd}var Xu={},yE={},Xd;CE(Xu,NS);CE(yE,WF);Xu.eachSeriesByType=Xu.eachRawSeriesByType=function(e){Xd=e};Xu.eachComponent=function(e){e.mainType==="series"&&e.subType&&(Xd=e.subType)};function CE(e,t){for(var i in t.prototype)e[i]=at}var Bx=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const SX={color:Bx,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Bx]};var Et="#B9B8CE",Hx="#100C2A",dc=function(){return{axisLine:{lineStyle:{color:Et}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},zx=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],SE={darkMode:!0,color:zx,backgroundColor:Hx,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Et},pageTextStyle:{color:Et}},textStyle:{color:Et},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Et}},dataZoom:{borderColor:"#71708A",textStyle:{color:Et},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Et}},timeline:{lineStyle:{color:Et},label:{color:Et},controlStyle:{color:Et,borderColor:Et}},calendar:{itemStyle:{color:Hx},dayLabel:{color:Et},monthLabel:{color:Et},yearLabel:{color:Et}},timeAxis:dc(),logAxis:dc(),valueAxis:dc(),categoryAxis:dc(),line:{symbol:"circle"},graph:{color:zx},gauge:{title:{color:Et},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Et},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};SE.categoryAxis.splitLine.show=!1;var wX=function(){function e(){}return e.prototype.normalizeQuery=function(t){var i={},r={},n={};if(q(t)){var o=Rr(t);i.mainType=o.main||null,i.subType=o.sub||null}else{var s=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};_(t,function(l,u){for(var h=!1,c=0;c<s.length;c++){var d=s[c],f=u.lastIndexOf(d);if(f>0&&f===u.length-d.length){var p=u.slice(0,f);p!=="data"&&(i.mainType=p,i[d.toLowerCase()]=l,h=!0)}}a.hasOwnProperty(u)&&(r[u]=l,h=!0),h||(n[u]=l)})}return{cptQuery:i,dataQuery:r,otherQuery:n}},e.prototype.filter=function(t,i){var r=this.eventInfo;if(!r)return!0;var n=r.targetEl,o=r.packedEvent,s=r.model,a=r.view;if(!s||!a)return!0;var l=i.cptQuery,u=i.dataQuery;return h(l,s,"mainType")&&h(l,s,"subType")&&h(l,s,"index","componentIndex")&&h(l,s,"name")&&h(l,s,"id")&&h(u,o,"name")&&h(u,o,"dataIndex")&&h(u,o,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,i.otherQuery,n,o));function h(c,d,f,p){return c[f]==null||d[p||f]===c[f]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),Cy=["symbol","symbolSize","symbolRotate","symbolOffset"],Wx=Cy.concat(["symbolKeepAspect"]),bX={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var i=e.getData();if(e.legendIcon&&i.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var r={},n={},o=!1,s=0;s<Cy.length;s++){var a=Cy[s],l=e.get(a);ie(l)?(o=!0,n[a]=l):r[a]=l}if(r.symbol=r.symbol||e.defaultSymbol,i.setVisual(V({legendIcon:e.legendIcon||r.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},r)),t.isSeriesFiltered(e))return;var u=De(n);function h(c,d){for(var f=e.getRawValue(d),p=e.getDataParams(d),g=0;g<u.length;g++){var v=u[g];c.setItemVisual(d,v,n[v](f,p))}}return{dataEach:o?h:null}}},xX={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var i=e.getData();function r(n,o){for(var s=n.getItemModel(o),a=0;a<Wx.length;a++){var l=Wx[a],u=s.getShallow(l,!0);u!=null&&n.setItemVisual(o,l,u)}}return{dataEach:i.hasItemOption?r:null}}};function US(e,t,i){switch(i){case"color":var r=e.getItemVisual(t,"style");return r[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,i)}}function xh(e,t){switch(t){case"color":var i=e.getVisual("style");return i[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function wE(e,t,i,r){switch(i){case"color":var n=e.ensureUniqueItemVisual(t,"style");n[e.getVisual("drawType")]=r,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,i,r);break}}function bE(e,t){function i(r,n){var o=[];return r.eachComponent({mainType:"series",subType:e,query:n},function(s){o.push(s.seriesIndex)}),o}_([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(r){t(r[0],function(n,o,s){n=V({},n),s.dispatchAction(V(n,{type:r[1],seriesIndex:i(o,n)}))})})}function Js(e,t,i,r,n){var o=e+t;i.isSilent(o)||r.eachComponent({mainType:"series",subType:"pie"},function(s){for(var a=s.seriesIndex,l=s.option.selectedMap,u=n.selected,h=0;h<u.length;h++)if(u[h].seriesIndex===a){var c=s.getData(),d=xs(c,n.fromActionPayload);i.trigger(o,{type:o,seriesId:s.id,name:H(d)?c.getName(d[0]):c.getName(d),selected:q(l)?l:V({},l)})}})}function RX(e,t,i){e.on("selectchanged",function(r){var n=i.getModel();r.isFromClick?(Js("map","selectchanged",t,n,r),Js("pie","selectchanged",t,n,r)):r.fromAction==="select"?(Js("map","selected",t,n,r),Js("pie","selected",t,n,r)):r.fromAction==="unselect"&&(Js("map","unselected",t,n,r),Js("pie","unselected",t,n,r))})}function is(e,t,i){for(var r;e&&!(t(e)&&(r=e,i));)e=e.__hostTarget||e.parent;return r}var DX=Math.round(Math.random()*9),TX=typeof Object.defineProperty=="function",_X=function(){function e(){this._id="__ec_inner_"+DX++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,i){var r=this._guard(t);return TX?Object.defineProperty(r,this._id,{value:i,enumerable:!1,configurable:!0}):r[this._id]=i,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}(),AX=be.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,r=t.cy,n=t.width/2,o=t.height/2;e.moveTo(i,r-o),e.lineTo(i+n,r+o),e.lineTo(i-n,r+o),e.closePath()}}),PX=be.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,r=t.cy,n=t.width/2,o=t.height/2;e.moveTo(i,r-o),e.lineTo(i+n,r),e.lineTo(i,r+o),e.lineTo(i-n,r),e.closePath()}}),MX=be.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.x,r=t.y,n=t.width/5*3,o=Math.max(n,t.height),s=n/2,a=s*s/(o-s),l=r-o+s+a,u=Math.asin(a/s),h=Math.cos(u)*s,c=Math.sin(u),d=Math.cos(u),f=s*.6,p=s*.7;e.moveTo(i-h,l+a),e.arc(i,l,s,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(i+h-c*f,l+a+d*f,i,r-p,i,r),e.bezierCurveTo(i,r-p,i-h+c*f,l+a+d*f,i-h,l+a),e.closePath()}}),FX=be.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.height,r=t.width,n=t.x,o=t.y,s=r/3*2;e.moveTo(n,o),e.lineTo(n+s,o+i),e.lineTo(n,o+i/4*3),e.lineTo(n-s,o+i),e.lineTo(n,o),e.closePath()}}),EX={line:mt,rect:Te,roundRect:Te,square:Te,circle:vn,diamond:PX,pin:MX,arrow:FX,triangle:AX},IX={line:function(e,t,i,r,n){n.x1=e,n.y1=t+r/2,n.x2=e+i,n.y2=t+r/2},rect:function(e,t,i,r,n){n.x=e,n.y=t,n.width=i,n.height=r},roundRect:function(e,t,i,r,n){n.x=e,n.y=t,n.width=i,n.height=r,n.r=Math.min(i,r)/4},square:function(e,t,i,r,n){var o=Math.min(i,r);n.x=e,n.y=t,n.width=o,n.height=o},circle:function(e,t,i,r,n){n.cx=e+i/2,n.cy=t+r/2,n.r=Math.min(i,r)/2},diamond:function(e,t,i,r,n){n.cx=e+i/2,n.cy=t+r/2,n.width=i,n.height=r},pin:function(e,t,i,r,n){n.x=e+i/2,n.y=t+r/2,n.width=i,n.height=r},arrow:function(e,t,i,r,n){n.x=e+i/2,n.y=t+r/2,n.width=i,n.height=r},triangle:function(e,t,i,r,n){n.cx=e+i/2,n.cy=t+r/2,n.width=i,n.height=r}},qd={};_(EX,function(e,t){qd[t]=new e});var LX=be.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,i){var r=Nd(e,t,i),n=this.shape;return n&&n.symbolType==="pin"&&t.position==="inside"&&(r.y=i.y+i.height*.4),r},buildPath:function(e,t,i){var r=t.symbolType;if(r!=="none"){var n=qd[r];n||(r="rect",n=qd[r]),IX[r](t.x,t.y,t.width,t.height,n.shape),n.buildPath(e,n.shape,i)}}});function kX(e,t){if(this.type!=="image"){var i=this.style;this.__isEmptyBrush?(i.stroke=e,i.fill=t||"#fff",i.lineWidth=2):this.shape.symbolType==="line"?i.stroke=e:i.fill=e,this.markRedraw()}}function ct(e,t,i,r,n,o,s){var a=e.indexOf("empty")===0;a&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=hF(e.slice(8),new ve(t,i,r,n),s?"center":"cover"):e.indexOf("path://")===0?l=Xf(e.slice(7),{},new ve(t,i,r,n),s?"center":"cover"):l=new LX({shape:{symbolType:e,x:t,y:i,width:r,height:n}}),l.__isEmptyBrush=a,l.setColor=kX,o&&l.setColor(o),l}function hl(e){return H(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function Gs(e,t){if(e!=null)return H(e)||(e=[e,e]),[K(e[0],t[0])||0,K(de(e[1],e[0]),t[1])||0]}function rs(e){return isFinite(e)}function OX(e,t,i){var r=t.x==null?0:t.x,n=t.x2==null?1:t.x2,o=t.y==null?0:t.y,s=t.y2==null?0:t.y2;t.global||(r=r*i.width+i.x,n=n*i.width+i.x,o=o*i.height+i.y,s=s*i.height+i.y),r=rs(r)?r:0,n=rs(n)?n:1,o=rs(o)?o:0,s=rs(s)?s:0;var a=e.createLinearGradient(r,o,n,s);return a}function GX(e,t,i){var r=i.width,n=i.height,o=Math.min(r,n),s=t.x==null?.5:t.x,a=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(s=s*r+i.x,a=a*n+i.y,l=l*o),s=rs(s)?s:.5,a=rs(a)?a:.5,l=l>=0&&rs(l)?l:.5;var u=e.createRadialGradient(s,a,0,s,a,l);return u}function Sy(e,t,i){for(var r=t.type==="radial"?GX(e,t,i):OX(e,t,i),n=t.colorStops,o=0;o<n.length;o++)r.addColorStop(n[o].offset,n[o].color);return r}function NX(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!0;return!1}function fc(e){return parseInt(e,10)}function Sa(e,t,i){var r=["width","height"][t],n=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(i[r]!=null&&i[r]!=="auto")return parseFloat(i[r]);var a=document.defaultView.getComputedStyle(e);return(e[n]||fc(a[r])||fc(e.style[r]))-(fc(a[o])||0)-(fc(a[s])||0)|0}function VX(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Pe(e)?[e]:H(e)?e:null}function $S(e){var t=e.style,i=t.lineDash&&t.lineWidth>0&&VX(t.lineDash,t.lineWidth),r=t.lineDashOffset;if(i){var n=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;n&&n!==1&&(i=z(i,function(o){return o/n}),r/=n)}return[i,r]}var BX=new Or(!0);function Zd(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function Ux(e){return typeof e=="string"&&e!=="none"}function jd(e){var t=e.fill;return t!=null&&t!=="none"}function $x(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var i=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=i}else e.fill()}function Kx(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var i=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=i}else e.stroke()}function wy(e,t,i){var r=mS(t.image,t.__image,i);if(Hf(r)){var n=e.createPattern(r,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*qc),o.scaleSelf(t.scaleX||1,t.scaleY||1),n.setTransform(o)}return n}}function HX(e,t,i,r){var n,o=Zd(i),s=jd(i),a=i.strokePercent,l=a<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var h=t.path||BX,c=t.__dirty;if(!r){var d=i.fill,f=i.stroke,p=s&&!!d.colorStops,g=o&&!!f.colorStops,v=s&&!!d.image,m=o&&!!f.image,y=void 0,C=void 0,S=void 0,b=void 0,w=void 0;(p||g)&&(w=t.getBoundingRect()),p&&(y=c?Sy(e,d,w):t.__canvasFillGradient,t.__canvasFillGradient=y),g&&(C=c?Sy(e,f,w):t.__canvasStrokeGradient,t.__canvasStrokeGradient=C),v&&(S=c||!t.__canvasFillPattern?wy(e,d,t):t.__canvasFillPattern,t.__canvasFillPattern=S),m&&(b=c||!t.__canvasStrokePattern?wy(e,f,t):t.__canvasStrokePattern,t.__canvasStrokePattern=S),p?e.fillStyle=y:v&&(S?e.fillStyle=S:s=!1),g?e.strokeStyle=C:m&&(b?e.strokeStyle=b:o=!1)}var x=t.getGlobalScale();h.setScale(x[0],x[1],t.segmentIgnoreThreshold);var R,D;e.setLineDash&&i.lineDash&&(n=$S(t),R=n[0],D=n[1]);var T=!0;(u||c&da)&&(h.setDPR(e.dpr),l?h.setContext(null):(h.setContext(e),T=!1),h.reset(),t.buildPath(h,t.shape,r),h.toStatic(),t.pathUpdated()),T&&h.rebuildPath(e,l?a:1),R&&(e.setLineDash(R),e.lineDashOffset=D),r||(i.strokeFirst?(o&&Kx(e,i),s&&$x(e,i)):(s&&$x(e,i),o&&Kx(e,i))),R&&e.setLineDash([])}function zX(e,t,i){var r=t.__image=mS(i.image,t.__image,t,t.onload);if(!(!r||!Hf(r))){var n=i.x||0,o=i.y||0,s=t.getWidth(),a=t.getHeight(),l=r.width/r.height;if(s==null&&a!=null?s=a*l:a==null&&s!=null?a=s/l:s==null&&a==null&&(s=r.width,a=r.height),i.sWidth&&i.sHeight){var u=i.sx||0,h=i.sy||0;e.drawImage(r,u,h,i.sWidth,i.sHeight,n,o,s,a)}else if(i.sx&&i.sy){var u=i.sx,h=i.sy,c=s-u,d=a-h;e.drawImage(r,u,h,c,d,n,o,s,a)}else e.drawImage(r,n,o,s,a)}}function WX(e,t,i){var r,n=i.text;if(n!=null&&(n+=""),n){e.font=i.font||Jn,e.textAlign=i.textAlign,e.textBaseline=i.textBaseline;var o=void 0,s=void 0;e.setLineDash&&i.lineDash&&(r=$S(t),o=r[0],s=r[1]),o&&(e.setLineDash(o),e.lineDashOffset=s),i.strokeFirst?(Zd(i)&&e.strokeText(n,i.x,i.y),jd(i)&&e.fillText(n,i.x,i.y)):(jd(i)&&e.fillText(n,i.x,i.y),Zd(i)&&e.strokeText(n,i.x,i.y)),o&&e.setLineDash([])}}var Yx=["shadowBlur","shadowOffsetX","shadowOffsetY"],Xx=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function xE(e,t,i,r,n){var o=!1;if(!r&&(i=i||{},t===i))return!1;if(r||t.opacity!==i.opacity){li(e,n),o=!0;var s=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(s)?fs.opacity:s}(r||t.blend!==i.blend)&&(o||(li(e,n),o=!0),e.globalCompositeOperation=t.blend||fs.blend);for(var a=0;a<Yx.length;a++){var l=Yx[a];(r||t[l]!==i[l])&&(o||(li(e,n),o=!0),e[l]=e.dpr*(t[l]||0))}return(r||t.shadowColor!==i.shadowColor)&&(o||(li(e,n),o=!0),e.shadowColor=t.shadowColor||fs.shadowColor),o}function qx(e,t,i,r,n){var o=qu(t,n.inHover),s=r?null:i&&qu(i,n.inHover)||{};if(o===s)return!1;var a=xE(e,o,s,r,n);if((r||o.fill!==s.fill)&&(a||(li(e,n),a=!0),Ux(o.fill)&&(e.fillStyle=o.fill)),(r||o.stroke!==s.stroke)&&(a||(li(e,n),a=!0),Ux(o.stroke)&&(e.strokeStyle=o.stroke)),(r||o.opacity!==s.opacity)&&(a||(li(e,n),a=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(a||(li(e,n),a=!0),e.lineWidth=u)}for(var h=0;h<Xx.length;h++){var c=Xx[h],d=c[0];(r||o[d]!==s[d])&&(a||(li(e,n),a=!0),e[d]=o[d]||c[1])}return a}function UX(e,t,i,r,n){return xE(e,qu(t,n.inHover),i&&qu(i,n.inHover),r,n)}function RE(e,t){var i=t.transform,r=e.dpr||1;i?e.setTransform(r*i[0],r*i[1],r*i[2],r*i[3],r*i[4],r*i[5]):e.setTransform(r,0,0,r,0,0)}function $X(e,t,i){for(var r=!1,n=0;n<e.length;n++){var o=e[n];r=r||o.isZeroArea(),RE(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}i.allClipped=r}function KX(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var Zx=1,jx=2,Qx=3,Jx=4;function YX(e){var t=jd(e),i=Zd(e);return!(e.lineDash||!(+t^+i)||t&&typeof e.fill!="string"||i&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function li(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function qu(e,t){return t&&e.__hoverStyle||e.style}function DE(e,t){ns(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ns(e,t,i,r){var n=t.transform;if(!t.shouldBePainted(i.viewWidth,i.viewHeight,!1,!1)){t.__dirty&=~gi,t.__isRendered=!1;return}var o=t.__clipPaths,s=i.prevElClipPaths,a=!1,l=!1;if((!s||NX(o,s))&&(s&&s.length&&(li(e,i),e.restore(),l=a=!0,i.prevElClipPaths=null,i.allClipped=!1,i.prevEl=null),o&&o.length&&(li(e,i),e.save(),$X(o,e,i),a=!0),i.prevElClipPaths=o),i.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=i.prevEl;u||(l=a=!0);var h=t instanceof be&&t.autoBatch&&YX(t.style);a||KX(n,u.transform)?(li(e,i),RE(e,t)):h||li(e,i);var c=qu(t,i.inHover);t instanceof be?(i.lastDrawType!==Zx&&(l=!0,i.lastDrawType=Zx),qx(e,t,u,l,i),(!h||!i.batchFill&&!i.batchStroke)&&e.beginPath(),HX(e,t,c,h),h&&(i.batchFill=c.fill||"",i.batchStroke=c.stroke||"")):t instanceof Oa?(i.lastDrawType!==Qx&&(l=!0,i.lastDrawType=Qx),qx(e,t,u,l,i),WX(e,t,c)):t instanceof Rt?(i.lastDrawType!==jx&&(l=!0,i.lastDrawType=jx),UX(e,t,u,l,i),zX(e,t,c)):t.getTemporalDisplayables&&(i.lastDrawType!==Jx&&(l=!0,i.lastDrawType=Jx),XX(e,t,i)),h&&r&&li(e,i),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),i.prevEl=t,t.__dirty=0,t.__isRendered=!0}function XX(e,t,i){var r=t.getDisplayables(),n=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:i.viewWidth,viewHeight:i.viewHeight,inHover:i.inHover},s,a;for(s=t.getCursor(),a=r.length;s<a;s++){var l=r[s];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ns(e,l,o,s===a-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,h=n.length;u<h;u++){var l=n[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ns(e,l,o,u===h-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var Eg=new _X,eR=new fh(100),tR=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Va(e,t){if(e==="none")return null;var i=t.getDevicePixelRatio(),r=t.getZr(),n=r.painter.type==="svg";e.dirty&&Eg.delete(e);var o=Eg.get(e);if(o)return o;var s=ne(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var a={repeat:"repeat"};return l(a),a.rotation=s.rotation,a.scaleX=a.scaleY=n?1:1/i,Eg.set(e,a),e.dirty=!1,a;function l(u){for(var h=[i],c=!0,d=0;d<tR.length;++d){var f=s[tR[d]];if(f!=null&&!H(f)&&!q(f)&&!Pe(f)&&typeof f!="boolean"){c=!1;break}h.push(f)}var p;if(c){p=h.join(",")+(n?"-svg":"");var g=eR.get(p);g&&(n?u.svgElement=g:u.image=g)}var v=_E(s.dashArrayX),m=qX(s.dashArrayY),y=TE(s.symbol),C=ZX(v),S=AE(m),b=!n&&eo.createCanvas(),w=n&&{tag:"g",attrs:{},key:"dcl",children:[]},x=D(),R;b&&(b.width=x.width*i,b.height=x.height*i,R=b.getContext("2d")),T(),c&&eR.put(p,b||w),u.image=b,u.svgElement=w,u.svgWidth=x.width,u.svgHeight=x.height;function D(){for(var A=1,P=0,M=C.length;P<M;++P)A=mb(A,C[P]);for(var F=1,P=0,M=y.length;P<M;++P)F=mb(F,y[P].length);A*=F;var E=S*C.length*y.length;return{width:Math.max(1,Math.min(A,s.maxTileWidth)),height:Math.max(1,Math.min(E,s.maxTileHeight))}}function T(){R&&(R.clearRect(0,0,b.width,b.height),s.backgroundColor&&(R.fillStyle=s.backgroundColor,R.fillRect(0,0,b.width,b.height)));for(var A=0,P=0;P<m.length;++P)A+=m[P];if(A<=0)return;for(var M=-S,F=0,E=0,I=0;M<x.height;){if(F%2===0){for(var O=E/2%y.length,k=0,G=0,W=0;k<x.width*2;){for(var $=0,P=0;P<v[I].length;++P)$+=v[I][P];if($<=0)break;if(G%2===0){var X=(1-s.symbolSize)*.5,te=k+v[I][G]*X,re=M+m[F]*X,he=v[I][G]*s.symbolSize,Be=m[F]*s.symbolSize,rt=W/2%y[O].length;me(te,re,he,Be,y[O][rt])}k+=v[I][G],++W,++G,G===v[I].length&&(G=0)}++I,I===v.length&&(I=0)}M+=m[F],++E,++F,F===m.length&&(F=0)}function me(oe,Se,ee,ce,Ke){var Ve=n?1:i,Ue=ct(Ke,oe*Ve,Se*Ve,ee*Ve,ce*Ve,s.color,s.symbolKeepAspect);if(n){var je=r.painter.renderOneToVNode(Ue);je&&w.children.push(je)}else DE(R,Ue)}}}}function TE(e){if(!e||e.length===0)return[["rect"]];if(q(e))return[[e]];for(var t=!0,i=0;i<e.length;++i)if(!q(e[i])){t=!1;break}if(t)return TE([e]);for(var r=[],i=0;i<e.length;++i)q(e[i])?r.push([e[i]]):r.push(e[i]);return r}function _E(e){if(!e||e.length===0)return[[0,0]];if(Pe(e)){var t=Math.ceil(e);return[[t,t]]}for(var i=!0,r=0;r<e.length;++r)if(!Pe(e[r])){i=!1;break}if(i)return _E([e]);for(var n=[],r=0;r<e.length;++r)if(Pe(e[r])){var t=Math.ceil(e[r]);n.push([t,t])}else{var t=z(e[r],function(a){return Math.ceil(a)});t.length%2===1?n.push(t.concat(t)):n.push(t)}return n}function qX(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Pe(e)){var t=Math.ceil(e);return[t,t]}var i=z(e,function(r){return Math.ceil(r)});return e.length%2?i.concat(i):i}function ZX(e){return z(e,function(t){return AE(t)})}function AE(e){for(var t=0,i=0;i<e.length;++i)t+=e[i];return e.length%2===1?t*2:t}function jX(e,t){e.eachRawSeries(function(i){if(!e.isSeriesFiltered(i)){var r=i.getData();r.hasItemVisual()&&r.each(function(s){var a=r.getItemVisual(s,"decal");if(a){var l=r.ensureUniqueItemVisual(s,"style");l.decal=Va(a,t)}});var n=r.getVisual("decal");if(n){var o=r.getVisual("style");o.decal=Va(n,t)}}})}var Zi=new Wi,PE={};function QX(e,t){PE[e]=t}function JX(e){return PE[e]}var e8=1,t8=800,i8=900,r8=1e3,n8=2e3,o8=5e3,ME=1e3,s8=1100,KS=2e3,FE=3e3,a8=4e3,sp=4500,l8=4600,u8=5e3,h8=6e3,EE=7e3,c8={PROCESSOR:{FILTER:r8,SERIES_FILTER:t8,STATISTIC:o8},VISUAL:{LAYOUT:ME,PROGRESSIVE_LAYOUT:s8,GLOBAL:KS,CHART:FE,POST_CHART_LAYOUT:l8,COMPONENT:a8,BRUSH:u8,CHART_ITEM:sp,ARIA:h8,DECAL:EE}},Ft="__flagInMainProcess",oi="__pendingUpdate",Ig="__needsUpdateStatus",iR=/^[a-zA-Z0-9_]+$/,Lg="__connectUpdateStatus",rR=0,d8=1,f8=2;function IE(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(this.isDisposed()){this.id;return}return kE(this,e,t)}}function LE(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return kE(this,e,t)}}function kE(e,t,i){return i[0]=i[0]&&i[0].toLowerCase(),Wi.prototype[t].apply(e,i)}var OE=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Wi),GE=OE.prototype;GE.on=LE("on");GE.off=LE("off");var ea,kg,pc,Dn,Og,Gg,Ng,Al,Pl,nR,oR,Vg,sR,gc,aR,NE,bi,lR,VE=function(e){L(t,e);function t(i,r,n){var o=e.call(this,new wX)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],n=n||{},q(r)&&(r=BE[r]),o._dom=i;var s="canvas",a="auto",l=!1;n.ssr&&l4(function(d){var f=ue(d),p=f.dataIndex;if(p!=null){var g=Q();return g.set("series_index",f.seriesIndex),g.set("data_index",p),f.ssrType&&g.set("ssr_type",f.ssrType),g}});var u=o._zr=fb(i,{renderer:n.renderer||s,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:de(n.useDirtyRect,l),useCoarsePointer:de(n.useCoarsePointer,a),pointerSize:n.pointerSize});o._ssr=n.ssr,o._throttledZrFlush=WS(Z(u.flush,u),17),r=ae(r),r&&$F(r,!0),o._theme=r,o._locale=EY(n.locale||SF),o._coordSysMgr=new bh;var h=o._api=aR(o);function c(d,f){return d.__prio-f.__prio}return Qc(Jd,c),Qc(by,c),o._scheduler=new vE(o,h,by,Jd),o._messageCenter=new OE,o._initEvents(),o.resize=Z(o.resize,o),u.animation.on("frame",o._onframe,o),nR(u,o),oR(u,o),Md(o),o}return t.prototype._onframe=function(){if(!this._disposed){lR(this);var i=this._scheduler;if(this[oi]){var r=this[oi].silent;this[Ft]=!0;try{ea(this),Dn.update.call(this,null,this[oi].updateParams)}catch(l){throw this[Ft]=!1,this[oi]=null,l}this._zr.flush(),this[Ft]=!1,this[oi]=null,Al.call(this,r),Pl.call(this,r)}else if(i.unfinished){var n=e8,o=this._model,s=this._api;i.unfinished=!1;do{var a=+new Date;i.performSeriesTasks(o),i.performDataProcessorTasks(o),Gg(this,o),i.performVisualTasks(o),gc(this,this._model,s,"remain",{}),n-=+new Date-a}while(n>0&&i.unfinished);i.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(i,r,n){if(!this[Ft]){if(this._disposed){this.id;return}var o,s,a;if(se(r)&&(n=r.lazyUpdate,o=r.silent,s=r.replaceMerge,a=r.transition,r=r.notMerge),this[Ft]=!0,!this._model||r){var l=new r6(this._api),u=this._theme,h=this._model=new NS;h.scheduler=this._scheduler,h.ssr=this._ssr,h.init(null,null,null,u,this._locale,l)}this._model.setOption(i,{replaceMerge:s},xy);var c={seriesTransition:a,optionChanged:!0};if(n)this[oi]={silent:o,updateParams:c},this[Ft]=!1,this.getZr().wakeUp();else{try{ea(this),Dn.update.call(this,null,c)}catch(d){throw this[oi]=null,this[Ft]=!1,d}this._ssr||this._zr.flush(),this[oi]=null,this[Ft]=!1,Al.call(this,o),Pl.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||xe.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(i){return this.renderToCanvas(i)},t.prototype.renderToCanvas=function(i){i=i||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:i.backgroundColor||this._model.get("backgroundColor"),pixelRatio:i.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(i){i=i||{};var r=this._zr.painter;return r.renderToString({useViewBox:i.useViewBox})},t.prototype.getSvgDataURL=function(){if(xe.svgSupported){var i=this._zr,r=i.storage.getDisplayList();return _(r,function(n){n.stopAnimation(null,!0)}),i.painter.toDataURL()}},t.prototype.getDataURL=function(i){if(this._disposed){this.id;return}i=i||{};var r=i.excludeComponents,n=this._model,o=[],s=this;_(r,function(l){n.eachComponent({mainType:l},function(u){var h=s._componentsMap[u.__viewId];h.group.ignore||(o.push(h),h.group.ignore=!0)})});var a=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(i).toDataURL("image/"+(i&&i.type||"png"));return _(o,function(l){l.group.ignore=!1}),a},t.prototype.getConnectedDataURL=function(i){if(this._disposed){this.id;return}var r=i.type==="svg",n=this.group,o=Math.min,s=Math.max,a=1/0;if(uR[n]){var l=a,u=a,h=-a,c=-a,d=[],f=i&&i.pixelRatio||this.getDevicePixelRatio();_(xu,function(C,S){if(C.group===n){var b=r?C.getZr().painter.getSvgDom().innerHTML:C.renderToCanvas(ae(i)),w=C.getDom().getBoundingClientRect();l=o(w.left,l),u=o(w.top,u),h=s(w.right,h),c=s(w.bottom,c),d.push({dom:b,left:w.left,top:w.top})}}),l*=f,u*=f,h*=f,c*=f;var p=h-l,g=c-u,v=eo.createCanvas(),m=fb(v,{renderer:r?"svg":"canvas"});if(m.resize({width:p,height:g}),r){var y="";return _(d,function(C){var S=C.left-l,b=C.top-u;y+='<g transform="translate('+S+","+b+')">'+C.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,i.connectedBackgroundColor&&m.painter.setBackgroundColor(i.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return i.connectedBackgroundColor&&m.add(new Te({shape:{x:0,y:0,width:p,height:g},style:{fill:i.connectedBackgroundColor}})),_(d,function(C){var S=new Rt({style:{x:C.left*f-l,y:C.top*f-u,image:C.dom}});m.add(S)}),m.refreshImmediately(),v.toDataURL("image/"+(i&&i.type||"png"))}else return this.getDataURL(i)},t.prototype.convertToPixel=function(i,r){return Og(this,"convertToPixel",i,r)},t.prototype.convertFromPixel=function(i,r){return Og(this,"convertFromPixel",i,r)},t.prototype.containPixel=function(i,r){if(this._disposed){this.id;return}var n=this._model,o,s=vu(n,i);return _(s,function(a,l){l.indexOf("Models")>=0&&_(a,function(u){var h=u.coordinateSystem;if(h&&h.containPoint)o=o||!!h.containPoint(r);else if(l==="seriesModels"){var c=this._chartsMap[u.__viewId];c&&c.containPoint&&(o=o||c.containPoint(r,u))}},this)},this),!!o},t.prototype.getVisual=function(i,r){var n=this._model,o=vu(n,i,{defaultMainType:"series"}),s=o.seriesModel,a=s.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?a.indexOfRawIndex(o.dataIndex):null;return l!=null?US(a,l,r):xh(a,r)},t.prototype.getViewOfComponentModel=function(i){return this._componentsMap[i.__viewId]},t.prototype.getViewOfSeriesModel=function(i){return this._chartsMap[i.__viewId]},t.prototype._initEvents=function(){var i=this;_(p8,function(r){var n=function(o){var s=i.getModel(),a=o.target,l,u=r==="globalout";if(u?l={}:a&&is(a,function(p){var g=ue(p);if(g&&g.dataIndex!=null){var v=g.dataModel||s.getSeriesByIndex(g.seriesIndex);return l=v&&v.getDataParams(g.dataIndex,g.dataType,a)||{},!0}else if(g.eventData)return l=V({},g.eventData),!0},!0),l){var h=l.componentType,c=l.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",c=l.seriesIndex);var d=h&&c!=null&&s.getComponent(h,c),f=d&&i[d.mainType==="series"?"_chartsMap":"_componentsMap"][d.__viewId];l.event=o,l.type=r,i._$eventProcessor.eventInfo={targetEl:a,packedEvent:l,model:d,view:f},i.trigger(r,l)}};n.zrEventfulCallAtLast=!0,i._zr.on(r,n,i)}),_(bu,function(r,n){i._messageCenter.on(n,function(o){this.trigger(n,o)},i)}),_(["selectchanged"],function(r){i._messageCenter.on(r,function(n){this.trigger(r,n)},i)}),RX(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var i=this.getDom();i&&E1(this.getDom(),XS,"");var r=this,n=r._api,o=r._model;_(r._componentsViews,function(s){s.dispose(o,n)}),_(r._chartsViews,function(s){s.dispose(o,n)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete xu[r.id]},t.prototype.resize=function(i){if(!this[Ft]){if(this._disposed){this.id;return}this._zr.resize(i);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var n=r.resetOption("media"),o=i&&i.silent;this[oi]&&(o==null&&(o=this[oi].silent),n=!0,this[oi]=null),this[Ft]=!0;try{n&&ea(this),Dn.update.call(this,{type:"resize",animation:V({duration:0},i&&i.animation)})}catch(s){throw this[Ft]=!1,s}this[Ft]=!1,Al.call(this,o),Pl.call(this,o)}}},t.prototype.showLoading=function(i,r){if(this._disposed){this.id;return}if(se(i)&&(r=i,i=""),i=i||"default",this.hideLoading(),!!Ry[i]){var n=Ry[i](this._api,r),o=this._zr;this._loadingFX=n,o.add(n)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(i){var r=V({},i);return r.type=bu[i.type],r},t.prototype.dispatchAction=function(i,r){if(this._disposed){this.id;return}if(se(r)||(r={silent:!!r}),!!Qd[i.type]&&this._model){if(this[Ft]){this._pendingActions.push(i);return}var n=r.silent;Ng.call(this,i,n);var o=r.flush;o?this._zr.flush():o!==!1&&xe.browser.weChat&&this._throttledZrFlush(),Al.call(this,n),Pl.call(this,n)}},t.prototype.updateLabelLayout=function(){Zi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(i){if(this._disposed){this.id;return}var r=i.seriesIndex,n=this.getModel(),o=n.getSeriesByIndex(r);o.appendData(i),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){ea=function(c){var d=c._scheduler;d.restorePipelines(c._model),d.prepareStageTasks(),kg(c,!0),kg(c,!1),d.plan()},kg=function(c,d){for(var f=c._model,p=c._scheduler,g=d?c._componentsViews:c._chartsViews,v=d?c._componentsMap:c._chartsMap,m=c._zr,y=c._api,C=0;C<g.length;C++)g[C].__alive=!1;d?f.eachComponent(function(w,x){w!=="series"&&S(x)}):f.eachSeries(S);function S(w){var x=w.__requireNewView;w.__requireNewView=!1;var R="_ec_"+w.id+"_"+w.type,D=!x&&v[R];if(!D){var T=Rr(w.type),A=d?Qe.getClass(T.main,T.sub):We.getClass(T.sub);D=new A,D.init(f,y),v[R]=D,g.push(D),m.add(D.group)}w.__viewId=D.__id=R,D.__alive=!0,D.__model=w,D.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!d&&p.prepareView(D,w,f,y)}for(var C=0;C<g.length;){var b=g[C];b.__alive?C++:(!d&&b.renderTask.dispose(),m.remove(b.group),b.dispose(f,y),g.splice(C,1),v[b.__id]===b&&delete v[b.__id],b.__id=b.group.__ecComponentInfo=null)}},pc=function(c,d,f,p,g){var v=c._model;if(v.setUpdatePayload(f),!p){_([].concat(c._componentsViews).concat(c._chartsViews),b);return}var m={};m[p+"Id"]=f[p+"Id"],m[p+"Index"]=f[p+"Index"],m[p+"Name"]=f[p+"Name"];var y={mainType:p,query:m};g&&(y.subType=g);var C=f.excludeSeriesId,S;C!=null&&(S=Q(),_(ze(C),function(w){var x=ft(w,null);x!=null&&S.set(x,!0)})),v&&v.eachComponent(y,function(w){var x=S&&S.get(w.id)!=null;if(!x)if(Wb(f))if(w instanceof qe)f.type===ps&&!f.notBlur&&!w.get(["emphasis","disabled"])&&FK(w,f,c._api);else{var R=xS(w.mainType,w.componentIndex,f.name,c._api),D=R.focusSelf,T=R.dispatchers;f.type===ps&&D&&!f.notBlur&&ny(w.mainType,w.componentIndex,c._api),T&&_(T,function(A){f.type===ps?an(A):ln(A)})}else sy(f)&&w instanceof qe&&(LK(w,f,c._api),Hb(w),bi(c))},c),v&&v.eachComponent(y,function(w){var x=S&&S.get(w.id)!=null;x||b(c[p==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},c);function b(w){w&&w.__alive&&w[d]&&w[d](w.__model,v,c._api,f)}},Dn={prepareAndUpdate:function(c){ea(this),Dn.update.call(this,c,{optionChanged:c.newOption!=null})},update:function(c,d){var f=this._model,p=this._api,g=this._zr,v=this._coordSysMgr,m=this._scheduler;if(f){f.setUpdatePayload(c),m.restoreData(f,c),m.performSeriesTasks(f),v.create(f,p),m.performDataProcessorTasks(f,c),Gg(this,f),v.update(f,p),i(f),m.performVisualTasks(f,c),Vg(this,f,p,c,d);var y=f.get("backgroundColor")||"transparent",C=f.get("darkMode");g.setBackgroundColor(y),C!=null&&C!=="auto"&&g.setDarkMode(C),Zi.trigger("afterupdate",f,p)}},updateTransform:function(c){var d=this,f=this._model,p=this._api;if(f){f.setUpdatePayload(c);var g=[];f.eachComponent(function(m,y){if(m!=="series"){var C=d.getViewOfComponentModel(y);if(C&&C.__alive)if(C.updateTransform){var S=C.updateTransform(y,f,p,c);S&&S.update&&g.push(C)}else g.push(C)}});var v=Q();f.eachSeries(function(m){var y=d._chartsMap[m.__viewId];if(y.updateTransform){var C=y.updateTransform(m,f,p,c);C&&C.update&&v.set(m.uid,1)}else v.set(m.uid,1)}),i(f),this._scheduler.performVisualTasks(f,c,{setDirty:!0,dirtyMap:v}),gc(this,f,p,c,{},v),Zi.trigger("afterupdate",f,p)}},updateView:function(c){var d=this._model;d&&(d.setUpdatePayload(c),We.markUpdateMethod(c,"updateView"),i(d),this._scheduler.performVisualTasks(d,c,{setDirty:!0}),Vg(this,d,this._api,c,{}),Zi.trigger("afterupdate",d,this._api))},updateVisual:function(c){var d=this,f=this._model;f&&(f.setUpdatePayload(c),f.eachSeries(function(p){p.getData().clearAllVisual()}),We.markUpdateMethod(c,"updateVisual"),i(f),this._scheduler.performVisualTasks(f,c,{visualType:"visual",setDirty:!0}),f.eachComponent(function(p,g){if(p!=="series"){var v=d.getViewOfComponentModel(g);v&&v.__alive&&v.updateVisual(g,f,d._api,c)}}),f.eachSeries(function(p){var g=d._chartsMap[p.__viewId];g.updateVisual(p,f,d._api,c)}),Zi.trigger("afterupdate",f,this._api))},updateLayout:function(c){Dn.update.call(this,c)}},Og=function(c,d,f,p){if(c._disposed){c.id;return}for(var g=c._model,v=c._coordSysMgr.getCoordinateSystems(),m,y=vu(g,f),C=0;C<v.length;C++){var S=v[C];if(S[d]&&(m=S[d](g,y,p))!=null)return m}},Gg=function(c,d){var f=c._chartsMap,p=c._scheduler;d.eachSeries(function(g){p.updateStreamModes(g,f[g.__viewId])})},Ng=function(c,d){var f=this,p=this.getModel(),g=c.type,v=c.escapeConnect,m=Qd[g],y=m.actionInfo,C=(y.update||"update").split(":"),S=C.pop(),b=C[0]!=null&&Rr(C[0]);this[Ft]=!0;var w=[c],x=!1;c.batch&&(x=!0,w=z(c.batch,function(F){return F=ne(V({},F),c),F.batch=null,F}));var R=[],D,T=sy(c),A=Wb(c);if(A&&J1(this._api),_(w,function(F){if(D=m.action(F,f._model,f._api),D=D||V({},F),D.type=y.event||D.type,R.push(D),A){var E=gS(c),I=E.queryOptionMap,O=E.mainTypeSpecified,k=O?I.keys()[0]:"series";pc(f,S,F,k),bi(f)}else T?(pc(f,S,F,"series"),bi(f)):b&&pc(f,S,F,b.main,b.sub)}),S!=="none"&&!A&&!T&&!b)try{this[oi]?(ea(this),Dn.update.call(this,c),this[oi]=null):Dn[S].call(this,c)}catch(F){throw this[Ft]=!1,F}if(x?D={type:y.event||g,escapeConnect:v,batch:R}:D=R[0],this[Ft]=!1,!d){var P=this._messageCenter;if(P.trigger(D.type,D),T){var M={type:"selectchanged",escapeConnect:v,selected:kK(p),isFromClick:c.isFromClick||!1,fromAction:c.type,fromActionPayload:c};P.trigger(M.type,M)}}},Al=function(c){for(var d=this._pendingActions;d.length;){var f=d.shift();Ng.call(this,f,c)}},Pl=function(c){!c&&this.trigger("updated")},nR=function(c,d){c.on("rendered",function(f){d.trigger("rendered",f),c.animation.isFinished()&&!d[oi]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},oR=function(c,d){c.on("mouseover",function(f){var p=f.target,g=is(p,zu);g&&(EK(g,f,d._api),bi(d))}).on("mouseout",function(f){var p=f.target,g=is(p,zu);g&&(IK(g,f,d._api),bi(d))}).on("click",function(f){var p=f.target,g=is(p,function(y){return ue(y).dataIndex!=null},!0);if(g){var v=g.selected?"unselect":"select",m=ue(g);d._api.dispatchAction({type:v,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function i(c){c.clearColorPalette(),c.eachSeries(function(d){d.clearColorPalette()})}function r(c){var d=[],f=[],p=!1;if(c.eachComponent(function(y,C){var S=C.get("zlevel")||0,b=C.get("z")||0,w=C.getZLevelKey();p=p||!!w,(y==="series"?f:d).push({zlevel:S,z:b,idx:C.componentIndex,type:y,key:w})}),p){var g=d.concat(f),v,m;Qc(g,function(y,C){return y.zlevel===C.zlevel?y.z-C.z:y.zlevel-C.zlevel}),_(g,function(y){var C=c.getComponent(y.type,y.idx),S=y.zlevel,b=y.key;v!=null&&(S=Math.max(v,S)),b?(S===v&&b!==m&&S++,m=b):m&&(S===v&&S++,m=""),v=S,C.setZLevel(S)})}}Vg=function(c,d,f,p,g){r(d),sR(c,d,f,p,g),_(c._chartsViews,function(v){v.__alive=!1}),gc(c,d,f,p,g),_(c._chartsViews,function(v){v.__alive||v.remove(d,f)})},sR=function(c,d,f,p,g,v){_(v||c._componentsViews,function(m){var y=m.__model;u(y,m),m.render(y,d,f,p),a(y,m),h(y,m)})},gc=function(c,d,f,p,g,v){var m=c._scheduler;g=V(g||{},{updatedSeries:d.getSeries()}),Zi.trigger("series:beforeupdate",d,f,g);var y=!1;d.eachSeries(function(C){var S=c._chartsMap[C.__viewId];S.__alive=!0;var b=S.renderTask;m.updatePayload(b,p),u(C,S),v&&v.get(C.uid)&&b.dirty(),b.perform(m.getPerformArgs(b))&&(y=!0),S.group.silent=!!C.get("silent"),s(C,S),Hb(C)}),m.unfinished=y||m.unfinished,Zi.trigger("series:layoutlabels",d,f,g),Zi.trigger("series:transition",d,f,g),d.eachSeries(function(C){var S=c._chartsMap[C.__viewId];a(C,S),h(C,S)}),o(c,d),Zi.trigger("series:afterupdate",d,f,g)},bi=function(c){c[Ig]=!0,c.getZr().wakeUp()},lR=function(c){c[Ig]&&(c.getZr().storage.traverse(function(d){Ta(d)||n(d)}),c[Ig]=!1)};function n(c){for(var d=[],f=c.currentStates,p=0;p<f.length;p++){var g=f[p];g==="emphasis"||g==="blur"||g==="select"||d.push(g)}c.selected&&c.states.select&&d.push("select"),c.hoverState===Uf&&c.states.emphasis?d.push("emphasis"):c.hoverState===vh&&c.states.blur&&d.push("blur"),c.useStates(d)}function o(c,d){var f=c._zr,p=f.storage,g=0;p.traverse(function(v){v.isGroup||g++}),g>d.get("hoverLayerThreshold")&&!xe.node&&!xe.worker&&d.eachSeries(function(v){if(!v.preventUsingHoverLayer){var m=c._chartsMap[v.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function s(c,d){var f=c.get("blendMode")||null;d.eachRendered(function(p){p.isGroup||(p.style.blend=f)})}function a(c,d){if(!c.preventAutoZ){var f=c.get("z")||0,p=c.get("zlevel")||0;d.eachRendered(function(g){return l(g,f,p,-1/0),!0})}}function l(c,d,f,p){var g=c.getTextContent(),v=c.getTextGuideLine(),m=c.isGroup;if(m)for(var y=c.childrenRef(),C=0;C<y.length;C++)p=Math.max(l(y[C],d,f,p),p);else c.z=d,c.zlevel=f,p=Math.max(c.z2,p);if(g&&(g.z=d,g.zlevel=f,isFinite(p)&&(g.z2=p+2)),v){var S=c.textGuideLineConfig;v.z=d,v.zlevel=f,isFinite(p)&&(v.z2=p+(S&&S.showAbove?1:-1))}return p}function u(c,d){d.eachRendered(function(f){if(!Ta(f)){var p=f.getTextContent(),g=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function h(c,d){var f=c.getModel("stateAnimation"),p=c.isAnimationEnabled(),g=f.get("duration"),v=g>0?{duration:g,delay:f.get("delay"),easing:f.get("easing")}:null;d.eachRendered(function(m){if(m.states&&m.states.emphasis){if(Ta(m))return;if(m instanceof be&&BK(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(p){m.stateTransition=v;var C=m.getTextContent(),S=m.getTextGuideLine();C&&(C.stateTransition=v),S&&(S.stateTransition=v)}m.__dirty&&n(m)}})}aR=function(c){return new(function(d){L(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return c._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(p){for(;p;){var g=p.__ecComponentInfo;if(g!=null)return c._model.getComponent(g.mainType,g.index);p=p.parent}},f.prototype.enterEmphasis=function(p,g){an(p,g),bi(c)},f.prototype.leaveEmphasis=function(p,g){ln(p,g),bi(c)},f.prototype.enterBlur=function(p){q1(p),bi(c)},f.prototype.leaveBlur=function(p){bS(p),bi(c)},f.prototype.enterSelect=function(p){Z1(p),bi(c)},f.prototype.leaveSelect=function(p){j1(p),bi(c)},f.prototype.getModel=function(){return c.getModel()},f.prototype.getViewOfComponentModel=function(p){return c.getViewOfComponentModel(p)},f.prototype.getViewOfSeriesModel=function(p){return c.getViewOfSeriesModel(p)},f}(WF))(c)},NE=function(c){function d(f,p){for(var g=0;g<f.length;g++){var v=f[g];v[Lg]=p}}_(bu,function(f,p){c._messageCenter.on(p,function(g){if(uR[c.group]&&c[Lg]!==rR){if(g&&g.escapeConnect)return;var v=c.makeActionFromEvent(g),m=[];_(xu,function(y){y!==c&&y.group===c.group&&m.push(y)}),d(m,rR),_(m,function(y){y[Lg]!==d8&&y.dispatchAction(v)}),d(m,f8)}})})}}(),t}(Wi),YS=VE.prototype;YS.on=IE("on");YS.off=IE("off");YS.one=function(e,t,i){var r=this;function n(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];t&&t.apply&&t.apply(this,o),r.off(e,n)}this.on.call(this,e,n,i)};var p8=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Qd={},bu={},by=[],xy=[],Jd=[],BE={},Ry={},xu={},uR={},g8=+new Date-0,XS="_echarts_instance_";function Dae(e,t,i){{var r=v8(e);if(r)return r}var n=new VE(e,t,i);return n.id="ec_"+g8++,xu[n.id]=n,E1(e,XS,n.id),NE(n),Zi.trigger("afterinit",n),n}function v8(e){return xu[A4(e,XS)]}function HE(e,t){BE[e]=t}function zE(e){Ce(xy,e)<0&&xy.push(e)}function WE(e,t){ZS(by,e,t,n8)}function m8(e){qS("afterinit",e)}function y8(e){qS("afterupdate",e)}function qS(e,t){Zi.on(e,t)}function Nr(e,t,i){ie(t)&&(i=t,t="");var r=se(e)?e.type:[e,e={event:t}][0];e.event=(e.event||r).toLowerCase(),t=e.event,!bu[t]&&(jt(iR.test(r)&&iR.test(t)),Qd[r]||(Qd[r]={action:i,actionInfo:e}),bu[t]=r)}function C8(e,t){bh.register(e,t)}function S8(e,t){ZS(Jd,e,t,ME,"layout")}function Ns(e,t){ZS(Jd,e,t,FE,"visual")}var hR=[];function ZS(e,t,i,r,n){if((ie(t)||se(t))&&(i=t,t=r),!(Ce(hR,i)>=0)){hR.push(i);var o=vE.wrapStageHandler(i,n);o.__prio=t,o.__raw=i,e.push(o)}}function UE(e,t){Ry[e]=t}function w8(e,t,i){var r=JX("registerMap");r&&r(e,t,i)}var b8=k6;Ns(KS,aX);Ns(sp,lX);Ns(sp,uX);Ns(KS,bX);Ns(sp,xX);Ns(EE,jX);zE($F);WE(i8,g6);UE("default",hX);Nr({type:ps,event:ps,update:ps},at);Nr({type:rd,event:rd,update:rd},at);Nr({type:mu,event:mu,update:mu},at);Nr({type:nd,event:nd,update:nd},at);Nr({type:yu,event:yu,update:yu},at);HE("light",SX);HE("dark",SE);var cR=[],x8={registerPreprocessor:zE,registerProcessor:WE,registerPostInit:m8,registerPostUpdate:y8,registerUpdateLifecycle:qS,registerAction:Nr,registerCoordinateSystem:C8,registerLayout:S8,registerVisual:Ns,registerTransform:b8,registerLoading:UE,registerMap:w8,registerImpl:QX,PRIORITY:c8,ComponentModel:Re,ComponentView:Qe,SeriesModel:qe,ChartView:We,registerComponentModel:function(e){Re.registerClass(e)},registerComponentView:function(e){Qe.registerClass(e)},registerSeriesModel:function(e){qe.registerClass(e)},registerChartView:function(e){We.registerClass(e)},registerSubTypeDefaulter:function(e,t){Re.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){s4(e,t)}};function we(e){if(H(e)){_(e,function(t){we(t)});return}Ce(cR,e)>=0||(cR.push(e),ie(e)&&(e={install:e}),e.install(x8))}function Ml(e){return e==null?0:e.length||1}function dR(e){return e}var un=function(){function e(t,i,r,n,o,s){this._old=t,this._new=i,this._oldKeyGetter=r||dR,this._newKeyGetter=n||dR,this.context=o,this._diffModeMultiple=s==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,i=this._new,r={},n=new Array(t.length),o=new Array(i.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(i,r,o,"_newKeyGetter");for(var s=0;s<t.length;s++){var a=n[s],l=r[a],u=Ml(l);if(u>1){var h=l.shift();l.length===1&&(r[a]=l[0]),this._update&&this._update(h,s)}else u===1?(r[a]=null,this._update&&this._update(l,s)):this._remove&&this._remove(s)}this._performRestAdd(o,r)},e.prototype._executeMultiple=function(){var t=this._old,i=this._new,r={},n={},o=[],s=[];this._initIndexMap(t,r,o,"_oldKeyGetter"),this._initIndexMap(i,n,s,"_newKeyGetter");for(var a=0;a<o.length;a++){var l=o[a],u=r[l],h=n[l],c=Ml(u),d=Ml(h);if(c>1&&d===1)this._updateManyToOne&&this._updateManyToOne(h,u),n[l]=null;else if(c===1&&d>1)this._updateOneToMany&&this._updateOneToMany(h,u),n[l]=null;else if(c===1&&d===1)this._update&&this._update(h,u),n[l]=null;else if(c>1&&d>1)this._updateManyToMany&&this._updateManyToMany(h,u),n[l]=null;else if(c>1)for(var f=0;f<c;f++)this._remove&&this._remove(u[f]);else this._remove&&this._remove(u)}this._performRestAdd(s,n)},e.prototype._performRestAdd=function(t,i){for(var r=0;r<t.length;r++){var n=t[r],o=i[n],s=Ml(o);if(s>1)for(var a=0;a<s;a++)this._add&&this._add(o[a]);else s===1&&this._add&&this._add(o);i[n]=null}},e.prototype._initIndexMap=function(t,i,r,n){for(var o=this._diffModeMultiple,s=0;s<t.length;s++){var a="_ec_"+this[n](t[s],s);if(o||(r[s]=a),!!i){var l=i[a],u=Ml(l);u===0?(i[a]=s,o&&r.push(a)):u===1?i[a]=[l,s]:l.push(s)}}},e}(),R8=function(){function e(t,i){this._encode=t,this._schema=i}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function D8(e,t){var i={},r=i.encode={},n=Q(),o=[],s=[],a={};_(e.dimensions,function(d){var f=e.getDimensionInfo(d),p=f.coordDim;if(p){var g=f.coordDimIndex;Bg(r,p)[g]=d,f.isExtraCoord||(n.set(p,1),T8(f.type)&&(o[0]=d),Bg(a,p)[g]=e.getDimensionIndex(f.name)),f.defaultTooltip&&s.push(d)}OF.each(function(v,m){var y=Bg(r,m),C=f.otherDims[m];C!=null&&C!==!1&&(y[C]=f.name)})});var l=[],u={};n.each(function(d,f){var p=r[f];u[f]=p[0],l=l.concat(p)}),i.dataDimsOnCoord=l,i.dataDimIndicesOnCoord=z(l,function(d){return e.getDimensionInfo(d).storeDimIndex}),i.encodeFirstDimNotExtra=u;var h=r.label;h&&h.length&&(o=h.slice());var c=r.tooltip;return c&&c.length?s=c.slice():s.length||(s=o.slice()),r.defaultedLabel=o,r.defaultedTooltip=s,i.userOutput=new R8(a,t),i}function Bg(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function ef(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function T8(e){return!(e==="ordinal"||e==="time")}var ud=function(){function e(t){this.otherDims={},t!=null&&V(this,t)}return e}(),_8=_e(),A8={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},$E=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=XE(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return de(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var i=this.source.dimensionsDefine;if(i)return i[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,i=YF(this.source),r=!qE(t),n="",o=[],s=0,a=0;s<t;s++){var l=void 0,u=void 0,h=void 0,c=this.dimensions[a];if(c&&c.storeDimIndex===s)l=i?c.name:null,u=c.type,h=c.ordinalMeta,a++;else{var d=this.getSourceDimension(s);d&&(l=i?d.name:null,u=d.type)}o.push({property:l,type:u,ordinalMeta:h}),i&&l!=null&&(!c||!c.isCalculationCoord)&&(n+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),n+="$",n+=A8[u]||"f",h&&(n+=h.uid),n+="$"}var f=this.source,p=[f.seriesLayoutBy,f.startIndex,n].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],i=0,r=0;i<this._fullDimCount;i++){var n=void 0,o=this.dimensions[r];if(o&&o.storeDimIndex===i)o.isCalculationCoord||(n=o.name),r++;else{var s=this.getSourceDimension(i);s&&(n=s.name)}t.push(n)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function KE(e){return e instanceof $E}function YE(e){for(var t=Q(),i=0;i<(e||[]).length;i++){var r=e[i],n=se(r)?r.name:r;n!=null&&t.get(n)==null&&t.set(n,i)}return t}function XE(e){var t=_8(e);return t.dimNameMap||(t.dimNameMap=YE(e.dimensionsDefine))}function qE(e){return e>30}var Fl=se,Tn=z,P8=typeof Int32Array>"u"?Array:Int32Array,M8="e\0\0",fR=-1,F8=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],E8=["_approximateExtent"],pR,vc,El,Il,Hg,Ll,zg,qt=function(){function e(t,i){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,n=!1;KE(t)?(r=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,r=t),r=r||["x","y"];for(var o={},s=[],a={},l=!1,u={},h=0;h<r.length;h++){var c=r[h],d=q(c)?new ud({name:c}):c instanceof ud?c:new ud(c),f=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=f,d.coordDimIndex=0);var p=d.otherDims=d.otherDims||{};s.push(f),o[f]=d,u[f]!=null&&(l=!0),d.createInvertedIndices&&(a[f]=[]),p.itemName===0&&(this._nameDimIdx=h),p.itemId===0&&(this._idDimIdx=h),n&&(d.storeDimIndex=h)}if(this.dimensions=s,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=i,this._invertedIndicesMap=a,this._dimOmitted){var g=this._dimIdxToName=Q();_(s,function(v){g.set(o[v].storeDimIndex,v)})}}return e.prototype.getDimension=function(t){var i=this._recognizeDimIndex(t);if(i==null)return t;if(i=t,!this._dimOmitted)return this.dimensions[i];var r=this._dimIdxToName.get(i);if(r!=null)return r;var n=this._schema.getSourceDimension(i);if(n)return n.name},e.prototype.getDimensionIndex=function(t){var i=this._recognizeDimIndex(t);if(i!=null)return i;if(t==null)return-1;var r=this._getDimInfo(t);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Pe(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var i=this.getDimensionIndex(t);return i},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var i=this._dimInfos;this._getDimInfo=t?function(r){return i.hasOwnProperty(r)?i[r]:void 0}:function(r){return i[r]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,i){var r=this._dimSummary;if(i==null)return r.encodeFirstDimNotExtra[t];var n=r.encode[t];return n?n[i]:null},e.prototype.mapDimensionsAll=function(t){var i=this._dimSummary,r=i.encode[t];return(r||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,i,r){var n=this,o;if(t instanceof gy&&(o=t),!o){var s=this.dimensions,a=VS(t)||Ot(t)?new XF(t,s.length):t;o=new gy;var l=Tn(s,function(u){return{type:n._dimInfos[u].type,property:u}});o.initData(a,l,r)}this._store=o,this._nameList=(i||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=D8(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var i=this._store.appendData(t);this._doInit(i[0],i[1])},e.prototype.appendValues=function(t,i){var r=this._store.appendValues(t,i&&i.length),n=r.start,o=r.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),i)for(var a=n;a<o;a++){var l=a-n;this._nameList[a]=i[l],s&&zg(this,a)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,i=this.dimensions,r=0;r<i.length;r++){var n=this._dimInfos[i[r]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Yn&&!t.fillStorage},e.prototype._doInit=function(t,i){if(!(t>=i)){var r=this._store,n=r.getProvider();this._updateOrdinalMeta();var o=this._nameList,s=this._idList,a=n.getSource().sourceFormat,l=a===Ui;if(l&&!n.pure)for(var u=[],h=t;h<i;h++){var c=n.getItem(h,u);if(!this.hasItemOption&&g4(c)&&(this.hasItemOption=!0),c){var d=c.name;o[h]==null&&d!=null&&(o[h]=ft(d,null));var f=c.id;s[h]==null&&f!=null&&(s[h]=ft(f,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<i;h++)zg(this,h);pR(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,i){i=this.getDimension(i),this._approximateExtent[i]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,i){Fl(t)?V(this._calculationInfo,t):this._calculationInfo[t]=i},e.prototype.getName=function(t){var i=this.getRawIndex(t),r=this._nameList[i];return r==null&&this._nameDimIdx!=null&&(r=El(this,this._nameDimIdx,i)),r==null&&(r=""),r},e.prototype._getCategory=function(t,i){var r=this._store.get(t,i),n=this._store.getOrdinalMeta(t);return n?n.categories[r]:r},e.prototype.getId=function(t){return vc(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,i){var r=this._store,n=this._dimInfos[t];if(n)return r.get(n.storeDimIndex,i)},e.prototype.getByRawIndex=function(t,i){var r=this._store,n=this._dimInfos[t];if(n)return r.getByRawIndex(n.storeDimIndex,i)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,i){var r=this,n=this._store;return H(t)?n.getValues(Tn(t,function(o){return r._getStoreDimIndex(o)}),i):n.getValues(t)},e.prototype.hasValue=function(t){for(var i=this._dimSummary.dataDimIndicesOnCoord,r=0,n=i.length;r<n;r++)if(isNaN(this._store.get(i[r],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var i=0,r=this._store.count();i<r;i++)if(this.getName(i)===t)return i;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,i){var r=t&&this._invertedIndicesMap[t],n=r&&r[i];return n==null||isNaN(n)?fR:n},e.prototype.indicesOfNearest=function(t,i,r){return this._store.indicesOfNearest(this._getStoreDimIndex(t),i,r)},e.prototype.each=function(t,i,r){ie(t)&&(r=i,i=t,t=[]);var n=r||this,o=Tn(Il(t),this._getStoreDimIndex,this);this._store.each(o,n?Z(i,n):i)},e.prototype.filterSelf=function(t,i,r){ie(t)&&(r=i,i=t,t=[]);var n=r||this,o=Tn(Il(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,n?Z(i,n):i),this},e.prototype.selectRange=function(t){var i=this,r={},n=De(t);return _(n,function(o){var s=i._getStoreDimIndex(o);r[s]=t[o]}),this._store=this._store.selectRange(r),this},e.prototype.mapArray=function(t,i,r){ie(t)&&(r=i,i=t,t=[]),r=r||this;var n=[];return this.each(t,function(){n.push(i&&i.apply(this,arguments))},r),n},e.prototype.map=function(t,i,r,n){var o=r||n||this,s=Tn(Il(t),this._getStoreDimIndex,this),a=Ll(this);return a._store=this._store.map(s,o?Z(i,o):i),a},e.prototype.modify=function(t,i,r,n){var o=r||n||this,s=Tn(Il(t),this._getStoreDimIndex,this);this._store.modify(s,o?Z(i,o):i)},e.prototype.downSample=function(t,i,r,n){var o=Ll(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),i,r,n),o},e.prototype.minmaxDownSample=function(t,i){var r=Ll(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(t),i),r},e.prototype.lttbDownSample=function(t,i){var r=Ll(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(t),i),r},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var i=this.hostModel,r=this.getRawDataItem(t);return new Ne(r,i,i&&i.ecModel)},e.prototype.diff=function(t){var i=this;return new un(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return vc(t,r)},function(r){return vc(i,r)})},e.prototype.getVisual=function(t){var i=this._visual;return i&&i[t]},e.prototype.setVisual=function(t,i){this._visual=this._visual||{},Fl(t)?V(this._visual,t):this._visual[t]=i},e.prototype.getItemVisual=function(t,i){var r=this._itemVisuals[t],n=r&&r[i];return n??this.getVisual(i)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,i){var r=this._itemVisuals,n=r[t];n||(n=r[t]={});var o=n[i];return o==null&&(o=this.getVisual(i),H(o)?o=o.slice():Fl(o)&&(o=V({},o)),n[i]=o),o},e.prototype.setItemVisual=function(t,i,r){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,Fl(i)?V(n,i):n[i]=r},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,i){Fl(t)?V(this._layout,t):this._layout[t]=i},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,i,r){this._itemLayouts[t]=r?V(this._itemLayouts[t]||{},i):i},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,i){var r=this.hostModel&&this.hostModel.seriesIndex;iy(r,this.dataType,t,i),this._graphicEls[t]=i},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,i){_(this._graphicEls,function(r,n){r&&t&&t.call(i,r,n)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Tn(this.dimensions,this._getDimInfo,this),this.hostModel)),Hg(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,i){var r=this[t];ie(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var n=r.apply(this,arguments);return i.apply(this,[n].concat(oS(arguments)))})},e.internalField=function(){pR=function(t){var i=t._invertedIndicesMap;_(i,function(r,n){var o=t._dimInfos[n],s=o.ordinalMeta,a=t._store;if(s){r=i[n]=new P8(s.categories.length);for(var l=0;l<r.length;l++)r[l]=fR;for(var l=0;l<a.count();l++)r[a.get(o.storeDimIndex,l)]=l}})},El=function(t,i,r){return ft(t._getCategory(i,r),null)},vc=function(t,i){var r=t._idList[i];return r==null&&t._idDimIdx!=null&&(r=El(t,t._idDimIdx,i)),r==null&&(r=M8+i),r},Il=function(t){return H(t)||(t=t!=null?[t]:[]),t},Ll=function(t){var i=new e(t._schema?t._schema:Tn(t.dimensions,t._getDimInfo,t),t.hostModel);return Hg(i,t),i},Hg=function(t,i){_(F8.concat(i.__wrappedMethods||[]),function(r){i.hasOwnProperty(r)&&(t[r]=i[r])}),t.__wrappedMethods=i.__wrappedMethods,_(E8,function(r){t[r]=ae(i[r])}),t._calculationInfo=V({},i._calculationInfo)},zg=function(t,i){var r=t._nameList,n=t._idList,o=t._nameDimIdx,s=t._idDimIdx,a=r[i],l=n[i];if(a==null&&o!=null&&(r[i]=a=El(t,o,i)),l==null&&s!=null&&(n[i]=l=El(t,s,i)),l==null&&a!=null){var u=t._nameRepeatCount,h=u[a]=(u[a]||0)+1;l=a,h>1&&(l+="__ec__"+h),n[i]=l}}}(),e}();function Rh(e,t){VS(e)||(e=BS(e)),t=t||{};var i=t.coordDimensions||[],r=t.dimensionsDefine||e.dimensionsDefine||[],n=Q(),o=[],s=L8(e,i,r,t.dimensionsCount),a=t.canOmitUnusedDimensions&&qE(s),l=r===e.dimensionsDefine,u=l?XE(e):YE(r),h=t.encodeDefine;!h&&t.encodeDefaulter&&(h=t.encodeDefaulter(e,s));for(var c=Q(h),d=new iE(s),f=0;f<d.length;f++)d[f]=-1;function p(D){var T=d[D];if(T<0){var A=r[D],P=se(A)?A:{name:A},M=new ud,F=P.name;F!=null&&u.get(F)!=null&&(M.name=M.displayName=F),P.type!=null&&(M.type=P.type),P.displayName!=null&&(M.displayName=P.displayName);var E=o.length;return d[D]=E,M.storeDimIndex=D,o.push(M),M}return o[T]}if(!a)for(var f=0;f<s;f++)p(f);c.each(function(D,T){var A=ze(D).slice();if(A.length===1&&!q(A[0])&&A[0]<0){c.set(T,!1);return}var P=c.set(T,[]);_(A,function(M,F){var E=q(M)?u.get(M):M;E!=null&&E<s&&(P[F]=E,v(p(E),T,F))})});var g=0;_(i,function(D){var T,A,P,M;if(q(D))T=D,M={};else{M=D,T=M.name;var F=M.ordinalMeta;M.ordinalMeta=null,M=V({},M),M.ordinalMeta=F,A=M.dimsDef,P=M.otherDims,M.name=M.coordDim=M.coordDimIndex=M.dimsDef=M.otherDims=null}var E=c.get(T);if(E!==!1){if(E=ze(E),!E.length)for(var I=0;I<(A&&A.length||1);I++){for(;g<s&&p(g).coordDim!=null;)g++;g<s&&E.push(g++)}_(E,function(O,k){var G=p(O);if(l&&M.type!=null&&(G.type=M.type),v(ne(G,M),T,k),G.name==null&&A){var W=A[k];!se(W)&&(W={name:W}),G.name=G.displayName=W.name,G.defaultTooltip=W.defaultTooltip}P&&ne(G.otherDims,P)})}});function v(D,T,A){OF.get(T)!=null?D.otherDims[T]=A:(D.coordDim=T,D.coordDimIndex=A,n.set(T,!0))}var m=t.generateCoord,y=t.generateCoordCount,C=y!=null;y=m?y||1:0;var S=m||"value";function b(D){D.name==null&&(D.name=D.coordDim)}if(a)_(o,function(D){b(D)}),o.sort(function(D,T){return D.storeDimIndex-T.storeDimIndex});else for(var w=0;w<s;w++){var x=p(w),R=x.coordDim;R==null&&(x.coordDim=k8(S,n,C),x.coordDimIndex=0,(!m||y<=0)&&(x.isExtraCoord=!0),y--),b(x),x.type==null&&(BF(e,w)===Dt.Must||x.isExtraCoord&&(x.otherDims.itemName!=null||x.otherDims.seriesName!=null))&&(x.type="ordinal")}return I8(o),new $E({source:e,dimensions:o,fullDimensionCount:s,dimensionOmitted:a})}function I8(e){for(var t=Q(),i=0;i<e.length;i++){var r=e[i],n=r.name,o=t.get(n)||0;o>0&&(r.name=n+(o-1)),o++,t.set(n,o)}}function L8(e,t,i,r){var n=Math.max(e.dimensionsDetectedCount||1,t.length,i.length,r||0);return _(t,function(o){var s;se(o)&&(s=o.dimsDef)&&(n=Math.max(n,s.length))}),n}function k8(e,t,i){if(i||t.hasKey(e)){for(var r=0;t.hasKey(e+r);)r++;e+=r}return t.set(e,!0),e}var O8=function(){function e(t){this.coordSysDims=[],this.axisMap=Q(),this.categoryAxisMap=Q(),this.coordSysName=t}return e}();function G8(e){var t=e.get("coordinateSystem"),i=new O8(t),r=N8[t];if(r)return r(e,i,i.axisMap,i.categoryAxisMap),i}var N8={cartesian2d:function(e,t,i,r){var n=e.getReferringComponents("xAxis",ht).models[0],o=e.getReferringComponents("yAxis",ht).models[0];t.coordSysDims=["x","y"],i.set("x",n),i.set("y",o),ta(n)&&(r.set("x",n),t.firstCategoryDimIndex=0),ta(o)&&(r.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,i,r){var n=e.getReferringComponents("singleAxis",ht).models[0];t.coordSysDims=["single"],i.set("single",n),ta(n)&&(r.set("single",n),t.firstCategoryDimIndex=0)},polar:function(e,t,i,r){var n=e.getReferringComponents("polar",ht).models[0],o=n.findAxisModel("radiusAxis"),s=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],i.set("radius",o),i.set("angle",s),ta(o)&&(r.set("radius",o),t.firstCategoryDimIndex=0),ta(s)&&(r.set("angle",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,i,r){t.coordSysDims=["lng","lat"]},parallel:function(e,t,i,r){var n=e.ecModel,o=n.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=o.dimensions.slice();_(o.parallelAxisIndex,function(a,l){var u=n.getComponent("parallelAxis",a),h=s[l];i.set(h,u),ta(u)&&(r.set(h,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function ta(e){return e.get("type")==="category"}function V8(e,t,i){i=i||{};var r=i.byIndex,n=i.stackedCoordDimension,o,s,a;B8(t)?o=t:(s=t.schema,o=s.dimensions,a=t.store);var l=!!(e&&e.get("stack")),u,h,c,d;if(_(o,function(y,C){q(y)&&(o[C]=y={name:y}),l&&!y.isExtraCoord&&(!r&&!u&&y.ordinalMeta&&(u=y),!h&&y.type!=="ordinal"&&y.type!=="time"&&(!n||n===y.coordDim)&&(h=y))}),h&&!r&&!u&&(r=!0),h){c="__\0ecstackresult_"+e.id,d="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var f=h.coordDim,p=h.type,g=0;_(o,function(y){y.coordDim===f&&g++});var v={name:c,coordDim:f,coordDimIndex:g,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},m={name:d,coordDim:d,coordDimIndex:g+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};s?(a&&(v.storeDimIndex=a.ensureCalculationDimension(d,p),m.storeDimIndex=a.ensureCalculationDimension(c,p)),s.appendCalculationDimension(v),s.appendCalculationDimension(m)):(o.push(v),o.push(m))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:r,stackedOverDimension:d,stackResultDimension:c}}function B8(e){return!KE(e.schema)}function no(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function ZE(e,t){return no(e,t)?e.getCalculationInfo("stackResultDimension"):t}function H8(e,t){var i=e.get("coordinateSystem"),r=bh.get(i),n;return t&&t.coordSysDims&&(n=z(t.coordSysDims,function(o){var s={name:o},a=t.axisMap.get(o);if(a){var l=a.get("type");s.type=ef(l)}return s})),n||(n=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),n}function z8(e,t,i){var r,n;return i&&_(e,function(o,s){var a=o.coordDim,l=i.categoryAxisMap.get(a);l&&(r==null&&(r=s),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(n=!0)}),!n&&r!=null&&(e[r].otherDims.itemName=0),r}function mn(e,t,i){i=i||{};var r=t.getSourceManager(),n,o=!1;e?(o=!0,n=BS(e)):(n=r.getSource(),o=n.sourceFormat===Ui);var s=G8(t),a=H8(t,s),l=i.useEncodeDefaulter,u=ie(l)?l:l?fe(VF,a,t):null,h={coordDimensions:a,generateCoord:i.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},c=Rh(n,h),d=z8(c.dimensions,i.createInvertedIndices,s),f=o?null:r.getSharedDataStore(c),p=V8(t,{schema:c,store:f}),g=new qt(c,t);g.setCalculationInfo(p);var v=d!=null&&W8(n)?function(m,y,C,S){return S===d?C:this.defaultDimValueGetter(m,y,C,S)}:null;return g.hasItemOption=!1,g.initData(o?n:f,null,v),g}function W8(e){if(e.sourceFormat===Ui){var t=U8(e.data||[]);return!H(el(t))}}function U8(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var Vr=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var i=this._extent;t[0]<i[0]&&(i[0]=t[0]),t[1]>i[1]&&(i[1]=t[1])},e.prototype.unionExtentFromData=function(t,i){this.unionExtent(t.getApproximateExtent(i))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,i){var r=this._extent;isNaN(t)||(r[0]=t),isNaN(i)||(r[1]=i)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();Bf(Vr);var $8=0,Dy=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++$8}return e.createByAxisModel=function(t){var i=t.option,r=i.data,n=r&&z(r,K8);return new e({categories:n,needCollect:!n,deduplication:i.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var i,r=this._needCollect;if(!q(t)&&!r)return t;if(r&&!this._deduplication)return i=this.categories.length,this.categories[i]=t,i;var n=this._getOrCreateMap();return i=n.get(t),i==null&&(r?(i=this.categories.length,this.categories[i]=t,n.set(t,i)):i=NaN),i},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Q(this.categories))},e}();function K8(e){return se(e)&&e.value!=null?e.value:e+""}function Ty(e){return e.type==="interval"||e.type==="log"}function Y8(e,t,i,r){var n={},o=e[1]-e[0],s=n.interval=R1(o/t);i!=null&&s<i&&(s=n.interval=i),r!=null&&s>r&&(s=n.interval=r);var a=n.intervalPrecision=jE(s),l=n.niceTickExtent=[nt(Math.ceil(e[0]/s)*s,a),nt(Math.floor(e[1]/s)*s,a)];return X8(l,e),n}function Wg(e){var t=Math.pow(10,fS(e)),i=e/t;return i?i===2?i=3:i===3?i=5:i*=2:i=1,nt(i*t)}function jE(e){return xr(e)+2}function gR(e,t,i){e[t]=Math.max(Math.min(e[t],i[1]),i[0])}function X8(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),gR(e,0,t),gR(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function ap(e,t){return e>=t[0]&&e<=t[1]}function lp(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function up(e,t){return e*(t[1]-t[0])+t[0]}var hp=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;r.type="ordinal";var n=r.getSetting("ordinalMeta");return n||(n=new Dy({})),H(n)&&(n=new Dy({categories:z(n,function(o){return se(o)?o.value:o})})),r._ordinalMeta=n,r._extent=r.getSetting("extent")||[0,n.categories.length-1],r}return t.prototype.parse=function(i){return i==null?NaN:q(i)?this._ordinalMeta.getOrdinal(i):Math.round(i)},t.prototype.contain=function(i){return i=this.parse(i),ap(i,this._extent)&&this._ordinalMeta.categories[i]!=null},t.prototype.normalize=function(i){return i=this._getTickNumber(this.parse(i)),lp(i,this._extent)},t.prototype.scale=function(i){return i=Math.round(up(i,this._extent)),this.getRawOrdinalNumber(i)},t.prototype.getTicks=function(){for(var i=[],r=this._extent,n=r[0];n<=r[1];)i.push({value:n}),n++;return i},t.prototype.getMinorTicks=function(i){},t.prototype.setSortInfo=function(i){if(i==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=i.ordinalNumbers,n=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],s=0,a=this._ordinalMeta.categories.length,l=Math.min(a,r.length);s<l;++s){var u=r[s];n[s]=u,o[u]=s}for(var h=0;s<a;++s){for(;o[h]!=null;)h++;n.push(h),o[h]=s}},t.prototype._getTickNumber=function(i){var r=this._ticksByOrdinalNumber;return r&&i>=0&&i<r.length?r[i]:i},t.prototype.getRawOrdinalNumber=function(i){var r=this._ordinalNumbersByTick;return r&&i>=0&&i<r.length?r[i]:i},t.prototype.getLabel=function(i){if(!this.isBlank()){var r=this.getRawOrdinalNumber(i.value),n=this._ordinalMeta.categories[r];return n==null?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(i,r){this.unionExtent(i.getApproximateExtent(r))},t.prototype.isInExtentRange=function(i){return i=this._getTickNumber(i),this._extent[0]<=i&&this._extent[1]>=i},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Vr);Vr.registerClass(hp);var Eo=nt,hn=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type="interval",i._interval=0,i._intervalPrecision=2,i}return t.prototype.parse=function(i){return i},t.prototype.contain=function(i){return ap(i,this._extent)},t.prototype.normalize=function(i){return lp(i,this._extent)},t.prototype.scale=function(i){return up(i,this._extent)},t.prototype.setExtent=function(i,r){var n=this._extent;isNaN(i)||(n[0]=parseFloat(i)),isNaN(r)||(n[1]=parseFloat(r))},t.prototype.unionExtent=function(i){var r=this._extent;i[0]<r[0]&&(r[0]=i[0]),i[1]>r[1]&&(r[1]=i[1]),this.setExtent(r[0],r[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(i){this._interval=i,this._niceExtent=this._extent.slice(),this._intervalPrecision=jE(i)},t.prototype.getTicks=function(i){var r=this._interval,n=this._extent,o=this._niceExtent,s=this._intervalPrecision,a=[];if(!r)return a;var l=1e4;n[0]<o[0]&&(i?a.push({value:Eo(o[0]-r,s)}):a.push({value:n[0]}));for(var u=o[0];u<=o[1]&&(a.push({value:u}),u=Eo(u+r,s),u!==a[a.length-1].value);)if(a.length>l)return[];var h=a.length?a[a.length-1].value:o[1];return n[1]>h&&(i?a.push({value:Eo(h+r,s)}):a.push({value:n[1]})),a},t.prototype.getMinorTicks=function(i){for(var r=this.getTicks(!0),n=[],o=this.getExtent(),s=1;s<r.length;s++){for(var a=r[s],l=r[s-1],u=0,h=[],c=a.value-l.value,d=c/i;u<i-1;){var f=Eo(l.value+(u+1)*d);f>o[0]&&f<o[1]&&h.push(f),u++}n.push(h)}return n},t.prototype.getLabel=function(i,r){if(i==null)return"";var n=r&&r.precision;n==null?n=xr(i.value)||0:n==="auto"&&(n=this._intervalPrecision);var o=Eo(i.value,n,!0);return MF(o)},t.prototype.calcNiceTicks=function(i,r,n){i=i||5;var o=this._extent,s=o[1]-o[0];if(isFinite(s)){s<0&&(s=-s,o.reverse());var a=Y8(o,i,r,n);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},t.prototype.calcNiceExtent=function(i){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var n=Math.abs(r[0]);i.fixMax||(r[1]+=n/2),r[0]-=n/2}else r[1]=1;var o=r[1]-r[0];isFinite(o)||(r[0]=0,r[1]=1),this.calcNiceTicks(i.splitNumber,i.minInterval,i.maxInterval);var s=this._interval;i.fixMin||(r[0]=Eo(Math.floor(r[0]/s)*s)),i.fixMax||(r[1]=Eo(Math.ceil(r[1]/s)*s))},t.prototype.setNiceExtent=function(i,r){this._niceExtent=[i,r]},t.type="interval",t}(Vr);Vr.registerClass(hn);var QE=typeof Float32Array<"u",q8=QE?Float32Array:Array;function Dr(e){return H(e)?QE?new Float32Array(e):e:new q8(e)}var _y="__ec_stack_";function jS(e){return e.get("stack")||_y+e.seriesIndex}function QS(e){return e.dim+e.index}function Z8(e){var t=[],i=e.axis,r="axis0";if(i.type==="category"){for(var n=i.getBandWidth(),o=0;o<e.count;o++)t.push(ne({bandWidth:n,axisKey:r,stackId:_y+o},e));for(var s=tI(t),a=[],o=0;o<e.count;o++){var l=s[r][_y+o];l.offsetCenter=l.offset+l.width/2,a.push(l)}return a}}function JE(e,t){var i=[];return t.eachSeriesByType(e,function(r){nI(r)&&i.push(r)}),i}function j8(e){var t={};_(e,function(l){var u=l.coordinateSystem,h=u.getBaseAxis();if(!(h.type!=="time"&&h.type!=="value"))for(var c=l.getData(),d=h.dim+"_"+h.index,f=c.getDimensionIndex(c.mapDimension(h.dim)),p=c.getStore(),g=0,v=p.count();g<v;++g){var m=p.get(f,g);t[d]?t[d].push(m):t[d]=[m]}});var i={};for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if(n){n.sort(function(l,u){return l-u});for(var o=null,s=1;s<n.length;++s){var a=n[s]-n[s-1];a>0&&(o=o===null?a:Math.min(o,a))}i[r]=o}}return i}function eI(e){var t=j8(e),i=[];return _(e,function(r){var n=r.coordinateSystem,o=n.getBaseAxis(),s=o.getExtent(),a;if(o.type==="category")a=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],h=Math.abs(s[1]-s[0]),c=o.scale.getExtent(),d=Math.abs(c[1]-c[0]);a=u?h/d*u:h}else{var f=r.getData();a=Math.abs(s[1]-s[0])/f.count()}var p=K(r.get("barWidth"),a),g=K(r.get("barMaxWidth"),a),v=K(r.get("barMinWidth")||(oI(r)?.5:1),a),m=r.get("barGap"),y=r.get("barCategoryGap");i.push({bandWidth:a,barWidth:p,barMaxWidth:g,barMinWidth:v,barGap:m,barCategoryGap:y,axisKey:QS(o),stackId:jS(r)})}),tI(i)}function tI(e){var t={};_(e,function(r,n){var o=r.axisKey,s=r.bandWidth,a=t[o]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=a.stacks;t[o]=a;var u=r.stackId;l[u]||a.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var h=r.barWidth;h&&!l[u].width&&(l[u].width=h,h=Math.min(a.remainedWidth,h),a.remainedWidth-=h);var c=r.barMaxWidth;c&&(l[u].maxWidth=c);var d=r.barMinWidth;d&&(l[u].minWidth=d);var f=r.barGap;f!=null&&(a.gap=f);var p=r.barCategoryGap;p!=null&&(a.categoryGap=p)});var i={};return _(t,function(r,n){i[n]={};var o=r.stacks,s=r.bandWidth,a=r.categoryGap;if(a==null){var l=De(o).length;a=Math.max(35-l*4,15)+"%"}var u=K(a,s),h=K(r.gap,1),c=r.remainedWidth,d=r.autoWidthCount,f=(c-u)/(d+(d-1)*h);f=Math.max(f,0),_(o,function(m){var y=m.maxWidth,C=m.minWidth;if(m.width){var S=m.width;y&&(S=Math.min(S,y)),C&&(S=Math.max(S,C)),m.width=S,c-=S+h*S,d--}else{var S=f;y&&y<S&&(S=Math.min(y,c)),C&&C>S&&(S=C),S!==f&&(m.width=S,c-=S+h*S,d--)}}),f=(c-u)/(d+(d-1)*h),f=Math.max(f,0);var p=0,g;_(o,function(m,y){m.width||(m.width=f),g=m,p+=m.width*(1+h)}),g&&(p-=g.width*h);var v=-p/2;_(o,function(m,y){i[n][y]=i[n][y]||{bandWidth:s,offset:v,width:m.width},v+=m.width*(1+h)})}),i}function Q8(e,t,i){if(e&&t){var r=e[QS(t)];return r!=null&&i!=null?r[jS(i)]:r}}function iI(e,t){var i=JE(e,t),r=eI(i);_(i,function(n){var o=n.getData(),s=n.coordinateSystem,a=s.getBaseAxis(),l=jS(n),u=r[QS(a)][l],h=u.offset,c=u.width;o.setLayout({bandWidth:u.bandWidth,offset:h,size:c})})}function rI(e){return{seriesType:e,plan:ll(),reset:function(t){if(nI(t)){var i=t.getData(),r=t.coordinateSystem,n=r.getBaseAxis(),o=r.getOtherAxis(n),s=i.getDimensionIndex(i.mapDimension(o.dim)),a=i.getDimensionIndex(i.mapDimension(n.dim)),l=t.get("showBackground",!0),u=i.mapDimension(o.dim),h=i.getCalculationInfo("stackResultDimension"),c=no(i,u)&&!!i.getCalculationInfo("stackedOnSeries"),d=o.isHorizontal(),f=J8(n,o),p=oI(t),g=t.get("barMinHeight")||0,v=h&&i.getDimensionIndex(h),m=i.getLayout("size"),y=i.getLayout("offset");return{progress:function(C,S){for(var b=C.count,w=p&&Dr(b*3),x=p&&l&&Dr(b*3),R=p&&Dr(b),D=r.master.getRect(),T=d?D.width:D.height,A,P=S.getStore(),M=0;(A=C.next())!=null;){var F=P.get(c?v:s,A),E=P.get(a,A),I=f,O=void 0;c&&(O=+F-P.get(s,A));var k=void 0,G=void 0,W=void 0,$=void 0;if(d){var X=r.dataToPoint([F,E]);if(c){var te=r.dataToPoint([O,E]);I=te[0]}k=I,G=X[1]+y,W=X[0]-I,$=m,Math.abs(W)<g&&(W=(W<0?-1:1)*g)}else{var X=r.dataToPoint([E,F]);if(c){var te=r.dataToPoint([E,O]);I=te[1]}k=X[0]+y,G=I,W=m,$=X[1]-I,Math.abs($)<g&&($=($<=0?-1:1)*g)}p?(w[M]=k,w[M+1]=G,w[M+2]=d?W:$,x&&(x[M]=d?D.x:k,x[M+1]=d?G:D.y,x[M+2]=T),R[A]=A):S.setItemLayout(A,{x:k,y:G,width:W,height:$}),M+=3}p&&S.setLayout({largePoints:w,largeDataIndices:R,largeBackgroundPoints:x,valueAxisHorizontal:d})}}}}}}function nI(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function oI(e){return e.pipelineContext&&e.pipelineContext.large}function J8(e,t){var i=t.model.get("startValue");return i||(i=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?i>0?i:1:i))}var eq=function(e,t,i,r){for(;i<r;){var n=i+r>>>1;e[n][1]<t?i=n+1:r=n}return i},JS=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="time",r}return t.prototype.getLabel=function(i){var r=this.getSetting("useUTC");return jf(i.value,nx[kY(Aa(this._minLevelUnit))]||nx.second,r,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(i,r,n){var o=this.getSetting("useUTC"),s=this.getSetting("locale");return OY(i,r,n,s,o)},t.prototype.getTicks=function(){var i=this._interval,r=this._extent,n=[];if(!i)return n;n.push({value:r[0],level:0});var o=this.getSetting("useUTC"),s=aq(this._minLevelUnit,this._approxInterval,o,r);return n=n.concat(s),n.push({value:r[1],level:0}),n},t.prototype.calcNiceExtent=function(i){var r=this._extent;if(r[0]===r[1]&&(r[0]-=ki,r[1]+=ki),r[1]===-1/0&&r[0]===1/0){var n=new Date;r[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),r[0]=r[1]-ki}this.calcNiceTicks(i.splitNumber,i.minInterval,i.maxInterval)},t.prototype.calcNiceTicks=function(i,r,n){i=i||10;var o=this._extent,s=o[1]-o[0];this._approxInterval=s/i,r!=null&&this._approxInterval<r&&(this._approxInterval=r),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var a=mc.length,l=Math.min(eq(mc,this._approxInterval,0,a),a-1);this._interval=mc[l][1],this._minLevelUnit=mc[Math.max(l-1,0)][0]},t.prototype.parse=function(i){return Pe(i)?i:+kr(i)},t.prototype.contain=function(i){return ap(this.parse(i),this._extent)},t.prototype.normalize=function(i){return lp(this.parse(i),this._extent)},t.prototype.scale=function(i){return up(i,this._extent)},t.type="time",t}(hn),mc=[["second",FS],["minute",ES],["hour",Su],["quarter-day",Su*6],["half-day",Su*12],["day",ki*1.2],["half-week",ki*3.5],["week",ki*7],["month",ki*31],["quarter",ki*95],["half-year",rx/2],["year",rx]];function tq(e,t,i,r){var n=kr(t),o=kr(i),s=function(p){return ox(n,p,r)===ox(o,p,r)},a=function(){return s("year")},l=function(){return a()&&s("month")},u=function(){return l()&&s("day")},h=function(){return u()&&s("hour")},c=function(){return h()&&s("minute")},d=function(){return c()&&s("second")},f=function(){return d()&&s("millisecond")};switch(e){case"year":return a();case"month":return l();case"day":return u();case"hour":return h();case"minute":return c();case"second":return d();case"millisecond":return f()}}function iq(e,t){return e/=ki,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function rq(e){var t=30*ki;return e/=t,e>6?6:e>3?3:e>2?2:1}function nq(e){return e/=Su,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function vR(e,t){return e/=t?ES:FS,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function oq(e){return R1(e)}function sq(e,t,i){var r=new Date(e);switch(Aa(t)){case"year":case"month":r[RF(i)](0);case"day":r[DF(i)](1);case"hour":r[TF(i)](0);case"minute":r[_F(i)](0);case"second":r[AF(i)](0),r[PF(i)](0)}return r.getTime()}function aq(e,t,i,r){var n=1e4,o=bF,s=0;function a(T,A,P,M,F,E,I){for(var O=new Date(A),k=A,G=O[M]();k<P&&k<=r[1];)I.push({value:k}),G+=T,O[F](G),k=O.getTime();I.push({value:k,notAdd:!0})}function l(T,A,P){var M=[],F=!A.length;if(!tq(Aa(T),r[0],r[1],i)){F&&(A=[{value:sq(new Date(r[0]),T,i)},{value:r[1]}]);for(var E=0;E<A.length-1;E++){var I=A[E].value,O=A[E+1].value;if(I!==O){var k=void 0,G=void 0,W=void 0,$=!1;switch(T){case"year":k=Math.max(1,Math.round(t/ki/365)),G=IS(i),W=GY(i);break;case"half-year":case"quarter":case"month":k=rq(t),G=Pa(i),W=RF(i);break;case"week":case"half-week":case"day":k=iq(t),G=Qf(i),W=DF(i),$=!0;break;case"half-day":case"quarter-day":case"hour":k=nq(t),G=Uu(i),W=TF(i);break;case"minute":k=vR(t,!0),G=Jf(i),W=_F(i);break;case"second":k=vR(t,!1),G=ep(i),W=AF(i);break;case"millisecond":k=oq(t),G=tp(i),W=PF(i);break}a(k,I,O,G,W,$,M),T==="year"&&P.length>1&&E===0&&P.unshift({value:P[0].value-k})}}for(var E=0;E<M.length;E++)P.push(M[E]);return M}}for(var u=[],h=[],c=0,d=0,f=0;f<o.length&&s++<n;++f){var p=Aa(o[f]);if(LY(o[f])){l(o[f],u[u.length-1]||[],h);var g=o[f+1]?Aa(o[f+1]):null;if(p!==g){if(h.length){d=c,h.sort(function(T,A){return T.value-A.value});for(var v=[],m=0;m<h.length;++m){var y=h[m].value;(m===0||h[m-1].value!==y)&&(v.push(h[m]),y>=r[0]&&y<=r[1]&&c++)}var C=(r[1]-r[0])/t;if(c>C*1.5&&d>C/1.5||(u.push(v),c>C||e===o[f]))break}h=[]}}}for(var S=Le(z(u,function(T){return Le(T,function(A){return A.value>=r[0]&&A.value<=r[1]&&!A.notAdd})}),function(T){return T.length>0}),b=[],w=S.length-1,f=0;f<S.length;++f)for(var x=S[f],R=0;R<x.length;++R)b.push({value:x[R].value,level:w-f});b.sort(function(T,A){return T.value-A.value});for(var D=[],f=0;f<b.length;++f)(f===0||b[f].value!==b[f-1].value)&&D.push(b[f]);return D}Vr.registerClass(JS);var mR=Vr.prototype,Ru=hn.prototype,lq=nt,uq=Math.floor,hq=Math.ceil,yc=Math.pow,Yi=Math.log,ew=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type="log",i.base=10,i._originalScale=new hn,i._interval=0,i}return t.prototype.getTicks=function(i){var r=this._originalScale,n=this._extent,o=r.getExtent(),s=Ru.getTicks.call(this,i);return z(s,function(a){var l=a.value,u=nt(yc(this.base,l));return u=l===n[0]&&this._fixMin?Cc(u,o[0]):u,u=l===n[1]&&this._fixMax?Cc(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(i,r){var n=Yi(this.base);i=Yi(Math.max(0,i))/n,r=Yi(Math.max(0,r))/n,Ru.setExtent.call(this,i,r)},t.prototype.getExtent=function(){var i=this.base,r=mR.getExtent.call(this);r[0]=yc(i,r[0]),r[1]=yc(i,r[1]);var n=this._originalScale,o=n.getExtent();return this._fixMin&&(r[0]=Cc(r[0],o[0])),this._fixMax&&(r[1]=Cc(r[1],o[1])),r},t.prototype.unionExtent=function(i){this._originalScale.unionExtent(i);var r=this.base;i[0]=Yi(i[0])/Yi(r),i[1]=Yi(i[1])/Yi(r),mR.unionExtent.call(this,i)},t.prototype.unionExtentFromData=function(i,r){this.unionExtent(i.getApproximateExtent(r))},t.prototype.calcNiceTicks=function(i){i=i||10;var r=this._extent,n=r[1]-r[0];if(!(n===1/0||n<=0)){var o=p4(n),s=i/n*o;for(s<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var a=[nt(hq(r[0]/o)*o),nt(uq(r[1]/o)*o)];this._interval=o,this._niceExtent=a}},t.prototype.calcNiceExtent=function(i){Ru.calcNiceExtent.call(this,i),this._fixMin=i.fixMin,this._fixMax=i.fixMax},t.prototype.parse=function(i){return i},t.prototype.contain=function(i){return i=Yi(i)/Yi(this.base),ap(i,this._extent)},t.prototype.normalize=function(i){return i=Yi(i)/Yi(this.base),lp(i,this._extent)},t.prototype.scale=function(i){return i=up(i,this._extent),yc(this.base,i)},t.type="log",t}(Vr),sI=ew.prototype;sI.getMinorTicks=Ru.getMinorTicks;sI.getLabel=Ru.getLabel;function Cc(e,t){return lq(e,xr(t))}Vr.registerClass(ew);var cq=function(){function e(t,i,r){this._prepareParams(t,i,r)}return e.prototype._prepareParams=function(t,i,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var n=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&i.getNeedCrossZero&&i.getNeedCrossZero();var o=i.get("min",!0);o==null&&(o=i.get("startValue",!0));var s=this._modelMinRaw=o;ie(s)?this._modelMinNum=Sc(t,s({min:r[0],max:r[1]})):s!=="dataMin"&&(this._modelMinNum=Sc(t,s));var a=this._modelMaxRaw=i.get("max",!0);if(ie(a)?this._modelMaxNum=Sc(t,a({min:r[0],max:r[1]})):a!=="dataMax"&&(this._modelMaxNum=Sc(t,a)),n)this._axisDataLen=i.getCategories().length;else{var l=i.get("boundaryGap"),u=H(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[or(u[0],1),or(u[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,i=this._dataMin,r=this._dataMax,n=this._axisDataLen,o=this._boundaryGapInner,s=t?null:r-i||Math.abs(i),a=this._modelMinRaw==="dataMin"?i:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,u=a!=null,h=l!=null;a==null&&(a=t?n?0:NaN:i-o[0]*s),l==null&&(l=t?n?n-1:NaN:r+o[1]*s),(a==null||!isFinite(a))&&(a=NaN),(l==null||!isFinite(l))&&(l=NaN);var c=Lu(a)||Lu(l)||t&&!n;this._needCrossZero&&(a>0&&l>0&&!u&&(a=0),a<0&&l<0&&!h&&(l=0));var d=this._determinedMin,f=this._determinedMax;return d!=null&&(a=d,u=!0),f!=null&&(l=f,h=!0),{min:a,max:l,minFixed:u,maxFixed:h,isBlank:c}},e.prototype.modifyDataMinMax=function(t,i){this[fq[t]]=i},e.prototype.setDeterminedMinMax=function(t,i){var r=dq[t];this[r]=i},e.prototype.freeze=function(){this.frozen=!0},e}(),dq={min:"_determinedMin",max:"_determinedMax"},fq={min:"_dataMin",max:"_dataMax"};function aI(e,t,i){var r=e.rawExtentInfo;return r||(r=new cq(e,t,i),e.rawExtentInfo=r,r)}function Sc(e,t){return t==null?null:Lu(t)?NaN:e.parse(t)}function lI(e,t){var i=e.type,r=aI(e,t,e.getExtent()).calculate();e.setBlank(r.isBlank);var n=r.min,o=r.max,s=t.ecModel;if(s&&i==="time"){var a=JE("bar",s),l=!1;if(_(a,function(c){l=l||c.getBaseAxis()===t.axis}),l){var u=eI(a),h=pq(n,o,t,u);n=h.min,o=h.max}}return{extent:[n,o],fixMin:r.minFixed,fixMax:r.maxFixed}}function pq(e,t,i,r){var n=i.axis.getExtent(),o=Math.abs(n[1]-n[0]),s=Q8(r,i.axis);if(s===void 0)return{min:e,max:t};var a=1/0;_(s,function(f){a=Math.min(f.offset,a)});var l=-1/0;_(s,function(f){l=Math.max(f.offset+f.width,l)}),a=Math.abs(a),l=Math.abs(l);var u=a+l,h=t-e,c=1-(a+l)/o,d=h/c-h;return t+=d*(l/u),e-=d*(a/u),{min:e,max:t}}function Ba(e,t){var i=t,r=lI(e,i),n=r.extent,o=i.get("splitNumber");e instanceof ew&&(e.base=i.get("logBase"));var s=e.type,a=i.get("interval"),l=s==="interval"||s==="time";e.setExtent(n[0],n[1]),e.calcNiceExtent({splitNumber:o,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?i.get("minInterval"):null,maxInterval:l?i.get("maxInterval"):null}),a!=null&&e.setInterval&&e.setInterval(a)}function cp(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new hp({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new JS({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Vr.getClass(t)||hn)}}function gq(e){var t=e.scale.getExtent(),i=t[0],r=t[1];return!(i>0&&r>0||i<0&&r<0)}function cl(e){var t=e.getLabelModel().get("formatter"),i=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(r){return function(n,o){return e.scale.getFormattedLabel(n,o,r)}}(t):q(t)?function(r){return function(n){var o=e.scale.getLabel(n),s=r.replace("{value}",o??"");return s}}(t):ie(t)?function(r){return function(n,o){return i!=null&&(o=n.value-i),r(tw(e,n),o,n.level!=null?{level:n.level}:null)}}(t):function(r){return e.scale.getLabel(r)}}function tw(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function vq(e){var t=e.model,i=e.scale;if(!(!t.get(["axisLabel","show"])||i.isBlank())){var r,n,o=i.getExtent();i instanceof hp?n=i.count():(r=i.getTicks(),n=r.length);var s=e.getLabelModel(),a=cl(e),l,u=1;n>40&&(u=Math.ceil(n/40));for(var h=0;h<n;h+=u){var c=r?r[h]:{value:o[0]+h},d=a(c,h),f=s.getTextRect(d),p=mq(f,s.get("rotate")||0);l?l.union(p):l=p}return l}}function mq(e,t){var i=t*Math.PI/180,r=e.width,n=e.height,o=r*Math.abs(Math.cos(i))+Math.abs(n*Math.sin(i)),s=r*Math.abs(Math.sin(i))+Math.abs(n*Math.cos(i)),a=new ve(e.x,e.y,o,s);return a}function iw(e){var t=e.get("interval");return t??"auto"}function uI(e){return e.type==="category"&&iw(e.getLabelModel())===0}function tf(e,t){var i={};return _(e.mapDimensionsAll(t),function(r){i[ZE(e,r)]=!0}),De(i)}function yq(e,t,i){t&&_(tf(t,i),function(r){var n=t.getApproximateExtent(r);n[0]<e[0]&&(e[0]=n[0]),n[1]>e[1]&&(e[1]=n[1])})}var Dh=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),Cq=1e-8;function yR(e,t){return Math.abs(e-t)<Cq}function Yo(e,t,i){var r=0,n=e[0];if(!n)return!1;for(var o=1;o<e.length;o++){var s=e[o];r+=Ur(n[0],n[1],s[0],s[1],t,i),n=s}var a=e[0];return(!yR(n[0],a[0])||!yR(n[1],a[1]))&&(r+=Ur(n[0],n[1],a[0],a[1],t,i)),r!==0}var Sq=[];function Ug(e,t){for(var i=0;i<e.length;i++)_t(e[i],e[i],t)}function CR(e,t,i,r){for(var n=0;n<e.length;n++){var o=e[n];r&&(o=r.project(o)),o&&isFinite(o[0])&&isFinite(o[1])&&(Gn(t,t,o),Nn(i,i,o))}}function wq(e){for(var t=0,i=0,r=0,n=e.length,o=e[n-1][0],s=e[n-1][1],a=0;a<n;a++){var l=e[a][0],u=e[a][1],h=o*u-l*s;t+=h,i+=(o+l)*h,r+=(s+u)*h,o=l,s=u}return t?[i/t/3,r/t/3,t]:[e[0][0]||0,e[0][1]||0]}var hI=function(){function e(t){this.name=t}return e.prototype.setCenter=function(t){this._center=t},e.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},e}(),SR=function(){function e(t,i){this.type="polygon",this.exterior=t,this.interiors=i}return e}(),wR=function(){function e(t){this.type="linestring",this.points=t}return e}(),cI=function(e){L(t,e);function t(i,r,n){var o=e.call(this,i)||this;return o.type="geoJSON",o.geometries=r,o._center=n&&[n[0],n[1]],o}return t.prototype.calcCenter=function(){for(var i=this.geometries,r,n=0,o=0;o<i.length;o++){var s=i[o],a=s.exterior,l=a&&a.length;l>n&&(r=s,n=l)}if(r)return wq(r.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(i){var r=this._rect;if(r&&!i)return r;var n=[1/0,1/0],o=[-1/0,-1/0],s=this.geometries;return _(s,function(a){a.type==="polygon"?CR(a.exterior,n,o,i):_(a.points,function(l){CR(l,n,o,i)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])||(n[0]=n[1]=o[0]=o[1]=0),r=new ve(n[0],n[1],o[0]-n[0],o[1]-n[1]),i||(this._rect=r),r},t.prototype.contain=function(i){var r=this.getBoundingRect(),n=this.geometries;if(!r.contain(i[0],i[1]))return!1;e:for(var o=0,s=n.length;o<s;o++){var a=n[o];if(a.type==="polygon"){var l=a.exterior,u=a.interiors;if(Yo(l,i[0],i[1])){for(var h=0;h<(u?u.length:0);h++)if(Yo(u[h],i[0],i[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(i,r,n,o){var s=this.getBoundingRect(),a=s.width/s.height;n?o||(o=n/a):n=a*o;for(var l=new ve(i,r,n,o),u=s.calculateTransform(l),h=this.geometries,c=0;c<h.length;c++){var d=h[c];d.type==="polygon"?(Ug(d.exterior,u),_(d.interiors,function(f){Ug(f,u)})):_(d.points,function(f){Ug(f,u)})}s=this._rect,s.copy(l),this._center=[s.x+s.width/2,s.y+s.height/2]},t.prototype.cloneShallow=function(i){i==null&&(i=this.name);var r=new t(i,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t}(hI),bq=function(e){L(t,e);function t(i,r){var n=e.call(this,i)||this;return n.type="geoSVG",n._elOnlyForCalculate=r,n}return t.prototype.calcCenter=function(){for(var i=this._elOnlyForCalculate,r=i.getBoundingRect(),n=[r.x+r.width/2,r.y+r.height/2],o=Of(Sq),s=i;s&&!s.isGeoSVGGraphicRoot;)Jr(o,s.getLocalTransform(),o),s=s.parent;return Ja(o,o),_t(n,n,o),n},t}(hI);function xq(e){if(!e.UTF8Encoding)return e;var t=e,i=t.UTF8Scale;i==null&&(i=1024);var r=t.features;return _(r,function(n){var o=n.geometry,s=o.encodeOffsets,a=o.coordinates;if(s)switch(o.type){case"LineString":o.coordinates=dI(a,s,i);break;case"Polygon":$g(a,s,i);break;case"MultiLineString":$g(a,s,i);break;case"MultiPolygon":_(a,function(l,u){return $g(l,s[u],i)})}}),t.UTF8Encoding=!1,t}function $g(e,t,i){for(var r=0;r<e.length;r++)e[r]=dI(e[r],t[r],i)}function dI(e,t,i){for(var r=[],n=t[0],o=t[1],s=0;s<e.length;s+=2){var a=e.charCodeAt(s)-64,l=e.charCodeAt(s+1)-64;a=a>>1^-(a&1),l=l>>1^-(l&1),a+=n,l+=o,n=a,o=l,r.push([a/i,l/i])}return r}function Rq(e,t){return e=xq(e),z(Le(e.features,function(i){return i.geometry&&i.properties&&i.geometry.coordinates.length>0}),function(i){var r=i.properties,n=i.geometry,o=[];switch(n.type){case"Polygon":var s=n.coordinates;o.push(new SR(s[0],s.slice(1)));break;case"MultiPolygon":_(n.coordinates,function(l){l[0]&&o.push(new SR(l[0],l.slice(1)))});break;case"LineString":o.push(new wR([n.coordinates]));break;case"MultiLineString":o.push(new wR(n.coordinates))}var a=new cI(r[t||"name"],o,r.cp);return a.properties=r,a})}var Zu=_e();function fI(e,t){var i=z(t,function(r){return e.scale.parse(r)});return e.type==="time"&&i.length>0&&(i.sort(),i.unshift(i[0]),i.push(i[i.length-1])),i}function Dq(e){var t=e.getLabelModel().get("customValues");if(t){var i=cl(e),r=e.scale.getExtent(),n=fI(e,t),o=Le(n,function(s){return s>=r[0]&&s<=r[1]});return{labels:z(o,function(s){var a={value:s};return{formattedLabel:i(a),rawLabel:e.scale.getLabel(a),tickValue:s}})}}return e.type==="category"?_q(e):Pq(e)}function Tq(e,t){var i=e.getTickModel().get("customValues");if(i){var r=e.scale.getExtent(),n=fI(e,i);return{ticks:Le(n,function(o){return o>=r[0]&&o<=r[1]})}}return e.type==="category"?Aq(e,t):{ticks:z(e.scale.getTicks(),function(o){return o.value})}}function _q(e){var t=e.getLabelModel(),i=pI(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i}function pI(e,t){var i=gI(e,"labels"),r=iw(t),n=vI(i,r);if(n)return n;var o,s;return ie(r)?o=CI(e,r):(s=r==="auto"?Mq(e):r,o=yI(e,s)),mI(i,r,{labels:o,labelCategoryInterval:s})}function Aq(e,t){var i=gI(e,"ticks"),r=iw(t),n=vI(i,r);if(n)return n;var o,s;if((!t.get("show")||e.scale.isBlank())&&(o=[]),ie(r))o=CI(e,r,!0);else if(r==="auto"){var a=pI(e,e.getLabelModel());s=a.labelCategoryInterval,o=z(a.labels,function(l){return l.tickValue})}else s=r,o=yI(e,s,!0);return mI(i,r,{ticks:o,tickCategoryInterval:s})}function Pq(e){var t=e.scale.getTicks(),i=cl(e);return{labels:z(t,function(r,n){return{level:r.level,formattedLabel:i(r,n),rawLabel:e.scale.getLabel(r),tickValue:r.value}})}}function gI(e,t){return Zu(e)[t]||(Zu(e)[t]=[])}function vI(e,t){for(var i=0;i<e.length;i++)if(e[i].key===t)return e[i].value}function mI(e,t,i){return e.push({key:t,value:i}),i}function Mq(e){var t=Zu(e).autoInterval;return t??(Zu(e).autoInterval=e.calculateCategoryInterval())}function Fq(e){var t=Eq(e),i=cl(e),r=(t.axisRotate-t.labelRotate)/180*Math.PI,n=e.scale,o=n.getExtent(),s=n.count();if(o[1]-o[0]<1)return 0;var a=1;s>40&&(a=Math.max(1,Math.floor(s/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),h=Math.abs(u*Math.cos(r)),c=Math.abs(u*Math.sin(r)),d=0,f=0;l<=o[1];l+=a){var p=0,g=0,v=ph(i({value:l}),t.font,"center","top");p=v.width*1.3,g=v.height*1.3,d=Math.max(d,p,7),f=Math.max(f,g,7)}var m=d/h,y=f/c;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var C=Math.max(0,Math.floor(Math.min(m,y))),S=Zu(e.model),b=e.getExtent(),w=S.lastAutoInterval,x=S.lastTickCount;return w!=null&&x!=null&&Math.abs(w-C)<=1&&Math.abs(x-s)<=1&&w>C&&S.axisExtent0===b[0]&&S.axisExtent1===b[1]?C=w:(S.lastTickCount=s,S.lastAutoInterval=C,S.axisExtent0=b[0],S.axisExtent1=b[1]),C}function Eq(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function yI(e,t,i){var r=cl(e),n=e.scale,o=n.getExtent(),s=e.getLabelModel(),a=[],l=Math.max((t||0)+1,1),u=o[0],h=n.count();u!==0&&l>1&&h/l>2&&(u=Math.round(Math.ceil(u/l)*l));var c=uI(e),d=s.get("showMinLabel")||c,f=s.get("showMaxLabel")||c;d&&u!==o[0]&&g(o[0]);for(var p=u;p<=o[1];p+=l)g(p);f&&p-l!==o[1]&&g(o[1]);function g(v){var m={value:v};a.push(i?v:{formattedLabel:r(m),rawLabel:n.getLabel(m),tickValue:v})}return a}function CI(e,t,i){var r=e.scale,n=cl(e),o=[];return _(r.getTicks(),function(s){var a=r.getLabel(s),l=s.value;t(s.value,a)&&o.push(i?l:{formattedLabel:n(s),rawLabel:a,tickValue:l})}),o}var bR=[0,1],ur=function(){function e(t,i,r){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=i,this._extent=r||[0,0]}return e.prototype.contain=function(t){var i=this._extent,r=Math.min(i[0],i[1]),n=Math.max(i[0],i[1]);return t>=r&&t<=n},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return b1(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,i){var r=this._extent;r[0]=t,r[1]=i},e.prototype.dataToCoord=function(t,i){var r=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&n.type==="ordinal"&&(r=r.slice(),xR(r,n.count())),Oe(t,bR,r,i)},e.prototype.coordToData=function(t,i){var r=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(r=r.slice(),xR(r,n.count()));var o=Oe(t,r,bR,i);return this.scale.scale(o)},e.prototype.pointToData=function(t,i){},e.prototype.getTicksCoords=function(t){t=t||{};var i=t.tickModel||this.getTickModel(),r=Tq(this,i),n=r.ticks,o=z(n,function(a){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(a):a),tickValue:a}},this),s=i.get("alignWithLabel");return Iq(this,o,s,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),i=t.get("splitNumber");i>0&&i<100||(i=5);var r=this.scale.getMinorTicks(i),n=z(r,function(o){return z(o,function(s){return{coord:this.dataToCoord(s),tickValue:s}},this)},this);return n},e.prototype.getViewLabels=function(){return Dq(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,i=this.scale.getExtent(),r=i[1]-i[0]+(this.onBand?1:0);r===0&&(r=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/r},e.prototype.calculateCategoryInterval=function(){return Fq(this)},e}();function xR(e,t){var i=e[1]-e[0],r=t,n=i/r/2;e[0]+=n,e[1]-=n}function Iq(e,t,i,r){var n=t.length;if(!e.onBand||i||!n)return;var o=e.getExtent(),s,a;if(n===1)t[0].coord=o[0],s=t[1]={coord:o[1],tickValue:t[0].tickValue};else{var l=t[n-1].tickValue-t[0].tickValue,u=(t[n-1].coord-t[0].coord)/l;_(t,function(f){f.coord-=u/2});var h=e.scale.getExtent();a=1+h[1]-t[n-1].tickValue,s={coord:t[n-1].coord+u*a,tickValue:h[1]+1},t.push(s)}var c=o[0]>o[1];d(t[0].coord,o[0])&&(r?t[0].coord=o[0]:t.shift()),r&&d(o[0],t[0].coord)&&t.unshift({coord:o[0]}),d(o[1],s.coord)&&(r?s.coord=o[1]:t.pop()),r&&d(s.coord,o[1])&&t.push({coord:o[1]});function d(f,p){return f=nt(f),p=nt(p),c?f>p:f<p}}var kl=Math.PI*2,Io=Or.CMD,Lq=["top","right","bottom","left"];function kq(e,t,i,r,n){var o=i.width,s=i.height;switch(e){case"top":r.set(i.x+o/2,i.y-t),n.set(0,-1);break;case"bottom":r.set(i.x+o/2,i.y+s+t),n.set(0,1);break;case"left":r.set(i.x-t,i.y+s/2),n.set(-1,0);break;case"right":r.set(i.x+o+t,i.y+s/2),n.set(1,0);break}}function Oq(e,t,i,r,n,o,s,a,l){s-=e,a-=t;var u=Math.sqrt(s*s+a*a);s/=u,a/=u;var h=s*i+e,c=a*i+t;if(Math.abs(r-n)%kl<1e-4)return l[0]=h,l[1]=c,u-i;if(o){var d=r;r=mi(n),n=mi(d)}else r=mi(r),n=mi(n);r>n&&(n+=kl);var f=Math.atan2(a,s);if(f<0&&(f+=kl),f>=r&&f<=n||f+kl>=r&&f+kl<=n)return l[0]=h,l[1]=c,u-i;var p=i*Math.cos(r)+e,g=i*Math.sin(r)+t,v=i*Math.cos(n)+e,m=i*Math.sin(n)+t,y=(p-s)*(p-s)+(g-a)*(g-a),C=(v-s)*(v-s)+(m-a)*(m-a);return y<C?(l[0]=p,l[1]=g,Math.sqrt(y)):(l[0]=v,l[1]=m,Math.sqrt(C))}function rf(e,t,i,r,n,o,s,a){var l=n-e,u=o-t,h=i-e,c=r-t,d=Math.sqrt(h*h+c*c);h/=d,c/=d;var f=l*h+u*c,p=f/d;a&&(p=Math.min(Math.max(p,0),1)),p*=d;var g=s[0]=e+p*h,v=s[1]=t+p*c;return Math.sqrt((g-n)*(g-n)+(v-o)*(v-o))}function SI(e,t,i,r,n,o,s){i<0&&(e=e+i,i=-i),r<0&&(t=t+r,r=-r);var a=e+i,l=t+r,u=s[0]=Math.min(Math.max(n,e),a),h=s[1]=Math.min(Math.max(o,t),l);return Math.sqrt((u-n)*(u-n)+(h-o)*(h-o))}var ji=[];function Gq(e,t,i){var r=SI(t.x,t.y,t.width,t.height,e.x,e.y,ji);return i.set(ji[0],ji[1]),r}function Nq(e,t,i){for(var r=0,n=0,o=0,s=0,a,l,u=1/0,h=t.data,c=e.x,d=e.y,f=0;f<h.length;){var p=h[f++];f===1&&(r=h[f],n=h[f+1],o=r,s=n);var g=u;switch(p){case Io.M:o=h[f++],s=h[f++],r=o,n=s;break;case Io.L:g=rf(r,n,h[f],h[f+1],c,d,ji,!0),r=h[f++],n=h[f++];break;case Io.C:g=n1(r,n,h[f++],h[f++],h[f++],h[f++],h[f],h[f+1],c,d,ji),r=h[f++],n=h[f++];break;case Io.Q:g=s1(r,n,h[f++],h[f++],h[f],h[f+1],c,d,ji),r=h[f++],n=h[f++];break;case Io.A:var v=h[f++],m=h[f++],y=h[f++],C=h[f++],S=h[f++],b=h[f++];f+=1;var w=!!(1-h[f++]);a=Math.cos(S)*y+v,l=Math.sin(S)*C+m,f<=1&&(o=a,s=l);var x=(c-v)*C/y+v;g=Oq(v,m,C,S,S+b,w,x,d,ji),r=Math.cos(S+b)*y+v,n=Math.sin(S+b)*C+m;break;case Io.R:o=r=h[f++],s=n=h[f++];var R=h[f++],D=h[f++];g=SI(o,s,R,D,c,d,ji);break;case Io.Z:g=rf(r,n,o,s,c,d,ji,!0),r=o,n=s;break}g<u&&(u=g,i.set(ji[0],ji[1]))}return u}var er=new ge,Ye=new ge,ot=new ge,Tr=new ge,wr=new ge;function RR(e,t){if(e){var i=e.getTextGuideLine(),r=e.getTextContent();if(r&&i){var n=e.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],s=n.candidates||Lq,a=r.getBoundingRect().clone();a.applyTransform(r.getComputedTransform());var l=1/0,u=n.anchor,h=e.getComputedTransform(),c=h&&Ja([],h),d=t.get("length2")||0;u&&ot.copy(u);for(var f=0;f<s.length;f++){var p=s[f];kq(p,0,a,er,Tr),ge.scaleAndAdd(Ye,er,Tr,d),Ye.transform(c);var g=e.getBoundingRect(),v=u?u.distance(Ye):e instanceof be?Nq(Ye,e.path,ot):Gq(Ye,g,ot);v<l&&(l=v,Ye.transform(h),ot.transform(h),ot.toArray(o[0]),Ye.toArray(o[1]),er.toArray(o[2]))}wI(o,t.get("minTurnAngle")),i.setShape({points:o})}}}var nf=[],Wt=new ge;function wI(e,t){if(t<=180&&t>0){t=t/180*Math.PI,er.fromArray(e[0]),Ye.fromArray(e[1]),ot.fromArray(e[2]),ge.sub(Tr,er,Ye),ge.sub(wr,ot,Ye);var i=Tr.len(),r=wr.len();if(!(i<.001||r<.001)){Tr.scale(1/i),wr.scale(1/r);var n=Tr.dot(wr),o=Math.cos(t);if(o<n){var s=rf(Ye.x,Ye.y,ot.x,ot.y,er.x,er.y,nf,!1);Wt.fromArray(nf),Wt.scaleAndAdd(wr,s/Math.tan(Math.PI-t));var a=ot.x!==Ye.x?(Wt.x-Ye.x)/(ot.x-Ye.x):(Wt.y-Ye.y)/(ot.y-Ye.y);if(isNaN(a))return;a<0?ge.copy(Wt,Ye):a>1&&ge.copy(Wt,ot),Wt.toArray(e[1])}}}}function Vq(e,t,i){if(i<=180&&i>0){i=i/180*Math.PI,er.fromArray(e[0]),Ye.fromArray(e[1]),ot.fromArray(e[2]),ge.sub(Tr,Ye,er),ge.sub(wr,ot,Ye);var r=Tr.len(),n=wr.len();if(!(r<.001||n<.001)){Tr.scale(1/r),wr.scale(1/n);var o=Tr.dot(t),s=Math.cos(i);if(o<s){var a=rf(Ye.x,Ye.y,ot.x,ot.y,er.x,er.y,nf,!1);Wt.fromArray(nf);var l=Math.PI/2,u=Math.acos(wr.dot(t)),h=l+u-i;if(h>=l)ge.copy(Wt,ot);else{Wt.scaleAndAdd(wr,a/Math.tan(Math.PI/2-h));var c=ot.x!==Ye.x?(Wt.x-Ye.x)/(ot.x-Ye.x):(Wt.y-Ye.y)/(ot.y-Ye.y);if(isNaN(c))return;c<0?ge.copy(Wt,Ye):c>1&&ge.copy(Wt,ot)}Wt.toArray(e[1])}}}}function Kg(e,t,i,r){var n=i==="normal",o=n?e:e.ensureState(i);o.ignore=t;var s=r.get("smooth");s&&s===!0&&(s=.3),o.shape=o.shape||{},s>0&&(o.shape.smooth=s);var a=r.getModel("lineStyle").getLineStyle();n?e.useStyle(a):o.style=a}function Bq(e,t){var i=t.smooth,r=t.points;if(r)if(e.moveTo(r[0][0],r[0][1]),i>0&&r.length>=3){var n=On(r[0],r[1]),o=On(r[1],r[2]);if(!n||!o){e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]);return}var s=Math.min(n,o)*i,a=jc([],r[1],r[0],s/n),l=jc([],r[1],r[2],s/o),u=jc([],a,l,.5);e.bezierCurveTo(a[0],a[1],a[0],a[1],u[0],u[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var h=1;h<r.length;h++)e.lineTo(r[h][0],r[h][1])}function rw(e,t,i){var r=e.getTextGuideLine(),n=e.getTextContent();if(!n){r&&e.removeTextGuideLine();return}for(var o=t.normal,s=o.get("show"),a=n.ignore,l=0;l<Hu.length;l++){var u=Hu[l],h=t[u],c=u==="normal";if(h){var d=h.get("show"),f=c?a:de(n.states[u]&&n.states[u].ignore,a);if(f||!de(d,s)){var p=c?r:r&&r.states[u];p&&(p.ignore=!0),r&&Kg(r,!0,u,h);continue}r||(r=new ti,e.setTextGuideLine(r),!c&&(a||!s)&&Kg(r,!0,"normal",t.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),Kg(r,!1,u,h)}}if(r){ne(r.style,i),r.style.fill=null;var g=o.get("showAbove"),v=e.textGuideLineConfig=e.textGuideLineConfig||{};v.showAbove=g||!1,r.buildPath=Bq}}function nw(e,t){t=t||"labelLine";for(var i={normal:e.getModel(t)},r=0;r<Qt.length;r++){var n=Qt[r];i[n]=e.getModel([n,t])}return i}function bI(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];if(!r.defaultAttr.ignore){var n=r.label,o=n.getComputedTransform(),s=n.getBoundingRect(),a=!o||o[1]<1e-5&&o[2]<1e-5,l=n.style.margin||0,u=s.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var h=a?new Hd(s,o):null;t.push({label:n,labelLine:r.labelLine,rect:u,localRect:s,obb:h,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:a,transform:o})}}return t}function xI(e,t,i,r,n,o){var s=e.length;if(s<2)return;e.sort(function(R,D){return R.rect[t]-D.rect[t]});for(var a=0,l,u=!1,h=0,c=0;c<s;c++){var d=e[c],f=d.rect;l=f[t]-a,l<0&&(f[t]-=l,d.label[t]-=l,u=!0);var p=Math.max(-l,0);h+=p,a=f[t]+f[i]}h>0&&o&&b(-h/s,0,s);var g=e[0],v=e[s-1],m,y;C(),m<0&&w(-m,.8),y<0&&w(y,.8),C(),S(m,y,1),S(y,m,-1),C(),m<0&&x(-m),y<0&&x(y);function C(){m=g.rect[t]-r,y=n-v.rect[t]-v.rect[i]}function S(R,D,T){if(R<0){var A=Math.min(D,-R);if(A>0){b(A*T,0,s);var P=A+R;P<0&&w(-P*T,1)}else w(-R*T,1)}}function b(R,D,T){R!==0&&(u=!0);for(var A=D;A<T;A++){var P=e[A],M=P.rect;M[t]+=R,P.label[t]+=R}}function w(R,D){for(var T=[],A=0,P=1;P<s;P++){var M=e[P-1].rect,F=Math.max(e[P].rect[t]-M[t]-M[i],0);T.push(F),A+=F}if(A){var E=Math.min(Math.abs(R)/A,D);if(R>0)for(var P=0;P<s-1;P++){var I=T[P]*E;b(I,0,P+1)}else for(var P=s-1;P>0;P--){var I=T[P-1]*E;b(-I,P,s)}}}function x(R){var D=R<0?-1:1;R=Math.abs(R);for(var T=Math.ceil(R/(s-1)),A=0;A<s-1;A++)if(D>0?b(T,0,A+1):b(-T,s-A-1,s),R-=T,R<=0)return}return u}function Hq(e,t,i,r){return xI(e,"x","width",t,i,r)}function RI(e,t,i,r){return xI(e,"y","height",t,i,r)}function DI(e){var t=[];e.sort(function(g,v){return v.priority-g.priority});var i=new ve(0,0,0,0);function r(g){if(!g.ignore){var v=g.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}g.ignore=!0}for(var n=0;n<e.length;n++){var o=e[n],s=o.axisAligned,a=o.localRect,l=o.transform,u=o.label,h=o.labelLine;i.copy(o.rect),i.width-=.1,i.height-=.1,i.x+=.05,i.y+=.05;for(var c=o.obb,d=!1,f=0;f<t.length;f++){var p=t[f];if(i.intersect(p.rect)){if(s&&p.axisAligned){d=!0;break}if(p.obb||(p.obb=new Hd(p.localRect,p.transform)),c||(c=new Hd(a,l)),c.intersect(p.obb)){d=!0;break}}}d?(r(u),h&&r(h)):(u.attr("ignore",o.defaultAttr.ignore),h&&h.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function zq(e){if(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].slice());return t}}function Wq(e,t){var i=e.label,r=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:i.style.align,verticalAlign:i.style.verticalAlign,labelLinePoints:zq(r&&r.shape.points)}}var DR=["align","verticalAlign","width","height","fontSize"],Bt=new Yr,Yg=_e(),Uq=_e();function wc(e,t,i){for(var r=0;r<i.length;r++){var n=i[r];t[n]!=null&&(e[n]=t[n])}}var bc=["x","y","rotation"],$q=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(t,i,r,n,o){var s=n.style,a=n.__hostTarget,l=a.textConfig||{},u=n.getComputedTransform(),h=n.getBoundingRect().plain();ve.applyTransform(h,h,u),u?Bt.setLocalTransform(u):(Bt.x=Bt.y=Bt.rotation=Bt.originX=Bt.originY=0,Bt.scaleX=Bt.scaleY=1),Bt.rotation=mi(Bt.rotation);var c=n.__hostTarget,d;if(c){d=c.getBoundingRect().plain();var f=c.getComputedTransform();ve.applyTransform(d,d,f)}var p=d&&c.getTextGuideLine();this._labelList.push({label:n,labelLine:p,seriesModel:r,dataIndex:t,dataType:i,layoutOption:o,computedLayoutOption:null,rect:h,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:p&&p.ignore,x:Bt.x,y:Bt.y,scaleX:Bt.scaleX,scaleY:Bt.scaleY,rotation:Bt.rotation,style:{x:s.x,y:s.y,align:s.align,verticalAlign:s.verticalAlign,width:s.width,height:s.height,fontSize:s.fontSize},cursor:n.cursor,attachedPos:l.position,attachedRot:l.rotation}})},e.prototype.addLabelsOfSeries=function(t){var i=this;this._chartViewList.push(t);var r=t.__model,n=r.get("labelLayout");(ie(n)||De(n).length)&&t.group.traverse(function(o){if(o.ignore)return!0;var s=o.getTextContent(),a=ue(o);s&&!s.disableLabelLayout&&i._addLabel(a.dataIndex,a.dataType,r,s,n)})},e.prototype.updateLayoutConfig=function(t){var i=t.getWidth(),r=t.getHeight();function n(C,S){return function(){RR(C,S)}}for(var o=0;o<this._labelList.length;o++){var s=this._labelList[o],a=s.label,l=a.__hostTarget,u=s.defaultAttr,h=void 0;ie(s.layoutOption)?h=s.layoutOption(Wq(s,l)):h=s.layoutOption,h=h||{},s.computedLayoutOption=h;var c=Math.PI/180;l&&l.setTextConfig({local:!1,position:h.x!=null||h.y!=null?null:u.attachedPos,rotation:h.rotate!=null?h.rotate*c:u.attachedRot,offset:[h.dx||0,h.dy||0]});var d=!1;if(h.x!=null?(a.x=K(h.x,i),a.setStyle("x",0),d=!0):(a.x=u.x,a.setStyle("x",u.style.x)),h.y!=null?(a.y=K(h.y,r),a.setStyle("y",0),d=!0):(a.y=u.y,a.setStyle("y",u.style.y)),h.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:h.labelLinePoints}),d=!1)}var p=Yg(a);p.needsUpdateLabelLine=d,a.rotation=h.rotate!=null?h.rotate*c:u.rotation,a.scaleX=u.scaleX,a.scaleY=u.scaleY;for(var g=0;g<DR.length;g++){var v=DR[g];a.setStyle(v,h[v]!=null?h[v]:u.style[v])}if(h.draggable){if(a.draggable=!0,a.cursor="move",l){var m=s.seriesModel;if(s.dataIndex!=null){var y=s.seriesModel.getData(s.dataType);m=y.getItemModel(s.dataIndex)}a.on("drag",n(l,m.getModel("labelLine")))}}else a.off("drag"),a.cursor=u.cursor}},e.prototype.layout=function(t){var i=t.getWidth(),r=t.getHeight(),n=bI(this._labelList),o=Le(n,function(l){return l.layoutOption.moveOverlap==="shiftX"}),s=Le(n,function(l){return l.layoutOption.moveOverlap==="shiftY"});Hq(o,0,i),RI(s,0,r);var a=Le(n,function(l){return l.layoutOption.hideOverlap});DI(a)},e.prototype.processLabelsOverall=function(){var t=this;_(this._chartViewList,function(i){var r=i.__model,n=i.ignoreLabelLineUpdate,o=r.isAnimationEnabled();i.group.traverse(function(s){if(s.ignore&&!s.forceLabelAnimation)return!0;var a=!n,l=s.getTextContent();!a&&l&&(a=Yg(l).needsUpdateLabelLine),a&&t._updateLabelLine(s,r),o&&t._animateLabels(s,r)})})},e.prototype._updateLabelLine=function(t,i){var r=t.getTextContent(),n=ue(t),o=n.dataIndex;if(r&&o!=null){var s=i.getData(n.dataType),a=s.getItemModel(o),l={},u=s.getItemVisual(o,"style");if(u){var h=s.getVisual("drawType");l.stroke=u[h]}var c=a.getModel("labelLine");rw(t,nw(a),l),RR(t,c)}},e.prototype._animateLabels=function(t,i){var r=t.getTextContent(),n=t.getTextGuideLine();if(r&&(t.forceLabelAnimation||!r.ignore&&!r.invisible&&!t.disableLabelAnimation&&!Ta(t))){var o=Yg(r),s=o.oldLayout,a=ue(t),l=a.dataIndex,u={x:r.x,y:r.y,rotation:r.rotation},h=i.getData(a.dataType);if(s){r.attr(s);var d=t.prevStates;d&&(Ce(d,"select")>=0&&r.attr(o.oldLayoutSelect),Ce(d,"emphasis")>=0&&r.attr(o.oldLayoutEmphasis)),Me(r,u,i,l)}else if(r.attr(u),!rl(r).valueAnimation){var c=de(r.style.opacity,1);r.style.opacity=0,Ze(r,{style:{opacity:c}},i,l)}if(o.oldLayout=u,r.states.select){var f=o.oldLayoutSelect={};wc(f,u,bc),wc(f,r.states.select,bc)}if(r.states.emphasis){var p=o.oldLayoutEmphasis={};wc(p,u,bc),wc(p,r.states.emphasis,bc)}mF(r,l,h,i,i)}if(n&&!n.ignore&&!n.invisible){var o=Uq(n),s=o.oldLayout,g={points:n.shape.points};s?(n.attr({shape:s}),Me(n,{shape:g},i)):(n.setShape(g),n.style.strokePercent=0,Ze(n,{style:{strokePercent:1}},i)),o.oldLayout=g}},e}(),Xg=_e();function Kq(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,i,r){var n=Xg(i).labelManager;n||(n=Xg(i).labelManager=new $q),n.clearLabels()}),e.registerUpdateLifecycle("series:layoutlabels",function(t,i,r){var n=Xg(i).labelManager;r.updatedSeries.forEach(function(o){n.addLabelsOfSeries(i.getViewOfSeriesModel(o))}),n.updateLayoutConfig(i),n.layout(i),n.processLabelsOverall()})}var qg=Math.sin,Zg=Math.cos,TI=Math.PI,Lo=Math.PI*2,Yq=180/TI,_I=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,i){this._add("M",t,i)},e.prototype.lineTo=function(t,i){this._add("L",t,i)},e.prototype.bezierCurveTo=function(t,i,r,n,o,s){this._add("C",t,i,r,n,o,s)},e.prototype.quadraticCurveTo=function(t,i,r,n){this._add("Q",t,i,r,n)},e.prototype.arc=function(t,i,r,n,o,s){this.ellipse(t,i,r,r,0,n,o,s)},e.prototype.ellipse=function(t,i,r,n,o,s,a,l){var u=a-s,h=!l,c=Math.abs(u),d=Hn(c-Lo)||(h?u>=Lo:-u>=Lo),f=u>0?u%Lo:u%Lo+Lo,p=!1;d?p=!0:Hn(c)?p=!1:p=f>=TI==!!h;var g=t+r*Zg(s),v=i+n*qg(s);this._start&&this._add("M",g,v);var m=Math.round(o*Yq);if(d){var y=1/this._p,C=(h?1:-1)*(Lo-y);this._add("A",r,n,m,1,+h,t+r*Zg(s+C),i+n*qg(s+C)),y>.01&&this._add("A",r,n,m,0,+h,g,v)}else{var S=t+r*Zg(a),b=i+n*qg(a);this._add("A",r,n,m,+p,+h,S,b)}},e.prototype.rect=function(t,i,r,n){this._add("M",t,i),this._add("l",r,0),this._add("l",0,n),this._add("l",-r,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,i,r,n,o,s,a,l,u){for(var h=[],c=this._p,d=1;d<arguments.length;d++){var f=arguments[d];if(isNaN(f)){this._invalid=!0;return}h.push(Math.round(f*c)/c)}this._d.push(t+h.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),ow="none",Xq=Math.round;function qq(e){var t=e.fill;return t!=null&&t!==ow}function Zq(e){var t=e.stroke;return t!=null&&t!==ow}var Ay=["lineCap","miterLimit","lineJoin"],jq=z(Ay,function(e){return"stroke-"+e.toLowerCase()});function Qq(e,t,i,r){var n=t.opacity==null?1:t.opacity;if(i instanceof Rt){e("opacity",n);return}if(qq(t)){var o=Nu(t.fill);e("fill",o.color);var s=t.fillOpacity!=null?t.fillOpacity*o.opacity*n:o.opacity*n;s<1&&e("fill-opacity",s)}else e("fill",ow);if(Zq(t)){var a=Nu(t.stroke);e("stroke",a.color);var l=t.strokeNoScale?i.getLineScale():1,u=l?(t.lineWidth||0)/l:0,h=t.strokeOpacity!=null?t.strokeOpacity*a.opacity*n:a.opacity*n,c=t.strokeFirst;if(u!==1&&e("stroke-width",u),c&&e("paint-order",c?"stroke":"fill"),h<1&&e("stroke-opacity",h),t.lineDash){var d=$S(i),f=d[0],p=d[1];f&&(p=Xq(p||0),e("stroke-dasharray",f.join(",")),(p||r)&&e("stroke-dashoffset",p))}for(var g=0;g<Ay.length;g++){var v=Ay[g];if(t[v]!==Vd[v]){var m=t[v]||Vd[v];m&&e(jq[g],m)}}}}var AI="http://www.w3.org/2000/svg",PI="http://www.w3.org/1999/xlink",Jq="http://www.w3.org/2000/xmlns/",e7="http://www.w3.org/XML/1998/namespace",TR="ecmeta_";function MI(e){return document.createElementNS(AI,e)}function yt(e,t,i,r,n){return{tag:e,attrs:i||{},children:r,text:n,key:t}}function t7(e,t){var i=[];if(t)for(var r in t){var n=t[r],o=r;n!==!1&&(n!==!0&&n!=null&&(o+='="'+n+'"'),i.push(o))}return"<"+e+" "+i.join(" ")+">"}function i7(e){return"</"+e+">"}function sw(e,t){t=t||{};var i=t.newline?`
`:"";function r(n){var o=n.children,s=n.tag,a=n.attrs,l=n.text;return t7(s,a)+(s!=="style"?$t(l):l||"")+(o?""+i+z(o,function(u){return r(u)}).join(i)+i:"")+i7(s)}return r(e)}function r7(e,t,i){i=i||{};var r=i.newline?`
`:"",n=" {"+r,o=r+"}",s=z(De(e),function(l){return l+n+z(De(e[l]),function(u){return u+":"+e[l][u]+";"}).join(r)+o}).join(r),a=z(De(t),function(l){return"@keyframes "+l+n+z(De(t[l]),function(u){return u+n+z(De(t[l][u]),function(h){var c=t[l][u][h];return h==="d"&&(c='path("'+c+'")'),h+":"+c+";"}).join(r)+o}).join(r)+o}).join(r);return!s&&!a?"":["<![CDATA[",s,a,"]]>"].join(r)}function Py(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function _R(e,t,i,r){return yt("svg","root",{width:e,height:t,xmlns:AI,"xmlns:xlink":PI,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+e+" "+t:!1},i)}var n7=0;function FI(){return n7++}var AR={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Vo="transform-origin";function o7(e,t,i){var r=V({},e.shape);V(r,t),e.buildPath(i,r);var n=new _I;return n.reset(f1(e)),i.rebuildPath(n,1),n.generateStr(),n.getStr()}function s7(e,t){var i=t.originX,r=t.originY;(i||r)&&(e[Vo]=i+"px "+r+"px")}var a7={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function EI(e,t){var i=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[i]=e,i}function l7(e,t,i){var r=e.shape.paths,n={},o,s;if(_(r,function(l){var u=Py(i.zrId);u.animation=!0,dp(l,{},u,!0);var h=u.cssAnims,c=u.cssNodes,d=De(h),f=d.length;if(f){s=d[f-1];var p=h[s];for(var g in p){var v=p[g];n[g]=n[g]||{d:""},n[g].d+=v.d||""}for(var m in c){var y=c[m].animation;y.indexOf(s)>=0&&(o=y)}}}),!!o){t.d=!1;var a=EI(n,i);return o.replace(s,a)}}function PR(e){return q(e)?AR[e]?"cubic-bezier("+AR[e]+")":hS(e)?e:"":""}function dp(e,t,i,r){var n=e.animators,o=n.length,s=[];if(e instanceof DS){var a=l7(e,t,i);if(a)s.push(a);else if(!o)return}else if(!o)return;for(var l={},u=0;u<o;u++){var h=n[u],c=[h.getMaxTime()/1e3+"s"],d=PR(h.getClip().easing),f=h.getDelay();d?c.push(d):c.push("linear"),f&&c.push(f/1e3+"s"),h.getLoop()&&c.push("infinite");var p=c.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(h)}function g(y){var C=y[1],S=C.length,b={},w={},x={},R="animation-timing-function";function D(me,oe,Se){for(var ee=me.getTracks(),ce=me.getMaxTime(),Ke=0;Ke<ee.length;Ke++){var Ve=ee[Ke];if(Ve.needsAnimate()){var Ue=Ve.keyframes,je=Ve.propName;if(Se&&(je=Se(je)),je)for(var gt=0;gt<Ue.length;gt++){var di=Ue[gt],ii=Math.round(di.time/ce*100)+"%",co=PR(di.easing),yn=di.rawValue;(q(yn)||Pe(yn))&&(oe[ii]=oe[ii]||{},oe[ii][je]=di.rawValue,co&&(oe[ii][R]=co))}}}}for(var T=0;T<S;T++){var A=C[T],P=A.targetName;P?P==="shape"&&D(A,w):!r&&D(A,b)}for(var M in b){var F={};y1(F,e),V(F,b[M]);var E=p1(F),I=b[M][R];x[M]=E?{transform:E}:{},s7(x[M],F),I&&(x[M][R]=I)}var O,k=!0;for(var M in w){x[M]=x[M]||{};var G=!O,I=w[M][R];G&&(O=new Or);var W=O.len();O.reset(),x[M].d=o7(e,w[M],O);var $=O.len();if(!G&&W!==$){k=!1;break}I&&(x[M][R]=I)}if(!k)for(var M in x)delete x[M].d;if(!r)for(var T=0;T<S;T++){var A=C[T],P=A.targetName;P==="style"&&D(A,x,function(ee){return a7[ee]})}for(var X=De(x),te=!0,re,T=1;T<X.length;T++){var he=X[T-1],Be=X[T];if(x[he][Vo]!==x[Be][Vo]){te=!1;break}re=x[he][Vo]}if(te&&re){for(var M in x)x[M][Vo]&&delete x[M][Vo];t[Vo]=re}if(Le(X,function(me){return De(x[me]).length>0}).length){var rt=EI(x,i);return rt+" "+y[0]+" both"}}for(var v in l){var a=g(l[v]);a&&s.push(a)}if(s.length){var m=i.zrId+"-cls-"+FI();i.cssNodes["."+m]={animation:s.join(",")},t.class=m}}function u7(e,t,i){if(!e.ignore)if(e.isSilent()){var r={"pointer-events":"none"};MR(r,t,i)}else{var n=e.states.emphasis&&e.states.emphasis.style?e.states.emphasis.style:{},o=n.fill;if(!o){var s=e.style&&e.style.fill,a=e.states.select&&e.states.select.style&&e.states.select.style.fill,l=e.currentStates.indexOf("select")>=0&&a||s;l&&(o=Hm(l))}var u=n.lineWidth;if(u){var h=!n.strokeNoScale&&e.transform?e.transform[0]:1;u=u/h}var r={cursor:"pointer"};o&&(r.fill=o),n.stroke&&(r.stroke=n.stroke),u&&(r["stroke-width"]=u),MR(r,t,i)}}function MR(e,t,i,r){var n=JSON.stringify(e),o=i.cssStyleCache[n];o||(o=i.zrId+"-cls-"+FI(),i.cssStyleCache[n]=o,i.cssNodes["."+o+":hover"]=e),t.class=t.class?t.class+" "+o:o}var ju=Math.round;function II(e){return e&&q(e.src)}function LI(e){return e&&ie(e.toDataURL)}function aw(e,t,i,r){Qq(function(n,o){var s=n==="fill"||n==="stroke";s&&d1(o)?OI(t,e,n,r):s&&cS(o)?GI(i,e,n,r):e[n]=o,s&&r.ssr&&o==="none"&&(e["pointer-events"]="visible")},t,i,!1),v7(i,e,r)}function lw(e,t){var i=a4(t);i&&(i.each(function(r,n){r!=null&&(e[(TR+n).toLowerCase()]=r+"")}),t.isSilent()&&(e[TR+"silent"]="true"))}function FR(e){return Hn(e[0]-1)&&Hn(e[1])&&Hn(e[2])&&Hn(e[3]-1)}function h7(e){return Hn(e[4])&&Hn(e[5])}function uw(e,t,i){if(t&&!(h7(t)&&FR(t))){var r=1e4;e.transform=FR(t)?"translate("+ju(t[4]*r)/r+" "+ju(t[5]*r)/r+")":M$(t)}}function ER(e,t,i){for(var r=e.points,n=[],o=0;o<r.length;o++)n.push(ju(r[o][0]*i)/i),n.push(ju(r[o][1]*i)/i);t.points=n.join(" ")}function IR(e){return!e.smooth}function c7(e){var t=z(e,function(i){return typeof i=="string"?[i,i]:i});return function(i,r,n){for(var o=0;o<t.length;o++){var s=t[o],a=i[s[0]];a!=null&&(r[s[1]]=ju(a*n)/n)}}}var d7={circle:[c7(["cx","cy","r"])],polyline:[ER,IR],polygon:[ER,IR]};function f7(e){for(var t=e.animators,i=0;i<t.length;i++)if(t[i].targetName==="shape")return!0;return!1}function kI(e,t){var i=e.style,r=e.shape,n=d7[e.type],o={},s=t.animation,a="path",l=e.style.strokePercent,u=t.compress&&f1(e)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](r))&&!(s&&f7(e))&&!(l<1)){a=e.type;var h=Math.pow(10,u);n[0](r,o,h)}else{var c=!e.path||e.shapeChanged();e.path||e.createPathProxy();var d=e.path;c&&(d.beginPath(),e.buildPath(d,e.shape),e.pathUpdated());var f=d.getVersion(),p=e,g=p.__svgPathBuilder;(p.__svgPathVersion!==f||!g||l!==p.__svgPathStrokePercent)&&(g||(g=p.__svgPathBuilder=new _I),g.reset(u),d.rebuildPath(g,l),g.generateStr(),p.__svgPathVersion=f,p.__svgPathStrokePercent=l),o.d=g.getStr()}return uw(o,e.transform),aw(o,i,e,t),lw(o,e),t.animation&&dp(e,o,t),t.emphasis&&u7(e,o,t),yt(a,e.id+"",o)}function p7(e,t){var i=e.style,r=i.image;if(r&&!q(r)&&(II(r)?r=r.src:LI(r)&&(r=r.toDataURL())),!!r){var n=i.x||0,o=i.y||0,s=i.width,a=i.height,l={href:r,width:s,height:a};return n&&(l.x=n),o&&(l.y=o),uw(l,e.transform),aw(l,i,e,t),lw(l,e),t.animation&&dp(e,l,t),yt("image",e.id+"",l)}}function g7(e,t){var i=e.style,r=i.text;if(r!=null&&(r+=""),!(!r||isNaN(i.x)||isNaN(i.y))){var n=i.font||Jn,o=i.x||0,s=E$(i.y||0,Nf(n),i.textBaseline),a=F$[i.textAlign]||i.textAlign,l={"dominant-baseline":"central","text-anchor":a};if(U1(i)){var u="",h=i.fontStyle,c=W1(i.fontSize);if(!parseFloat(c))return;var d=i.fontFamily||WM,f=i.fontWeight;u+="font-size:"+c+";font-family:"+d+";",h&&h!=="normal"&&(u+="font-style:"+h+";"),f&&f!=="normal"&&(u+="font-weight:"+f+";"),l.style=u}else l.style="font: "+n;return r.match(/\s/)&&(l["xml:space"]="preserve"),o&&(l.x=o),s&&(l.y=s),uw(l,e.transform),aw(l,i,e,t),lw(l,e),t.animation&&dp(e,l,t),yt("text",e.id+"",l,void 0,r)}}function LR(e,t){if(e instanceof be)return kI(e,t);if(e instanceof Rt)return p7(e,t);if(e instanceof Oa)return g7(e,t)}function v7(e,t,i){var r=e.style;if(I$(r)){var n=L$(e),o=i.shadowCache,s=o[n];if(!s){var a=e.getGlobalScale(),l=a[0],u=a[1];if(!l||!u)return;var h=r.shadowOffsetX||0,c=r.shadowOffsetY||0,d=r.shadowBlur,f=Nu(r.shadowColor),p=f.opacity,g=f.color,v=d/2/l,m=d/2/u,y=v+" "+m;s=i.zrId+"-s"+i.shadowIdx++,i.defs[s]=yt("filter",s,{id:s,x:"-100%",y:"-100%",width:"300%",height:"300%"},[yt("feDropShadow","",{dx:h/l,dy:c/u,stdDeviation:y,"flood-color":g,"flood-opacity":p})]),o[n]=s}t.filter=Gf(s)}}function OI(e,t,i,r){var n=e[i],o,s={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(h1(n))o="linearGradient",s.x1=n.x,s.y1=n.y,s.x2=n.x2,s.y2=n.y2;else if(c1(n))o="radialGradient",s.cx=de(n.x,.5),s.cy=de(n.y,.5),s.r=de(n.r,.5);else return;for(var a=n.colorStops,l=[],u=0,h=a.length;u<h;++u){var c=zm(a[u].offset)*100+"%",d=a[u].color,f=Nu(d),p=f.color,g=f.opacity,v={offset:c};v["stop-color"]=p,g<1&&(v["stop-opacity"]=g),l.push(yt("stop",u+"",v))}var m=yt(o,"",s,l),y=sw(m),C=r.gradientCache,S=C[y];S||(S=r.zrId+"-g"+r.gradientIdx++,C[y]=S,s.id=S,r.defs[S]=yt(o,S,s,l)),t[i]=Gf(S)}function GI(e,t,i,r){var n=e.style[i],o=e.getBoundingRect(),s={},a=n.repeat,l=a==="no-repeat",u=a==="repeat-x",h=a==="repeat-y",c;if(u1(n)){var d=n.imageWidth,f=n.imageHeight,p=void 0,g=n.image;if(q(g)?p=g:II(g)?p=g.src:LI(g)&&(p=g.toDataURL()),typeof Image>"u"){var v="Image width/height must been given explictly in svg-ssr renderer.";jt(d,v),jt(f,v)}else if(d==null||f==null){var m=function(T,A){if(T){var P=T.elm,M=d||A.width,F=f||A.height;T.tag==="pattern"&&(u?(F=1,M/=o.width):h&&(M=1,F/=o.height)),T.attrs.width=M,T.attrs.height=F,P&&(P.setAttribute("width",M),P.setAttribute("height",F))}},y=mS(p,null,e,function(T){l||m(w,T),m(c,T)});y&&y.width&&y.height&&(d=d||y.width,f=f||y.height)}c=yt("image","img",{href:p,width:d,height:f}),s.width=d,s.height=f}else n.svgElement&&(c=ae(n.svgElement),s.width=n.svgWidth,s.height=n.svgHeight);if(c){var C,S;l?C=S=1:u?(S=1,C=s.width/o.width):h?(C=1,S=s.height/o.height):s.patternUnits="userSpaceOnUse",C!=null&&!isNaN(C)&&(s.width=C),S!=null&&!isNaN(S)&&(s.height=S);var b=p1(n);b&&(s.patternTransform=b);var w=yt("pattern","",s,[c]),x=sw(w),R=r.patternCache,D=R[x];D||(D=r.zrId+"-p"+r.patternIdx++,R[x]=D,s.id=D,w=r.defs[D]=yt("pattern",D,s,[c])),t[i]=Gf(D)}}function m7(e,t,i){var r=i.clipPathCache,n=i.defs,o=r[e.id];if(!o){o=i.zrId+"-c"+i.clipPathIdx++;var s={id:o};r[e.id]=o,n[o]=yt("clipPath",o,s,[kI(e,i)])}t["clip-path"]=Gf(o)}function kR(e){return document.createTextNode(e)}function Xo(e,t,i){e.insertBefore(t,i)}function OR(e,t){e.removeChild(t)}function GR(e,t){e.appendChild(t)}function NI(e){return e.parentNode}function VI(e){return e.nextSibling}function jg(e,t){e.textContent=t}var NR=58,y7=120,C7=yt("","");function My(e){return e===void 0}function yr(e){return e!==void 0}function S7(e,t,i){for(var r={},n=t;n<=i;++n){var o=e[n].key;o!==void 0&&(r[o]=n)}return r}function tu(e,t){var i=e.key===t.key,r=e.tag===t.tag;return r&&i}function Qu(e){var t,i=e.children,r=e.tag;if(yr(r)){var n=e.elm=MI(r);if(hw(C7,e),H(i))for(t=0;t<i.length;++t){var o=i[t];o!=null&&GR(n,Qu(o))}else yr(e.text)&&!se(e.text)&&GR(n,kR(e.text))}else e.elm=kR(e.text);return e.elm}function BI(e,t,i,r,n){for(;r<=n;++r){var o=i[r];o!=null&&Xo(e,Qu(o),t)}}function of(e,t,i,r){for(;i<=r;++i){var n=t[i];if(n!=null)if(yr(n.tag)){var o=NI(n.elm);OR(o,n.elm)}else OR(e,n.elm)}}function hw(e,t){var i,r=t.elm,n=e&&e.attrs||{},o=t.attrs||{};if(n!==o){for(i in o){var s=o[i],a=n[i];a!==s&&(s===!0?r.setAttribute(i,""):s===!1?r.removeAttribute(i):i==="style"?r.style.cssText=s:i.charCodeAt(0)!==y7?r.setAttribute(i,s):i==="xmlns:xlink"||i==="xmlns"?r.setAttributeNS(Jq,i,s):i.charCodeAt(3)===NR?r.setAttributeNS(e7,i,s):i.charCodeAt(5)===NR?r.setAttributeNS(PI,i,s):r.setAttribute(i,s))}for(i in n)i in o||r.removeAttribute(i)}}function w7(e,t,i){for(var r=0,n=0,o=t.length-1,s=t[0],a=t[o],l=i.length-1,u=i[0],h=i[l],c,d,f,p;r<=o&&n<=l;)s==null?s=t[++r]:a==null?a=t[--o]:u==null?u=i[++n]:h==null?h=i[--l]:tu(s,u)?(pa(s,u),s=t[++r],u=i[++n]):tu(a,h)?(pa(a,h),a=t[--o],h=i[--l]):tu(s,h)?(pa(s,h),Xo(e,s.elm,VI(a.elm)),s=t[++r],h=i[--l]):tu(a,u)?(pa(a,u),Xo(e,a.elm,s.elm),a=t[--o],u=i[++n]):(My(c)&&(c=S7(t,r,o)),d=c[u.key],My(d)?Xo(e,Qu(u),s.elm):(f=t[d],f.tag!==u.tag?Xo(e,Qu(u),s.elm):(pa(f,u),t[d]=void 0,Xo(e,f.elm,s.elm))),u=i[++n]);(r<=o||n<=l)&&(r>o?(p=i[l+1]==null?null:i[l+1].elm,BI(e,p,i,n,l)):of(e,t,r,o))}function pa(e,t){var i=t.elm=e.elm,r=e.children,n=t.children;e!==t&&(hw(e,t),My(t.text)?yr(r)&&yr(n)?r!==n&&w7(i,r,n):yr(n)?(yr(e.text)&&jg(i,""),BI(i,null,n,0,n.length-1)):yr(r)?of(i,r,0,r.length-1):yr(e.text)&&jg(i,""):e.text!==t.text&&(yr(r)&&of(i,r,0,r.length-1),jg(i,t.text)))}function b7(e,t){if(tu(e,t))pa(e,t);else{var i=e.elm,r=NI(i);Qu(t),r!==null&&(Xo(r,t.elm,VI(i)),of(r,[e],0,0))}return t}var x7=0,R7=function(){function e(t,i,r){if(this.type="svg",this.refreshHover=VR(),this.configLayer=VR(),this.storage=i,this._opts=r=V({},r),this.root=t,this._id="zr"+x7++,this._oldVNode=_R(r.width,r.height),t&&!r.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=MI("svg");hw(null,this._oldVNode),n.appendChild(o),t.appendChild(n)}this.resize(r.width,r.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",b7(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return LR(t,Py(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var i=this.storage.getDisplayList(!0),r=this._width,n=this._height,o=Py(this._id);o.animation=t.animation,o.willUpdate=t.willUpdate,o.compress=t.compress,o.emphasis=t.emphasis,o.ssr=this._opts.ssr;var s=[],a=this._bgVNode=D7(r,n,this._backgroundColor,o);a&&s.push(a);var l=t.compress?null:this._mainVNode=yt("g","main",{},[]);this._paintList(i,o,l?l.children:s),l&&s.push(l);var u=z(De(o.defs),function(d){return o.defs[d]});if(u.length&&s.push(yt("defs","defs",{},u)),t.animation){var h=r7(o.cssNodes,o.cssAnims,{newline:!0});if(h){var c=yt("style","stl",{},[],h);s.push(c)}}return _R(r,n,s,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},sw(this.renderToVNode({animation:de(t.cssAnimation,!0),emphasis:de(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:de(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,i,r){for(var n=t.length,o=[],s=0,a,l,u=0,h=0;h<n;h++){var c=t[h];if(!c.invisible){var d=c.__clipPaths,f=d&&d.length||0,p=l&&l.length||0,g=void 0;for(g=Math.max(f-1,p-1);g>=0&&!(d&&l&&d[g]===l[g]);g--);for(var v=p-1;v>g;v--)s--,a=o[s-1];for(var m=g+1;m<f;m++){var y={};m7(d[m],y,i);var C=yt("g","clip-g-"+u++,y,[]);(a?a.children:r).push(C),o[s++]=C,a=C}l=d;var S=LR(c,i);S&&(a?a.children:r).push(S)}}},e.prototype.resize=function(t,i){var r=this._opts,n=this.root,o=this._viewport;if(t!=null&&(r.width=t),i!=null&&(r.height=i),n&&o&&(o.style.display="none",t=Sa(n,0,r),i=Sa(n,1,r),o.style.display=""),this._width!==t||this._height!==i){if(this._width=t,this._height=i,o){var s=o.style;s.width=t+"px",s.height=i+"px"}if(cS(this._backgroundColor))this.refresh();else{var a=this._svgDom;a&&(a.setAttribute("width",t),a.setAttribute("height",i));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",i))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var i=this.renderToString(),r="data:image/svg+xml;";return t?(i=O$(i),i&&r+"base64,"+i):r+"charset=UTF-8,"+encodeURIComponent(i)},e}();function VR(e){return function(){}}function D7(e,t,i,r){var n;if(i&&i!=="none")if(n=yt("rect","bg",{width:e,height:t,x:"0",y:"0"}),d1(i))OI({fill:i},n.attrs,"fill",r);else if(cS(i))GI({style:{fill:i},dirty:at,getBoundingRect:function(){return{width:e,height:t}}},n.attrs,"fill",r);else{var o=Nu(i),s=o.color,a=o.opacity;n.attrs.fill=s,a<1&&(n.attrs["fill-opacity"]=a)}return n}function T7(e){e.registerPainter("svg",R7)}function BR(e,t,i){var r=eo.createCanvas(),n=t.getWidth(),o=t.getHeight(),s=r.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=n+"px",s.height=o+"px",r.setAttribute("data-zr-dom-id",e)),r.width=n*i,r.height=o*i,r}var Qg=function(e){L(t,e);function t(i,r,n){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var s;n=n||Gd,typeof i=="string"?s=BR(i,r,n):se(i)&&(s=i,i=s.id),o.id=i,o.dom=s;var a=s.style;return a&&(qM(s),s.onselectstart=function(){return!1},a.padding="0",a.margin="0",a.borderWidth="0"),o.painter=r,o.dpr=n,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var i=this.dpr;this.domBack=BR("back-"+this.id,this.painter,i),this.ctxBack=this.domBack.getContext("2d"),i!==1&&this.ctxBack.scale(i,i)},t.prototype.createRepaintRects=function(i,r,n,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],a=this.maxRepaintRectCount,l=!1,u=new ve(0,0,0,0);function h(y){if(!(!y.isFinite()||y.isZero()))if(s.length===0){var C=new ve(0,0,0,0);C.copy(y),s.push(C)}else{for(var S=!1,b=1/0,w=0,x=0;x<s.length;++x){var R=s[x];if(R.intersect(y)){var D=new ve(0,0,0,0);D.copy(R),D.union(y),s[x]=D,S=!0;break}else if(l){u.copy(y),u.union(R);var T=y.width*y.height,A=R.width*R.height,P=u.width*u.height,M=P-T-A;M<b&&(b=M,w=x)}}if(l&&(s[w].union(y),S=!0),!S){var C=new ve(0,0,0,0);C.copy(y),s.push(C)}l||(l=s.length>=a)}}for(var c=this.__startIndex;c<this.__endIndex;++c){var d=i[c];if(d){var f=d.shouldBePainted(n,o,!0,!0),p=d.__isRendered&&(d.__dirty&gi||!f)?d.getPrevPaintRect():null;p&&h(p);var g=f&&(d.__dirty&gi||!d.__isRendered)?d.getPaintRect():null;g&&h(g)}}for(var c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var d=r[c],f=d&&d.shouldBePainted(n,o,!0,!0);if(d&&(!f||!d.__zr)&&d.__isRendered){var p=d.getPrevPaintRect();p&&h(p)}}var v;do{v=!1;for(var c=0;c<s.length;){if(s[c].isZero()){s.splice(c,1);continue}for(var m=c+1;m<s.length;)s[c].intersect(s[m])?(v=!0,s[c].union(s[m]),s.splice(m,1)):m++;c++}}while(v);return this._paintRects=s,s},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(i,r){var n=this.dpr,o=this.dom,s=o.style,a=this.domBack;s&&(s.width=i+"px",s.height=r+"px"),o.width=i*n,o.height=r*n,a&&(a.width=i*n,a.height=r*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(i,r,n){var o=this.dom,s=this.ctx,a=o.width,l=o.height;r=r||this.clearColor;var u=this.motionBlur&&!i,h=this.lastFrameAlpha,c=this.dpr,d=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,a/c,l/c));var f=this.domBack;function p(g,v,m,y){if(s.clearRect(g,v,m,y),r&&r!=="transparent"){var C=void 0;if(Lf(r)){var S=r.global||r.__width===m&&r.__height===y;C=S&&r.__canvasGradient||Sy(s,r,{x:0,y:0,width:m,height:y}),r.__canvasGradient=C,r.__width=m,r.__height=y}else U3(r)&&(r.scaleX=r.scaleX||c,r.scaleY=r.scaleY||c,C=wy(s,r,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));s.save(),s.fillStyle=C||r,s.fillRect(g,v,m,y),s.restore()}u&&(s.save(),s.globalAlpha=h,s.drawImage(f,g,v,m,y),s.restore())}!n||u?p(0,0,a,l):n.length&&_(n,function(g){p(g.x*c,g.y*c,g.width*c,g.height*c)})},t}(Wi),HR=1e5,ko=314159,xc=.01,_7=.001;function A7(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function P7(e,t){var i=document.createElement("div");return i.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}var M7=function(){function e(t,i,r,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=r=V({},r||{}),this.dpr=r.devicePixelRatio||Gd,this._singleCanvas=o,this.root=t;var s=t.style;s&&(qM(t),t.innerHTML=""),this.storage=i;var a=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var h=t,c=h.width,d=h.height;r.width!=null&&(c=r.width),r.height!=null&&(d=r.height),this.dpr=r.devicePixelRatio||1,h.width=c*this.dpr,h.height=d*this.dpr,this._width=c,this._height=d;var f=new Qg(h,this,this.dpr);f.__builtin__=!0,f.initContext(),l[ko]=f,f.zlevel=ko,a.push(ko),this._domRoot=t}else{this._width=Sa(t,0,r),this._height=Sa(t,1,r);var u=this._domRoot=P7(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var i=this.storage.getDisplayList(!0),r=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(i,r,t,this._redrawId);for(var o=0;o<n.length;o++){var s=n[o],a=this._layers[s];if(!a.__builtin__&&a.refresh){var l=o===0?this._backgroundColor:null;a.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=i.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var i=t.length,r=this._hoverlayer;if(r&&r.clear(),!!i){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,s=0;s<i;s++){var a=t[s];a.__inHover&&(r||(r=this._hoverlayer=this.getLayer(HR)),o||(o=r.ctx,o.save()),ns(o,a,n,s===i-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(HR)},e.prototype.paintOne=function(t,i){DE(t,i)},e.prototype._paintList=function(t,i,r,n){if(this._redrawId===n){r=r||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,i,r),s=o.finished,a=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),s)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;Fd(function(){l._paintList(t,i,r,n)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(ko).ctx,i=this._domRoot.width,r=this._domRoot.height;t.clearRect(0,0,i,r),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,i,r)})},e.prototype._doPaintList=function(t,i,r){for(var n=this,o=[],s=this._opts.useDirtyRect,a=0;a<this._zlevelList.length;a++){var l=this._zlevelList[a],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&o.push(u)}for(var h=!0,c=!1,d=function(g){var v=o[g],m=v.ctx,y=s&&v.createRepaintRects(t,i,f._width,f._height),C=r?v.__startIndex:v.__drawIndex,S=!r&&v.incremental&&Date.now,b=S&&Date.now(),w=v.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,w,y);else if(C===v.__startIndex){var x=t[C];(!x.incremental||!x.notClear||r)&&v.clear(!1,w,y)}C===-1&&(console.error("For some unknown reason. drawIndex is -1"),C=v.__startIndex);var R,D=function(M){var F={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(R=C;R<v.__endIndex;R++){var E=t[R];if(E.__inHover&&(c=!0),n._doPaintEl(E,v,s,M,F,R===v.__endIndex-1),S){var I=Date.now()-b;if(I>15)break}}F.prevElClipPaths&&m.restore()};if(y)if(y.length===0)R=v.__endIndex;else for(var T=f.dpr,A=0;A<y.length;++A){var P=y[A];m.save(),m.beginPath(),m.rect(P.x*T,P.y*T,P.width*T,P.height*T),m.clip(),D(P),m.restore()}else m.save(),D(),m.restore();v.__drawIndex=R,v.__drawIndex<v.__endIndex&&(h=!1)},f=this,p=0;p<o.length;p++)d(p);return xe.wxa&&_(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:h,needsRefreshHover:c}},e.prototype._doPaintEl=function(t,i,r,n,o,s){var a=i.ctx;if(r){var l=t.getPaintRect();(!n||l&&l.intersect(n))&&(ns(a,t,o,s),t.setPrevPaintRect(l))}else ns(a,t,o,s)},e.prototype.getLayer=function(t,i){this._singleCanvas&&!this._needsManuallyCompositing&&(t=ko);var r=this._layers[t];return r||(r=new Qg("zr_"+t,this,this.dpr),r.zlevel=t,r.__builtin__=!0,this._layerConfig[t]?pe(r,this._layerConfig[t],!0):this._layerConfig[t-xc]&&pe(r,this._layerConfig[t-xc],!0),i&&(r.virtual=i),this.insertLayer(t,r),r.initContext()),r},e.prototype.insertLayer=function(t,i){var r=this._layers,n=this._zlevelList,o=n.length,s=this._domRoot,a=null,l=-1;if(!r[t]&&A7(i)){if(o>0&&t>n[0]){for(l=0;l<o-1&&!(n[l]<t&&n[l+1]>t);l++);a=r[n[l]]}if(n.splice(l+1,0,t),r[t]=i,!i.virtual)if(a){var u=a.dom;u.nextSibling?s.insertBefore(i.dom,u.nextSibling):s.appendChild(i.dom)}else s.firstChild?s.insertBefore(i.dom,s.firstChild):s.appendChild(i.dom);i.painter||(i.painter=this)}},e.prototype.eachLayer=function(t,i){for(var r=this._zlevelList,n=0;n<r.length;n++){var o=r[n];t.call(i,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,i){for(var r=this._zlevelList,n=0;n<r.length;n++){var o=r[n],s=this._layers[o];s.__builtin__&&t.call(i,s,o)}},e.prototype.eachOtherLayer=function(t,i){for(var r=this._zlevelList,n=0;n<r.length;n++){var o=r[n],s=this._layers[o];s.__builtin__||t.call(i,s,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(c,d){c.__dirty=c.__used=!1});function i(c){o&&(o.__endIndex!==c&&(o.__dirty=!0),o.__endIndex=c)}if(this._singleCanvas)for(var r=1;r<t.length;r++){var n=t[r];if(n.zlevel!==t[r-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var o=null,s=0,a,l;for(l=0;l<t.length;l++){var n=t[l],u=n.zlevel,h=void 0;a!==u&&(a=u,s=0),n.incremental?(h=this.getLayer(u+_7,this._needsManuallyCompositing),h.incremental=!0,s=1):h=this.getLayer(u+(s>0?xc:0),this._needsManuallyCompositing),h.__builtin__||rS("ZLevel "+u+" has been used by unkown layer "+h.id),h!==o&&(h.__used=!0,h.__startIndex!==l&&(h.__dirty=!0),h.__startIndex=l,h.incremental?h.__drawIndex=-1:h.__drawIndex=l,i(l),o=h),n.__dirty&gi&&!n.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=l))}i(l),this.eachBuiltinLayer(function(c,d){!c.__used&&c.getElementCount()>0&&(c.__dirty=!0,c.__startIndex=c.__endIndex=c.__drawIndex=0),c.__dirty&&c.__drawIndex<0&&(c.__drawIndex=c.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,_(this._layers,function(i){i.setUnpainted()})},e.prototype.configLayer=function(t,i){if(i){var r=this._layerConfig;r[t]?pe(r[t],i,!0):r[t]=i;for(var n=0;n<this._zlevelList.length;n++){var o=this._zlevelList[n];if(o===t||o===t+xc){var s=this._layers[o];pe(s,r[t],!0)}}}},e.prototype.delLayer=function(t){var i=this._layers,r=this._zlevelList,n=i[t];n&&(n.dom.parentNode.removeChild(n.dom),delete i[t],r.splice(Ce(r,t),1))},e.prototype.resize=function(t,i){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var n=this._opts,o=this.root;if(t!=null&&(n.width=t),i!=null&&(n.height=i),t=Sa(o,0,n),i=Sa(o,1,n),r.style.display="",this._width!==t||i!==this._height){r.style.width=t+"px",r.style.height=i+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(t,i);this.refresh(!0)}this._width=t,this._height=i}else{if(t==null||i==null)return;this._width=t,this._height=i,this.getLayer(ko).resize(t,i)}return this},e.prototype.clearLayer=function(t){var i=this._layers[t];i&&i.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[ko].dom;var i=new Qg("image",this,t.pixelRatio||this.dpr);i.initContext(),i.clear(!1,t.backgroundColor||this._backgroundColor);var r=i.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=i.dom.width,o=i.dom.height;this.eachLayer(function(c){c.__builtin__?r.drawImage(c.dom,0,0,n,o):c.renderToCanvas&&(r.save(),c.renderToCanvas(r),r.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),l=0,u=a.length;l<u;l++){var h=a[l];ns(r,h,s,l===u-1)}return i.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();function F7(e){e.registerPainter("canvas",M7)}var E7=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.hasSymbolVisual=!0,i}return t.prototype.getInitialData=function(i){return mn(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(i){var r=new le,n=ct("line",0,i.itemHeight/2,i.itemWidth,0,i.lineStyle.stroke,!1);r.add(n),n.setStyle(i.lineStyle);var o=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),a=o==="none"?"circle":o,l=i.itemHeight*.8,u=ct(a,(i.itemWidth-l)/2,(i.itemHeight-l)/2,l,l,i.itemStyle.fill);r.add(u),u.setStyle(i.itemStyle);var h=i.iconRotate==="inherit"?s:i.iconRotate||0;return u.rotation=h*Math.PI/180,u.setOrigin([i.itemWidth/2,i.itemHeight/2]),a.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),r},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(qe);function Ha(e,t){var i=e.mapDimensionsAll("defaultedLabel"),r=i.length;if(r===1){var n=Na(e,t,i[0]);return n!=null?n+"":null}else if(r){for(var o=[],s=0;s<i.length;s++)o.push(Na(e,t,i[s]));return o.join(" ")}}function HI(e,t){var i=e.mapDimensionsAll("defaultedLabel");if(!H(t))return t+"";for(var r=[],n=0;n<i.length;n++){var o=e.getDimensionIndex(i[n]);o>=0&&r.push(t[o])}return r.join(" ")}var Th=function(e){L(t,e);function t(i,r,n,o){var s=e.call(this)||this;return s.updateData(i,r,n,o),s}return t.prototype._createSymbol=function(i,r,n,o,s){this.removeAll();var a=ct(i,-1,-1,2,2,null,s);a.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),a.drift=I7,this._symbolType=i,this.add(a)},t.prototype.stopSymbolAnimation=function(i){this.childAt(0).stopAnimation(null,i)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){an(this.childAt(0))},t.prototype.downplay=function(){ln(this.childAt(0))},t.prototype.setZ=function(i,r){var n=this.childAt(0);n.zlevel=i,n.z=r},t.prototype.setDraggable=function(i,r){var n=this.childAt(0);n.draggable=i,n.cursor=!r&&i?"move":n.cursor},t.prototype.updateData=function(i,r,n,o){this.silent=!1;var s=i.getItemVisual(r,"symbol")||"circle",a=i.hostModel,l=t.getSymbolSize(i,r),u=s!==this._symbolType,h=o&&o.disableAnimation;if(u){var c=i.getItemVisual(r,"symbolKeepAspect");this._createSymbol(s,i,r,l,c)}else{var d=this.childAt(0);d.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};h?d.attr(f):Me(d,f,a,r),sr(d)}if(this._updateCommon(i,r,l,n,o),u){var d=this.childAt(0);if(!h){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:d.style.opacity}};d.scaleX=d.scaleY=0,d.style.opacity=0,Ze(d,f,a,r)}}h&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(i,r,n,o,s){var a=this.childAt(0),l=i.hostModel,u,h,c,d,f,p,g,v,m;if(o&&(u=o.emphasisItemStyle,h=o.blurItemStyle,c=o.selectItemStyle,d=o.focus,f=o.blurScope,g=o.labelStatesModels,v=o.hoverScale,m=o.cursorStyle,p=o.emphasisDisabled),!o||i.hasItemOption){var y=o&&o.itemModel?o.itemModel:i.getItemModel(r),C=y.getModel("emphasis");u=C.getModel("itemStyle").getItemStyle(),c=y.getModel(["select","itemStyle"]).getItemStyle(),h=y.getModel(["blur","itemStyle"]).getItemStyle(),d=C.get("focus"),f=C.get("blurScope"),p=C.get("disabled"),g=St(y),v=C.getShallow("scale"),m=y.getShallow("cursor")}var S=i.getItemVisual(r,"symbolRotate");a.attr("rotation",(S||0)*Math.PI/180||0);var b=Gs(i.getItemVisual(r,"symbolOffset"),n);b&&(a.x=b[0],a.y=b[1]),m&&a.attr("cursor",m);var w=i.getItemVisual(r,"style"),x=w.fill;if(a instanceof Rt){var R=a.style;a.useStyle(V({image:R.image,x:R.x,y:R.y,width:R.width,height:R.height},w))}else a.__isEmptyBrush?a.useStyle(V({},w)):a.useStyle(w),a.style.decal=null,a.setColor(x,s&&s.symbolInnerColor),a.style.strokeNoScale=!0;var D=i.getItemVisual(r,"liftZ"),T=this._z2;D!=null?T==null&&(this._z2=a.z2,a.z2+=D):T!=null&&(a.z2=T,this._z2=null);var A=s&&s.useNameLabel;Pt(a,g,{labelFetcher:l,labelDataIndex:r,defaultText:P,inheritColor:x,defaultOpacity:w.opacity});function P(E){return A?i.getName(E):Ha(i,E)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var M=a.ensureState("emphasis");M.style=u,a.ensureState("select").style=c,a.ensureState("blur").style=h;var F=v==null||v===!0?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;M.scaleX=this._sizeX*F,M.scaleY=this._sizeY*F,this.setSymbolScale(1),tt(this,d,f,p)},t.prototype.setSymbolScale=function(i){this.scaleX=this.scaleY=i},t.prototype.fadeOut=function(i,r,n){var o=this.childAt(0),s=ue(this).dataIndex,a=n&&n.animation;if(this.silent=o.silent=!0,n&&n.fadeLabel){var l=o.getTextContent();l&&io(l,{style:{opacity:0}},r,{dataIndex:s,removeOpt:a,cb:function(){o.removeTextContent()}})}else o.removeTextContent();io(o,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:s,cb:i,removeOpt:a})},t.getSymbolSize=function(i,r){return hl(i.getItemVisual(r,"symbolSize"))},t}(le);function I7(e,t){this.parent.drift(e,t)}function Jg(e,t,i,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(i))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&e.getItemVisual(i,"symbol")!=="none"}function zR(e){return e!=null&&!se(e)&&(e={isIgnore:e}),e||{}}function WR(e){var t=e.hostModel,i=t.getModel("emphasis");return{emphasisItemStyle:i.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:i.get("focus"),blurScope:i.get("blurScope"),emphasisDisabled:i.get("disabled"),hoverScale:i.get("scale"),labelStatesModels:St(t),cursorStyle:t.get("cursor")}}var _h=function(){function e(t){this.group=new le,this._SymbolCtor=t||Th}return e.prototype.updateData=function(t,i){this._progressiveEls=null,i=zR(i);var r=this.group,n=t.hostModel,o=this._data,s=this._SymbolCtor,a=i.disableAnimation,l=WR(t),u={disableAnimation:a},h=i.getSymbolPoint||function(c){return t.getItemLayout(c)};o||r.removeAll(),t.diff(o).add(function(c){var d=h(c);if(Jg(t,d,c,i)){var f=new s(t,c,l,u);f.setPosition(d),t.setItemGraphicEl(c,f),r.add(f)}}).update(function(c,d){var f=o.getItemGraphicEl(d),p=h(c);if(!Jg(t,p,c,i)){r.remove(f);return}var g=t.getItemVisual(c,"symbol")||"circle",v=f&&f.getSymbolType&&f.getSymbolType();if(!f||v&&v!==g)r.remove(f),f=new s(t,c,l,u),f.setPosition(p);else{f.updateData(t,c,l,u);var m={x:p[0],y:p[1]};a?f.attr(m):Me(f,m,n)}r.add(f),t.setItemGraphicEl(c,f)}).remove(function(c){var d=o.getItemGraphicEl(c);d&&d.fadeOut(function(){r.remove(d)},n)}).execute(),this._getSymbolPoint=h,this._data=t},e.prototype.updateLayout=function(){var t=this,i=this._data;i&&i.eachItemGraphicEl(function(r,n){var o=t._getSymbolPoint(n);r.setPosition(o),r.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=WR(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,i,r){this._progressiveEls=[],r=zR(r);function n(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var s=i.getItemLayout(o);if(Jg(i,s,o,r)){var a=new this._SymbolCtor(i,o,this._seriesScope);a.traverse(n),a.setPosition(s),this.group.add(a),i.setItemGraphicEl(o,a),this._progressiveEls.push(a)}}},e.prototype.eachRendered=function(t){uo(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var i=this.group,r=this._data;r&&t?r.eachItemGraphicEl(function(n){n.fadeOut(function(){i.remove(n)},r.hostModel)}):i.removeAll()},e}();function zI(e,t,i){var r=e.getBaseAxis(),n=e.getOtherAxis(r),o=L7(n,i),s=r.dim,a=n.dim,l=t.mapDimension(a),u=t.mapDimension(s),h=a==="x"||a==="radius"?1:0,c=z(e.dimensions,function(p){return t.mapDimension(p)}),d=!1,f=t.getCalculationInfo("stackResultDimension");return no(t,c[0])&&(d=!0,c[0]=f),no(t,c[1])&&(d=!0,c[1]=f),{dataDimsForPoint:c,valueStart:o,valueAxisDim:a,baseAxisDim:s,stacked:!!d,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function L7(e,t){var i=0,r=e.scale.getExtent();return t==="start"?i=r[0]:t==="end"?i=r[1]:Pe(t)&&!isNaN(t)?i=t:r[0]>0?i=r[0]:r[1]<0&&(i=r[1]),i}function WI(e,t,i,r){var n=NaN;e.stacked&&(n=i.get(i.getCalculationInfo("stackedOverDimension"),r)),isNaN(n)&&(n=e.valueStart);var o=e.baseDataOffset,s=[];return s[o]=i.get(e.baseDim,r),s[1-o]=n,t.dataToPoint(s)}function k7(e,t){var i=[];return t.diff(e).add(function(r){i.push({cmd:"+",idx:r})}).update(function(r,n){i.push({cmd:"=",idx:n,idx1:r})}).remove(function(r){i.push({cmd:"-",idx:r})}).execute(),i}function O7(e,t,i,r,n,o,s,a){for(var l=k7(e,t),u=[],h=[],c=[],d=[],f=[],p=[],g=[],v=zI(n,t,s),m=e.getLayout("points")||[],y=t.getLayout("points")||[],C=0;C<l.length;C++){var S=l[C],b=!0,w=void 0,x=void 0;switch(S.cmd){case"=":w=S.idx*2,x=S.idx1*2;var R=m[w],D=m[w+1],T=y[x],A=y[x+1];(isNaN(R)||isNaN(D))&&(R=T,D=A),u.push(R,D),h.push(T,A),c.push(i[w],i[w+1]),d.push(r[x],r[x+1]),g.push(t.getRawIndex(S.idx1));break;case"+":var P=S.idx,M=v.dataDimsForPoint,F=n.dataToPoint([t.get(M[0],P),t.get(M[1],P)]);x=P*2,u.push(F[0],F[1]),h.push(y[x],y[x+1]);var E=WI(v,n,t,P);c.push(E[0],E[1]),d.push(r[x],r[x+1]),g.push(t.getRawIndex(P));break;case"-":b=!1}b&&(f.push(S),p.push(p.length))}p.sort(function(he,Be){return g[he]-g[Be]});for(var I=u.length,O=Dr(I),k=Dr(I),G=Dr(I),W=Dr(I),$=[],C=0;C<p.length;C++){var X=p[C],te=C*2,re=X*2;O[te]=u[re],O[te+1]=u[re+1],k[te]=h[re],k[te+1]=h[re+1],G[te]=c[re],G[te+1]=c[re+1],W[te]=d[re],W[te+1]=d[re+1],$[C]=f[X]}return{current:O,next:k,stackedOnCurrent:G,stackedOnNext:W,status:$}}var _n=Math.min,An=Math.max;function ys(e,t){return isNaN(e)||isNaN(t)}function Fy(e,t,i,r,n,o,s,a,l){for(var u,h,c,d,f,p,g=i,v=0;v<r;v++){var m=t[g*2],y=t[g*2+1];if(g>=n||g<0)break;if(ys(m,y)){if(l){g+=o;continue}break}if(g===i)e[o>0?"moveTo":"lineTo"](m,y),c=m,d=y;else{var C=m-u,S=y-h;if(C*C+S*S<.5){g+=o;continue}if(s>0){for(var b=g+o,w=t[b*2],x=t[b*2+1];w===m&&x===y&&v<r;)v++,b+=o,g+=o,w=t[b*2],x=t[b*2+1],m=t[g*2],y=t[g*2+1],C=m-u,S=y-h;var R=v+1;if(l)for(;ys(w,x)&&R<r;)R++,b+=o,w=t[b*2],x=t[b*2+1];var D=.5,T=0,A=0,P=void 0,M=void 0;if(R>=r||ys(w,x))f=m,p=y;else{T=w-u,A=x-h;var F=m-u,E=w-m,I=y-h,O=x-y,k=void 0,G=void 0;if(a==="x"){k=Math.abs(F),G=Math.abs(E);var W=T>0?1:-1;f=m-W*k*s,p=y,P=m+W*G*s,M=y}else if(a==="y"){k=Math.abs(I),G=Math.abs(O);var $=A>0?1:-1;f=m,p=y-$*k*s,P=m,M=y+$*G*s}else k=Math.sqrt(F*F+I*I),G=Math.sqrt(E*E+O*O),D=G/(G+k),f=m-T*s*(1-D),p=y-A*s*(1-D),P=m+T*s*D,M=y+A*s*D,P=_n(P,An(w,m)),M=_n(M,An(x,y)),P=An(P,_n(w,m)),M=An(M,_n(x,y)),T=P-m,A=M-y,f=m-T*k/G,p=y-A*k/G,f=_n(f,An(u,m)),p=_n(p,An(h,y)),f=An(f,_n(u,m)),p=An(p,_n(h,y)),T=m-f,A=y-p,P=m+T*G/k,M=y+A*G/k}e.bezierCurveTo(c,d,f,p,m,y),c=P,d=M}else e.lineTo(m,y)}u=m,h=y,g+=o}return v}var UI=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),G7=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="ec-polyline",r}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new UI},t.prototype.buildPath=function(i,r){var n=r.points,o=0,s=n.length/2;if(r.connectNulls){for(;s>0&&ys(n[s*2-2],n[s*2-1]);s--);for(;o<s&&ys(n[o*2],n[o*2+1]);o++);}for(;o<s;)o+=Fy(i,n,o,s,s,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},t.prototype.getPointOn=function(i,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,o=n.data,s=Or.CMD,a,l,u=r==="x",h=[],c=0;c<o.length;){var d=o[c++],f=void 0,p=void 0,g=void 0,v=void 0,m=void 0,y=void 0,C=void 0;switch(d){case s.M:a=o[c++],l=o[c++];break;case s.L:if(f=o[c++],p=o[c++],C=u?(i-a)/(f-a):(i-l)/(p-l),C<=1&&C>=0){var S=u?(p-l)*C+l:(f-a)*C+a;return u?[i,S]:[S,i]}a=f,l=p;break;case s.C:f=o[c++],p=o[c++],g=o[c++],v=o[c++],m=o[c++],y=o[c++];var b=u?Id(a,f,g,m,i,h):Id(l,p,v,y,i,h);if(b>0)for(var w=0;w<b;w++){var x=h[w];if(x<=1&&x>=0){var S=u?vt(l,p,v,y,x):vt(a,f,g,m,x);return u?[i,S]:[S,i]}}a=m,l=y;break}}},t}(be),N7=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(UI),$I=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="ec-polygon",r}return t.prototype.getDefaultShape=function(){return new N7},t.prototype.buildPath=function(i,r){var n=r.points,o=r.stackedOnPoints,s=0,a=n.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;a>0&&ys(n[a*2-2],n[a*2-1]);a--);for(;s<a&&ys(n[s*2],n[s*2+1]);s++);}for(;s<a;){var u=Fy(i,n,s,a,a,1,r.smooth,l,r.connectNulls);Fy(i,o,s+u-1,u,a,-1,r.stackedOnSmooth,l,r.connectNulls),s+=u+1,i.closePath()}},t}(be);function KI(e,t,i,r,n){var o=e.getArea(),s=o.x,a=o.y,l=o.width,u=o.height,h=i.get(["lineStyle","width"])||0;s-=h/2,a-=h/2,l+=h,u+=h,l=Math.ceil(l),s!==Math.floor(s)&&(s=Math.floor(s),l++);var c=new Te({shape:{x:s,y:a,width:l,height:u}});if(t){var d=e.getBaseAxis(),f=d.isHorizontal(),p=d.inverse;f?(p&&(c.shape.x+=l),c.shape.width=0):(p||(c.shape.y+=u),c.shape.height=0);var g=ie(n)?function(v){n(v,c)}:null;Ze(c,{shape:{width:l,height:u,x:s,y:a}},i,null,r,g)}return c}function YI(e,t,i){var r=e.getArea(),n=nt(r.r0,1),o=nt(r.r,1),s=new Jt({shape:{cx:nt(e.cx,1),cy:nt(e.cy,1),r0:n,r:o,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(t){var a=e.getBaseAxis().dim==="angle";a?s.shape.endAngle=r.startAngle:s.shape.r=n,Ze(s,{shape:{endAngle:r.endAngle,r:o}},i)}return s}function Ah(e,t,i,r,n){if(e){if(e.type==="polar")return YI(e,t,i);if(e.type==="cartesian2d")return KI(e,t,i,r,n)}else return null;return null}function Vs(e,t){return e.type===t}function UR(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return;return!0}}function $R(e){for(var t=1/0,i=1/0,r=-1/0,n=-1/0,o=0;o<e.length;){var s=e[o++],a=e[o++];isNaN(s)||(t=Math.min(s,t),r=Math.max(s,r)),isNaN(a)||(i=Math.min(a,i),n=Math.max(a,n))}return[[t,i],[r,n]]}function KR(e,t){var i=$R(e),r=i[0],n=i[1],o=$R(t),s=o[0],a=o[1];return Math.max(Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]),Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]))}function YR(e){return Pe(e)?e:e?.5:0}function V7(e,t,i){if(!i.valueDim)return[];for(var r=t.count(),n=Dr(r*2),o=0;o<r;o++){var s=WI(i,e,t,o);n[o*2]=s[0],n[o*2+1]=s[1]}return n}function Pn(e,t,i,r,n){var o=i.getBaseAxis(),s=o.dim==="x"||o.dim==="radius"?0:1,a=[],l=0,u=[],h=[],c=[],d=[];if(n){for(l=0;l<e.length;l+=2){var f=t||e;!isNaN(f[l])&&!isNaN(f[l+1])&&d.push(e[l],e[l+1])}e=d}for(l=0;l<e.length-2;l+=2)switch(c[0]=e[l+2],c[1]=e[l+3],h[0]=e[l],h[1]=e[l+1],a.push(h[0],h[1]),r){case"end":u[s]=c[s],u[1-s]=h[1-s],a.push(u[0],u[1]);break;case"middle":var p=(h[s]+c[s])/2,g=[];u[s]=g[s]=p,u[1-s]=h[1-s],g[1-s]=c[1-s],a.push(u[0],u[1]),a.push(g[0],g[1]);break;default:u[s]=h[s],u[1-s]=c[1-s],a.push(u[0],u[1])}return a.push(e[l++],e[l++]),a}function B7(e,t){var i=[],r=e.length,n,o;function s(h,c,d){var f=h.coord,p=(d-f)/(c.coord-f),g=P$(p,[h.color,c.color]);return{coord:d,color:g}}for(var a=0;a<r;a++){var l=e[a],u=l.coord;if(u<0)n=l;else if(u>t){o?i.push(s(o,l,t)):n&&i.push(s(n,l,0),s(n,l,t));break}else n&&(i.push(s(n,l,0)),n=null),i.push(l),o=l}return i}function H7(e,t,i){var r=e.getVisual("visualMeta");if(!(!r||!r.length||!e.count())&&t.type==="cartesian2d"){for(var n,o,s=r.length-1;s>=0;s--){var a=e.getDimensionInfo(r[s].dimension);if(n=a&&a.coordDim,n==="x"||n==="y"){o=r[s];break}}if(o){var l=t.getAxis(n),u=z(o.stops,function(C){return{coord:l.toGlobalCoord(l.dataToCoord(C.value)),color:C.color}}),h=u.length,c=o.outerColors.slice();h&&u[0].coord>u[h-1].coord&&(u.reverse(),c.reverse());var d=B7(u,n==="x"?i.getWidth():i.getHeight()),f=d.length;if(!f&&h)return u[0].coord<0?c[1]?c[1]:u[h-1].color:c[0]?c[0]:u[0].color;var p=10,g=d[0].coord-p,v=d[f-1].coord+p,m=v-g;if(m<.001)return"transparent";_(d,function(C){C.offset=(C.coord-g)/m}),d.push({offset:f?d[f-1].offset:.5,color:c[1]||"transparent"}),d.unshift({offset:f?d[0].offset:.5,color:c[0]||"transparent"});var y=new Ch(0,0,0,0,d,!0);return y[n]=g,y[n+"2"]=v,y}}}function z7(e,t,i){var r=e.get("showAllSymbol"),n=r==="auto";if(!(r&&!n)){var o=i.getAxesByScale("ordinal")[0];if(o&&!(n&&W7(o,t))){var s=t.mapDimension(o.dim),a={};return _(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);a[u]=1}),function(l){return!a.hasOwnProperty(t.get(s,l))}}}}function W7(e,t){var i=e.getExtent(),r=Math.abs(i[1]-i[0])/e.scale.count();isNaN(r)&&(r=0);for(var n=t.count(),o=Math.max(1,Math.round(n/5)),s=0;s<n;s+=o)if(Th.getSymbolSize(t,s)[e.isHorizontal()?1:0]*1.5>r)return!1;return!0}function U7(e,t){return isNaN(e)||isNaN(t)}function $7(e){for(var t=e.length/2;t>0&&U7(e[t*2-2],e[t*2-1]);t--);return t-1}function XR(e,t){return[e[t*2],e[t*2+1]]}function K7(e,t,i){for(var r=e.length/2,n=i==="x"?0:1,o,s,a=0,l=-1,u=0;u<r;u++)if(s=e[u*2+n],!(isNaN(s)||isNaN(e[u*2+1-n]))){if(u===0){o=s;continue}if(o<=t&&s>=t||o>=t&&s<=t){l=u;break}a=u,o=s}return{range:[a,l],t:(t-o)/(s-o)}}function XI(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<Qt.length;t++)if(e.get([Qt[t],"endLabel","show"]))return!0;return!1}function ev(e,t,i,r){if(Vs(t,"cartesian2d")){var n=r.getModel("endLabel"),o=n.get("valueAnimation"),s=r.getData(),a={lastFrameIndex:0},l=XI(r)?function(f,p){e._endLabelOnDuring(f,p,s,a,o,n,t)}:null,u=t.getBaseAxis().isHorizontal(),h=KI(t,i,r,function(){var f=e._endLabel;f&&i&&a.originalX!=null&&f.attr({x:a.originalX,y:a.originalY})},l);if(!r.get("clip",!0)){var c=h.shape,d=Math.max(c.width,c.height);u?(c.y-=d,c.height+=d*2):(c.x-=d,c.width+=d*2)}return l&&l(1,h),h}else return YI(t,i,r)}function Y7(e,t){var i=t.getBaseAxis(),r=i.isHorizontal(),n=i.inverse,o=r?n?"right":"left":"center",s=r?"middle":n?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||s}}}var X7=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var i=new le,r=new _h;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=i,this._changePolyState=Z(this._changePolyState,this)},t.prototype.render=function(i,r,n){var o=i.coordinateSystem,s=this.group,a=i.getData(),l=i.getModel("lineStyle"),u=i.getModel("areaStyle"),h=a.getLayout("points")||[],c=o.type==="polar",d=this._coordSys,f=this._symbolDraw,p=this._polyline,g=this._polygon,v=this._lineGroup,m=!r.ssr&&i.get("animation"),y=!u.isEmpty(),C=u.get("origin"),S=zI(o,a,C),b=y&&V7(o,a,S),w=i.get("showSymbol"),x=i.get("connectNulls"),R=w&&!c&&z7(i,a,o),D=this._data;D&&D.eachItemGraphicEl(function(he,Be){he.__temp&&(s.remove(he),D.setItemGraphicEl(Be,null))}),w||f.remove(),s.add(v);var T=c?!1:i.get("step"),A;o&&o.getArea&&i.get("clip",!0)&&(A=o.getArea(),A.width!=null?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r+=.5)),this._clipShapeForSymbol=A;var P=H7(a,o,n)||a.getVisual("style")[a.getVisual("drawType")];if(!(p&&d.type===o.type&&T===this._step))w&&f.updateData(a,{isIgnore:R,clipShape:A,disableAnimation:!0,getSymbolPoint:function(he){return[h[he*2],h[he*2+1]]}}),m&&this._initSymbolLabelAnimation(a,o,A),T&&(b&&(b=Pn(b,h,o,T,x)),h=Pn(h,null,o,T,x)),p=this._newPolyline(h),y?g=this._newPolygon(h,b):g&&(v.remove(g),g=this._polygon=null),c||this._initOrUpdateEndLabel(i,o,Ts(P)),v.setClipPath(ev(this,o,!0,i));else{y&&!g?g=this._newPolygon(h,b):g&&!y&&(v.remove(g),g=this._polygon=null),c||this._initOrUpdateEndLabel(i,o,Ts(P));var M=v.getClipPath();if(M){var F=ev(this,o,!1,i);Ze(M,{shape:F.shape},i)}else v.setClipPath(ev(this,o,!0,i));w&&f.updateData(a,{isIgnore:R,clipShape:A,disableAnimation:!0,getSymbolPoint:function(he){return[h[he*2],h[he*2+1]]}}),(!UR(this._stackedOnPoints,b)||!UR(this._points,h))&&(m?this._doUpdateAnimation(a,b,o,n,T,C,x):(T&&(b&&(b=Pn(b,h,o,T,x)),h=Pn(h,null,o,T,x)),p.setShape({points:h}),g&&g.setShape({points:h,stackedOnPoints:b})))}var E=i.getModel("emphasis"),I=E.get("focus"),O=E.get("blurScope"),k=E.get("disabled");if(p.useStyle(ne(l.getLineStyle(),{fill:"none",stroke:P,lineJoin:"bevel"})),At(p,i,"lineStyle"),p.style.lineWidth>0&&i.get(["emphasis","lineStyle","width"])==="bolder"){var G=p.getState("emphasis").style;G.lineWidth=+p.style.lineWidth+1}ue(p).seriesIndex=i.seriesIndex,tt(p,I,O,k);var W=YR(i.get("smooth")),$=i.get("smoothMonotone");if(p.setShape({smooth:W,smoothMonotone:$,connectNulls:x}),g){var X=a.getCalculationInfo("stackedOnSeries"),te=0;g.useStyle(ne(u.getAreaStyle(),{fill:P,opacity:.7,lineJoin:"bevel",decal:a.getVisual("style").decal})),X&&(te=YR(X.get("smooth"))),g.setShape({smooth:W,stackedOnSmooth:te,smoothMonotone:$,connectNulls:x}),At(g,i,"areaStyle"),ue(g).seriesIndex=i.seriesIndex,tt(g,I,O,k)}var re=this._changePolyState;a.eachItemGraphicEl(function(he){he&&(he.onHoverStateChange=re)}),this._polyline.onHoverStateChange=re,this._data=a,this._coordSys=o,this._stackedOnPoints=b,this._points=h,this._step=T,this._valueOrigin=C,i.get("triggerLineEvent")&&(this.packEventData(i,p),g&&this.packEventData(i,g))},t.prototype.packEventData=function(i,r){ue(r).eventData={componentType:"series",componentSubType:"line",componentIndex:i.componentIndex,seriesIndex:i.seriesIndex,seriesName:i.name,seriesType:"line"}},t.prototype.highlight=function(i,r,n,o){var s=i.getData(),a=xs(s,o);if(this._changePolyState("emphasis"),!(a instanceof Array)&&a!=null&&a>=0){var l=s.getLayout("points"),u=s.getItemGraphicEl(a);if(!u){var h=l[a*2],c=l[a*2+1];if(isNaN(h)||isNaN(c)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(h,c))return;var d=i.get("zlevel")||0,f=i.get("z")||0;u=new Th(s,a),u.x=h,u.y=c,u.setZ(d,f);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=d,p.z=f,p.z2=this._polyline.z2+1),u.__temp=!0,s.setItemGraphicEl(a,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else We.prototype.highlight.call(this,i,r,n,o)},t.prototype.downplay=function(i,r,n,o){var s=i.getData(),a=xs(s,o);if(this._changePolyState("normal"),a!=null&&a>=0){var l=s.getItemGraphicEl(a);l&&(l.__temp?(s.setItemGraphicEl(a,null),this.group.remove(l)):l.downplay())}else We.prototype.downplay.call(this,i,r,n,o)},t.prototype._changePolyState=function(i){var r=this._polygon;Bd(this._polyline,i),r&&Bd(r,i)},t.prototype._newPolyline=function(i){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new G7({shape:{points:i},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},t.prototype._newPolygon=function(i,r){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new $I({shape:{points:i,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(i,r,n){var o,s,a=r.getBaseAxis(),l=a.inverse;r.type==="cartesian2d"?(o=a.isHorizontal(),s=!1):r.type==="polar"&&(o=a.dim==="angle",s=!0);var u=i.hostModel,h=u.get("animationDuration");ie(h)&&(h=h(null));var c=u.get("animationDelay")||0,d=ie(c)?c(null):c;i.eachItemGraphicEl(function(f,p){var g=f;if(g){var v=[f.x,f.y],m=void 0,y=void 0,C=void 0;if(n)if(s){var S=n,b=r.pointToCoord(v);o?(m=S.startAngle,y=S.endAngle,C=-b[1]/180*Math.PI):(m=S.r0,y=S.r,C=b[0])}else{var w=n;o?(m=w.x,y=w.x+w.width,C=f.x):(m=w.y+w.height,y=w.y,C=f.y)}var x=y===m?0:(C-m)/(y-m);l&&(x=1-x);var R=ie(c)?c(p):h*x+d,D=g.getSymbolPath(),T=D.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:R}),T&&T.animateFrom({style:{opacity:0}},{duration:300,delay:R}),D.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(i,r,n){var o=i.getModel("endLabel");if(XI(i)){var s=i.getData(),a=this._polyline,l=s.getLayout("points");if(!l){a.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Ae({z2:200}),u.ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var h=$7(l);h>=0&&(Pt(a,St(i,"endLabel"),{inheritColor:n,labelFetcher:i,labelDataIndex:h,defaultText:function(c,d,f){return f!=null?HI(s,f):Ha(s,c)},enableTextSetter:!0},Y7(o,r)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(i,r,n,o,s,a,l){var u=this._endLabel,h=this._polyline;if(u){i<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var c=n.getLayout("points"),d=n.hostModel,f=d.get("connectNulls"),p=a.get("precision"),g=a.get("distance")||0,v=l.getBaseAxis(),m=v.isHorizontal(),y=v.inverse,C=r.shape,S=y?m?C.x:C.y+C.height:m?C.x+C.width:C.y,b=(m?g:0)*(y?-1:1),w=(m?0:-g)*(y?-1:1),x=m?"x":"y",R=K7(c,S,x),D=R.range,T=D[1]-D[0],A=void 0;if(T>=1){if(T>1&&!f){var P=XR(c,D[0]);u.attr({x:P[0]+b,y:P[1]+w}),s&&(A=d.getRawValue(D[0]))}else{var P=h.getPointOn(S,x);P&&u.attr({x:P[0]+b,y:P[1]+w});var M=d.getRawValue(D[0]),F=d.getRawValue(D[1]);s&&(A=I1(n,p,M,F,R.t))}o.lastFrameIndex=D[0]}else{var E=i===1||o.lastFrameIndex>0?D[0]:0,P=XR(c,E);s&&(A=d.getRawValue(E)),u.attr({x:P[0]+b,y:P[1]+w})}if(s){var I=rl(u);typeof I.setLabelText=="function"&&I.setLabelText(A)}}},t.prototype._doUpdateAnimation=function(i,r,n,o,s,a,l){var u=this._polyline,h=this._polygon,c=i.hostModel,d=O7(this._data,i,this._stackedOnPoints,r,this._coordSys,n,this._valueOrigin),f=d.current,p=d.stackedOnCurrent,g=d.next,v=d.stackedOnNext;if(s&&(p=Pn(d.stackedOnCurrent,d.current,n,s,l),f=Pn(d.current,null,n,s,l),v=Pn(d.stackedOnNext,d.next,n,s,l),g=Pn(d.next,null,n,s,l)),KR(f,g)>3e3||h&&KR(p,v)>3e3){u.stopAnimation(),u.setShape({points:g}),h&&(h.stopAnimation(),h.setShape({points:g,stackedOnPoints:v}));return}u.shape.__points=d.current,u.shape.points=f;var m={shape:{points:g}};d.current!==f&&(m.shape.__points=d.next),u.stopAnimation(),Me(u,m,c),h&&(h.setShape({points:f,stackedOnPoints:p}),h.stopAnimation(),Me(h,{shape:{stackedOnPoints:v}},c),u.shape.points!==h.shape.points&&(h.shape.points=u.shape.points));for(var y=[],C=d.status,S=0;S<C.length;S++){var b=C[S].cmd;if(b==="="){var w=i.getItemGraphicEl(C[S].idx1);w&&y.push({el:w,ptIdx:S})}}u.animators&&u.animators.length&&u.animators[0].during(function(){h&&h.dirtyShape();for(var x=u.shape.__points,R=0;R<y.length;R++){var D=y[R].el,T=y[R].ptIdx*2;D.x=x[T],D.y=x[T+1],D.markRedraw()}})},t.prototype.remove=function(i){var r=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(o,s){o.__temp&&(r.remove(o),n.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(We);function Ph(e,t){return{seriesType:e,plan:ll(),reset:function(i){var r=i.getData(),n=i.coordinateSystem,o=i.pipelineContext,s=t||o.large;if(n){var a=z(n.dimensions,function(f){return r.mapDimension(f)}).slice(0,2),l=a.length,u=r.getCalculationInfo("stackResultDimension");no(r,a[0])&&(a[0]=u),no(r,a[1])&&(a[1]=u);var h=r.getStore(),c=r.getDimensionIndex(a[0]),d=r.getDimensionIndex(a[1]);return l&&{progress:function(f,p){for(var g=f.end-f.start,v=s&&Dr(g*l),m=[],y=[],C=f.start,S=0;C<f.end;C++){var b=void 0;if(l===1){var w=h.get(c,C);b=n.dataToPoint(w,null,y)}else m[0]=h.get(c,C),m[1]=h.get(d,C),b=n.dataToPoint(m,null,y);s?(v[S++]=b[0],v[S++]=b[1]):p.setItemLayout(C,b.slice())}s&&p.setLayout("points",v)}}}}}}var q7={average:function(e){for(var t=0,i=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],i++);return i===0?NaN:t/i},sum:function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i]||0;return t},max:function(e){for(var t=-1/0,i=0;i<e.length;i++)e[i]>t&&(t=e[i]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,i=0;i<e.length;i++)e[i]<t&&(t=e[i]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Z7=function(e){return Math.round(e.length/2)};function qI(e){return{seriesType:e,reset:function(t,i,r){var n=t.getData(),o=t.get("sampling"),s=t.coordinateSystem,a=n.count();if(a>10&&s.type==="cartesian2d"&&o){var l=s.getBaseAxis(),u=s.getOtherAxis(l),h=l.getExtent(),c=r.getDevicePixelRatio(),d=Math.abs(h[1]-h[0])*(c||1),f=Math.round(a/d);if(isFinite(f)&&f>1){o==="lttb"?t.setData(n.lttbDownSample(n.mapDimension(u.dim),1/f)):o==="minmax"&&t.setData(n.minmaxDownSample(n.mapDimension(u.dim),1/f));var p=void 0;q(o)?p=q7[o]:ie(o)&&(p=o),p&&t.setData(n.downSample(n.mapDimension(u.dim),1/f,p,Z7))}}}}}function j7(e){e.registerChartView(X7),e.registerSeriesModel(E7),e.registerLayout(Ph("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var i=t.getData(),r=t.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=i.getVisual("style").fill),i.setVisual("legendLineStyle",r)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,qI("line"))}var Ju=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.getInitialData=function(i,r){return mn(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(i,r,n){var o=this.coordinateSystem;if(o&&o.clampData){var s=o.clampData(i),a=o.dataToPoint(s);if(n)_(o.getAxes(),function(d,f){if(d.type==="category"&&r!=null){var p=d.getTicksCoords(),g=d.getTickModel().get("alignWithLabel"),v=s[f],m=r[f]==="x1"||r[f]==="y1";if(m&&!g&&(v+=1),p.length<2)return;if(p.length===2){a[f]=d.toGlobalCoord(d.getExtent()[m?1:0]);return}for(var y=void 0,C=void 0,S=1,b=0;b<p.length;b++){var w=p[b].coord,x=b===p.length-1?p[b-1].tickValue+S:p[b].tickValue;if(x===v){C=w;break}else if(x<v)y=w;else if(y!=null&&x>v){C=(w+y)/2;break}b===1&&(S=x-p[0].tickValue)}C==null&&(y?y&&(C=p[p.length-1].coord):C=p[0].coord),a[f]=d.toGlobalCoord(C)}});else{var l=this.getData(),u=l.getLayout("offset"),h=l.getLayout("size"),c=o.getBaseAxis().isHorizontal()?0:1;a[c]+=u+h/2}return a}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(qe);qe.registerClass(Ju);var Q7=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.getInitialData=function(){return mn(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var i=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>i&&(i=r),i},t.prototype.brushSelector=function(i,r,n){return n.rect(r.getItemLayout(i))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=ho(Ju.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(Ju),J7=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),sf=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="sausage",r}return t.prototype.getDefaultShape=function(){return new J7},t.prototype.buildPath=function(i,r){var n=r.cx,o=r.cy,s=Math.max(r.r0||0,0),a=Math.max(r.r,0),l=(a-s)*.5,u=s+l,h=r.startAngle,c=r.endAngle,d=r.clockwise,f=Math.PI*2,p=d?c-h<f:h-c<f;p||(h=c-(d?f:-f));var g=Math.cos(h),v=Math.sin(h),m=Math.cos(c),y=Math.sin(c);p?(i.moveTo(g*s+n,v*s+o),i.arc(g*u+n,v*u+o,l,-Math.PI+h,h,!d)):i.moveTo(g*a+n,v*a+o),i.arc(n,o,a,h,c,!d),i.arc(m*u+n,y*u+o,l,c-Math.PI*2,c-Math.PI,!d),s!==0&&i.arc(n,o,s,c,h,d)},t}(be);function eZ(e,t){t=t||{};var i=t.isRoundCap;return function(r,n,o){var s=n.position;if(!s||s instanceof Array)return Nd(r,n,o);var a=e(s),l=n.distance!=null?n.distance:5,u=this.shape,h=u.cx,c=u.cy,d=u.r,f=u.r0,p=(d+f)/2,g=u.startAngle,v=u.endAngle,m=(g+v)/2,y=i?Math.abs(d-f)/2:0,C=Math.cos,S=Math.sin,b=h+d*C(g),w=c+d*S(g),x="left",R="top";switch(a){case"startArc":b=h+(f-l)*C(m),w=c+(f-l)*S(m),x="center",R="top";break;case"insideStartArc":b=h+(f+l)*C(m),w=c+(f+l)*S(m),x="center",R="bottom";break;case"startAngle":b=h+p*C(g)+Rc(g,l+y,!1),w=c+p*S(g)+Dc(g,l+y,!1),x="right",R="middle";break;case"insideStartAngle":b=h+p*C(g)+Rc(g,-l+y,!1),w=c+p*S(g)+Dc(g,-l+y,!1),x="left",R="middle";break;case"middle":b=h+p*C(m),w=c+p*S(m),x="center",R="middle";break;case"endArc":b=h+(d+l)*C(m),w=c+(d+l)*S(m),x="center",R="bottom";break;case"insideEndArc":b=h+(d-l)*C(m),w=c+(d-l)*S(m),x="center",R="top";break;case"endAngle":b=h+p*C(v)+Rc(v,l+y,!0),w=c+p*S(v)+Dc(v,l+y,!0),x="left",R="middle";break;case"insideEndAngle":b=h+p*C(v)+Rc(v,-l+y,!0),w=c+p*S(v)+Dc(v,-l+y,!0),x="right",R="middle";break;default:return Nd(r,n,o)}return r=r||{},r.x=b,r.y=w,r.align=x,r.verticalAlign=R,r}}function tZ(e,t,i,r){if(Pe(r)){e.setTextConfig({rotation:r});return}else if(H(t)){e.setTextConfig({rotation:0});return}var n=e.shape,o=n.clockwise?n.startAngle:n.endAngle,s=n.clockwise?n.endAngle:n.startAngle,a=(o+s)/2,l,u=i(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=a;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=s;break;default:e.setTextConfig({rotation:0});return}var h=Math.PI*1.5-l;u==="middle"&&h>Math.PI/2&&h<Math.PI*1.5&&(h-=Math.PI),e.setTextConfig({rotation:h})}function Rc(e,t,i){return t*Math.sin(e)*(i?-1:1)}function Dc(e,t,i){return t*Math.cos(e)*(i?1:-1)}function os(e,t,i){var r=e.get("borderRadius");if(r==null)return i?{cornerRadius:0}:null;H(r)||(r=[r,r,r,r]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:z(r,function(o){return or(o,n)})}}var tv=Math.max,iv=Math.min;function iZ(e,t){var i=e.getArea&&e.getArea();if(Vs(e,"cartesian2d")){var r=e.getBaseAxis();if(r.type!=="category"||!r.onBand){var n=t.getLayout("bandWidth");r.isHorizontal()?(i.x-=n,i.width+=n*2):(i.y-=n,i.height+=n*2)}}return i}var rZ=function(e){L(t,e);function t(){var i=e.call(this)||this;return i.type=t.type,i._isFirstFrame=!0,i}return t.prototype.render=function(i,r,n,o){this._model=i,this._removeOnRenderedListener(n),this._updateDrawMode(i);var s=i.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(i,r,n):this._renderNormal(i,r,n,o))},t.prototype.incrementalPrepareRender=function(i){this._clear(),this._updateDrawMode(i),this._updateLargeClip(i)},t.prototype.incrementalRender=function(i,r){this._progressiveEls=[],this._incrementalRenderLarge(i,r)},t.prototype.eachRendered=function(i){uo(this._progressiveEls||this.group,i)},t.prototype._updateDrawMode=function(i){var r=i.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(i,r,n,o){var s=this.group,a=i.getData(),l=this._data,u=i.coordinateSystem,h=u.getBaseAxis(),c;u.type==="cartesian2d"?c=h.isHorizontal():u.type==="polar"&&(c=h.dim==="angle");var d=i.isAnimationEnabled()?i:null,f=nZ(i,u);f&&this._enableRealtimeSort(f,a,n);var p=i.get("clip",!0)||f,g=iZ(u,a);s.removeClipPath();var v=i.get("roundCap",!0),m=i.get("showBackground",!0),y=i.getModel("backgroundStyle"),C=y.get("borderRadius")||0,S=[],b=this._backgroundEls,w=o&&o.isInitSort,x=o&&o.type==="changeAxisOrder";function R(A){var P=Tc[u.type](a,A),M=cZ(u,c,P);return M.useStyle(y.getItemStyle()),u.type==="cartesian2d"?M.setShape("r",C):M.setShape("cornerRadius",C),S[A]=M,M}a.diff(l).add(function(A){var P=a.getItemModel(A),M=Tc[u.type](a,A,P);if(m&&R(A),!(!a.hasValue(A)||!JR[u.type](M))){var F=!1;p&&(F=qR[u.type](g,M));var E=ZR[u.type](i,a,A,M,c,d,h.model,!1,v);f&&(E.forceLabelAnimation=!0),eD(E,a,A,P,M,i,c,u.type==="polar"),w?E.attr({shape:M}):f?jR(f,d,E,M,A,c,!1,!1):Ze(E,{shape:M},i,A),a.setItemGraphicEl(A,E),s.add(E),E.ignore=F}}).update(function(A,P){var M=a.getItemModel(A),F=Tc[u.type](a,A,M);if(m){var E=void 0;b.length===0?E=R(P):(E=b[P],E.useStyle(y.getItemStyle()),u.type==="cartesian2d"?E.setShape("r",C):E.setShape("cornerRadius",C),S[A]=E);var I=Tc[u.type](a,A),O=jI(c,I,u);Me(E,{shape:O},d,A)}var k=l.getItemGraphicEl(P);if(!a.hasValue(A)||!JR[u.type](F)){s.remove(k);return}var G=!1;if(p&&(G=qR[u.type](g,F),G&&s.remove(k)),k?sr(k):k=ZR[u.type](i,a,A,F,c,d,h.model,!!k,v),f&&(k.forceLabelAnimation=!0),x){var W=k.getTextContent();if(W){var $=rl(W);$.prevValue!=null&&($.prevValue=$.value)}}else eD(k,a,A,M,F,i,c,u.type==="polar");w?k.attr({shape:F}):f?jR(f,d,k,F,A,c,!0,x):Me(k,{shape:F},i,A,null),a.setItemGraphicEl(A,k),k.ignore=G,s.add(k)}).remove(function(A){var P=l.getItemGraphicEl(A);P&&Wu(P,i,A)}).execute();var D=this._backgroundGroup||(this._backgroundGroup=new le);D.removeAll();for(var T=0;T<S.length;++T)D.add(S[T]);s.add(D),this._backgroundEls=S,this._data=a},t.prototype._renderLarge=function(i,r,n){this._clear(),iD(i,this.group),this._updateLargeClip(i)},t.prototype._incrementalRenderLarge=function(i,r){this._removeBackground(),iD(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(i){var r=i.get("clip",!0)&&Ah(i.coordinateSystem,!1,i),n=this.group;r?n.setClipPath(r):n.removeClipPath()},t.prototype._enableRealtimeSort=function(i,r,n){var o=this;if(r.count()){var s=i.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,i,n),this._isFirstFrame=!1;else{var a=function(l){var u=r.getItemGraphicEl(l),h=u&&u.shape;return h&&Math.abs(s.isHorizontal()?h.height:h.width)||0};this._onRendered=function(){o._updateSortWithinSameData(r,a,s,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(i,r,n){var o=[];return i.each(i.mapDimension(r.dim),function(s,a){var l=n(a);l=l??NaN,o.push({dataIndex:a,mappedValue:l,ordinalNumber:s})}),o.sort(function(s,a){return a.mappedValue-s.mappedValue}),{ordinalNumbers:z(o,function(s){return s.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(i,r,n){for(var o=n.scale,s=i.mapDimension(n.dim),a=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var h=i.rawIndexOf(s,o.getRawOrdinalNumber(l)),c=h<0?Number.MIN_VALUE:r(i.indexOfRawIndex(h));if(c>a)return!0;a=c}return!1},t.prototype._isOrderDifferentInView=function(i,r){for(var n=r.scale,o=n.getExtent(),s=Math.max(0,o[0]),a=Math.min(o[1],n.getOrdinalMeta().categories.length-1);s<=a;++s)if(i.ordinalNumbers[s]!==n.getRawOrdinalNumber(s))return!0},t.prototype._updateSortWithinSameData=function(i,r,n,o){if(this._isOrderChangedWithinSameData(i,r,n)){var s=this._dataSort(i,n,r);this._isOrderDifferentInView(s,n)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:s}))}},t.prototype._dispatchInitSort=function(i,r,n){var o=r.baseAxis,s=this._dataSort(i,o,function(a){return i.get(i.mapDimension(r.otherAxis.dim),a)});n.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:s})},t.prototype.remove=function(i,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(i,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(i){this._onRendered&&(i.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(i){var r=this.group,n=this._data;i&&i.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(o){Wu(o,i,ue(o).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(We),qR={cartesian2d:function(e,t){var i=t.width<0?-1:1,r=t.height<0?-1:1;i<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,o=e.y+e.height,s=tv(t.x,e.x),a=iv(t.x+t.width,n),l=tv(t.y,e.y),u=iv(t.y+t.height,o),h=a<s,c=u<l;return t.x=h&&s>n?a:s,t.y=c&&l>o?u:l,t.width=h?0:a-s,t.height=c?0:u-l,i<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),h||c},polar:function(e,t){var i=t.r0<=t.r?1:-1;if(i<0){var r=t.r;t.r=t.r0,t.r0=r}var n=iv(t.r,e.r),o=tv(t.r0,e.r0);t.r=n,t.r0=o;var s=n-o<0;if(i<0){var r=t.r;t.r=t.r0,t.r0=r}return s}},ZR={cartesian2d:function(e,t,i,r,n,o,s,a,l){var u=new Te({shape:V({},r),z2:1});if(u.__dataIndex=i,u.name="item",o){var h=u.shape,c=n?"height":"width";h[c]=0}return u},polar:function(e,t,i,r,n,o,s,a,l){var u=!n&&l?sf:Jt,h=new u({shape:r,z2:1});h.name="item";var c=ZI(n);if(h.calculateTextPosition=eZ(c,{isRoundCap:u===sf}),o){var d=h.shape,f=n?"r":"endAngle",p={};d[f]=n?r.r0:r.startAngle,p[f]=r[f],(a?Me:Ze)(h,{shape:p},o)}return h}};function nZ(e,t){var i=e.get("realtimeSort",!0),r=t.getBaseAxis();if(i&&r.type==="category"&&t.type==="cartesian2d")return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}function jR(e,t,i,r,n,o,s,a){var l,u;o?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),a||(s?Me:Ze)(i,{shape:l},t,n,null);var h=t?e.baseAxis.model:null;(s?Me:Ze)(i,{shape:u},h,n)}function QR(e,t){for(var i=0;i<t.length;i++)if(!isFinite(e[t[i]]))return!0;return!1}var oZ=["x","y","width","height"],sZ=["cx","cy","r","startAngle","endAngle"],JR={cartesian2d:function(e){return!QR(e,oZ)},polar:function(e){return!QR(e,sZ)}},Tc={cartesian2d:function(e,t,i){var r=e.getItemLayout(t),n=i?lZ(i,r):0,o=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+o*n/2,y:r.y+s*n/2,width:r.width-o*n,height:r.height-s*n}},polar:function(e,t,i){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function aZ(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function ZI(e){return function(t){var i=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+i;default:return r}}}(e)}function eD(e,t,i,r,n,o,s,a){var l=t.getItemVisual(i,"style");if(a){if(!o.get("roundCap")){var h=e.shape,c=os(r.getModel("itemStyle"),h,!0);V(h,c),e.setShape(h)}}else{var u=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",u)}e.useStyle(l);var d=r.getShallow("cursor");d&&e.attr("cursor",d);var f=a?s?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":s?n.height>=0?"bottom":"top":n.width>=0?"right":"left",p=St(r);Pt(e,p,{labelFetcher:o,labelDataIndex:i,defaultText:Ha(o.getData(),i),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var g=e.getTextContent();if(a&&g){var v=r.get(["label","position"]);e.textConfig.inside=v==="middle"?!0:null,tZ(e,v==="outside"?f:v,ZI(s),r.get(["label","rotate"]))}vF(g,p,o.getRawValue(i),function(y){return HI(t,y)});var m=r.getModel(["emphasis"]);tt(e,m.get("focus"),m.get("blurScope"),m.get("disabled")),At(e,r),aZ(n)&&(e.style.fill="none",e.style.stroke="none",_(e.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function lZ(e,t){var i=e.get(["itemStyle","borderColor"]);if(!i||i==="none")return 0;var r=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,n,o)}var uZ=function(){function e(){}return e}(),tD=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="largeBar",r}return t.prototype.getDefaultShape=function(){return new uZ},t.prototype.buildPath=function(i,r){for(var n=r.points,o=this.baseDimIdx,s=1-this.baseDimIdx,a=[],l=[],u=this.barWidth,h=0;h<n.length;h+=3)l[o]=u,l[s]=n[h+2],a[o]=n[h+o],a[s]=n[h+s],i.rect(a[0],a[1],l[0],l[1])},t}(be);function iD(e,t,i,r){var n=e.getData(),o=n.getLayout("valueAxisHorizontal")?1:0,s=n.getLayout("largeDataIndices"),a=n.getLayout("size"),l=e.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var h=new tD({shape:{points:u},incremental:!!r,silent:!0,z2:0});h.baseDimIdx=o,h.largeDataIndices=s,h.barWidth=a,h.useStyle(l.getItemStyle()),t.add(h),i&&i.push(h)}var c=new tD({shape:{points:n.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=o,c.largeDataIndices=s,c.barWidth=a,t.add(c),c.useStyle(n.getVisual("style")),c.style.stroke=null,ue(c).seriesIndex=e.seriesIndex,e.get("silent")||(c.on("mousedown",rD),c.on("mousemove",rD)),i&&i.push(c)}var rD=WS(function(e){var t=this,i=hZ(t,e.offsetX,e.offsetY);ue(t).dataIndex=i>=0?i:null},30,!1);function hZ(e,t,i){for(var r=e.baseDimIdx,n=1-r,o=e.shape.points,s=e.largeDataIndices,a=[],l=[],u=e.barWidth,h=0,c=o.length/3;h<c;h++){var d=h*3;if(l[r]=u,l[n]=o[d+2],a[r]=o[d+r],a[n]=o[d+n],l[n]<0&&(a[n]+=l[n],l[n]=-l[n]),t>=a[0]&&t<=a[0]+l[0]&&i>=a[1]&&i<=a[1]+l[1])return s[h]}return-1}function jI(e,t,i){if(Vs(i,"cartesian2d")){var r=t,n=i.getArea();return{x:e?r.x:n.x,y:e?n.y:r.y,width:e?r.width:n.width,height:e?n.height:r.height}}else{var n=i.getArea(),o=t;return{cx:n.cx,cy:n.cy,r0:e?n.r0:o.r0,r:e?n.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function cZ(e,t,i){var r=e.type==="polar"?Jt:Te;return new r({shape:jI(t,i,e),silent:!0,z2:0})}function dZ(e){e.registerChartView(rZ),e.registerSeriesModel(Q7),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,fe(iI,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,rI("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,qI("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,i){var r=t.componentType||"series";i.eachComponent({mainType:r,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var nD=Math.PI*2,_c=Math.PI/180;function QI(e,t){return pt(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function JI(e,t){var i=QI(e,t),r=e.get("center"),n=e.get("radius");H(n)||(n=[0,n]);var o=K(i.width,t.getWidth()),s=K(i.height,t.getHeight()),a=Math.min(o,s),l=K(n[0],a/2),u=K(n[1],a/2),h,c,d=e.coordinateSystem;if(d){var f=d.dataToPoint(r);h=f[0]||0,c=f[1]||0}else H(r)||(r=[r,r]),h=K(r[0],o)+i.x,c=K(r[1],s)+i.y;return{cx:h,cy:c,r0:l,r:u}}function fZ(e,t,i){t.eachSeriesByType(e,function(r){var n=r.getData(),o=n.mapDimension("value"),s=QI(r,i),a=JI(r,i),l=a.cx,u=a.cy,h=a.r,c=a.r0,d=-r.get("startAngle")*_c,f=r.get("endAngle"),p=r.get("padAngle")*_c;f=f==="auto"?d-nD:-f*_c;var g=r.get("minAngle")*_c,v=g+p,m=0;n.each(o,function(O){!isNaN(O)&&m++});var y=n.getSum(o),C=Math.PI/(y||m)*2,S=r.get("clockwise"),b=r.get("roseType"),w=r.get("stillShowZeroSum"),x=n.getDataExtent(o);x[0]=0;var R=S?1:-1,D=[d,f],T=R*p/2;yS(D,!S),d=D[0],f=D[1];var A=eL(r);A.startAngle=d,A.endAngle=f,A.clockwise=S;var P=Math.abs(f-d),M=P,F=0,E=d;if(n.setLayout({viewRect:s,r:h}),n.each(o,function(O,k){var G;if(isNaN(O)){n.setItemLayout(k,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:S,cx:l,cy:u,r0:c,r:b?NaN:h});return}b!=="area"?G=y===0&&w?C:O*C:G=P/m,G<v?(G=v,M-=v):F+=O;var W=E+R*G,$=0,X=0;p>G?($=E+R*G/2,X=$):($=E+T,X=W-T),n.setItemLayout(k,{angle:G,startAngle:$,endAngle:X,clockwise:S,cx:l,cy:u,r0:c,r:b?Oe(O,x,[c,h]):h}),E=W}),M<nD&&m)if(M<=.001){var I=P/m;n.each(o,function(O,k){if(!isNaN(O)){var G=n.getItemLayout(k);G.angle=I;var W=0,$=0;I<p?(W=d+R*(k+1/2)*I,$=W):(W=d+R*k*I+T,$=d+R*(k+1)*I-T),G.startAngle=W,G.endAngle=$}})}else C=M/F,E=d,n.each(o,function(O,k){if(!isNaN(O)){var G=n.getItemLayout(k),W=G.angle===v?v:O*C,$=0,X=0;W<p?($=E+R*W/2,X=$):($=E+T,X=E+R*W-T),G.startAngle=$,G.endAngle=X,E+=R*W}})})}var eL=_e();function Mh(e){return{seriesType:e,reset:function(t,i){var r=i.findComponents({mainType:"legend"});if(!(!r||!r.length)){var n=t.getData();n.filterSelf(function(o){for(var s=n.getName(o),a=0;a<r.length;a++)if(!r[a].isSelected(s))return!1;return!0})}}}}var pZ=Math.PI/180;function oD(e,t,i,r,n,o,s,a,l,u){if(e.length<2)return;function h(g){for(var v=g.rB,m=v*v,y=0;y<g.list.length;y++){var C=g.list[y],S=Math.abs(C.label.y-i),b=r+C.len,w=b*b,x=Math.sqrt(Math.abs((1-S*S/m)*w)),R=t+(x+C.len2)*n,D=R-C.label.x,T=C.targetTextWidth-D*n;tL(C,T,!0),C.label.x=R}}function c(g){for(var v={list:[],maxY:0},m={list:[],maxY:0},y=0;y<g.length;y++)if(g[y].labelAlignTo==="none"){var C=g[y],S=C.label.y>i?m:v,b=Math.abs(C.label.y-i);if(b>=S.maxY){var w=C.label.x-t-C.len2*n,x=r+C.len,R=Math.abs(w)<x?Math.sqrt(b*b/(1-w*w/x/x)):x;S.rB=R,S.maxY=b}S.list.push(C)}h(v),h(m)}for(var d=e.length,f=0;f<d;f++)if(e[f].position==="outer"&&e[f].labelAlignTo==="labelLine"){var p=e[f].label.x-u;e[f].linePoints[1][0]+=p,e[f].label.x=u}RI(e,l,l+s)&&c(e)}function gZ(e,t,i,r,n,o,s,a){for(var l=[],u=[],h=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=0;d<e.length;d++){var f=e[d].label;rv(e[d])||(f.x<t?(h=Math.min(h,f.x),l.push(e[d])):(c=Math.max(c,f.x),u.push(e[d])))}for(var d=0;d<e.length;d++){var p=e[d];if(!rv(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var f=p.label,g=p.linePoints,v=void 0;p.labelAlignTo==="edge"?f.x<t?v=g[2][0]-p.labelDistance-s-p.edgeDistance:v=s+n-p.edgeDistance-g[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?f.x<t?v=h-s-p.bleedMargin:v=s+n-c-p.bleedMargin:f.x<t?v=f.x-s-p.bleedMargin:v=s+n-f.x-p.bleedMargin,p.targetTextWidth=v,tL(p,v)}}oD(u,t,i,r,1,n,o,s,a,c),oD(l,t,i,r,-1,n,o,s,a,h);for(var d=0;d<e.length;d++){var p=e[d];if(!rv(p)&&p.linePoints){var f=p.label,g=p.linePoints,m=p.labelAlignTo==="edge",y=f.style.padding,C=y?y[1]+y[3]:0,S=f.style.backgroundColor?0:C,b=p.rect.width+S,w=g[1][0]-g[2][0];m?f.x<t?g[2][0]=s+p.edgeDistance+b+p.labelDistance:g[2][0]=s+n-p.edgeDistance-b-p.labelDistance:(f.x<t?g[2][0]=f.x+p.labelDistance:g[2][0]=f.x-p.labelDistance,g[1][0]=g[2][0]+w),g[1][1]=g[2][1]=f.y}}}function tL(e,t,i){if(i===void 0&&(i=!1),e.labelStyleWidth==null){var r=e.label,n=r.style,o=e.rect,s=n.backgroundColor,a=n.padding,l=a?a[1]+a[3]:0,u=n.overflow,h=o.width+(s?0:l);if(t<h||i){var c=o.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-l);var d=r.getBoundingRect();r.setStyle("width",Math.ceil(d.width)),r.setStyle("backgroundColor",s)}else{var f=t-l,p=t<h?f:i?f>e.unconstrainedWidth?null:f:null;r.setStyle("width",p)}var g=r.getBoundingRect();o.width=g.width;var v=(r.style.margin||0)+2.1;o.height=g.height+v,o.y-=(o.height-c)/2}}}function rv(e){return e.position==="center"}function vZ(e){var t=e.getData(),i=[],r,n,o=!1,s=(e.get("minShowLabelAngle")||0)*pZ,a=t.getLayout("viewRect"),l=t.getLayout("r"),u=a.width,h=a.x,c=a.y,d=a.height;function f(w){w.ignore=!0}function p(w){if(!w.ignore)return!0;for(var x in w.states)if(w.states[x].ignore===!1)return!0;return!1}t.each(function(w){var x=t.getItemGraphicEl(w),R=x.shape,D=x.getTextContent(),T=x.getTextGuideLine(),A=t.getItemModel(w),P=A.getModel("label"),M=P.get("position")||A.get(["emphasis","label","position"]),F=P.get("distanceToLabelLine"),E=P.get("alignTo"),I=K(P.get("edgeDistance"),u),O=P.get("bleedMargin"),k=A.getModel("labelLine"),G=k.get("length");G=K(G,u);var W=k.get("length2");if(W=K(W,u),Math.abs(R.endAngle-R.startAngle)<s){_(D.states,f),D.ignore=!0,T&&(_(T.states,f),T.ignore=!0);return}if(p(D)){var $=(R.startAngle+R.endAngle)/2,X=Math.cos($),te=Math.sin($),re,he,Be,rt;r=R.cx,n=R.cy;var me=M==="inside"||M==="inner";if(M==="center")re=R.cx,he=R.cy,rt="center";else{var oe=(me?(R.r+R.r0)/2*X:R.r*X)+r,Se=(me?(R.r+R.r0)/2*te:R.r*te)+n;if(re=oe+X*3,he=Se+te*3,!me){var ee=oe+X*(G+l-R.r),ce=Se+te*(G+l-R.r),Ke=ee+(X<0?-1:1)*W,Ve=ce;E==="edge"?re=X<0?h+I:h+u-I:re=Ke+(X<0?-F:F),he=Ve,Be=[[oe,Se],[ee,ce],[Ke,Ve]]}rt=me?"center":E==="edge"?X>0?"right":"left":X>0?"left":"right"}var Ue=Math.PI,je=0,gt=P.get("rotate");if(Pe(gt))je=gt*(Ue/180);else if(M==="center")je=0;else if(gt==="radial"||gt===!0){var di=X<0?-$+Ue:-$;je=di}else if(gt==="tangential"&&M!=="outside"&&M!=="outer"){var ii=Math.atan2(X,te);ii<0&&(ii=Ue*2+ii);var co=te>0;co&&(ii=Ue+ii),je=ii-Ue}if(o=!!je,D.x=re,D.y=he,D.rotation=je,D.setStyle({verticalAlign:"middle"}),me){D.setStyle({align:rt});var Sp=D.states.select;Sp&&(Sp.x+=D.x,Sp.y+=D.y)}else{var yn=D.getBoundingRect().clone();yn.applyTransform(D.getComputedTransform());var u0=(D.style.margin||0)+2.1;yn.y-=u0/2,yn.height+=u0,i.push({label:D,labelLine:T,position:M,len:G,len2:W,minTurnAngle:k.get("minTurnAngle"),maxSurfaceAngle:k.get("maxSurfaceAngle"),surfaceNormal:new ge(X,te),linePoints:Be,textAlign:rt,labelDistance:F,labelAlignTo:E,edgeDistance:I,bleedMargin:O,rect:yn,unconstrainedWidth:yn.width,labelStyleWidth:D.style.width})}x.setTextConfig({inside:me})}}),!o&&e.get("avoidLabelOverlap")&&gZ(i,r,n,l,u,d,h,c);for(var g=0;g<i.length;g++){var v=i[g],m=v.label,y=v.labelLine,C=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),C&&(_(m.states,f),m.ignore=!0);var S=m.states.select;S&&(S.x+=m.x,S.y+=m.y)}if(y){var b=v.linePoints;C||!b?(_(y.states,f),y.ignore=!0):(wI(b,v.minTurnAngle),Vq(b,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:b}),m.__hostTarget.textGuideLineConfig={anchor:new ge(b[0][0],b[0][1])})}}}var mZ=function(e){L(t,e);function t(i,r,n){var o=e.call(this)||this;o.z2=2;var s=new Ae;return o.setTextContent(s),o.updateData(i,r,n,!0),o}return t.prototype.updateData=function(i,r,n,o){var s=this,a=i.hostModel,l=i.getItemModel(r),u=l.getModel("emphasis"),h=i.getItemLayout(r),c=V(os(l.getModel("itemStyle"),h,!0),h);if(isNaN(c.startAngle)){s.setShape(c);return}if(o){s.setShape(c);var d=a.getShallow("animationType");a.ecModel.ssr?(Ze(s,{scaleX:0,scaleY:0},a,{dataIndex:r,isFrom:!0}),s.originX=c.cx,s.originY=c.cy):d==="scale"?(s.shape.r=h.r0,Ze(s,{shape:{r:h.r}},a,r)):n!=null?(s.setShape({startAngle:n,endAngle:n}),Ze(s,{shape:{startAngle:h.startAngle,endAngle:h.endAngle}},a,r)):(s.shape.endAngle=h.startAngle,Me(s,{shape:{endAngle:h.endAngle}},a,r))}else sr(s),Me(s,{shape:c},a,r);s.useStyle(i.getItemVisual(r,"style")),At(s,l);var f=(h.startAngle+h.endAngle)/2,p=a.get("selectedOffset"),g=Math.cos(f)*p,v=Math.sin(f)*p,m=l.getShallow("cursor");m&&s.attr("cursor",m),this._updateLabel(a,i,r),s.ensureState("emphasis").shape=V({r:h.r+(u.get("scale")&&u.get("scaleSize")||0)},os(u.getModel("itemStyle"),h)),V(s.ensureState("select"),{x:g,y:v,shape:os(l.getModel(["select","itemStyle"]),h)}),V(s.ensureState("blur"),{shape:os(l.getModel(["blur","itemStyle"]),h)});var y=s.getTextGuideLine(),C=s.getTextContent();y&&V(y.ensureState("select"),{x:g,y:v}),V(C.ensureState("select"),{x:g,y:v}),tt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(i,r,n){var o=this,s=r.getItemModel(n),a=s.getModel("labelLine"),l=r.getItemVisual(n,"style"),u=l&&l.fill,h=l&&l.opacity;Pt(o,St(s),{labelFetcher:r.hostModel,labelDataIndex:n,inheritColor:u,defaultOpacity:h,defaultText:i.getFormattedLabel(n,"normal")||r.getName(n)});var c=o.getTextContent();o.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var d=i.get(["label","position"]);if(d!=="outside"&&d!=="outer")o.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new ti,this.setTextGuideLine(f)),rw(this,nw(s),{stroke:u,opacity:Ar(a.get(["lineStyle","opacity"]),h,1)})}},t}(Jt),yZ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.ignoreLabelLineUpdate=!0,i}return t.prototype.render=function(i,r,n,o){var s=i.getData(),a=this._data,l=this.group,u;if(!a&&s.count()>0){for(var h=s.getItemLayout(0),c=1;isNaN(h&&h.startAngle)&&c<s.count();++c)h=s.getItemLayout(c);h&&(u=h.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),s.count()===0&&i.get("showEmptyCircle")){var d=eL(i),f=new Jt({shape:V(JI(i,n),d)});f.useStyle(i.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}s.diff(a).add(function(p){var g=new mZ(s,p,u);s.setItemGraphicEl(p,g),l.add(g)}).update(function(p,g){var v=a.getItemGraphicEl(g);v.updateData(s,p,u),v.off("click"),l.add(v),s.setItemGraphicEl(p,v)}).remove(function(p){var g=a.getItemGraphicEl(p);Wu(g,i,p)}).execute(),vZ(i),i.get("animationTypeUpdate")!=="expansion"&&(this._data=s)},t.prototype.dispose=function(){},t.prototype.containPoint=function(i,r){var n=r.getData(),o=n.getItemLayout(0);if(o){var s=i[0]-o.cx,a=i[1]-o.cy,l=Math.sqrt(s*s+a*a);return l<=o.r&&l>=o.r0}},t.type="pie",t}(We);function dl(e,t,i){t=H(t)&&{coordDimensions:t}||V({encodeDefine:e.getEncode()},t);var r=e.getSource(),n=Rh(r,t).dimensions,o=new qt(n,e);return o.initData(r,i),o}var Fh=function(){function e(t,i){this._getDataWithEncodedVisual=t,this._getRawData=i}return e.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},e.prototype.containName=function(t){var i=this._getRawData();return i.indexOfName(t)>=0},e.prototype.indexOfName=function(t){var i=this._getDataWithEncodedVisual();return i.indexOfName(t)},e.prototype.getItemVisual=function(t,i){var r=this._getDataWithEncodedVisual();return r.getItemVisual(t,i)},e}(),CZ=_e(),SZ=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(i){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Fh(Z(this.getData,this),Z(this.getRawData,this)),this._defaultLabelLine(i)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return dl(this,{coordDimensions:["value"],encodeDefaulter:fe(kS,this)})},t.prototype.getDataParams=function(i){var r=this.getData(),n=CZ(r),o=n.seats;if(!o){var s=[];r.each(r.mapDimension("value"),function(l){s.push(l)}),o=n.seats=c4(s,r.hostModel.get("percentPrecision"))}var a=e.prototype.getDataParams.call(this,i);return a.percent=o[i]||0,a.$vars.push("percent"),a},t.prototype._defaultLabelLine=function(i){bs(i,"labelLine",["show"]);var r=i.labelLine,n=i.emphasis.labelLine;r.show=r.show&&i.label.show,n.show=n.show&&i.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(qe);function wZ(e){return{seriesType:e,reset:function(t,i){var r=t.getData();r.filterSelf(function(n){var o=r.mapDimension("value"),s=r.get(o,n);return!(Pe(s)&&!isNaN(s)&&s<0)})}}}function bZ(e){e.registerChartView(yZ),e.registerSeriesModel(SZ),bE("pie",e.registerAction),e.registerLayout(fe(fZ,"pie")),e.registerProcessor(Mh("pie")),e.registerProcessor(wZ("pie"))}var xZ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.hasSymbolVisual=!0,i}return t.prototype.getInitialData=function(i,r){return mn(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var i=this.option.progressive;return i??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var i=this.option.progressiveThreshold;return i??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(i,r,n){return n.point(r.getItemLayout(i))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(qe),iL=4,RZ=function(){function e(){}return e}(),DZ=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r._off=0,r.hoverDataIdx=-1,r}return t.prototype.getDefaultShape=function(){return new RZ},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(i,r){var n=r.points,o=r.size,s=this.symbolProxy,a=s.shape,l=i.getContext?i.getContext():i,u=l&&o[0]<iL,h=this.softClipShape,c;if(u){this._ctx=l;return}for(this._ctx=null,c=this._off;c<n.length;){var d=n[c++],f=n[c++];isNaN(d)||isNaN(f)||h&&!h.contain(d,f)||(a.x=d-o[0]/2,a.y=f-o[1]/2,a.width=o[0],a.height=o[1],s.buildPath(i,a,!0))}this.incremental&&(this._off=c,this.notClear=!0)},t.prototype.afterBrush=function(){var i=this.shape,r=i.points,n=i.size,o=this._ctx,s=this.softClipShape,a;if(o){for(a=this._off;a<r.length;){var l=r[a++],u=r[a++];isNaN(l)||isNaN(u)||s&&!s.contain(l,u)||o.fillRect(l-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=a,this.notClear=!0)}},t.prototype.findDataIndex=function(i,r){for(var n=this.shape,o=n.points,s=n.size,a=Math.max(s[0],4),l=Math.max(s[1],4),u=o.length/2-1;u>=0;u--){var h=u*2,c=o[h]-a/2,d=o[h+1]-l/2;if(i>=c&&r>=d&&i<=c+a&&r<=d+l)return u}return-1},t.prototype.contain=function(i,r){var n=this.transformCoordToLocal(i,r),o=this.getBoundingRect();if(i=n[0],r=n[1],o.contain(i,r)){var s=this.hoverDataIdx=this.findDataIndex(i,r);return s>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var i=this._rect;if(!i){for(var r=this.shape,n=r.points,o=r.size,s=o[0],a=o[1],l=1/0,u=1/0,h=-1/0,c=-1/0,d=0;d<n.length;){var f=n[d++],p=n[d++];l=Math.min(f,l),h=Math.max(f,h),u=Math.min(p,u),c=Math.max(p,c)}i=this._rect=new ve(l-s/2,u-a/2,h-l+s,c-u+a)}return i},t}(be),TZ=function(){function e(){this.group=new le}return e.prototype.updateData=function(t,i){this._clear();var r=this._create();r.setShape({points:t.getLayout("points")}),this._setCommon(r,t,i)},e.prototype.updateLayout=function(t){var i=t.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var n=(r.endIndex-r.startIndex)*2,o=r.startIndex*4*2;i=new Float32Array(i.buffer,o,n)}r.setShape("points",i),r.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,i,r){var n=this._newAdded[0],o=i.getLayout("points"),s=n&&n.shape.points;if(s&&s.length<2e4){var a=s.length,l=new Float32Array(a+o.length);l.set(s),l.set(o,a),n.endIndex=t.end,n.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,i,r)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new DZ({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,i,r){var n=i.hostModel;r=r||{};var o=i.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=r.clipShape||null,t.symbolProxy=ct(i.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var s=t.shape.size[0]<iL;t.useStyle(n.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var a=i.getVisual("style"),l=a&&a.fill;l&&t.setColor(l);var u=ue(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(h){u.dataIndex=null;var c=t.hoverDataIdx;c>=0&&(u.dataIndex=c+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),_Z=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o=i.getData(),s=this._updateSymbolDraw(o,i);s.updateData(o,{clipShape:this._getClipShape(i)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(i,r,n){var o=i.getData(),s=this._updateSymbolDraw(o,i);s.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(i,r,n){this._symbolDraw.incrementalUpdate(i,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=i.end===r.getData().count()},t.prototype.updateTransform=function(i,r,n){var o=i.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var s=Ph("").reset(i,r,n);s.progress&&s.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(i){this._symbolDraw&&this._symbolDraw.eachRendered(i)},t.prototype._getClipShape=function(i){if(i.get("clip",!0)){var r=i.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},t.prototype._updateSymbolDraw=function(i,r){var n=this._symbolDraw,o=r.pipelineContext,s=o.large;return(!n||s!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=s?new TZ:new _h,this._isLargeDraw=s,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(i,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(We),AZ=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Re),Ey=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",ht).models[0]},t.type="cartesian2dAxis",t}(Re);dt(Ey,Dh);var rL={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},PZ=pe({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},rL),cw=pe({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},rL),MZ=pe({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},cw),FZ=ne({logBase:10},cw);const nL={category:PZ,value:cw,time:MZ,log:FZ};var EZ={value:1,category:1,time:1,log:1};function za(e,t,i,r){_(EZ,function(n,o){var s=pe(pe({},nL[o],!0),r,!0),a=function(l){L(u,l);function u(){var h=l!==null&&l.apply(this,arguments)||this;return h.type=t+"Axis."+o,h}return u.prototype.mergeDefaultAndTheme=function(h,c){var d=$u(this),f=d?sl(h):{},p=c.getTheme();pe(h,p.get(o+"Axis")),pe(h,this.getDefaultOption()),h.type=sD(h),d&&ro(h,f,d)},u.prototype.optionUpdated=function(){var h=this.option;h.type==="category"&&(this.__ordinalMeta=Dy.createByAxisModel(this))},u.prototype.getCategories=function(h){var c=this.option;if(c.type==="category")return h?c.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=s,u}(i);e.registerComponentModel(a)}),e.registerSubTypeDefaulter(t+"Axis",sD)}function sD(e){return e.type||(e.data?"category":"value")}var IZ=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return z(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Le(this.getAxes(),function(i){return i.scale.type===t})},e.prototype.addAxis=function(t){var i=t.dim;this._axes[i]=t,this._dimList.push(i)},e}(),Iy=["x","y"];function aD(e){return e.type==="interval"||e.type==="time"}var LZ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type="cartesian2d",i.dimensions=Iy,i}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var i=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!aD(i)||!aD(r))){var n=i.getExtent(),o=r.getExtent(),s=this.dataToPoint([n[0],o[0]]),a=this.dataToPoint([n[1],o[1]]),l=n[1]-n[0],u=o[1]-o[0];if(!(!l||!u)){var h=(a[0]-s[0])/l,c=(a[1]-s[1])/u,d=s[0]-n[0]*h,f=s[1]-o[0]*c,p=this._transform=[h,0,0,c,d,f];this._invTransform=Ja([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(i){var r=this.getAxis("x"),n=this.getAxis("y");return r.contain(r.toLocalCoord(i[0]))&&n.contain(n.toLocalCoord(i[1]))},t.prototype.containData=function(i){return this.getAxis("x").containData(i[0])&&this.getAxis("y").containData(i[1])},t.prototype.containZone=function(i,r){var n=this.dataToPoint(i),o=this.dataToPoint(r),s=this.getArea(),a=new ve(n[0],n[1],o[0]-n[0],o[1]-n[1]);return s.intersect(a)},t.prototype.dataToPoint=function(i,r,n){n=n||[];var o=i[0],s=i[1];if(this._transform&&o!=null&&isFinite(o)&&s!=null&&isFinite(s))return _t(n,i,this._transform);var a=this.getAxis("x"),l=this.getAxis("y");return n[0]=a.toGlobalCoord(a.dataToCoord(o,r)),n[1]=l.toGlobalCoord(l.dataToCoord(s,r)),n},t.prototype.clampData=function(i,r){var n=this.getAxis("x").scale,o=this.getAxis("y").scale,s=n.getExtent(),a=o.getExtent(),l=n.parse(i[0]),u=o.parse(i[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),r[1]=Math.min(Math.max(Math.min(a[0],a[1]),u),Math.max(a[0],a[1])),r},t.prototype.pointToData=function(i,r){var n=[];if(this._invTransform)return _t(n,i,this._invTransform);var o=this.getAxis("x"),s=this.getAxis("y");return n[0]=o.coordToData(o.toLocalCoord(i[0]),r),n[1]=s.coordToData(s.toLocalCoord(i[1]),r),n},t.prototype.getOtherAxis=function(i){return this.getAxis(i.dim==="x"?"y":"x")},t.prototype.getArea=function(i){i=i||0;var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),o=Math.min(r[0],r[1])-i,s=Math.min(n[0],n[1])-i,a=Math.max(r[0],r[1])-o+i,l=Math.max(n[0],n[1])-s+i;return new ve(o,s,a,l)},t}(IZ),kZ=function(e){L(t,e);function t(i,r,n,o,s){var a=e.call(this,i,r,n)||this;return a.index=0,a.type=o||"value",a.position=s||"bottom",a}return t.prototype.isHorizontal=function(){var i=this.position;return i==="top"||i==="bottom"},t.prototype.getGlobalExtent=function(i){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),i&&r[0]>r[1]&&r.reverse(),r},t.prototype.pointToData=function(i,r){return this.coordToData(this.toLocalCoord(i[this.dim==="x"?0:1]),r)},t.prototype.setCategorySortInfo=function(i){if(this.type!=="category")return!1;this.model.option.categorySortInfo=i,this.scale.setSortInfo(i)},t}(ur);function Ly(e,t,i){i=i||{};var r=e.coordinateSystem,n=t.axis,o={},s=n.getAxesOnZeroOf()[0],a=n.position,l=s?"onZero":a,u=n.dim,h=r.getRect(),c=[h.x,h.x+h.width,h.y,h.y+h.height],d={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,p=u==="x"?[c[2]-f,c[3]+f]:[c[0]-f,c[1]+f];if(s){var g=s.toGlobalCoord(s.dataToCoord(0));p[d.onZero]=Math.max(Math.min(g,p[1]),p[0])}o.position=[u==="y"?p[d[l]]:c[0],u==="x"?p[d[l]]:c[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=v[a],o.labelOffset=s?p[d[a]]-p[d.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),xt(i.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-m:m,o.z2=1,o}function lD(e){return e.get("coordinateSystem")==="cartesian2d"}function uD(e){var t={xAxisModel:null,yAxisModel:null};return _(t,function(i,r){var n=r.replace(/Model$/,""),o=e.getReferringComponents(n,ht).models[0];t[r]=o}),t}var nv=Math.log;function oL(e,t,i){var r=hn.prototype,n=r.getTicks.call(i),o=r.getTicks.call(i,!0),s=n.length-1,a=r.getInterval.call(i),l=lI(e,t),u=l.extent,h=l.fixMin,c=l.fixMax;if(e.type==="log"){var d=nv(e.base);u=[nv(u[0])/d,nv(u[1])/d]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:s,fixMin:h,fixMax:c});var f=r.getExtent.call(e);h&&(u[0]=f[0]),c&&(u[1]=f[1]);var p=r.getInterval.call(e),g=u[0],v=u[1];if(h&&c)p=(v-g)/s;else if(h)for(v=u[0]+p*s;v<u[1]&&isFinite(v)&&isFinite(u[1]);)p=Wg(p),v=u[0]+p*s;else if(c)for(g=u[1]-p*s;g>u[0]&&isFinite(g)&&isFinite(u[0]);)p=Wg(p),g=u[1]-p*s;else{var m=e.getTicks().length-1;m>s&&(p=Wg(p));var y=p*s;v=Math.ceil(u[1]/p)*p,g=nt(v-y),g<0&&u[0]>=0?(g=0,v=nt(y)):v>0&&u[1]<=0&&(v=0,g=-nt(y))}var C=(n[0].value-o[0].value)/a,S=(n[s].value-o[s].value)/a;r.setExtent.call(e,g+p*C,v+p*S),r.setInterval.call(e,p),(C||S)&&r.setNiceExtent.call(e,g+p,v-p)}var OZ=function(){function e(t,i,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Iy,this._initCartesian(t,i,r),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,i){var r=this._axesMap;this._updateScale(t,this.model);function n(s){var a,l=De(s),u=l.length;if(u){for(var h=[],c=u-1;c>=0;c--){var d=+l[c],f=s[d],p=f.model,g=f.scale;Ty(g)&&p.get("alignTicks")&&p.get("interval")==null?h.push(f):(Ba(g,p),Ty(g)&&(a=f))}h.length&&(a||(a=h.pop(),Ba(a.scale,a.model)),_(h,function(v){oL(v.scale,v.model,a.scale)}))}}n(r.x),n(r.y);var o={};_(r.x,function(s){hD(r,"y",s,o)}),_(r.y,function(s){hD(r,"x",s,o)}),this.resize(this.model,i)},e.prototype.resize=function(t,i,r){var n=t.getBoxLayoutParams(),o=!r&&t.get("containLabel"),s=pt(n,{width:i.getWidth(),height:i.getHeight()});this._rect=s;var a=this._axesList;l(),o&&(_(a,function(u){if(!u.model.get(["axisLabel","inside"])){var h=vq(u);if(h){var c=u.isHorizontal()?"height":"width",d=u.model.get(["axisLabel","margin"]);s[c]-=h[c]+d,u.position==="top"?s.y+=h.height+d:u.position==="left"&&(s.x+=h.width+d)}}}),l()),_(this._coordsList,function(u){u.calcAffineTransform()});function l(){_(a,function(u){var h=u.isHorizontal(),c=h?[0,s.width]:[0,s.height],d=u.inverse?1:0;u.setExtent(c[d],c[1-d]),GZ(u,h?s.x:s.y)})}},e.prototype.getAxis=function(t,i){var r=this._axesMap[t];if(r!=null)return r[i||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,i){if(t!=null&&i!=null){var r="x"+t+"y"+i;return this._coordsMap[r]}se(t)&&(i=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,o=this._coordsList;n<o.length;n++)if(o[n].getAxis("x").index===t||o[n].getAxis("y").index===i)return o[n]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,i,r){var n=this._findConvertTarget(i);return n.cartesian?n.cartesian.dataToPoint(r):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(r)):null},e.prototype.convertFromPixel=function(t,i,r){var n=this._findConvertTarget(i);return n.cartesian?n.cartesian.pointToData(r):n.axis?n.axis.coordToData(n.axis.toLocalCoord(r)):null},e.prototype._findConvertTarget=function(t){var i=t.seriesModel,r=t.xAxisModel||i&&i.getReferringComponents("xAxis",ht).models[0],n=t.yAxisModel||i&&i.getReferringComponents("yAxis",ht).models[0],o=t.gridModel,s=this._coordsList,a,l;if(i)a=i.coordinateSystem,Ce(s,a)<0&&(a=null);else if(r&&n)a=this.getCartesian(r.componentIndex,n.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(n)l=this.getAxis("y",n.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(a=this._coordsList[0])}return{cartesian:a,axis:l}},e.prototype.containPoint=function(t){var i=this._coordsList[0];if(i)return i.containPoint(t)},e.prototype._initCartesian=function(t,i,r){var n=this,o=this,s={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},l={x:0,y:0};if(i.eachComponent("xAxis",u("x"),this),i.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=a,_(a.x,function(h,c){_(a.y,function(d,f){var p="x"+c+"y"+f,g=new LZ(p);g.master=n,g.model=t,n._coordsMap[p]=g,n._coordsList.push(g),g.addAxis(h),g.addAxis(d)})});function u(h){return function(c,d){if(ov(c,t)){var f=c.get("position");h==="x"?f!=="top"&&f!=="bottom"&&(f=s.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=s.left?"right":"left"),s[f]=!0;var p=new kZ(h,cp(c),[0,0],c.get("type"),f),g=p.type==="category";p.onBand=g&&c.get("boundaryGap"),p.inverse=c.get("inverse"),c.axis=p,p.model=c,p.grid=o,p.index=d,o._axesList.push(p),a[h][d]=p,l[h]++}}}},e.prototype._updateScale=function(t,i){_(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var o=n.model.get("categorySortInfo");n.scale.setSortInfo(o)}}),t.eachSeries(function(n){if(lD(n)){var o=uD(n),s=o.xAxisModel,a=o.yAxisModel;if(!ov(s,i)||!ov(a,i))return;var l=this.getCartesian(s.componentIndex,a.componentIndex),u=n.getData(),h=l.getAxis("x"),c=l.getAxis("y");r(u,h),r(u,c)}},this);function r(n,o){_(tf(n,o.dim),function(s){o.scale.unionExtentFromData(n,s)})}},e.prototype.getTooltipAxes=function(t){var i=[],r=[];return _(this.getCartesians(),function(n){var o=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),s=n.getOtherAxis(o);Ce(i,o)<0&&i.push(o),Ce(r,s)<0&&r.push(s)}),{baseAxes:i,otherAxes:r}},e.create=function(t,i){var r=[];return t.eachComponent("grid",function(n,o){var s=new e(n,t,i);s.name="grid_"+o,s.resize(n,i,!0),n.coordinateSystem=s,r.push(s)}),t.eachSeries(function(n){if(lD(n)){var o=uD(n),s=o.xAxisModel,a=o.yAxisModel,l=s.getCoordSysModel(),u=l.coordinateSystem;n.coordinateSystem=u.getCartesian(s.componentIndex,a.componentIndex)}}),r},e.dimensions=Iy,e}();function ov(e,t){return e.getCoordSysModel()===t}function hD(e,t,i,r){i.getAxesOnZeroOf=function(){return o?[o]:[]};var n=e[t],o,s=i.model,a=s.get(["axisLine","onZero"]),l=s.get(["axisLine","onZeroAxisIndex"]);if(!a)return;if(l!=null)cD(n[l])&&(o=n[l]);else for(var u in n)if(n.hasOwnProperty(u)&&cD(n[u])&&!r[h(n[u])]){o=n[u];break}o&&(r[h(o)]=!0);function h(c){return c.dim+"_"+c.index}}function cD(e){return e&&e.type!=="category"&&e.type!=="time"&&gq(e)}function GZ(e,t){var i=e.getExtent(),r=i[0]+i[1];e.toGlobalCoord=e.dim==="x"?function(n){return n+t}:function(n){return r-n+t},e.toLocalCoord=e.dim==="x"?function(n){return n-t}:function(n){return r-n+t}}var zn=Math.PI,Zt=function(){function e(t,i){this.group=new le,this.opt=i,this.axisModel=t,ne(i,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new le({x:i.position[0],y:i.position[1],rotation:i.rotation});r.updateTransform(),this._transformGroup=r}return e.prototype.hasBuilder=function(t){return!!dD[t]},e.prototype.add=function(t){dD[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,i,r){var n=x1(i-t),o,s;return Vu(n)?(s=r>0?"top":"bottom",o="center"):Vu(n-zn)?(s=r>0?"bottom":"top",o="center"):(s="middle",n>0&&n<zn?o=r>0?"right":"left":o=r>0?"left":"right"),{rotation:n,textAlign:o,textVerticalAlign:s}},e.makeAxisEventDataBase=function(t){var i={componentType:t.mainType,componentIndex:t.componentIndex};return i[t.mainType+"Index"]=t.componentIndex,i},e.isLabelSilent=function(t){var i=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||i&&i.show)},e}(),dD={axisLine:function(e,t,i,r){var n=t.get(["axisLine","show"]);if(n==="auto"&&e.handleAutoShown&&(n=e.handleAutoShown("axisLine")),!!n){var o=t.axis.getExtent(),s=r.transform,a=[o[0],0],l=[o[1],0],u=a[0]>l[0];s&&(_t(a,a,s),_t(l,l,s));var h=V({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),c=new mt({shape:{x1:a[0],y1:a[1],x2:l[0],y2:l[1]},style:h,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});Ga(c.shape,c.style.lineWidth),c.anid="line",i.add(c);var d=t.get(["axisLine","symbol"]);if(d!=null){var f=t.get(["axisLine","symbolSize"]);q(d)&&(d=[d,d]),(q(f)||Pe(f))&&(f=[f,f]);var p=Gs(t.get(["axisLine","symbolOffset"])||0,f),g=f[0],v=f[1];_([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((a[0]-l[0])*(a[0]-l[0])+(a[1]-l[1])*(a[1]-l[1]))}],function(m,y){if(d[y]!=="none"&&d[y]!=null){var C=ct(d[y],-g/2,-v/2,g,v,h.stroke,!0),S=m.r+m.offset,b=u?l:a;C.attr({rotation:m.rotate,x:b[0]+S*Math.cos(e.rotation),y:b[1]-S*Math.sin(e.rotation),silent:!0,z2:11}),i.add(C)}})}}},axisTickLabel:function(e,t,i,r){var n=BZ(i,r,t,e),o=zZ(i,r,t,e);if(VZ(t,o,n),HZ(i,r,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var s=bI(z(o,function(a){return{label:a,priority:a.z2,defaultAttr:{ignore:a.ignore}}}));DI(s)}},axisName:function(e,t,i,r){var n=xt(e.axisName,t.get("name"));if(n){var o=t.get("nameLocation"),s=e.nameDirection,a=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),h=u[0]>u[1]?-1:1,c=[o==="start"?u[0]-h*l:o==="end"?u[1]+h*l:(u[0]+u[1])/2,pD(o)?e.labelOffset+s*l:0],d,f=t.get("nameRotate");f!=null&&(f=f*zn/180);var p;pD(o)?d=Zt.innerTextLayout(e.rotation,f??e.rotation,s):(d=NZ(e.rotation,o,f||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(d.rotation)),!isFinite(p)&&(p=null)));var g=a.getFont(),v=t.get("nameTruncate",!0)||{},m=v.ellipsis,y=xt(e.nameTruncateMaxWidth,v.maxWidth,p),C=new Ae({x:c[0],y:c[1],rotation:d.rotation,silent:Zt.isLabelSilent(t),style:Xe(a,{text:n,font:g,overflow:"truncate",width:y,ellipsis:m,fill:a.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:a.get("align")||d.textAlign,verticalAlign:a.get("verticalAlign")||d.textVerticalAlign}),z2:1});if(ks({el:C,componentModel:t,itemName:n}),C.__fullText=n,C.anid="name",t.get("triggerEvent")){var S=Zt.makeAxisEventDataBase(t);S.targetType="axisName",S.name=n,ue(C).eventData=S}r.add(C),C.updateTransform(),i.add(C),C.decomposeTransform()}}};function NZ(e,t,i,r){var n=x1(i-e),o,s,a=r[0]>r[1],l=t==="start"&&!a||t!=="start"&&a;return Vu(n-zn/2)?(s=l?"bottom":"top",o="center"):Vu(n-zn*1.5)?(s=l?"top":"bottom",o="center"):(s="middle",n<zn*1.5&&n>zn/2?o=l?"left":"right":o=l?"right":"left"),{rotation:n,textAlign:o,textVerticalAlign:s}}function VZ(e,t,i){if(!uI(e.axis)){var r=e.get(["axisLabel","showMinLabel"]),n=e.get(["axisLabel","showMaxLabel"]);t=t||[],i=i||[];var o=t[0],s=t[1],a=t[t.length-1],l=t[t.length-2],u=i[0],h=i[1],c=i[i.length-1],d=i[i.length-2];r===!1?(xi(o),xi(u)):fD(o,s)&&(r?(xi(s),xi(h)):(xi(o),xi(u))),n===!1?(xi(a),xi(c)):fD(l,a)&&(n?(xi(l),xi(d)):(xi(a),xi(c)))}}function xi(e){e&&(e.ignore=!0)}function fD(e,t){var i=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(!(!i||!r)){var n=Of([]);return Ls(n,n,-e.rotation),i.applyTransform(Jr([],n,e.getLocalTransform())),r.applyTransform(Jr([],n,t.getLocalTransform())),i.intersect(r)}}function pD(e){return e==="middle"||e==="center"}function sL(e,t,i,r,n){for(var o=[],s=[],a=[],l=0;l<e.length;l++){var u=e[l].coord;s[0]=u,s[1]=0,a[0]=u,a[1]=i,t&&(_t(s,s,t),_t(a,a,t));var h=new mt({shape:{x1:s[0],y1:s[1],x2:a[0],y2:a[1]},style:r,z2:2,autoBatch:!0,silent:!0});Ga(h.shape,h.style.lineWidth),h.anid=n+"_"+e[l].tickValue,o.push(h)}return o}function BZ(e,t,i,r){var n=i.axis,o=i.getModel("axisTick"),s=o.get("show");if(s==="auto"&&r.handleAutoShown&&(s=r.handleAutoShown("axisTick")),!(!s||n.scale.isBlank())){for(var a=o.getModel("lineStyle"),l=r.tickDirection*o.get("length"),u=n.getTicksCoords(),h=sL(u,t.transform,l,ne(a.getLineStyle(),{stroke:i.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<h.length;c++)e.add(h[c]);return h}}function HZ(e,t,i,r){var n=i.axis,o=i.getModel("minorTick");if(!(!o.get("show")||n.scale.isBlank())){var s=n.getMinorTicksCoords();if(s.length)for(var a=o.getModel("lineStyle"),l=r*o.get("length"),u=ne(a.getLineStyle(),ne(i.getModel("axisTick").getLineStyle(),{stroke:i.get(["axisLine","lineStyle","color"])})),h=0;h<s.length;h++)for(var c=sL(s[h],t.transform,l,u,"minorticks_"+h),d=0;d<c.length;d++)e.add(c[d])}}function zZ(e,t,i,r){var n=i.axis,o=xt(r.axisLabelShow,i.get(["axisLabel","show"]));if(!(!o||n.scale.isBlank())){var s=i.getModel("axisLabel"),a=s.get("margin"),l=n.getViewLabels(),u=(xt(r.labelRotate,s.get("rotate"))||0)*zn/180,h=Zt.innerTextLayout(r.rotation,u,r.labelDirection),c=i.getCategories&&i.getCategories(!0),d=[],f=Zt.isLabelSilent(i),p=i.get("triggerEvent");return _(l,function(g,v){var m=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,y=g.formattedLabel,C=g.rawLabel,S=s;if(c&&c[m]){var b=c[m];se(b)&&b.textStyle&&(S=new Ne(b.textStyle,s,i.ecModel))}var w=S.getTextColor()||i.get(["axisLine","lineStyle","color"]),x=n.dataToCoord(m),R=S.getShallow("align",!0)||h.textAlign,D=de(S.getShallow("alignMinLabel",!0),R),T=de(S.getShallow("alignMaxLabel",!0),R),A=S.getShallow("verticalAlign",!0)||S.getShallow("baseline",!0)||h.textVerticalAlign,P=de(S.getShallow("verticalAlignMinLabel",!0),A),M=de(S.getShallow("verticalAlignMaxLabel",!0),A),F=new Ae({x,y:r.labelOffset+r.labelDirection*a,rotation:h.rotation,silent:f,z2:10+(g.level||0),style:Xe(S,{text:y,align:v===0?D:v===l.length-1?T:R,verticalAlign:v===0?P:v===l.length-1?M:A,fill:ie(w)?w(n.type==="category"?C:n.type==="value"?m+"":m,v):w})});if(F.anid="label_"+m,ks({el:F,componentModel:i,itemName:y,formatterParamsExtra:{isTruncated:function(){return F.isTruncated},value:C,tickIndex:v}}),p){var E=Zt.makeAxisEventDataBase(i);E.targetType="axisLabel",E.value=C,E.tickIndex=v,n.type==="category"&&(E.dataIndex=m),ue(F).eventData=E}t.add(F),F.updateTransform(),d.push(F),e.add(F),F.decomposeTransform()}),d}}function WZ(e,t){var i={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return UZ(i,e,t),i.seriesInvolved&&KZ(i,e),i}function UZ(e,t,i){var r=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),o=n.get("link",!0)||[],s=[];_(i.getCoordinateSystems(),function(a){if(!a.axisPointerEnabled)return;var l=eh(a.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=a;var h=a.model,c=h.getModel("tooltip",r);if(_(a.getAxes(),fe(g,!1,null)),a.getTooltipAxes&&r&&c.get("show")){var d=c.get("trigger")==="axis",f=c.get(["axisPointer","type"])==="cross",p=a.getTooltipAxes(c.get(["axisPointer","axis"]));(d||f)&&_(p.baseAxes,fe(g,f?"cross":!0,d)),f&&_(p.otherAxes,fe(g,"cross",!1))}function g(v,m,y){var C=y.model.getModel("axisPointer",n),S=C.get("show");if(!(!S||S==="auto"&&!v&&!ky(C))){m==null&&(m=C.get("triggerTooltip")),C=v?$Z(y,c,n,t,v,m):C;var b=C.get("snap"),w=C.get("triggerEmphasis"),x=eh(y.model),R=m||b||y.type==="category",D=e.axesInfo[x]={key:x,axis:y,coordSys:a,axisPointerModel:C,triggerTooltip:m,triggerEmphasis:w,involveSeries:R,snap:b,useHandle:ky(C),seriesModels:[],linkGroup:null};u[x]=D,e.seriesInvolved=e.seriesInvolved||R;var T=YZ(o,y);if(T!=null){var A=s[T]||(s[T]={axesInfo:{}});A.axesInfo[x]=D,A.mapper=o[T].mapper,D.linkGroup=A}}}})}function $Z(e,t,i,r,n,o){var s=t.getModel("axisPointer"),a=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};_(a,function(d){l[d]=ae(s.get(d))}),l.snap=e.type!=="category"&&!!o,s.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),n==="cross"){var h=s.get(["label","show"]);if(u.show=h??!0,!o){var c=l.lineStyle=s.get("crossStyle");c&&ne(u,c.textStyle)}}return e.model.getModel("axisPointer",new Ne(l,i,r))}function KZ(e,t){t.eachSeries(function(i){var r=i.coordinateSystem,n=i.get(["tooltip","trigger"],!0),o=i.get(["tooltip","show"],!0);!r||n==="none"||n===!1||n==="item"||o===!1||i.get(["axisPointer","show"],!0)===!1||_(e.coordSysAxesInfo[eh(r.model)],function(s){var a=s.axis;r.getAxis(a.dim)===a&&(s.seriesModels.push(i),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=i.getData().count())})})}function YZ(e,t){for(var i=t.model,r=t.dim,n=0;n<e.length;n++){var o=e[n]||{};if(sv(o[r+"AxisId"],i.id)||sv(o[r+"AxisIndex"],i.componentIndex)||sv(o[r+"AxisName"],i.name))return n}}function sv(e,t){return e==="all"||H(e)&&Ce(e,t)>=0||e===t}function XZ(e){var t=dw(e);if(t){var i=t.axisPointerModel,r=t.axis.scale,n=i.option,o=i.get("status"),s=i.get("value");s!=null&&(s=r.parse(s));var a=ky(i);o==null&&(n.status=a?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(s==null||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),n.value=s,a&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function dw(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[eh(e)]}function qZ(e){var t=dw(e);return t&&t.axisPointerModel}function ky(e){return!!e.get(["handle","show"])}function eh(e){return e.type+"||"+e.id}var gD={},Bs=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n,o){this.axisPointerClass&&XZ(i),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(i,n,!0)},t.prototype.updateAxisPointer=function(i,r,n,o){this._doUpdateAxisPointerClass(i,n,!1)},t.prototype.remove=function(i,r){var n=this._axisPointer;n&&n.remove(r)},t.prototype.dispose=function(i,r){this._disposeAxisPointer(r),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(i,r,n){var o=t.getAxisPointerClass(this.axisPointerClass);if(o){var s=qZ(i);s?(this._axisPointer||(this._axisPointer=new o)).render(i,s,r,n):this._disposeAxisPointer(r)}},t.prototype._disposeAxisPointer=function(i){this._axisPointer&&this._axisPointer.dispose(i),this._axisPointer=null},t.registerAxisPointerClass=function(i,r){gD[i]=r},t.getAxisPointerClass=function(i){return i&&gD[i]},t.type="axis",t}(Qe),Oy=_e();function aL(e,t,i,r){var n=i.axis;if(!n.scale.isBlank()){var o=i.getModel("splitArea"),s=o.getModel("areaStyle"),a=s.get("color"),l=r.coordinateSystem.getRect(),u=n.getTicksCoords({tickModel:o,clamp:!0});if(u.length){var h=a.length,c=Oy(e).splitAreaColors,d=Q(),f=0;if(c)for(var p=0;p<u.length;p++){var g=c.get(u[p].tickValue);if(g!=null){f=(g+(h-1)*p)%h;break}}var v=n.toGlobalCoord(u[0].coord),m=s.getAreaStyle();a=H(a)?a:[a];for(var p=1;p<u.length;p++){var y=n.toGlobalCoord(u[p].coord),C=void 0,S=void 0,b=void 0,w=void 0;n.isHorizontal()?(C=v,S=l.y,b=y-C,w=l.height,v=C+b):(C=l.x,S=v,b=l.width,w=y-S,v=S+w);var x=u[p-1].tickValue;x!=null&&d.set(x,f),t.add(new Te({anid:x!=null?"area_"+x:null,shape:{x:C,y:S,width:b,height:w},style:ne({fill:a[f]},m),autoBatch:!0,silent:!0})),f=(f+1)%h}Oy(e).splitAreaColors=d}}}function lL(e){Oy(e).splitAreaColors=null}var ZZ=["axisLine","axisTickLabel","axisName"],jZ=["splitArea","splitLine","minorSplitLine"],uL=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.axisPointerClass="CartesianAxisPointer",i}return t.prototype.render=function(i,r,n,o){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new le,this.group.add(this._axisGroup),!!i.get("show")){var a=i.getCoordSysModel(),l=Ly(a,i),u=new Zt(i,V({handleAutoShown:function(c){for(var d=a.coordinateSystem.getCartesians(),f=0;f<d.length;f++)if(Ty(d[f].getOtherAxis(i.axis).scale))return!0;return!1}},l));_(ZZ,u.add,u),this._axisGroup.add(u.getGroup()),_(jZ,function(c){i.get([c,"show"])&&QZ[c](this,this._axisGroup,i,a)},this);var h=o&&o.type==="changeAxisOrder"&&o.isInitSort;h||Sh(s,this._axisGroup,i),e.prototype.render.call(this,i,r,n,o)}},t.prototype.remove=function(){lL(this)},t.type="cartesianAxis",t}(Bs),QZ={splitLine:function(e,t,i,r){var n=i.axis;if(!n.scale.isBlank()){var o=i.getModel("splitLine"),s=o.getModel("lineStyle"),a=s.get("color"),l=o.get("showMinLine")!==!1,u=o.get("showMaxLine")!==!1;a=H(a)?a:[a];for(var h=r.coordinateSystem.getRect(),c=n.isHorizontal(),d=0,f=n.getTicksCoords({tickModel:o}),p=[],g=[],v=s.getLineStyle(),m=0;m<f.length;m++){var y=n.toGlobalCoord(f[m].coord);if(!(m===0&&!l||m===f.length-1&&!u)){var C=f[m].tickValue;c?(p[0]=y,p[1]=h.y,g[0]=y,g[1]=h.y+h.height):(p[0]=h.x,p[1]=y,g[0]=h.x+h.width,g[1]=y);var S=d++%a.length,b=new mt({anid:C!=null?"line_"+C:null,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:g[0],y2:g[1]},style:ne({stroke:a[S]},v),silent:!0});Ga(b.shape,v.lineWidth),t.add(b)}}}},minorSplitLine:function(e,t,i,r){var n=i.axis,o=i.getModel("minorSplitLine"),s=o.getModel("lineStyle"),a=r.coordinateSystem.getRect(),l=n.isHorizontal(),u=n.getMinorTicksCoords();if(u.length)for(var h=[],c=[],d=s.getLineStyle(),f=0;f<u.length;f++)for(var p=0;p<u[f].length;p++){var g=n.toGlobalCoord(u[f][p].coord);l?(h[0]=g,h[1]=a.y,c[0]=g,c[1]=a.y+a.height):(h[0]=a.x,h[1]=g,c[0]=a.x+a.width,c[1]=g);var v=new mt({anid:"minor_line_"+u[f][p].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:c[0],y2:c[1]},style:d,silent:!0});Ga(v.shape,d.lineWidth),t.add(v)}},splitArea:function(e,t,i,r){aL(e,t,i,r)}},hL=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="xAxis",t}(uL),JZ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=hL.type,i}return t.type="yAxis",t}(uL),e9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type="grid",i}return t.prototype.render=function(i,r){this.group.removeAll(),i.get("show")&&this.group.add(new Te({shape:i.coordinateSystem.getRect(),style:ne({fill:i.get("backgroundColor")},i.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Qe),vD={offset:0};function cL(e){e.registerComponentView(e9),e.registerComponentModel(AZ),e.registerCoordinateSystem("cartesian2d",OZ),za(e,"x",Ey,vD),za(e,"y",Ey,vD),e.registerComponentView(hL),e.registerComponentView(JZ),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function t9(e){we(cL),e.registerSeriesModel(xZ),e.registerChartView(_Z),e.registerLayout(Ph("scatter"))}function i9(e){e.eachSeriesByType("radar",function(t){var i=t.getData(),r=[],n=t.coordinateSystem;if(n){var o=n.getIndicatorAxes();_(o,function(s,a){i.each(i.mapDimension(o[a].dim),function(l,u){r[u]=r[u]||[];var h=n.dataToPoint(l,a);r[u][a]=mD(h)?h:yD(n)})}),i.each(function(s){var a=z3(r[s],function(l){return mD(l)})||yD(n);r[s].push(a.slice()),i.setItemLayout(s,r[s])})}})}function mD(e){return!isNaN(e[0])&&!isNaN(e[1])}function yD(e){return[e.cx,e.cy]}function r9(e){var t=e.polar;if(t){H(t)||(t=[t]);var i=[];_(t,function(r,n){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),e.radar=e.radar||[],H(e.radar)||(e.radar=[e.radar]),e.radar.push(r)):i.push(r)}),e.polar=i}_(e.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var n9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o=i.coordinateSystem,s=this.group,a=i.getData(),l=this._data;function u(d,f){var p=d.getItemVisual(f,"symbol")||"circle";if(p!=="none"){var g=hl(d.getItemVisual(f,"symbolSize")),v=ct(p,-1,-1,2,2),m=d.getItemVisual(f,"symbolRotate")||0;return v.attr({style:{strokeNoScale:!0},z2:100,scaleX:g[0]/2,scaleY:g[1]/2,rotation:m*Math.PI/180||0}),v}}function h(d,f,p,g,v,m){p.removeAll();for(var y=0;y<f.length-1;y++){var C=u(g,v);C&&(C.__dimIdx=y,d[y]?(C.setPosition(d[y]),Os[m?"initProps":"updateProps"](C,{x:f[y][0],y:f[y][1]},i,v)):C.setPosition(f[y]),p.add(C))}}function c(d){return z(d,function(f){return[o.cx,o.cy]})}a.diff(l).add(function(d){var f=a.getItemLayout(d);if(f){var p=new ei,g=new ti,v={shape:{points:f}};p.shape.points=c(f),g.shape.points=c(f),Ze(p,v,i,d),Ze(g,v,i,d);var m=new le,y=new le;m.add(g),m.add(p),m.add(y),h(g.shape.points,f,y,a,d,!0),a.setItemGraphicEl(d,m)}}).update(function(d,f){var p=l.getItemGraphicEl(f),g=p.childAt(0),v=p.childAt(1),m=p.childAt(2),y={shape:{points:a.getItemLayout(d)}};y.shape.points&&(h(g.shape.points,y.shape.points,m,a,d,!1),sr(v),sr(g),Me(g,y,i),Me(v,y,i),a.setItemGraphicEl(d,p))}).remove(function(d){s.remove(l.getItemGraphicEl(d))}).execute(),a.eachItemGraphicEl(function(d,f){var p=a.getItemModel(f),g=d.childAt(0),v=d.childAt(1),m=d.childAt(2),y=a.getItemVisual(f,"style"),C=y.fill;s.add(d),g.useStyle(ne(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:C})),At(g,p,"lineStyle"),At(v,p,"areaStyle");var S=p.getModel("areaStyle"),b=S.isEmpty()&&S.parentModel.isEmpty();v.ignore=b,_(["emphasis","select","blur"],function(R){var D=p.getModel([R,"areaStyle"]),T=D.isEmpty()&&D.parentModel.isEmpty();v.ensureState(R).ignore=T&&b}),v.useStyle(ne(S.getAreaStyle(),{fill:C,opacity:.7,decal:y.decal}));var w=p.getModel("emphasis"),x=w.getModel("itemStyle").getItemStyle();m.eachChild(function(R){if(R instanceof Rt){var D=R.style;R.useStyle(V({image:D.image,x:D.x,y:D.y,width:D.width,height:D.height},y))}else R.useStyle(y),R.setColor(C),R.style.strokeNoScale=!0;var T=R.ensureState("emphasis");T.style=ae(x);var A=a.getStore().get(a.getDimensionIndex(R.__dimIdx),f);(A==null||isNaN(A))&&(A=""),Pt(R,St(p),{labelFetcher:a.hostModel,labelDataIndex:f,labelDimIndex:R.__dimIdx,defaultText:A,inheritColor:C,defaultOpacity:y.opacity})}),tt(d,w.get("focus"),w.get("blurScope"),w.get("disabled"))}),this._data=a},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(We),o9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.hasSymbolVisual=!0,i}return t.prototype.init=function(i){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Fh(Z(this.getData,this),Z(this.getRawData,this))},t.prototype.getInitialData=function(i,r){return dl(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(i,r,n){var o=this.getData(),s=this.coordinateSystem,a=s.getIndicatorAxes(),l=this.getData().getName(i),u=l===""?this.name:l,h=hE(this,i);return wt("section",{header:u,sortBlocks:!0,blocks:z(a,function(c){var d=o.get(o.mapDimension(c.dim),i);return wt("nameValue",{markerType:"subItem",markerColor:h,name:c.name,value:d,sortParam:d})})})},t.prototype.getTooltipPosition=function(i){if(i!=null){for(var r=this.getData(),n=this.coordinateSystem,o=r.getValues(z(n.dimensions,function(u){return r.mapDimension(u)}),i),s=0,a=o.length;s<a;s++)if(!isNaN(o[s])){var l=n.getIndicatorAxes();return n.coordToPoint(l[s].dataToCoord(o[s]),s)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(qe),Ol=nL.value;function Ac(e,t){return ne({show:t},e)}var s9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.optionUpdated=function(){var i=this.get("boundaryGap"),r=this.get("splitNumber"),n=this.get("scale"),o=this.get("axisLine"),s=this.get("axisTick"),a=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),h=this.get(["axisName","formatter"]),c=this.get("axisNameGap"),d=this.get("triggerEvent"),f=z(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var g=l;p.color!=null&&(g=ne({color:p.color},l));var v=pe(ae(p),{boundaryGap:i,splitNumber:r,scale:n,axisLine:o,axisTick:s,axisLabel:a,name:p.text,showName:u,nameLocation:"end",nameGap:c,nameTextStyle:g,triggerEvent:d},!1);if(q(h)){var m=v.name;v.name=h.replace("{value}",m??"")}else ie(h)&&(v.name=h(v.name,v));var y=new Ne(v,null,this.ecModel);return dt(y,Dh.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=f},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:pe({lineStyle:{color:"#bbb"}},Ol.axisLine),axisLabel:Ac(Ol.axisLabel,!1),axisTick:Ac(Ol.axisTick,!1),splitLine:Ac(Ol.splitLine,!0),splitArea:Ac(Ol.splitArea,!0),indicator:[]},t}(Re),a9=["axisLine","axisTickLabel","axisName"],l9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o=this.group;o.removeAll(),this._buildAxes(i),this._buildSplitLineAndArea(i)},t.prototype._buildAxes=function(i){var r=i.coordinateSystem,n=r.getIndicatorAxes(),o=z(n,function(s){var a=s.model.get("showName")?s.name:"",l=new Zt(s.model,{axisName:a,position:[r.cx,r.cy],rotation:s.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});_(o,function(s){_(a9,s.add,s),this.group.add(s.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(i){var r=i.coordinateSystem,n=r.getIndicatorAxes();if(!n.length)return;var o=i.get("shape"),s=i.getModel("splitLine"),a=i.getModel("splitArea"),l=s.getModel("lineStyle"),u=a.getModel("areaStyle"),h=s.get("show"),c=a.get("show"),d=l.get("color"),f=u.get("color"),p=H(d)?d:[d],g=H(f)?f:[f],v=[],m=[];function y(E,I,O){var k=O%I.length;return E[k]=E[k]||[],k}if(o==="circle")for(var C=n[0].getTicksCoords(),S=r.cx,b=r.cy,w=0;w<C.length;w++){if(h){var x=y(v,p,w);v[x].push(new vn({shape:{cx:S,cy:b,r:C[w].coord}}))}if(c&&w<C.length-1){var x=y(m,g,w);m[x].push(new mh({shape:{cx:S,cy:b,r0:C[w].coord,r:C[w+1].coord}}))}}else for(var R,D=z(n,function(E,I){var O=E.getTicksCoords();return R=R==null?O.length-1:Math.min(O.length-1,R),z(O,function(k){return r.coordToPoint(k.coord,I)})}),T=[],w=0;w<=R;w++){for(var A=[],P=0;P<n.length;P++)A.push(D[P][w]);if(A[0]&&A.push(A[0].slice()),h){var x=y(v,p,w);v[x].push(new ti({shape:{points:A}}))}if(c&&T){var x=y(m,g,w-1);m[x].push(new ei({shape:{points:A.concat(T)}}))}T=A.slice().reverse()}var M=l.getLineStyle(),F=u.getAreaStyle();_(m,function(E,I){this.group.add(Li(E,{style:ne({stroke:"none",fill:g[I%g.length]},F),silent:!0}))},this),_(v,function(E,I){this.group.add(Li(E,{style:ne({fill:"none",stroke:p[I%p.length]},M),silent:!0}))},this)},t.type="radar",t}(Qe),u9=function(e){L(t,e);function t(i,r,n){var o=e.call(this,i,r,n)||this;return o.type="value",o.angle=0,o.name="",o}return t}(ur),h9=function(){function e(t,i,r){this.dimensions=[],this._model=t,this._indicatorAxes=z(t.getIndicatorModels(),function(n,o){var s="indicator_"+o,a=new u9(s,new hn);return a.name=n.get("name"),a.model=n,n.axis=a,this.dimensions.push(s),a},this),this.resize(t,r)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(t,i){var r=this._indicatorAxes[i];return this.coordToPoint(r.dataToCoord(t),i)},e.prototype.coordToPoint=function(t,i){var r=this._indicatorAxes[i],n=r.angle,o=this.cx+t*Math.cos(n),s=this.cy-t*Math.sin(n);return[o,s]},e.prototype.pointToData=function(t){var i=t[0]-this.cx,r=t[1]-this.cy,n=Math.sqrt(i*i+r*r);i/=n,r/=n;for(var o=Math.atan2(-r,i),s=1/0,a,l=-1,u=0;u<this._indicatorAxes.length;u++){var h=this._indicatorAxes[u],c=Math.abs(o-h.angle);c<s&&(a=h,l=u,s=c)}return[l,+(a&&a.coordToData(n))]},e.prototype.resize=function(t,i){var r=t.get("center"),n=i.getWidth(),o=i.getHeight(),s=Math.min(n,o)/2;this.cx=K(r[0],n),this.cy=K(r[1],o),this.startAngle=t.get("startAngle")*Math.PI/180;var a=t.get("radius");(q(a)||Pe(a))&&(a=[0,a]),this.r0=K(a[0],s),this.r=K(a[1],s),_(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var h=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;h=Math.atan2(Math.sin(h),Math.cos(h)),l.angle=h},this)},e.prototype.update=function(t,i){var r=this._indicatorAxes,n=this._model;_(r,function(a){a.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(a,l){if(!(a.get("coordinateSystem")!=="radar"||t.getComponent("radar",a.get("radarIndex"))!==n)){var u=a.getData();_(r,function(h){h.scale.unionExtentFromData(u,u.mapDimension(h.dim))})}},this);var o=n.get("splitNumber"),s=new hn;s.setExtent(0,o),s.setInterval(1),_(r,function(a,l){oL(a.scale,a.model,s)})},e.prototype.convertToPixel=function(t,i,r){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(t,i,r){return console.warn("Not implemented."),null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.create=function(t,i){var r=[];return t.eachComponent("radar",function(n){var o=new e(n,t,i);r.push(o),n.coordinateSystem=o}),t.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=r[n.get("radarIndex")||0])}),r},e.dimensions=[],e}();function c9(e){e.registerCoordinateSystem("radar",h9),e.registerComponentModel(s9),e.registerComponentView(l9),e.registerVisual({seriesType:"radar",reset:function(t){var i=t.getData();i.each(function(r){i.setItemVisual(r,"legendIcon","roundRect")}),i.setVisual("legendIcon","roundRect")}})}function d9(e){we(c9),e.registerChartView(n9),e.registerSeriesModel(o9),e.registerLayout(i9),e.registerProcessor(Mh("radar")),e.registerPreprocessor(r9)}var CD="\0_ec_interaction_mutex";function f9(e,t,i){var r=fw(e);r[t]=i}function p9(e,t,i){var r=fw(e),n=r[t];n===i&&(r[t]=null)}function SD(e,t){return!!fw(e)[t]}function fw(e){return e[CD]||(e[CD]={})}Nr({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},at);var Eh=function(e){L(t,e);function t(i){var r=e.call(this)||this;r._zr=i;var n=Z(r._mousedownHandler,r),o=Z(r._mousemoveHandler,r),s=Z(r._mouseupHandler,r),a=Z(r._mousewheelHandler,r),l=Z(r._pinchHandler,r);return r.enable=function(u,h){this.disable(),this._opt=ne(ae(h)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(i.on("mousedown",n),i.on("mousemove",o),i.on("mouseup",s)),(u===!0||u==="scale"||u==="zoom")&&(i.on("mousewheel",a),i.on("pinch",l))},r.disable=function(){i.off("mousedown",n),i.off("mousemove",o),i.off("mouseup",s),i.off("mousewheel",a),i.off("pinch",l)},r}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(i){this.pointerChecker=i},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(i){if(!$0(i)){for(var r=i.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var n=i.offsetX,o=i.offsetY;this.pointerChecker&&this.pointerChecker(i,n,o)&&(this._x=n,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(i){if(!(!this._dragging||!hd("moveOnMouseMove",i,this._opt)||i.gestureEvent==="pinch"||SD(this._zr,"globalPan"))){var r=i.offsetX,n=i.offsetY,o=this._x,s=this._y,a=r-o,l=n-s;this._x=r,this._y=n,this._opt.preventDefaultMouseMove&&on(i.event),dL(this,"pan","moveOnMouseMove",i,{dx:a,dy:l,oldX:o,oldY:s,newX:r,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(i){$0(i)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(i){var r=hd("zoomOnMouseWheel",i,this._opt),n=hd("moveOnMouseWheel",i,this._opt),o=i.wheelDelta,s=Math.abs(o),a=i.offsetX,l=i.offsetY;if(!(o===0||!r&&!n)){if(r){var u=s>3?1.4:s>1?1.2:1.1,h=o>0?u:1/u;av(this,"zoom","zoomOnMouseWheel",i,{scale:h,originX:a,originY:l,isAvailableBehavior:null})}if(n){var c=Math.abs(o),d=(o>0?1:-1)*(c>3?.4:c>1?.15:.05);av(this,"scrollMove","moveOnMouseWheel",i,{scrollDelta:d,originX:a,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(i){if(!SD(this._zr,"globalPan")){var r=i.pinchScale>1?1.1:1/1.1;av(this,"zoom",null,i,{scale:r,originX:i.pinchX,originY:i.pinchY,isAvailableBehavior:null})}},t}(Wi);function av(e,t,i,r,n){e.pointerChecker&&e.pointerChecker(r,n.originX,n.originY)&&(on(r.event),dL(e,t,i,r,n))}function dL(e,t,i,r,n){n.isAvailableBehavior=Z(hd,null,i,r),e.trigger(t,n)}function hd(e,t,i){var r=i[e];return!e||r&&(!q(r)||t.event[r+"Key"])}function pw(e,t,i){var r=e.target;r.x+=t,r.y+=i,r.dirty()}function gw(e,t,i,r){var n=e.target,o=e.zoomLimit,s=e.zoom=e.zoom||1;if(s*=t,o){var a=o.min||0,l=o.max||1/0;s=Math.max(Math.min(l,s),a)}var u=s/e.zoom;e.zoom=s,n.x-=(i-n.x)*(u-1),n.y-=(r-n.y)*(u-1),n.scaleX*=u,n.scaleY*=u,n.dirty()}var g9={axisPointer:1,tooltip:1,brush:1};function fp(e,t,i){var r=t.getComponentByElement(e.topTarget),n=r&&r.coordinateSystem;return r&&r!==i&&!g9.hasOwnProperty(r.mainType)&&n&&n.model!==i}function fL(e){if(q(e)){var t=new DOMParser;e=t.parseFromString(e,"text/xml")}var i=e;for(i.nodeType===9&&(i=i.firstChild);i.nodeName.toLowerCase()!=="svg"||i.nodeType!==1;)i=i.nextSibling;return i}var lv,af={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},wD=De(af),lf={"alignment-baseline":"textBaseline","stop-color":"stopColor"},bD=De(lf),v9=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(t,i){i=i||{};var r=fL(t);this._defsUsePending=[];var n=new le;this._root=n;var o=[],s=r.getAttribute("viewBox")||"",a=parseFloat(r.getAttribute("width")||i.width),l=parseFloat(r.getAttribute("height")||i.height);isNaN(a)&&(a=null),isNaN(l)&&(l=null),fi(r,n,null,!0,!1);for(var u=r.firstChild;u;)this._parseNode(u,n,o,null,!1,!1),u=u.nextSibling;C9(this._defs,this._defsUsePending),this._defsUsePending=[];var h,c;if(s){var d=pp(s);d.length>=4&&(h={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(h&&a!=null&&l!=null&&(c=gL(h,{x:0,y:0,width:a,height:l}),!i.ignoreViewBox)){var f=n;n=new le,n.add(f),f.scaleX=f.scaleY=c.scale,f.x=c.x,f.y=c.y}return!i.ignoreRootClip&&a!=null&&l!=null&&n.setClipPath(new Te({shape:{x:0,y:0,width:a,height:l}})),{root:n,width:a,height:l,viewBoxRect:h,viewBoxTransform:c,named:o}},e.prototype._parseNode=function(t,i,r,n,o,s){var a=t.nodeName.toLowerCase(),l,u=n;if(a==="defs"&&(o=!0),a==="text"&&(s=!0),a==="defs"||a==="switch")l=i;else{if(!o){var h=lv[a];if(h&&j(lv,a)){l=h.call(this,t,i);var c=t.getAttribute("name");if(c){var d={name:c,namedFrom:null,svgNodeTagLower:a,el:l};r.push(d),a==="g"&&(u=d)}else n&&r.push({name:n.name,namedFrom:n,svgNodeTagLower:a,el:l});i.add(l)}}var f=xD[a];if(f&&j(xD,a)){var p=f.call(this,t),g=t.getAttribute("id");g&&(this._defs[g]=p)}}if(l&&l.isGroup)for(var v=t.firstChild;v;)v.nodeType===1?this._parseNode(v,l,r,u,o,s):v.nodeType===3&&s&&this._parseText(v,l),v=v.nextSibling},e.prototype._parseText=function(t,i){var r=new Oa({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Ri(i,r),fi(t,r,this._defsUsePending,!1,!1),m9(r,i);var n=r.style,o=n.fontSize;o&&o<9&&(n.fontSize=9,r.scaleX*=o/9,r.scaleY*=o/9);var s=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=s;var a=r.getBoundingRect();return this._textX+=a.width,i.add(r),r},e.internalField=function(){lv={g:function(t,i){var r=new le;return Ri(i,r),fi(t,r,this._defsUsePending,!1,!1),r},rect:function(t,i){var r=new Te;return Ri(i,r),fi(t,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(t,i){var r=new vn;return Ri(i,r),fi(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),r.silent=!0,r},line:function(t,i){var r=new mt;return Ri(i,r),fi(t,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(t,i){var r=new Kf;return Ri(i,r),fi(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(t,i){var r=t.getAttribute("points"),n;r&&(n=TD(r));var o=new ei({shape:{points:n||[]},silent:!0});return Ri(i,o),fi(t,o,this._defsUsePending,!1,!1),o},polyline:function(t,i){var r=t.getAttribute("points"),n;r&&(n=TD(r));var o=new ti({shape:{points:n||[]},silent:!0});return Ri(i,o),fi(t,o,this._defsUsePending,!1,!1),o},image:function(t,i){var r=new Rt;return Ri(i,r),fi(t,r,this._defsUsePending,!1,!1),r.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),r.silent=!0,r},text:function(t,i){var r=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",o=t.getAttribute("dx")||"0",s=t.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(o),this._textY=parseFloat(n)+parseFloat(s);var a=new le;return Ri(i,a),fi(t,a,this._defsUsePending,!1,!0),a},tspan:function(t,i){var r=t.getAttribute("x"),n=t.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),n!=null&&(this._textY=parseFloat(n));var o=t.getAttribute("dx")||"0",s=t.getAttribute("dy")||"0",a=new le;return Ri(i,a),fi(t,a,this._defsUsePending,!1,!0),this._textX+=parseFloat(o),this._textY+=parseFloat(s),a},path:function(t,i){var r=t.getAttribute("d")||"",n=nF(r);return Ri(i,n),fi(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),e}(),xD={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),i=parseInt(e.getAttribute("y1")||"0",10),r=parseInt(e.getAttribute("x2")||"10",10),n=parseInt(e.getAttribute("y2")||"0",10),o=new Ch(t,i,r,n);return RD(e,o),DD(e,o),o},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),i=parseInt(e.getAttribute("cy")||"0",10),r=parseInt(e.getAttribute("r")||"0",10),n=new lF(t,i,r);return RD(e,n),DD(e,n),n}};function RD(e,t){var i=e.getAttribute("gradientUnits");i==="userSpaceOnUse"&&(t.global=!0)}function DD(e,t){for(var i=e.firstChild;i;){if(i.nodeType===1&&i.nodeName.toLocaleLowerCase()==="stop"){var r=i.getAttribute("offset"),n=void 0;r&&r.indexOf("%")>0?n=parseInt(r,10)/100:r?n=parseFloat(r):n=0;var o={};pL(i,o,o);var s=o.stopColor||i.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:n,color:s})}i=i.nextSibling}}function Ri(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),ne(t.__inheritedStyle,e.__inheritedStyle))}function TD(e){for(var t=pp(e),i=[],r=0;r<t.length;r+=2){var n=parseFloat(t[r]),o=parseFloat(t[r+1]);i.push([n,o])}return i}function fi(e,t,i,r,n){var o=t,s=o.__inheritedStyle=o.__inheritedStyle||{},a={};e.nodeType===1&&(b9(e,t),pL(e,s,a),r||x9(e,s,a)),o.style=o.style||{},s.fill!=null&&(o.style.fill=_D(o,"fill",s.fill,i)),s.stroke!=null&&(o.style.stroke=_D(o,"stroke",s.stroke,i)),_(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){s[l]!=null&&(o.style[l]=parseFloat(s[l]))}),_(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){s[l]!=null&&(o.style[l]=s[l])}),n&&(o.__selfStyle=a),s.lineDash&&(o.style.lineDash=z(pp(s.lineDash),function(l){return parseFloat(l)})),(s.visibility==="hidden"||s.visibility==="collapse")&&(o.invisible=!0),s.display==="none"&&(o.ignore=!0)}function m9(e,t){var i=t.__selfStyle;if(i){var r=i.textBaseline,n=r;!r||r==="auto"||r==="baseline"?n="alphabetic":r==="before-edge"||r==="text-before-edge"?n="top":r==="after-edge"||r==="text-after-edge"?n="bottom":(r==="central"||r==="mathematical")&&(n="middle"),e.style.textBaseline=n}var o=t.__inheritedStyle;if(o){var s=o.textAlign,a=s;s&&(s==="middle"&&(a="center"),e.style.textAlign=a)}}var y9=/^url\(\s*#(.*?)\)/;function _D(e,t,i,r){var n=i&&i.match(y9);if(n){var o=Ji(n[1]);r.push([e,t,o]);return}return i==="none"&&(i=null),i}function C9(e,t){for(var i=0;i<t.length;i++){var r=t[i];r[0].style[r[1]]=e[r[2]]}}var S9=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function pp(e){return e.match(S9)||[]}var w9=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,uv=Math.PI/180;function b9(e,t){var i=e.getAttribute("transform");if(i){i=i.replace(/,/g," ");var r=[],n=null;i.replace(w9,function(c,d,f){return r.push(d,f),""});for(var o=r.length-1;o>0;o-=2){var s=r[o],a=r[o-1],l=pp(s);switch(n=n||Ci(),a){case"translate":Ir(n,n,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":uS(n,n,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Ls(n,n,-parseFloat(l[0])*uv,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*uv);Jr(n,[1,0,u,1,0,0],n);break;case"skewY":var h=Math.tan(parseFloat(l[0])*uv);Jr(n,[1,h,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(l[0]),n[1]=parseFloat(l[1]),n[2]=parseFloat(l[2]),n[3]=parseFloat(l[3]),n[4]=parseFloat(l[4]),n[5]=parseFloat(l[5]);break}}t.setLocalTransform(n)}}var AD=/([^\s:;]+)\s*:\s*([^:;]+)/g;function pL(e,t,i){var r=e.getAttribute("style");if(r){AD.lastIndex=0;for(var n;(n=AD.exec(r))!=null;){var o=n[1],s=j(af,o)?af[o]:null;s&&(t[s]=n[2]);var a=j(lf,o)?lf[o]:null;a&&(i[a]=n[2])}}}function x9(e,t,i){for(var r=0;r<wD.length;r++){var n=wD[r],o=e.getAttribute(n);o!=null&&(t[af[n]]=o)}for(var r=0;r<bD.length;r++){var n=bD[r],o=e.getAttribute(n);o!=null&&(i[lf[n]]=o)}}function gL(e,t){var i=t.width/e.width,r=t.height/e.height,n=Math.min(i,r);return{scale:n,x:-(e.x+e.width/2)*n+(t.x+t.width/2),y:-(e.y+e.height/2)*n+(t.y+t.height/2)}}function R9(e,t){var i=new v9;return i.parse(e,t)}var D9=Q(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),T9=function(){function e(t,i){this.type="geoSVG",this._usedGraphicMap=Q(),this._freedGraphics=[],this._mapName=t,this._parsedXML=fL(i)}return e.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var i=A9(t.named),r=i.regions,n=i.regionsMap;this._regions=r,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(t){var i,r;try{i=t&&R9(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=i.root,jt(r!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var n=new le;n.add(r),n.isGeoSVGGraphicRoot=!0;var o=i.width,s=i.height,a=i.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,h=void 0,c=void 0,d=void 0;if(o!=null?(u=0,c=o):a&&(u=a.x,c=a.width),s!=null?(h=0,d=s):a&&(h=a.y,d=a.height),u==null||h==null){var f=r.getBoundingRect();u==null&&(u=f.x,c=f.width),h==null&&(h=f.y,d=f.height)}l=this._boundingRect=new ve(u,h,c,d)}if(a){var p=gL(a,l);r.scaleX=r.scaleY=p.scale,r.x=p.x,r.y=p.y}n.setClipPath(new Te({shape:l.plain()}));var g=[];return _(i.named,function(v){D9.get(v.svgNodeTagLower)!=null&&(g.push(v),_9(v.el))}),{root:n,boundingRect:l,named:g}},e.prototype.useGraphic=function(t){var i=this._usedGraphicMap,r=i.get(t);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),i.set(t,r),r)},e.prototype.freeGraphic=function(t){var i=this._usedGraphicMap,r=i.get(t);r&&(i.removeKey(t),this._freedGraphics.push(r))},e}();function _9(e){e.silent=!1,e.isGroup&&e.traverse(function(t){t.silent=!1})}function A9(e){var t=[],i=Q();return _(e,function(r){if(r.namedFrom==null){var n=new bq(r.name,r.el);t.push(n),i.set(r.name,n)}}),{regions:t,regionsMap:i}}var Gy=[126,25],PD="",Bo=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Oo=0;Oo<Bo.length;Oo++)for(var ia=0;ia<Bo[Oo].length;ia++)Bo[Oo][ia][0]/=10.5,Bo[Oo][ia][1]/=-10.5/.75,Bo[Oo][ia][0]+=Gy[0],Bo[Oo][ia][1]+=Gy[1];function P9(e,t){if(e==="china"){for(var i=0;i<t.length;i++)if(t[i].name===PD)return;t.push(new cI(PD,z(Bo,function(r){return{type:"polygon",exterior:r}}),Gy))}}var M9={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function F9(e,t){if(e==="china"){var i=M9[t.name];if(i){var r=t.getCenter();r[0]+=i[0]/10.5,r[1]+=-i[1]/(10.5/.75),t.setCenter(r)}}}var E9=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function I9(e,t){e==="china"&&t.name===""&&t.geometries.push({type:"polygon",exterior:E9[0]})}var L9="name",k9=function(){function e(t,i,r){this.type="geoJSON",this._parsedMap=Q(),this._mapName=t,this._specialAreas=r,this._geoJSON=G9(i)}return e.prototype.load=function(t,i){i=i||L9;var r=this._parsedMap.get(i);if(!r){var n=this._parseToRegions(i);r=this._parsedMap.set(i,{regions:n,boundingRect:O9(n)})}var o=Q(),s=[];return _(r.regions,function(a){var l=a.name;t&&j(t,l)&&(a=a.cloneShallow(l=t[l])),s.push(a),o.set(l,a)}),{regions:s,boundingRect:r.boundingRect||new ve(0,0,0,0),regionsMap:o}},e.prototype._parseToRegions=function(t){var i=this._mapName,r=this._geoJSON,n;try{n=r?Rq(r,t):[]}catch(o){throw new Error(`Invalid geoJson format
`+o.message)}return P9(i,n),_(n,function(o){var s=o.name;F9(i,o),I9(i,o);var a=this._specialAreas&&this._specialAreas[s];a&&o.transformTo(a.left,a.top,a.width,a.height)},this),n},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function O9(e){for(var t,i=0;i<e.length;i++){var r=e[i].getBoundingRect();t=t||r.clone(),t.union(r)}return t}function G9(e){return q(e)?typeof JSON<"u"&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e}var Gl=Q();const cn={registerMap:function(e,t,i){if(t.svg){var r=new T9(e,t.svg);Gl.set(e,r)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?i=t.specialAreas:n=t;var r=new k9(e,n,i);Gl.set(e,r)}},getGeoResource:function(e){return Gl.get(e)},getMapForUser:function(e){var t=Gl.get(e);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(e,t,i){var r=Gl.get(e);if(r)return r.load(t,i)}};var vw=["rect","circle","line","ellipse","polygon","polyline","path"],N9=Q(vw),V9=Q(vw.concat(["g"])),B9=Q(vw.concat(["g"])),vL=_e();function Pc(e){var t=e.getItemStyle(),i=e.get("areaColor");return i!=null&&(t.fill=i),t}function MD(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var mL=function(){function e(t){var i=new le;this.uid=nl("ec_map_draw"),this._controller=new Eh(t.getZr()),this._controllerHost={target:i},this.group=i,i.add(this._regionsGroup=new le),i.add(this._svgGroup=new le)}return e.prototype.draw=function(t,i,r,n,o){var s=t.mainType==="geo",a=t.getData&&t.getData();s&&i.eachComponent({mainType:"series",subType:"map"},function(m){!a&&m.getHostGeoModel()===t&&(a=m.getData())});var l=t.coordinateSystem,u=this._regionsGroup,h=this.group,c=l.getTransformInfo(),d=c.raw,f=c.roam,p=!u.childAt(0)||o;p?(h.x=f.x,h.y=f.y,h.scaleX=f.scaleX,h.scaleY=f.scaleY,h.dirty()):Me(h,f,t);var g=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,v={api:r,geo:l,mapOrGeoModel:t,data:a,isVisualEncodedByVisualMap:g,isGeo:s,transformInfoRaw:d};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(t,i,r),this._updateMapSelectHandler(t,u,r,n)},e.prototype._buildGeoJSON=function(t){var i=this._regionsGroupByName=Q(),r=Q(),n=this._regionsGroup,o=t.transformInfoRaw,s=t.mapOrGeoModel,a=t.data,l=t.geo.projection,u=l&&l.stream;function h(f,p){return p&&(f=p(f)),f&&[f[0]*o.scaleX+o.x,f[1]*o.scaleY+o.y]}function c(f){for(var p=[],g=!u&&l&&l.project,v=0;v<f.length;++v){var m=h(f[v],g);m&&p.push(m)}return p}function d(f){return{shape:{points:c(f)}}}n.removeAll(),_(t.geo.regions,function(f){var p=f.name,g=i.get(p),v=r.get(p)||{},m=v.dataIdx,y=v.regionModel;if(!g){g=i.set(p,new le),n.add(g),m=a?a.indexOfName(p):null,y=t.isGeo?s.getRegionModel(p):a?a.getItemModel(m):null;var C=y.get("silent",!0);C!=null&&(g.silent=C),r.set(p,{dataIdx:m,regionModel:y})}var S=[],b=[];_(f.geometries,function(R){if(R.type==="polygon"){var D=[R.exterior].concat(R.interiors||[]);u&&(D=OD(D,u)),_(D,function(A){S.push(new ei(d(A)))})}else{var T=R.points;u&&(T=OD(T,u,!0)),_(T,function(A){b.push(new ti(d(A)))})}});var w=h(f.getCenter(),l&&l.project);function x(R,D){if(R.length){var T=new DS({culling:!0,segmentIgnoreThreshold:1,shape:{paths:R}});g.add(T),FD(t,T,m,y),ED(t,T,p,y,s,m,w),D&&(MD(T),_(T.states,MD))}}x(S),x(b,!0)}),i.each(function(f,p){var g=r.get(p),v=g.dataIdx,m=g.regionModel;ID(t,f,p,m,s,v),LD(t,f,p,m,s),kD(t,f,p,m,s)},this)},e.prototype._buildSVG=function(t){var i=t.geo.map,r=t.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(i)&&(this._freeSVG(),this._useSVG(i));var n=this._svgDispatcherMap=Q(),o=!1;_(this._svgGraphicRecord.named,function(s){var a=s.name,l=t.mapOrGeoModel,u=t.data,h=s.svgNodeTagLower,c=s.el,d=u?u.indexOfName(a):null,f=l.getRegionModel(a);N9.get(h)!=null&&c instanceof zi&&FD(t,c,d,f),c instanceof zi&&(c.culling=!0);var p=f.get("silent",!0);if(p!=null&&(c.silent=p),c.z2EmphasisLift=0,!s.namedFrom&&(B9.get(h)!=null&&ED(t,c,a,f,l,d,null),ID(t,c,a,f,l,d),LD(t,c,a,f,l),V9.get(h)!=null)){var g=kD(t,c,a,f,l);g==="self"&&(o=!0);var v=n.get(a)||n.set(a,[]);v.push(c)}},this),this._enableBlurEntireSVG(o,t)},e.prototype._enableBlurEntireSVG=function(t,i){if(t&&i.isGeo){var r=i.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=r.opacity;this._svgGraphicRecord.root.traverse(function(o){if(!o.isGroup){Ds(o);var s=o.ensureState("blur").style||{};s.opacity==null&&n!=null&&(s.opacity=n),o.ensureState("emphasis")}})}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(t,i){if(t==null)return[];var r=i.coordinateSystem;if(r.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var o=n.get(t);return o?[o]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},e.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},e.prototype._useSVG=function(t){var i=cn.getGeoResource(t);if(i&&i.type==="geoSVG"){var r=i.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=t}},e.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var i=cn.getGeoResource(t);i&&i.type==="geoSVG"&&i.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(t,i,r){var n=t.coordinateSystem,o=this._controller,s=this._controllerHost;s.zoomLimit=t.get("scaleLimit"),s.zoom=n.getZoom(),o.enable(t.get("roam")||!1);var a=t.mainType;function l(){var u={type:"geoRoam",componentType:a};return u[a+"Id"]=t.id,u}o.off("pan").on("pan",function(u){this._mouseDownFlag=!1,pw(s,u.dx,u.dy),r.dispatchAction(V(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),o.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,gw(s,u.scale,u.originX,u.originY),r.dispatchAction(V(l(),{totalZoom:s.zoom,zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),o.setPointerChecker(function(u,h,c){return n.containPoint([h,c])&&!fp(u,r,t)})},e.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var i=t.getTextContent();i&&(i.ignore=vL(i).ignore)})},e.prototype._updateMapSelectHandler=function(t,i,r,n){var o=this;i.off("mousedown"),i.off("click"),t.get("selectedMode")&&(i.on("mousedown",function(){o._mouseDownFlag=!0}),i.on("click",function(s){o._mouseDownFlag&&(o._mouseDownFlag=!1)}))},e}();function FD(e,t,i,r){var n=r.getModel("itemStyle"),o=r.getModel(["emphasis","itemStyle"]),s=r.getModel(["blur","itemStyle"]),a=r.getModel(["select","itemStyle"]),l=Pc(n),u=Pc(o),h=Pc(a),c=Pc(s),d=e.data;if(d){var f=d.getItemVisual(i,"style"),p=d.getItemVisual(i,"decal");e.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),p&&(l.decal=Va(p,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=h,t.ensureState("blur").style=c,Ds(t)}function ED(e,t,i,r,n,o,s){var a=e.data,l=e.isGeo,u=a&&isNaN(a.get(a.mapDimension("value"),o)),h=a&&a.getItemLayout(o);if(l||u||h&&h.showLabel){var c=l?i:o,d=void 0;(!a||o>=0)&&(d=n);var f=s?{normal:{align:"center",verticalAlign:"middle"}}:null;Pt(t,St(r),{labelFetcher:d,labelDataIndex:c,defaultText:i},f);var p=t.getTextContent();if(p&&(vL(p).ignore=p.ignore,t.textConfig&&s)){var g=t.getBoundingRect().clone();t.textConfig.layoutRect=g,t.textConfig.position=[(s[0]-g.x)/g.width*100+"%",(s[1]-g.y)/g.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function ID(e,t,i,r,n,o){e.data?e.data.setItemGraphicEl(o,t):ue(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:i,region:r&&r.option||{}}}function LD(e,t,i,r,n){e.data||ks({el:t,componentModel:n,itemName:i,itemTooltipOption:r.get("tooltip")})}function kD(e,t,i,r,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var o=r.getModel("emphasis"),s=o.get("focus");return tt(t,s,o.get("blurScope"),o.get("disabled")),e.isGeo&&NK(t,n,i),s}function OD(e,t,i){var r=[],n;function o(){n=[]}function s(){n.length&&(r.push(n),n=[])}var a=t({polygonStart:o,polygonEnd:s,lineStart:o,lineEnd:s,point:function(l,u){isFinite(l)&&isFinite(u)&&n.push([l,u])},sphere:function(){}});return!i&&a.polygonStart(),_(e,function(l){a.lineStart();for(var u=0;u<l.length;u++)a.point(l[u][0],l[u][1]);a.lineEnd()}),!i&&a.polygonEnd(),r}var H9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n,o){if(!(o&&o.type==="mapToggleSelect"&&o.from===this.uid)){var s=this.group;if(s.removeAll(),!i.getHostGeoModel()){if(this._mapDraw&&o&&o.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),o&&o.type==="geoRoam"&&o.componentType==="series"&&o.seriesId===i.id){var a=this._mapDraw;a&&s.add(a.group)}else if(i.needsDrawMap){var a=this._mapDraw||new mL(n);s.add(a.group),a.draw(i,r,n,this,o),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;i.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(i,r,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(i,r,n){var o=i.originalData,s=this.group;o.each(o.mapDimension("value"),function(a,l){if(!isNaN(a)){var u=o.getItemLayout(l);if(!(!u||!u.point)){var h=u.point,c=u.offset,d=new vn({style:{fill:i.getData().getVisual("style").fill},shape:{cx:h[0]+c*9,cy:h[1],r:3},silent:!0,z2:8+(c?0:tl+1)});if(!c){var f=i.mainSeries.getData(),p=o.getName(l),g=f.indexOfName(p),v=o.getItemModel(l),m=v.getModel("label"),y=f.getItemGraphicEl(g);Pt(d,St(v),{labelFetcher:{getFormattedLabel:function(C,S){return i.getFormattedLabel(g,S)}},defaultText:p}),d.disableLabelAnimation=!0,m.get("position")||d.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(C){Bd(d,C)}}s.add(d)}}})},t.type="map",t}(We),z9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.needsDrawMap=!1,i.seriesGroup=[],i.getTooltipPosition=function(r){if(r!=null){var n=this.getData().getName(r),o=this.coordinateSystem,s=o.getRegion(n);return s&&o.dataToPoint(s.getCenter())}},i}return t.prototype.getInitialData=function(i){for(var r=dl(this,{coordDimensions:["value"],encodeDefaulter:fe(kS,this)}),n=Q(),o=[],s=0,a=r.count();s<a;s++){var l=r.getName(s);n.set(l,s)}var u=cn.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return _(u.regions,function(h){var c=h.name,d=n.get(c),f=h.properties&&h.properties.echartsStyle,p;d==null?(p={name:c},o.push(p)):p=r.getRawDataItem(d),f&&pe(p,f)}),r.appendData(o),r},t.prototype.getHostGeoModel=function(){var i=this.option.geoIndex;return i!=null?this.ecModel.getComponent("geo",i):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(i){var r=this.getData();return r.get(r.mapDimension("value"),i)},t.prototype.getRegionModel=function(i){var r=this.getData();return r.getItemModel(r.indexOfName(i))},t.prototype.formatTooltip=function(i,r,n){for(var o=this.getData(),s=this.getRawValue(i),a=o.getName(i),l=this.seriesGroup,u=[],h=0;h<l.length;h++){var c=l[h].originalData.indexOfName(a),d=o.mapDimension("value");isNaN(l[h].originalData.get(d,c))||u.push(l[h].name)}return wt("section",{header:u.join(", "),noHeader:!u.length,blocks:[wt("nameValue",{name:a,value:s})]})},t.prototype.setZoom=function(i){this.option.zoom=i},t.prototype.setCenter=function(i){this.option.center=i},t.prototype.getLegendIcon=function(i){var r=i.icon||"roundRect",n=ct(r,0,0,i.itemWidth,i.itemHeight,i.itemStyle.fill);return n.setStyle(i.itemStyle),n.style.stroke="none",r.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(qe);function W9(e,t){var i={};return _(e,function(r){r.each(r.mapDimension("value"),function(n,o){var s="ec-"+r.getName(o);i[s]=i[s]||[],isNaN(n)||i[s].push(n)})}),e[0].map(e[0].mapDimension("value"),function(r,n){for(var o="ec-"+e[0].getName(n),s=0,a=1/0,l=-1/0,u=i[o].length,h=0;h<u;h++)a=Math.min(a,i[o][h]),l=Math.max(l,i[o][h]),s+=i[o][h];var c;return t==="min"?c=a:t==="max"?c=l:t==="average"?c=s/u:c=s,u===0?NaN:c})}function U9(e){var t={};e.eachSeriesByType("map",function(i){var r=i.getHostGeoModel(),n=r?"o"+r.id:"i"+i.getMapType();(t[n]=t[n]||[]).push(i)}),_(t,function(i,r){for(var n=W9(z(i,function(s){return s.getData()}),i[0].get("mapValueCalculation")),o=0;o<i.length;o++)i[o].originalData=i[o].getData();for(var o=0;o<i.length;o++)i[o].seriesGroup=i,i[o].needsDrawMap=o===0&&!i[o].getHostGeoModel(),i[o].setData(n.cloneShallow()),i[o].mainSeries=i[0]})}function $9(e){var t={};e.eachSeriesByType("map",function(i){var r=i.getMapType();if(!(i.getHostGeoModel()||t[r])){var n={};_(i.seriesGroup,function(s){var a=s.coordinateSystem,l=s.originalData;s.get("showLegendSymbol")&&e.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,h){var c=l.getName(h),d=a.getRegion(c);if(!(!d||isNaN(u))){var f=n[c]||0,p=a.dataToPoint(d.getCenter());n[c]=f+1,l.setItemLayout(h,{point:p,offset:f})}})});var o=i.getData();o.each(function(s){var a=o.getName(s),l=o.getItemLayout(s)||{};l.showLabel=!n[a],o.setItemLayout(s,l)}),t[r]=!0}})}var GD=_t,Ih=function(e){L(t,e);function t(i){var r=e.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new Yr,r._rawTransformable=new Yr,r.name=i,r}return t.prototype.setBoundingRect=function(i,r,n,o){return this._rect=new ve(i,r,n,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(i,r,n,o){this._transformTo(i,r,n,o),this._viewRect=new ve(i,r,n,o)},t.prototype._transformTo=function(i,r,n,o){var s=this.getBoundingRect(),a=this._rawTransformable;a.transform=s.calculateTransform(new ve(i,r,n,o));var l=a.parent;a.parent=null,a.decomposeTransform(),a.parent=l,this._updateTransform()},t.prototype.setCenter=function(i,r){i&&(this._center=[K(i[0],r.getWidth()),K(i[1],r.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(i){i=i||1;var r=this.zoomLimit;r&&(r.max!=null&&(i=Math.min(r.max,i)),r.min!=null&&(i=Math.max(r.min,i))),this._zoom=i,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var i=this.getBoundingRect(),r=i.x+i.width/2,n=i.y+i.height/2;return[r,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var i=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,n=this.getDefaultCenter(),o=this.getCenter(),s=this.getZoom();o=_t([],o,i),n=_t([],n,i),r.originX=o[0],r.originY=o[1],r.x=n[0]-o[0],r.y=n[1]-o[1],r.scaleX=r.scaleY=s,this._updateTransform()},t.prototype._updateTransform=function(){var i=this._roamTransformable,r=this._rawTransformable;r.parent=i,i.updateTransform(),r.updateTransform(),lS(this.transform||(this.transform=[]),r.transform||Ci()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Ja(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var i=this._rawTransformable,r=this._roamTransformable,n=new Yr;return n.transform=r.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var i=this.getBoundingRect().clone();return i.applyTransform(this.transform),i},t.prototype.dataToPoint=function(i,r,n){var o=r?this._rawTransform:this.transform;return n=n||[],o?GD(n,i,o):Ht(n,i)},t.prototype.pointToData=function(i){var r=this.invTransform;return r?GD([],i,r):[i[0],i[1]]},t.prototype.convertToPixel=function(i,r,n){var o=ND(r);return o===this?o.dataToPoint(n):null},t.prototype.convertFromPixel=function(i,r,n){var o=ND(r);return o===this?o.pointToData(n):null},t.prototype.containPoint=function(i){return this.getViewRectAfterRoam().contain(i[0],i[1])},t.dimensions=["x","y"],t}(Yr);function ND(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var K9={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},yL=["lng","lat"],Ny=function(e){L(t,e);function t(i,r,n){var o=e.call(this,i)||this;o.dimensions=yL,o.type="geo",o._nameCoordMap=Q(),o.map=r;var s=n.projection,a=cn.load(r,n.nameMap,n.nameProperty),l=cn.getGeoResource(r);o.resourceType=l?l.type:null;var u=o.regions=a.regions,h=K9[l.type];o._regionsMap=a.regionsMap,o.regions=a.regions,o.projection=s;var c;if(s)for(var d=0;d<u.length;d++){var f=u[d].getBoundingRect(s);c=c||f.clone(),c.union(f)}else c=a.boundingRect;return o.setBoundingRect(c.x,c.y,c.width,c.height),o.aspectScale=s?1:de(n.aspectScale,h.aspectScale),o._invertLongitute=s?!1:h.invertLongitute,o}return t.prototype._transformTo=function(i,r,n,o){var s=this.getBoundingRect(),a=this._invertLongitute;s=s.clone(),a&&(s.y=-s.y-s.height);var l=this._rawTransformable;l.transform=s.calculateTransform(new ve(i,r,n,o));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,a&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(i){return this._regionsMap.get(i)},t.prototype.getRegionByCoord=function(i){for(var r=this.regions,n=0;n<r.length;n++){var o=r[n];if(o.type==="geoJSON"&&o.contain(i))return r[n]}},t.prototype.addGeoCoord=function(i,r){this._nameCoordMap.set(i,r)},t.prototype.getGeoCoord=function(i){var r=this._regionsMap.get(i);return this._nameCoordMap.get(i)||r&&r.getCenter()},t.prototype.dataToPoint=function(i,r,n){if(q(i)&&(i=this.getGeoCoord(i)),i){var o=this.projection;return o&&(i=o.project(i)),i&&this.projectedToPoint(i,r,n)}},t.prototype.pointToData=function(i){var r=this.projection;return r&&(i=r.unproject(i)),i&&this.pointToProjected(i)},t.prototype.pointToProjected=function(i){return e.prototype.pointToData.call(this,i)},t.prototype.projectedToPoint=function(i,r,n){return e.prototype.dataToPoint.call(this,i,r,n)},t.prototype.convertToPixel=function(i,r,n){var o=VD(r);return o===this?o.dataToPoint(n):null},t.prototype.convertFromPixel=function(i,r,n){var o=VD(r);return o===this?o.pointToData(n):null},t}(Ih);dt(Ny,Ih);function VD(e){var t=e.geoModel,i=e.seriesModel;return t?t.coordinateSystem:i?i.coordinateSystem||(i.getReferringComponents("geo",ht).models[0]||{}).coordinateSystem:null}function BD(e,t){var i=e.get("boundingCoords");if(i!=null){var r=i[0],n=i[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(n[0])&&isFinite(n[1])){var o=this.projection;if(o){var s=r[0],a=r[1],l=n[0],u=n[1];r=[1/0,1/0],n=[-1/0,-1/0];var h=function(w,x,R,D){for(var T=R-w,A=D-x,P=0;P<=100;P++){var M=P/100,F=o.project([w+T*M,x+A*M]);Gn(r,r,F),Nn(n,n,F)}};h(s,a,l,a),h(l,a,l,u),h(l,u,s,u),h(s,u,l,a)}this.setBoundingRect(r[0],r[1],n[0]-r[0],n[1]-r[1])}}var c=this.getBoundingRect(),d=e.get("layoutCenter"),f=e.get("layoutSize"),p=t.getWidth(),g=t.getHeight(),v=c.width/c.height*this.aspectScale,m=!1,y,C;d&&f&&(y=[K(d[0],p),K(d[1],g)],C=K(f,Math.min(p,g)),!isNaN(y[0])&&!isNaN(y[1])&&!isNaN(C)&&(m=!0));var S;if(m)S={},v>1?(S.width=C,S.height=C/v):(S.height=C,S.width=C*v),S.y=y[1]-S.height/2,S.x=y[0]-S.width/2;else{var b=e.getBoxLayoutParams();b.aspect=v,S=pt(b,{width:p,height:g})}this.setViewRect(S.x,S.y,S.width,S.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}function Y9(e,t){_(t.get("geoCoord"),function(i,r){e.addGeoCoord(r,i)})}var X9=function(){function e(){this.dimensions=yL}return e.prototype.create=function(t,i){var r=[];function n(s){return{nameProperty:s.get("nameProperty"),aspectScale:s.get("aspectScale"),projection:s.get("projection")}}t.eachComponent("geo",function(s,a){var l=s.get("map"),u=new Ny(l+a,l,V({nameMap:s.get("nameMap")},n(s)));u.zoomLimit=s.get("scaleLimit"),r.push(u),s.coordinateSystem=u,u.model=s,u.resize=BD,u.resize(s,i)}),t.eachSeries(function(s){var a=s.get("coordinateSystem");if(a==="geo"){var l=s.get("geoIndex")||0;s.coordinateSystem=r[l]}});var o={};return t.eachSeriesByType("map",function(s){if(!s.getHostGeoModel()){var a=s.getMapType();o[a]=o[a]||[],o[a].push(s)}}),_(o,function(s,a){var l=z(s,function(h){return h.get("nameMap")}),u=new Ny(a,a,V({nameMap:nS(l)},n(s[0])));u.zoomLimit=xt.apply(null,z(s,function(h){return h.get("scaleLimit")})),r.push(u),u.resize=BD,u.resize(s[0],i),_(s,function(h){h.coordinateSystem=u,Y9(u,h)})}),r},e.prototype.getFilledRegions=function(t,i,r,n){for(var o=(t||[]).slice(),s=Q(),a=0;a<o.length;a++)s.set(o[a].name,o[a]);var l=cn.load(i,r,n);return _(l.regions,function(u){var h=u.name,c=s.get(h),d=u.properties&&u.properties.echartsStyle;c||(c={name:h},o.push(c)),d&&pe(c,d)}),o},e}(),CL=new X9,q9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i,r,n){var o=cn.getGeoResource(i.map);if(o&&o.type==="geoJSON"){var s=i.itemStyle=i.itemStyle||{};"color"in s||(s.color="#eee")}this.mergeDefaultAndTheme(i,n),bs(i,"label",["show"])},t.prototype.optionUpdated=function(){var i=this,r=this.option;r.regions=CL.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var n={};this._optionModelMap=Er(r.regions||[],function(o,s){var a=s.name;return a&&(o.set(a,new Ne(s,i,i.ecModel)),s.selected&&(n[a]=!0)),o},Q()),r.selectedMap||(r.selectedMap=n)},t.prototype.getRegionModel=function(i){return this._optionModelMap.get(i)||new Ne(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(i,r){var n=this.getRegionModel(i),o=r==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),s={name:i};if(ie(o))return s.status=r,o(s);if(q(o))return o.replace("{a}",i??"")},t.prototype.setZoom=function(i){this.option.zoom=i},t.prototype.setCenter=function(i){this.option.center=i},t.prototype.select=function(i){var r=this.option,n=r.selectedMode;if(n){n!=="multiple"&&(r.selectedMap=null);var o=r.selectedMap||(r.selectedMap={});o[i]=!0}},t.prototype.unSelect=function(i){var r=this.option.selectedMap;r&&(r[i]=!1)},t.prototype.toggleSelected=function(i){this[this.isSelected(i)?"unSelect":"select"](i)},t.prototype.isSelected=function(i){var r=this.option.selectedMap;return!!(r&&r[i])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(Re);function HD(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function mw(e,t,i,r){var n=e.getZoom(),o=e.getCenter(),s=t.zoom,a=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(a[0]-=t.dx,a[1]-=t.dy,e.setCenter(HD(e,a),r)),s!=null){if(i){var l=i.min||0,u=i.max||1/0;s=Math.max(Math.min(n*s,u),l)/n}e.scaleX*=s,e.scaleY*=s;var h=(t.originX-e.x)*(s-1),c=(t.originY-e.y)*(s-1);e.x-=h,e.y-=c,e.updateTransform(),e.setCenter(HD(e,a),r),e.setZoom(s*n)}return{center:e.getCenter(),zoom:e.getZoom()}}var Z9=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.focusBlurEnabled=!0,i}return t.prototype.init=function(i,r){this._api=r},t.prototype.render=function(i,r,n,o){if(this._model=i,!i.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new mL(n));var s=this._mapDraw;s.draw(i,r,n,this,o),s.group.on("click",this._handleRegionClick,this),s.group.silent=i.get("silent"),this.group.add(s.group),this.updateSelectStatus(i,r,n)},t.prototype._handleRegionClick=function(i){var r;is(i.target,function(n){return(r=ue(n).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},t.prototype.updateSelectStatus=function(i,r,n){var o=this;this._mapDraw.group.traverse(function(s){var a=ue(s).eventData;if(a)return o._model.isSelected(a.name)?n.enterSelect(s):n.leaveSelect(s),!0})},t.prototype.findHighDownDispatchers=function(i){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(i,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(Qe);function j9(e,t,i){cn.registerMap(e,t,i)}function SL(e){e.registerCoordinateSystem("geo",CL),e.registerComponentModel(q9),e.registerComponentView(Z9),e.registerImpl("registerMap",j9),e.registerImpl("getMap",function(i){return cn.getMapForUser(i)});function t(i,r){r.update="geo:updateSelectStatus",e.registerAction(r,function(n,o){var s={},a=[];return o.eachComponent({mainType:"geo",query:n},function(l){l[i](n.name);var u=l.coordinateSystem;_(u.regions,function(c){s[c.name]=l.isSelected(c.name)||!1});var h=[];_(s,function(c,d){s[d]&&h.push(d)}),a.push({geoIndex:l.componentIndex,name:h})}),{selected:s,allSelected:a,name:n.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(i,r,n){var o=i.componentType||"series";r.eachComponent({mainType:o,query:i},function(s){var a=s.coordinateSystem;if(a.type==="geo"){var l=mw(a,i,s.get("scaleLimit"),n);s.setCenter&&s.setCenter(l.center),s.setZoom&&s.setZoom(l.zoom),o==="series"&&_(s.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function Q9(e){we(SL),e.registerChartView(H9),e.registerSeriesModel(z9),e.registerLayout($9),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,U9),bE("map",e.registerAction)}function J9(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var i=[t],r,n;r=i.pop();)if(n=r.children,r.isExpand&&n.length)for(var o=n.length,s=o-1;s>=0;s--){var a=n[s];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:s,thread:null},i.push(a)}}function ej(e,t){var i=e.isExpand?e.children:[],r=e.parentNode.children,n=e.hierNode.i?r[e.hierNode.i-1]:null;if(i.length){rj(e);var o=(i[0].hierNode.prelim+i[i.length-1].hierNode.prelim)/2;n?(e.hierNode.prelim=n.hierNode.prelim+t(e,n),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else n&&(e.hierNode.prelim=n.hierNode.prelim+t(e,n));e.parentNode.hierNode.defaultAncestor=nj(e,n,e.parentNode.hierNode.defaultAncestor||r[0],t)}function tj(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function zD(e){return arguments.length?e:aj}function iu(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function ij(e,t){return pt(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function rj(e){for(var t=e.children,i=t.length,r=0,n=0;--i>=0;){var o=t[i];o.hierNode.prelim+=r,o.hierNode.modifier+=r,n+=o.hierNode.change,r+=o.hierNode.shift+n}}function nj(e,t,i,r){if(t){for(var n=e,o=e,s=o.parentNode.children[0],a=t,l=n.hierNode.modifier,u=o.hierNode.modifier,h=s.hierNode.modifier,c=a.hierNode.modifier;a=hv(a),o=cv(o),a&&o;){n=hv(n),s=cv(s),n.hierNode.ancestor=e;var d=a.hierNode.prelim+c-o.hierNode.prelim-u+r(a,o);d>0&&(sj(oj(a,e,i),e,d),u+=d,l+=d),c+=a.hierNode.modifier,u+=o.hierNode.modifier,l+=n.hierNode.modifier,h+=s.hierNode.modifier}a&&!hv(n)&&(n.hierNode.thread=a,n.hierNode.modifier+=c-l),o&&!cv(s)&&(s.hierNode.thread=o,s.hierNode.modifier+=u-h,i=e)}return i}function hv(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function cv(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function oj(e,t,i){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:i}function sj(e,t,i){var r=i/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=i,t.hierNode.modifier+=i,t.hierNode.prelim+=i,e.hierNode.change+=r}function aj(e,t){return e.parentNode===t.parentNode?1:2}var lj=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),uj=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new lj},t.prototype.buildPath=function(i,r){var n=r.childPoints,o=n.length,s=r.parentPoint,a=n[0],l=n[o-1];if(o===1){i.moveTo(s[0],s[1]),i.lineTo(a[0],a[1]);return}var u=r.orient,h=u==="TB"||u==="BT"?0:1,c=1-h,d=K(r.forkPosition,1),f=[];f[h]=s[h],f[c]=s[c]+(l[c]-s[c])*d,i.moveTo(s[0],s[1]),i.lineTo(f[0],f[1]),i.moveTo(a[0],a[1]),f[h]=a[h],i.lineTo(f[0],f[1]),f[h]=l[h],i.lineTo(f[0],f[1]),i.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var g=n[p];i.moveTo(g[0],g[1]),f[h]=g[h],i.lineTo(f[0],f[1])}},t}(be),hj=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._mainGroup=new le,i}return t.prototype.init=function(i,r){this._controller=new Eh(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(i,r,n){var o=i.getData(),s=i.layoutInfo,a=this._mainGroup,l=i.get("layout");l==="radial"?(a.x=s.x+s.width/2,a.y=s.y+s.height/2):(a.x=s.x,a.y=s.y),this._updateViewCoordSys(i,n),this._updateController(i,r,n);var u=this._data;o.diff(u).add(function(h){WD(o,h)&&UD(o,h,null,a,i)}).update(function(h,c){var d=u.getItemGraphicEl(c);if(!WD(o,h)){d&&KD(u,c,d,a,i);return}UD(o,h,d,a,i)}).remove(function(h){var c=u.getItemGraphicEl(h);c&&KD(u,h,c,a,i)}).execute(),this._nodeScaleRatio=i.get("nodeScaleRatio"),this._updateNodeAndLinkScale(i),i.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(h,c){h.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:i.id,dataIndex:c})})}),this._data=o},t.prototype._updateViewCoordSys=function(i,r){var n=i.getData(),o=[];n.each(function(c){var d=n.getItemLayout(c);d&&!isNaN(d.x)&&!isNaN(d.y)&&o.push([+d.x,+d.y])});var s=[],a=[];Wf(o,s,a);var l=this._min,u=this._max;a[0]-s[0]===0&&(s[0]=l?l[0]:s[0]-1,a[0]=u?u[0]:a[0]+1),a[1]-s[1]===0&&(s[1]=l?l[1]:s[1]-1,a[1]=u?u[1]:a[1]+1);var h=i.coordinateSystem=new Ih;h.zoomLimit=i.get("scaleLimit"),h.setBoundingRect(s[0],s[1],a[0]-s[0],a[1]-s[1]),h.setCenter(i.get("center"),r),h.setZoom(i.get("zoom")),this.group.attr({x:h.x,y:h.y,scaleX:h.scaleX,scaleY:h.scaleY}),this._min=s,this._max=a},t.prototype._updateController=function(i,r,n){var o=this,s=this._controller,a=this._controllerHost,l=this.group;s.setPointerChecker(function(u,h,c){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(h,c)&&!fp(u,n,i)}),s.enable(i.get("roam")),a.zoomLimit=i.get("scaleLimit"),a.zoom=i.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(u){pw(a,u.dx,u.dy),n.dispatchAction({seriesId:i.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){gw(a,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:i.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(i),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(i){var r=i.getData(),n=this._getNodeGlobalScale(i);r.eachItemGraphicEl(function(o,s){o.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(i){var r=i.coordinateSystem;if(r.type!=="view")return 1;var n=this._nodeScaleRatio,o=r.scaleX||1,s=r.getZoom(),a=(s-1)*n+1;return a/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(We);function WD(e,t){var i=e.getItemLayout(t);return i&&!isNaN(i.x)&&!isNaN(i.y)}function UD(e,t,i,r,n){var o=!i,s=e.tree.getNodeByDataIndex(t),a=s.getModel(),l=s.getVisual("style").fill,u=s.isExpand===!1&&s.children.length!==0?l:"#fff",h=e.tree.root,c=s.parentNode===h?s:s.parentNode||s,d=e.getItemGraphicEl(c.dataIndex),f=c.getLayout(),p=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:f,g=s.getLayout();o?(i=new Th(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),i.x=p.x,i.y=p.y):i.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),i.__radialOldRawX=i.__radialRawX,i.__radialOldRawY=i.__radialRawY,i.__radialRawX=g.rawX,i.__radialRawY=g.rawY,r.add(i),e.setItemGraphicEl(t,i),i.__oldX=i.x,i.__oldY=i.y,Me(i,{x:g.x,y:g.y},n);var v=i.getSymbolPath();if(n.get("layout")==="radial"){var m=h.children[0],y=m.getLayout(),C=m.children.length,S=void 0,b=void 0;if(g.x===y.x&&s.isExpand===!0&&m.children.length){var w={x:(m.children[0].getLayout().x+m.children[C-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[C-1].getLayout().y)/2};S=Math.atan2(w.y-y.y,w.x-y.x),S<0&&(S=Math.PI*2+S),b=w.x<y.x,b&&(S=S-Math.PI)}else S=Math.atan2(g.y-y.y,g.x-y.x),S<0&&(S=Math.PI*2+S),s.children.length===0||s.children.length!==0&&s.isExpand===!1?(b=g.x<y.x,b&&(S=S-Math.PI)):(b=g.x>y.x,b||(S=S-Math.PI));var x=b?"left":"right",R=a.getModel("label"),D=R.get("rotate"),T=D*(Math.PI/180),A=v.getTextContent();A&&(v.setTextConfig({position:R.get("position")||x,rotation:D==null?-S:T,origin:"center"}),A.setStyle("verticalAlign","middle"))}var P=a.get(["emphasis","focus"]),M=P==="relative"?ku(s.getAncestorsIndices(),s.getDescendantIndices()):P==="ancestor"?s.getAncestorsIndices():P==="descendant"?s.getDescendantIndices():null;M&&(ue(i).focus=M),cj(n,s,h,i,p,f,g,r),i.__edge&&(i.onHoverStateChange=function(F){if(F!=="blur"){var E=s.parentNode&&e.getItemGraphicEl(s.parentNode.dataIndex);E&&E.hoverState===vh||Bd(i.__edge,F)}})}function cj(e,t,i,r,n,o,s,a){var l=t.getModel(),u=e.get("edgeShape"),h=e.get("layout"),c=e.getOrient(),d=e.get(["lineStyle","curveness"]),f=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),g=r.__edge;if(u==="curve")t.parentNode&&t.parentNode!==i&&(g||(g=r.__edge=new yh({shape:Vy(h,c,d,n,n)})),Me(g,{shape:Vy(h,c,d,o,s)},e));else if(u==="polyline"&&h==="orthogonal"&&t!==i&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var v=t.children,m=[],y=0;y<v.length;y++){var C=v[y].getLayout();m.push([C.x,C.y])}g||(g=r.__edge=new uj({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:c,forkPosition:f}})),Me(g,{shape:{parentPoint:[s.x,s.y],childPoints:m}},e)}g&&!(u==="polyline"&&!t.isExpand)&&(g.useStyle(ne({strokeNoScale:!0,fill:null},p)),At(g,l,"lineStyle"),Ds(g),a.add(g))}function $D(e,t,i,r,n){var o=t.tree.root,s=wL(o,e),a=s.source,l=s.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(u){var h=t.getItemGraphicEl(a.dataIndex),c=h.__edge,d=u.__edge||(a.isExpand===!1||a.children.length===1?c:void 0),f=r.get("edgeShape"),p=r.get("layout"),g=r.get("orient"),v=r.get(["lineStyle","curveness"]);d&&(f==="curve"?io(d,{shape:Vy(p,g,v,l,l),style:{opacity:0}},r,{cb:function(){i.remove(d)},removeOpt:n}):f==="polyline"&&r.get("layout")==="orthogonal"&&io(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){i.remove(d)},removeOpt:n}))}}function wL(e,t){for(var i=t.parentNode===e?t:t.parentNode||t,r;r=i.getLayout(),r==null;)i=i.parentNode===e?i:i.parentNode||i;return{source:i,sourceLayout:r}}function KD(e,t,i,r,n){var o=e.tree.getNodeByDataIndex(t),s=e.tree.root,a=wL(s,o).sourceLayout,l={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};io(i,{x:a.x+1,y:a.y+1},n,{cb:function(){r.remove(i),e.setItemGraphicEl(t,null)},removeOpt:l}),i.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){$D(u,e,r,n,l)}),$D(o,e,r,n,l)}function Vy(e,t,i,r,n){var o,s,a,l,u,h,c,d;if(e==="radial"){u=r.rawX,c=r.rawY,h=n.rawX,d=n.rawY;var f=iu(u,c),p=iu(u,c+(d-c)*i),g=iu(h,d+(c-d)*i),v=iu(h,d);return{x1:f.x||0,y1:f.y||0,x2:v.x||0,y2:v.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:g.x||0,cpy2:g.y||0}}else u=r.x,c=r.y,h=n.x,d=n.y,(t==="LR"||t==="RL")&&(o=u+(h-u)*i,s=c,a=h+(u-h)*i,l=d),(t==="TB"||t==="BT")&&(o=u,s=c+(d-c)*i,a=h,l=d+(c-d)*i);return{x1:u,y1:c,x2:h,y2:d,cpx1:o,cpy1:s,cpx2:a,cpy2:l}}var Hi=_e();function bL(e){var t=e.mainData,i=e.datas;i||(i={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,xL(t,i,e),_(i,function(r){_(t.TRANSFERABLE_METHODS,function(n){r.wrapMethod(n,fe(dj,e))})}),t.wrapMethod("cloneShallow",fe(pj,e)),_(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,fe(fj,e))}),jt(i[t.dataType]===t)}function dj(e,t){if(mj(this)){var i=V({},Hi(this).datas);i[this.dataType]=t,xL(t,i,e)}else yw(t,this.dataType,Hi(this).mainData,e);return t}function fj(e,t){return e.struct&&e.struct.update(),t}function pj(e,t){return _(Hi(t).datas,function(i,r){i!==t&&yw(i.cloneShallow(),r,t,e)}),t}function gj(e){var t=Hi(this).mainData;return e==null||t==null?t:Hi(t).datas[e]}function vj(){var e=Hi(this).mainData;return e==null?[{data:e}]:z(De(Hi(e).datas),function(t){return{type:t,data:Hi(e).datas[t]}})}function mj(e){return Hi(e).mainData===e}function xL(e,t,i){Hi(e).datas={},_(t,function(r,n){yw(r,n,e,i)})}function yw(e,t,i,r){Hi(i).datas[t]=e,Hi(e).mainData=i,e.dataType=t,r.struct&&(e[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=e),e.getLinkedData=gj,e.getLinkedDataAll=vj}var yj=function(){function e(t,i){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=i}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,i,r){ie(t)&&(r=i,i=t,t=null),t=t||{},q(t)&&(t={order:t});var n=t.order||"preorder",o=this[t.attr||"children"],s;n==="preorder"&&(s=i.call(r,this));for(var a=0;!s&&a<o.length;a++)o[a].eachNode(t,i,r);n==="postorder"&&i.call(r,this)},e.prototype.updateDepthAndHeight=function(t){var i=0;this.depth=t;for(var r=0;r<this.children.length;r++){var n=this.children[r];n.updateDepthAndHeight(t+1),n.height>i&&(i=n.height)}this.height=i+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var i=0,r=this.children,n=r.length;i<n;i++){var o=r[i].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var i=0,r=this.children,n=r.length;i<n;i++){var o=r[i].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var i=[],r=t?this:this.parentNode;r;)i.push(r),r=r.parentNode;return i.reverse(),i},e.prototype.getAncestorsIndices=function(){for(var t=[],i=this;i;)t.push(i.dataIndex),i=i.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(i){t.push(i.dataIndex)}),t},e.prototype.getValue=function(t){var i=this.hostTree.data;return i.getStore().get(i.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,i){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,i)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var i=this.hostTree,r=i.data.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,i){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,i)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,i=0;i<t.length;++i)if(t[i]===this)return i;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var i=t.parentNode;i;){if(i===this)return!0;i=i.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),Cw=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,i,r){this.root.eachNode(t,i,r)},e.prototype.getNodeByDataIndex=function(t){var i=this.data.getRawIndex(t);return this._nodes[i]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,i=this._nodes,r=0,n=i.length;r<n;r++)i[r].dataIndex=-1;for(var r=0,n=t.count();r<n;r++)i[t.getRawIndex(r)].dataIndex=r},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,i,r){var n=new e(i),o=[],s=1;a(t);function a(h,c){var d=h.value;s=Math.max(s,H(d)?d.length:1),o.push(h);var f=new yj(ft(h.name,""),n);c?Cj(f,c):n.root=f,n._nodes.push(f);var p=h.children;if(p)for(var g=0;g<p.length;g++)a(p[g],f)}n.root.updateDepthAndHeight(0);var l=Rh(o,{coordDimensions:["value"],dimensionsCount:s}).dimensions,u=new qt(l,i);return u.initData(o),r&&r(u),bL({mainData:u,struct:n,structAttr:"tree"}),n.update(),n},e}();function Cj(e,t){var i=t.children;e.parentNode!==t&&(i.push(e),e.parentNode=t)}function th(e,t,i){if(e&&Ce(t,e.type)>=0){var r=i.getData().tree.root,n=e.targetNode;if(q(n)&&(n=r.getNodeById(n)),n&&r.contains(n))return{node:n};var o=e.targetNodeId;if(o!=null&&(n=r.getNodeById(o)))return{node:n}}}function RL(e){for(var t=[];e;)e=e.parentNode,e&&t.push(e);return t.reverse()}function Sw(e,t){var i=RL(e);return Ce(i,t)>=0}function gp(e,t){for(var i=[];e;){var r=e.dataIndex;i.push({name:e.name,dataIndex:r,value:t.getRawValue(r)}),e=e.parentNode}return i.reverse(),i}var Sj=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.hasSymbolVisual=!0,i.ignoreStyleOnData=!0,i}return t.prototype.getInitialData=function(i){var r={name:i.name,children:i.data},n=i.leaves||{},o=new Ne(n,this,this.ecModel),s=Cw.createTree(r,this,a);function a(c){c.wrapMethod("getItemModel",function(d,f){var p=s.getNodeByDataIndex(f);return p&&p.children.length&&p.isExpand||(d.parentModel=o),d})}var l=0;s.eachNode("preorder",function(c){c.depth>l&&(l=c.depth)});var u=i.expandAndCollapse,h=u&&i.initialTreeDepth>=0?i.initialTreeDepth:l;return s.root.eachNode("preorder",function(c){var d=c.hostTree.data.getRawDataItem(c.dataIndex);c.isExpand=d&&d.collapsed!=null?!d.collapsed:c.depth<=h}),s.data},t.prototype.getOrient=function(){var i=this.get("orient");return i==="horizontal"?i="LR":i==="vertical"&&(i="TB"),i},t.prototype.setZoom=function(i){this.option.zoom=i},t.prototype.setCenter=function(i){this.option.center=i},t.prototype.formatTooltip=function(i,r,n){for(var o=this.getData().tree,s=o.root.children[0],a=o.getNodeByDataIndex(i),l=a.getValue(),u=a.name;a&&a!==s;)u=a.parentNode.name+"."+u,a=a.parentNode;return wt("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(i){var r=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(i);return r.treeAncestors=gp(n,this),r.collapsed=!n.isExpand,r},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(qe);function wj(e,t,i){for(var r=[e],n=[],o;o=r.pop();)if(n.push(o),o.isExpand){var s=o.children;if(s.length)for(var a=0;a<s.length;a++)r.push(s[a])}for(;o=n.pop();)t(o,i)}function Nl(e,t){for(var i=[e],r;r=i.pop();)if(t(r),r.isExpand){var n=r.children;if(n.length)for(var o=n.length-1;o>=0;o--)i.push(n[o])}}function bj(e,t){e.eachSeriesByType("tree",function(i){xj(i,t)})}function xj(e,t){var i=ij(e,t);e.layoutInfo=i;var r=e.get("layout"),n=0,o=0,s=null;r==="radial"?(n=2*Math.PI,o=Math.min(i.height,i.width)/2,s=zD(function(C,S){return(C.parentNode===S.parentNode?1:2)/C.depth})):(n=i.width,o=i.height,s=zD());var a=e.getData().tree.root,l=a.children[0];if(l){J9(a),wj(l,ej,s),a.hierNode.modifier=-l.hierNode.prelim,Nl(l,tj);var u=l,h=l,c=l;Nl(l,function(C){var S=C.getLayout().x;S<u.getLayout().x&&(u=C),S>h.getLayout().x&&(h=C),C.depth>c.depth&&(c=C)});var d=u===h?1:s(u,h)/2,f=d-u.getLayout().x,p=0,g=0,v=0,m=0;if(r==="radial")p=n/(h.getLayout().x+d+f),g=o/(c.depth-1||1),Nl(l,function(C){v=(C.getLayout().x+f)*p,m=(C.depth-1)*g;var S=iu(v,m);C.setLayout({x:S.x,y:S.y,rawX:v,rawY:m},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(g=o/(h.getLayout().x+d+f),p=n/(c.depth-1||1),Nl(l,function(C){m=(C.getLayout().x+f)*g,v=y==="LR"?(C.depth-1)*p:n-(C.depth-1)*p,C.setLayout({x:v,y:m},!0)})):(y==="TB"||y==="BT")&&(p=n/(h.getLayout().x+d+f),g=o/(c.depth-1||1),Nl(l,function(C){v=(C.getLayout().x+f)*p,m=y==="TB"?(C.depth-1)*g:o-(C.depth-1)*g,C.setLayout({x:v,y:m},!0)}))}}}function Rj(e){e.eachSeriesByType("tree",function(t){var i=t.getData(),r=i.tree;r.eachNode(function(n){var o=n.getModel(),s=o.getModel("itemStyle").getItemStyle(),a=i.ensureUniqueItemVisual(n.dataIndex,"style");V(a,s)})})}function Dj(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,i){i.eachComponent({mainType:"series",subType:"tree",query:t},function(r){var n=t.dataIndex,o=r.getData().tree,s=o.getNodeByDataIndex(n);s.isExpand=!s.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,i,r){i.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var o=n.coordinateSystem,s=mw(o,t,void 0,r);n.setCenter&&n.setCenter(s.center),n.setZoom&&n.setZoom(s.zoom)})})}function Tj(e){e.registerChartView(hj),e.registerSeriesModel(Sj),e.registerLayout(bj),e.registerVisual(Rj),Dj(e)}var YD=["treemapZoomToNode","treemapRender","treemapMove"];function _j(e){for(var t=0;t<YD.length;t++)e.registerAction({type:YD[t],update:"updateView"},at);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(i,r){r.eachComponent({mainType:"series",subType:"treemap",query:i},n);function n(o,s){var a=["treemapZoomToNode","treemapRootToNode"],l=th(i,a,o);if(l){var u=o.getViewRoot();u&&(i.direction=Sw(u,l.node)?"rollUp":"drillDown"),o.resetViewRoot(l.node)}}})}function DL(e){var t=e.getData(),i=t.tree,r={};i.eachNode(function(n){for(var o=n;o&&o.depth>1;)o=o.parentNode;var s=fy(e.ecModel,o.name||o.dataIndex+"",r);n.setVisual("decal",s)})}var Aj=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.preventUsingHoverLayer=!0,i}return t.prototype.getInitialData=function(i,r){var n={name:i.name,children:i.data};TL(n);var o=i.levels||[],s=this.designatedVisualItemStyle={},a=new Ne({itemStyle:s},this,r);o=i.levels=Pj(o,r);var l=z(o||[],function(c){return new Ne(c,a,r)},this),u=Cw.createTree(n,this,h);function h(c){c.wrapMethod("getItemModel",function(d,f){var p=u.getNodeByDataIndex(f),g=p?l[p.depth]:null;return d.parentModel=g||a,d})}return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(i,r,n){var o=this.getData(),s=this.getRawValue(i),a=o.getName(i);return wt("nameValue",{name:a,value:s})},t.prototype.getDataParams=function(i){var r=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(i);return r.treeAncestors=gp(n,this),r.treePathInfo=r.treeAncestors,r},t.prototype.setLayoutInfo=function(i){this.layoutInfo=this.layoutInfo||{},V(this.layoutInfo,i)},t.prototype.mapIdToIndex=function(i){var r=this._idIndexMap;r||(r=this._idIndexMap=Q(),this._idIndexMapCount=0);var n=r.get(i);return n==null&&r.set(i,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(i){i?this._viewRoot=i:i=this._viewRoot;var r=this.getRawData().tree.root;(!i||i!==r&&!r.contains(i))&&(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){DL(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(qe);function TL(e){var t=0;_(e.children,function(r){TL(r);var n=r.value;H(n)&&(n=n[0]),t+=n});var i=e.value;H(i)&&(i=i[0]),(i==null||isNaN(i))&&(i=t),i<0&&(i=0),H(e.value)?e.value[0]=i:e.value=i}function Pj(e,t){var i=ze(t.get("color")),r=ze(t.get(["aria","decal","decals"]));if(i){e=e||[];var n,o;_(e,function(a){var l=new Ne(a),u=l.get("color"),h=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(n=!0),(l.get(["itemStyle","decal"])||h&&h!=="none")&&(o=!0)});var s=e[0]||(e[0]={});return n||(s.color=i.slice()),!o&&r&&(s.decal=r.slice()),e}}var Mj=8,XD=8,dv=5,Fj=function(){function e(t){this.group=new le,t.add(this.group)}return e.prototype.render=function(t,i,r,n){var o=t.getModel("breadcrumb"),s=this.group;if(s.removeAll(),!(!o.get("show")||!r)){var a=o.getModel("itemStyle"),l=o.getModel("emphasis"),u=a.getModel("textStyle"),h=l.getModel(["itemStyle","textStyle"]),c={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:i.getWidth(),height:i.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,c,u),this._renderContent(t,c,a,l,u,h,n),ip(s,c.pos,c.box)}},e.prototype._prepare=function(t,i,r){for(var n=t;n;n=n.parentNode){var o=ft(n.getModel().get("name"),""),s=r.getTextRect(o),a=Math.max(s.width+Mj*2,i.emptyItemWidth);i.totalWidth+=a+XD,i.renderList.push({node:n,text:o,width:a})}},e.prototype._renderContent=function(t,i,r,n,o,s,a){for(var l=0,u=i.emptyItemWidth,h=t.get(["breadcrumb","height"]),c=BY(i.pos,i.box),d=i.totalWidth,f=i.renderList,p=n.getModel("itemStyle").getItemStyle(),g=f.length-1;g>=0;g--){var v=f[g],m=v.node,y=v.width,C=v.text;d>c.width&&(d-=y-u,y=u,C=null);var S=new ei({shape:{points:Ej(l,0,y,h,g===f.length-1,g===0)},style:ne(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new Ae({style:Xe(o,{text:C})}),textConfig:{position:"inside"},z2:tl*1e4,onclick:fe(a,m)});S.disableLabelAnimation=!0,S.getTextContent().ensureState("emphasis").style=Xe(s,{text:C}),S.ensureState("emphasis").style=p,tt(S,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(S),Ij(S,t,m),l+=y+XD}},e.prototype.remove=function(){this.group.removeAll()},e}();function Ej(e,t,i,r,n,o){var s=[[n?e:e-dv,t],[e+i,t],[e+i,t+r],[n?e:e-dv,t+r]];return!o&&s.splice(2,0,[e+i+dv,t+r/2]),!n&&s.push([e,t+r/2]),s}function Ij(e,t,i){ue(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:i&&i.dataIndex,name:i&&i.name},treePathInfo:i&&gp(i,t)}}var Lj=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(t,i,r,n,o){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:i,duration:r,delay:n,easing:o}),!0)},e.prototype.finished=function(t){return this._finishedCallback=t,this},e.prototype.start=function(){for(var t=this,i=this._storage.length,r=function(){i--,i<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,o=this._storage.length;n<o;n++){var s=this._storage[n];s.el.animateTo(s.target,{duration:s.duration,delay:s.delay,easing:s.easing,setToFinal:!0,done:r,aborted:r})}return this},e}();function kj(){return new Lj}var By=le,qD=Te,ZD=3,jD="label",QD="upperLabel",Oj=tl*10,Gj=tl*2,Nj=tl*3,Ho=Rs([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),JD=function(e){var t=Ho(e);return t.stroke=t.fill=t.lineWidth=null,t},uf=_e(),Vj=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._state="ready",i._storage=Vl(),i}return t.prototype.render=function(i,r,n,o){var s=r.findComponents({mainType:"series",subType:"treemap",query:o});if(!(Ce(s,i)<0)){this.seriesModel=i,this.api=n,this.ecModel=r;var a=["treemapZoomToNode","treemapRootToNode"],l=th(o,a,i),u=o&&o.type,h=i.layoutInfo,c=!this._oldTree,d=this._storage,f=u==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:o.direction}:null,p=this._giveContainerGroup(h),g=i.get("animation"),v=this._doRender(p,i,f);g&&!c&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(p,v,i,f):v.renderFinally(),this._resetController(n),this._renderBreadcrumb(i,n,l)}},t.prototype._giveContainerGroup=function(i){var r=this._containerGroup;return r||(r=this._containerGroup=new By,this._initEvents(r),this.group.add(r)),r.x=i.x,r.y=i.y,r},t.prototype._doRender=function(i,r,n){var o=r.getData().tree,s=this._oldTree,a=Vl(),l=Vl(),u=this._storage,h=[];function c(y,C,S,b){return Bj(r,l,u,n,a,h,y,C,S,b)}g(o.root?[o.root]:[],s&&s.root?[s.root]:[],i,o===s||!s,0);var d=v(u);if(this._oldTree=o,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,p=o.root.getLayout();p.width===f.width&&p.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:a,willDeleteEls:d,renderFinally:m};function g(y,C,S,b,w){b?(C=y,_(y,function(D,T){!D.isRemoved()&&R(T,T)})):new un(C,y,x,x).add(R).update(R).remove(fe(R,null)).execute();function x(D){return D.getId()}function R(D,T){var A=D!=null?y[D]:null,P=T!=null?C[T]:null,M=c(A,P,S,w);M&&g(A&&A.viewChildren||[],P&&P.viewChildren||[],M,b,w+1)}}function v(y){var C=Vl();return y&&_(y,function(S,b){var w=C[b];_(S,function(x){x&&(w.push(x),uf(x).willDelete=!0)})}),C}function m(){_(d,function(y){_(y,function(C){C.parent&&C.parent.remove(C)})}),_(h,function(y){y.invisible=!0,y.dirty()})}},t.prototype._doAnimation=function(i,r,n,o){var s=n.get("animationDurationUpdate"),a=n.get("animationEasing"),l=(ie(s)?0:s)||0,u=(ie(a)?null:a)||"cubicOut",h=kj();_(r.willDeleteEls,function(c,d){_(c,function(f,p){if(!f.invisible){var g=f.parent,v,m=uf(g);if(o&&o.direction==="drillDown")v=g===o.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,C=0;m.willDelete||(y=m.nodeWidth/2,C=m.nodeHeight/2),v=d==="nodeGroup"?{x:y,y:C,style:{opacity:0}}:{shape:{x:y,y:C,width:0,height:0},style:{opacity:0}}}v&&h.add(f,v,l,0,u)}})}),_(this._storage,function(c,d){_(c,function(f,p){var g=r.lastsForAnimation[d][p],v={};g&&(f instanceof le?g.oldX!=null&&(v.x=f.x,v.y=f.y,f.x=g.oldX,f.y=g.oldY):(g.oldShape&&(v.shape=V({},f.shape),f.setShape(g.oldShape)),g.fadein?(f.setStyle("opacity",0),v.style={opacity:1}):f.style.opacity!==1&&(v.style={opacity:1})),h.add(f,v,l,0,u))})},this),this._state="animating",h.finished(Z(function(){this._state="ready",r.renderFinally()},this)).start()},t.prototype._resetController=function(i){var r=this._controller,n=this._controllerHost;n||(this._controllerHost={target:this.group},n=this._controllerHost),r||(r=this._controller=new Eh(i.getZr()),r.enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),r.on("pan",Z(this._onPan,this)),r.on("zoom",Z(this._onZoom,this)));var o=new ve(0,0,i.getWidth(),i.getHeight());r.setPointerChecker(function(s,a,l){return o.contain(a,l)})},t.prototype._clearController=function(){var i=this._controller;this._controllerHost=null,i&&(i.dispose(),i=null)},t.prototype._onPan=function(i){if(this._state!=="animating"&&(Math.abs(i.dx)>ZD||Math.abs(i.dy)>ZD)){var r=this.seriesModel.getData().tree.root;if(!r)return;var n=r.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+i.dx,y:n.y+i.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(i){var r=i.originX,n=i.originY,o=i.scale;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var a=s.getLayout();if(!a)return;var l=new ve(a.x,a.y,a.width,a.height),u=null,h=this._controllerHost;u=h.zoomLimit;var c=h.zoom=h.zoom||1;if(c*=o,u){var d=u.min||0,f=u.max||1/0;c=Math.max(Math.min(f,c),d)}var p=c/h.zoom;h.zoom=c;var g=this.seriesModel.layoutInfo;r-=g.x,n-=g.y;var v=Ci();Ir(v,v,[-r,-n]),uS(v,v,[p,p]),Ir(v,v,[r,n]),l.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},t.prototype._initEvents=function(i){var r=this;i.on("click",function(n){if(r._state==="ready"){var o=r.seriesModel.get("nodeClick",!0);if(o){var s=r.findTarget(n.offsetX,n.offsetY);if(s){var a=s.node;if(a.getLayout().isLeafRoot)r._rootToNode(s);else if(o==="zoomToNode")r._zoomToNode(s);else if(o==="link"){var l=a.hostTree.data.getItemModel(a.dataIndex),u=l.get("link",!0),h=l.get("target",!0)||"blank";u&&Kd(u,h)}}}}},this)},t.prototype._renderBreadcrumb=function(i,r,n){var o=this;n||(n=i.get("leafDepth",!0)!=null?{node:i.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),n||(n={node:i.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Fj(this.group))).render(i,r,n.node,function(s){o._state!=="animating"&&(Sw(i.getViewRoot(),s)?o._rootToNode({node:s}):o._zoomToNode({node:s}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Vl(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(i){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:i.node})},t.prototype._rootToNode=function(i){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:i.node})},t.prototype.findTarget=function(i,r){var n,o=this.seriesModel.getViewRoot();return o.eachNode({attr:"viewChildren",order:"preorder"},function(s){var a=this._storage.background[s.getRawIndex()];if(a){var l=a.transformCoordToLocal(i,r),u=a.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)n={node:s,offsetX:l[0],offsetY:l[1]};else return!1}},this),n},t.type="treemap",t}(We);function Vl(){return{nodeGroup:[],background:[],content:[]}}function Bj(e,t,i,r,n,o,s,a,l,u){if(!s)return;var h=s.getLayout(),c=e.getData(),d=s.getModel();if(c.setItemGraphicEl(s.dataIndex,null),!h||!h.isInView)return;var f=h.width,p=h.height,g=h.borderWidth,v=h.invisible,m=s.getRawIndex(),y=a&&a.getRawIndex(),C=s.viewChildren,S=h.upperHeight,b=C&&C.length,w=d.getModel("itemStyle"),x=d.getModel(["emphasis","itemStyle"]),R=d.getModel(["blur","itemStyle"]),D=d.getModel(["select","itemStyle"]),T=w.get("borderRadius")||0,A=he("nodeGroup",By);if(!A)return;if(l.add(A),A.x=h.x||0,A.y=h.y||0,A.markRedraw(),uf(A).nodeWidth=f,uf(A).nodeHeight=p,h.isAboveViewRoot)return A;var P=he("background",qD,u,Gj);P&&W(A,P,b&&h.upperLabelHeight);var M=d.getModel("emphasis"),F=M.get("focus"),E=M.get("blurScope"),I=M.get("disabled"),O=F==="ancestor"?s.getAncestorsIndices():F==="descendant"?s.getDescendantIndices():F;if(b)zu(A)&&es(A,!1),P&&(es(P,!I),c.setItemGraphicEl(s.dataIndex,P),oy(P,O,E));else{var k=he("content",qD,u,Nj);k&&$(A,k),P.disableMorphing=!0,P&&zu(P)&&es(P,!1),es(A,!I),c.setItemGraphicEl(s.dataIndex,A);var G=d.getShallow("cursor");G&&k.attr("cursor",G),oy(A,O,E)}return A;function W(me,oe,Se){var ee=ue(oe);if(ee.dataIndex=s.dataIndex,ee.seriesIndex=e.seriesIndex,oe.setShape({x:0,y:0,width:f,height:p,r:T}),v)X(oe);else{oe.invisible=!1;var ce=s.getVisual("style"),Ke=ce.stroke,Ve=JD(w);Ve.fill=Ke;var Ue=Ho(x);Ue.fill=x.get("borderColor");var je=Ho(R);je.fill=R.get("borderColor");var gt=Ho(D);if(gt.fill=D.get("borderColor"),Se){var di=f-2*g;te(oe,Ke,ce.opacity,{x:g,y:0,width:di,height:S})}else oe.removeTextContent();oe.setStyle(Ve),oe.ensureState("emphasis").style=Ue,oe.ensureState("blur").style=je,oe.ensureState("select").style=gt,Ds(oe)}me.add(oe)}function $(me,oe){var Se=ue(oe);Se.dataIndex=s.dataIndex,Se.seriesIndex=e.seriesIndex;var ee=Math.max(f-2*g,0),ce=Math.max(p-2*g,0);if(oe.culling=!0,oe.setShape({x:g,y:g,width:ee,height:ce,r:T}),v)X(oe);else{oe.invisible=!1;var Ke=s.getVisual("style"),Ve=Ke.fill,Ue=JD(w);Ue.fill=Ve,Ue.decal=Ke.decal;var je=Ho(x),gt=Ho(R),di=Ho(D);te(oe,Ve,Ke.opacity,null),oe.setStyle(Ue),oe.ensureState("emphasis").style=je,oe.ensureState("blur").style=gt,oe.ensureState("select").style=di,Ds(oe)}me.add(oe)}function X(me){!me.invisible&&o.push(me)}function te(me,oe,Se,ee){var ce=d.getModel(ee?QD:jD),Ke=ft(d.get("name"),null),Ve=ce.getShallow("show");Pt(me,St(d,ee?QD:jD),{defaultText:Ve?Ke:null,inheritColor:oe,defaultOpacity:Se,labelFetcher:e,labelDataIndex:s.dataIndex});var Ue=me.getTextContent();if(Ue){var je=Ue.style,gt=sS(je.padding||0);ee&&(me.setTextConfig({layoutRect:ee}),Ue.disableLabelLayout=!0),Ue.beforeUpdate=function(){var ii=Math.max((ee?ee.width:me.shape.width)-gt[1]-gt[3],0),co=Math.max((ee?ee.height:me.shape.height)-gt[0]-gt[2],0);(je.width!==ii||je.height!==co)&&Ue.setStyle({width:ii,height:co})},je.truncateMinChar=2,je.lineOverflow="truncate",re(je,ee,h);var di=Ue.getState("emphasis");re(di?di.style:null,ee,h)}}function re(me,oe,Se){var ee=me?me.text:null;if(!oe&&Se.isLeafRoot&&ee!=null){var ce=e.get("drillDownIcon",!0);me.text=ce?ce+" "+ee:ee}}function he(me,oe,Se,ee){var ce=y!=null&&i[me][y],Ke=n[me];return ce?(i[me][y]=null,Be(Ke,ce)):v||(ce=new oe,ce instanceof zi&&(ce.z2=Hj(Se,ee)),rt(Ke,ce)),t[me][m]=ce}function Be(me,oe){var Se=me[m]={};oe instanceof By?(Se.oldX=oe.x,Se.oldY=oe.y):Se.oldShape=V({},oe.shape)}function rt(me,oe){var Se=me[m]={},ee=s.parentNode,ce=oe instanceof le;if(ee&&(!r||r.direction==="drillDown")){var Ke=0,Ve=0,Ue=n.background[ee.getRawIndex()];!r&&Ue&&Ue.oldShape&&(Ke=Ue.oldShape.width,Ve=Ue.oldShape.height),ce?(Se.oldX=0,Se.oldY=Ve):Se.oldShape={x:Ke,y:Ve,width:0,height:0}}Se.fadein=!ce}}function Hj(e,t){return e*Oj+t}var ih=_,zj=se,hf=-1,Ct=function(){function e(t){var i=t.mappingMethod,r=t.type,n=this.option=ae(t);this.type=r,this.mappingMethod=i,this._normalizeData=$j[i];var o=e.visualHandlers[r];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[i],i==="piecewise"?(fv(n),Wj(n)):i==="category"?n.categories?Uj(n):fv(n,!0):(jt(i!=="linear"||n.dataExtent),fv(n))}return e.prototype.mapValueToVisual=function(t){var i=this._normalizeData(t);return this._normalizedToVisual(i,t)},e.prototype.getNormalizer=function(){return Z(this._normalizeData,this)},e.listVisualTypes=function(){return De(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,i,r){se(t)?_(t,i,r):i.call(r,t)},e.mapVisual=function(t,i,r){var n,o=H(t)?[]:se(t)?{}:(n=!0,null);return e.eachVisual(t,function(s,a){var l=i.call(r,s,a);n?o=l:o[a]=l}),o},e.retrieveVisuals=function(t){var i={},r;return t&&ih(e.visualHandlers,function(n,o){t.hasOwnProperty(o)&&(i[o]=t[o],r=!0)}),r?i:null},e.prepareVisualTypes=function(t){if(H(t))t=t.slice();else if(zj(t)){var i=[];ih(t,function(r,n){i.push(n)}),t=i}else return[];return t.sort(function(r,n){return n==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,i){return i==="color"?!!(t&&t.indexOf(i)===0):t===i},e.findPieceIndex=function(t,i,r){for(var n,o=1/0,s=0,a=i.length;s<a;s++){var l=i[s].value;if(l!=null){if(l===t||q(l)&&l===t+"")return s;r&&d(l,s)}}for(var s=0,a=i.length;s<a;s++){var u=i[s],h=u.interval,c=u.close;if(h){if(h[0]===-1/0){if(Fc(c[1],t,h[1]))return s}else if(h[1]===1/0){if(Fc(c[0],h[0],t))return s}else if(Fc(c[0],h[0],t)&&Fc(c[1],t,h[1]))return s;r&&d(h[0],s),r&&d(h[1],s)}}if(r)return t===1/0?i.length-1:t===-1/0?0:n;function d(f,p){var g=Math.abs(f-t);g<o&&(o=g,n=p)}},e.visualHandlers={color:{applyVisual:Bl("color"),getColorMapper:function(){var t=this.option;return Z(t.mappingMethod==="category"?function(i,r){return!r&&(i=this._normalizeData(i)),ru.call(this,i)}:function(i,r,n){var o=!!n;return!r&&(i=this._normalizeData(i)),n=Yp(i,t.parsedVisual,n),o?n:en(n,"rgba")},this)},_normalizedToVisual:{linear:function(t){return en(Yp(t,this.option.parsedVisual),"rgba")},category:ru,piecewise:function(t,i){var r=zy.call(this,i);return r==null&&(r=en(Yp(t,this.option.parsedVisual),"rgba")),r},fixed:zo}},colorHue:Mc(function(t,i){return fu(t,i)}),colorSaturation:Mc(function(t,i){return fu(t,null,i)}),colorLightness:Mc(function(t,i){return fu(t,null,null,i)}),colorAlpha:Mc(function(t,i){return Ld(t,i)}),decal:{applyVisual:Bl("decal"),_normalizedToVisual:{linear:null,category:ru,piecewise:null,fixed:null}},opacity:{applyVisual:Bl("opacity"),_normalizedToVisual:Hy([0,1])},liftZ:{applyVisual:Bl("liftZ"),_normalizedToVisual:{linear:zo,category:zo,piecewise:zo,fixed:zo}},symbol:{applyVisual:function(t,i,r){var n=this.mapValueToVisual(t);r("symbol",n)},_normalizedToVisual:{linear:eT,category:ru,piecewise:function(t,i){var r=zy.call(this,i);return r==null&&(r=eT.call(this,t)),r},fixed:zo}},symbolSize:{applyVisual:Bl("symbolSize"),_normalizedToVisual:Hy([0,1])}},e}();function Wj(e){var t=e.pieceList;e.hasSpecialVisual=!1,_(t,function(i,r){i.originIndex=r,i.visual!=null&&(e.hasSpecialVisual=!0)})}function Uj(e){var t=e.categories,i=e.categoryMap={},r=e.visual;if(ih(t,function(s,a){i[s]=a}),!H(r)){var n=[];se(r)?ih(r,function(s,a){var l=i[a];n[l??hf]=s}):n[hf]=r,r=_L(e,n)}for(var o=t.length-1;o>=0;o--)r[o]==null&&(delete i[t[o]],t.pop())}function fv(e,t){var i=e.visual,r=[];se(i)?ih(i,function(o){r.push(o)}):i!=null&&r.push(i);var n={color:1,symbol:1};!t&&r.length===1&&!n.hasOwnProperty(e.type)&&(r[1]=r[0]),_L(e,r)}function Mc(e){return{applyVisual:function(t,i,r){var n=this.mapValueToVisual(t);r("color",e(i("color"),n))},_normalizedToVisual:Hy([0,1])}}function eT(e){var t=this.option.visual;return t[Math.round(Oe(e,[0,1],[0,t.length-1],!0))]||{}}function Bl(e){return function(t,i,r){r(e,this.mapValueToVisual(t))}}function ru(e){var t=this.option.visual;return t[this.option.loop&&e!==hf?e%t.length:e]}function zo(){return this.option.visual[0]}function Hy(e){return{linear:function(t){return Oe(t,e,this.option.visual,!0)},category:ru,piecewise:function(t,i){var r=zy.call(this,i);return r==null&&(r=Oe(t,e,this.option.visual,!0)),r},fixed:zo}}function zy(e){var t=this.option,i=t.pieceList;if(t.hasSpecialVisual){var r=Ct.findPieceIndex(e,i),n=i[r];if(n&&n.visual)return n.visual[this.type]}}function _L(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=z(t,function(i){var r=Si(i);return r||[0,0,0,1]})),t}var $j={linear:function(e){return Oe(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,i=Ct.findPieceIndex(e,t,!0);if(i!=null)return Oe(i,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t??hf},fixed:at};function Fc(e,t,i){return e?t<=i:t<i}var Kj="itemStyle",AL=_e();const Yj={seriesType:"treemap",reset:function(e){var t=e.getData().tree,i=t.root;i.isRemoved()||PL(i,{},e.getViewRoot().getAncestors(),e)}};function PL(e,t,i,r){var n=e.getModel(),o=e.getLayout(),s=e.hostTree.data;if(!(!o||o.invisible||!o.isInView)){var a=n.getModel(Kj),l=Xj(a,t,r),u=s.ensureUniqueItemVisual(e.dataIndex,"style"),h=a.get("borderColor"),c=a.get("borderColorSaturation"),d;c!=null&&(d=tT(l),h=qj(c,d)),u.stroke=h;var f=e.viewChildren;if(!f||!f.length)d=tT(l),u.fill=d;else{var p=Zj(e,n,o,a,l,f);_(f,function(g,v){if(g.depth>=i.length||g===i[g.depth]){var m=jj(n,l,g,v,p,r);PL(g,m,i,r)}})}}}function Xj(e,t,i){var r=V({},t),n=i.designatedVisualItemStyle;return _(["color","colorAlpha","colorSaturation"],function(o){n[o]=t[o];var s=e.get(o);n[o]=null,s!=null&&(r[o]=s)}),r}function tT(e){var t=pv(e,"color");if(t){var i=pv(e,"colorAlpha"),r=pv(e,"colorSaturation");return r&&(t=fu(t,null,null,r)),i&&(t=Ld(t,i)),t}}function qj(e,t){return t!=null?fu(t,null,null,e):null}function pv(e,t){var i=e[t];if(i!=null&&i!=="none")return i}function Zj(e,t,i,r,n,o){if(!(!o||!o.length)){var s=gv(t,"color")||n.color!=null&&n.color!=="none"&&(gv(t,"colorAlpha")||gv(t,"colorSaturation"));if(s){var a=t.get("visualMin"),l=t.get("visualMax"),u=i.dataExtent.slice();a!=null&&a<u[0]&&(u[0]=a),l!=null&&l>u[1]&&(u[1]=l);var h=t.get("colorMappingBy"),c={type:s.name,dataExtent:u,visual:s.range};c.type==="color"&&(h==="index"||h==="id")?(c.mappingMethod="category",c.loop=!0):c.mappingMethod="linear";var d=new Ct(c);return AL(d).drColorMappingBy=h,d}}}function gv(e,t){var i=e.get(t);return H(i)&&i.length?{name:t,range:i}:null}function jj(e,t,i,r,n,o){var s=V({},t);if(n){var a=n.type,l=a==="color"&&AL(n).drColorMappingBy,u=l==="index"?r:l==="id"?o.mapIdToIndex(i.getId()):i.getValue(e.get("visualDimension"));s[a]=n.mapValueToVisual(u)}return s}var rh=Math.max,cf=Math.min,iT=xt,ww=_,ML=["itemStyle","borderWidth"],Qj=["itemStyle","gapWidth"],Jj=["upperLabel","show"],eQ=["upperLabel","height"];const tQ={seriesType:"treemap",reset:function(e,t,i,r){var n=i.getWidth(),o=i.getHeight(),s=e.option,a=pt(e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}),l=s.size||[],u=K(iT(a.width,l[0]),n),h=K(iT(a.height,l[1]),o),c=r&&r.type,d=["treemapZoomToNode","treemapRootToNode"],f=th(r,d,e),p=c==="treemapRender"||c==="treemapMove"?r.rootRect:null,g=e.getViewRoot(),v=RL(g);if(c!=="treemapMove"){var m=c==="treemapZoomToNode"?aQ(e,f,g,u,h):p?[p.width,p.height]:[u,h],y=s.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var C={squareRatio:s.squareRatio,sort:y,leafDepth:s.leafDepth};g.hostTree.clearLayouts();var S={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};g.setLayout(S),FL(g,C,!1,0),S=g.getLayout(),ww(v,function(w,x){var R=(v[x+1]||g).getValue();w.setLayout(V({dataExtent:[R,R],borderWidth:0,upperHeight:0},S))})}var b=e.getData().tree.root;b.setLayout(lQ(a,p,f),!0),e.setLayoutInfo(a),EL(b,new ve(-a.x,-a.y,n,o),v,g,0)}};function FL(e,t,i,r){var n,o;if(!e.isRemoved()){var s=e.getLayout();n=s.width,o=s.height;var a=e.getModel(),l=a.get(ML),u=a.get(Qj)/2,h=IL(a),c=Math.max(l,h),d=l-u,f=c-u;e.setLayout({borderWidth:l,upperHeight:c,upperLabelHeight:h},!0),n=rh(n-2*d,0),o=rh(o-d-f,0);var p=n*o,g=iQ(e,a,p,t,i,r);if(g.length){var v={x:d,y:f,width:n,height:o},m=cf(n,o),y=1/0,C=[];C.area=0;for(var S=0,b=g.length;S<b;){var w=g[S];C.push(w),C.area+=w.getLayout().area;var x=sQ(C,m,t.squareRatio);x<=y?(S++,y=x):(C.area-=C.pop().getLayout().area,rT(C,m,v,u,!1),m=cf(v.width,v.height),C.length=C.area=0,y=1/0)}if(C.length&&rT(C,m,v,u,!0),!i){var R=a.get("childrenVisibleMin");R!=null&&p<R&&(i=!0)}for(var S=0,b=g.length;S<b;S++)FL(g[S],t,i,r+1)}}}function iQ(e,t,i,r,n,o){var s=e.children||[],a=r.sort;a!=="asc"&&a!=="desc"&&(a=null);var l=r.leafDepth!=null&&r.leafDepth<=o;if(n&&!l)return e.viewChildren=[];s=Le(s,function(f){return!f.isRemoved()}),nQ(s,a);var u=oQ(t,s,a);if(u.sum===0)return e.viewChildren=[];if(u.sum=rQ(t,i,u.sum,a,s),u.sum===0)return e.viewChildren=[];for(var h=0,c=s.length;h<c;h++){var d=s[h].getValue()/u.sum*i;s[h].setLayout({area:d})}return l&&(s.length&&e.setLayout({isLeafRoot:!0},!0),s.length=0),e.viewChildren=s,e.setLayout({dataExtent:u.dataExtent},!0),s}function rQ(e,t,i,r,n){if(!r)return i;for(var o=e.get("visibleMin"),s=n.length,a=s,l=s-1;l>=0;l--){var u=n[r==="asc"?s-l-1:l].getValue();u/i*t<o&&(a=l,i-=u)}return r==="asc"?n.splice(0,s-a):n.splice(a,s-a),i}function nQ(e,t){return t&&e.sort(function(i,r){var n=t==="asc"?i.getValue()-r.getValue():r.getValue()-i.getValue();return n===0?t==="asc"?i.dataIndex-r.dataIndex:r.dataIndex-i.dataIndex:n}),e}function oQ(e,t,i){for(var r=0,n=0,o=t.length;n<o;n++)r+=t[n].getValue();var s=e.get("visualDimension"),a;return!t||!t.length?a=[NaN,NaN]:s==="value"&&i?(a=[t[t.length-1].getValue(),t[0].getValue()],i==="asc"&&a.reverse()):(a=[1/0,-1/0],ww(t,function(l){var u=l.getValue(s);u<a[0]&&(a[0]=u),u>a[1]&&(a[1]=u)})),{sum:r,dataExtent:a}}function sQ(e,t,i){for(var r=0,n=1/0,o=0,s=void 0,a=e.length;o<a;o++)s=e[o].getLayout().area,s&&(s<n&&(n=s),s>r&&(r=s));var l=e.area*e.area,u=t*t*i;return l?rh(u*r/l,l/(u*n)):1/0}function rT(e,t,i,r,n){var o=t===i.width?0:1,s=1-o,a=["x","y"],l=["width","height"],u=i[a[o]],h=t?e.area/t:0;(n||h>i[l[s]])&&(h=i[l[s]]);for(var c=0,d=e.length;c<d;c++){var f=e[c],p={},g=h?f.getLayout().area/h:0,v=p[l[s]]=rh(h-2*r,0),m=i[a[o]]+i[l[o]]-u,y=c===d-1||m<g?m:g,C=p[l[o]]=rh(y-2*r,0);p[a[s]]=i[a[s]]+cf(r,v/2),p[a[o]]=u+cf(r,C/2),u+=y,f.setLayout(p,!0)}i[a[s]]+=h,i[l[s]]-=h}function aQ(e,t,i,r,n){var o=(t||{}).node,s=[r,n];if(!o||o===i)return s;for(var a,l=r*n,u=l*e.option.zoomToNodeRatio;a=o.parentNode;){for(var h=0,c=a.children,d=0,f=c.length;d<f;d++)h+=c[d].getValue();var p=o.getValue();if(p===0)return s;u*=h/p;var g=a.getModel(),v=g.get(ML),m=Math.max(v,IL(g));u+=4*v*v+(3*v+m)*Math.pow(u,.5),u>gb&&(u=gb),o=a}u<l&&(u=l);var y=Math.pow(u/l,.5);return[r*y,n*y]}function lQ(e,t,i){if(t)return{x:t.x,y:t.y};var r={x:0,y:0};if(!i)return r;var n=i.node,o=n.getLayout();if(!o)return r;for(var s=[o.width/2,o.height/2],a=n;a;){var l=a.getLayout();s[0]+=l.x,s[1]+=l.y,a=a.parentNode}return{x:e.width/2-s[0],y:e.height/2-s[1]}}function EL(e,t,i,r,n){var o=e.getLayout(),s=i[n],a=s&&s===e;if(!(s&&!a||n===i.length&&e!==r)){e.setLayout({isInView:!0,invisible:!a&&!t.intersect(o),isAboveViewRoot:a},!0);var l=new ve(t.x-o.x,t.y-o.y,t.width,t.height);ww(e.viewChildren||[],function(u){EL(u,l,i,r,n+1)})}}function IL(e){return e.get(Jj)?e.get(eQ):0}function uQ(e){e.registerSeriesModel(Aj),e.registerChartView(Vj),e.registerVisual(Yj),e.registerLayout(tQ),_j(e)}function hQ(e){var t=e.findComponents({mainType:"legend"});!t||!t.length||e.eachSeriesByType("graph",function(i){var r=i.getCategoriesData(),n=i.getGraph(),o=n.data,s=r.mapArray(r.getName);o.filterSelf(function(a){var l=o.getItemModel(a),u=l.getShallow("category");if(u!=null){Pe(u)&&(u=s[u]);for(var h=0;h<t.length;h++)if(!t[h].isSelected(u))return!1}return!0})})}function cQ(e){var t={};e.eachSeriesByType("graph",function(i){var r=i.getCategoriesData(),n=i.getData(),o={};r.each(function(s){var a=r.getName(s);o["ec-"+a]=s;var l=r.getItemModel(s),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=i.getColorFromPalette(a,t)),r.setItemVisual(s,"style",u);for(var h=["symbol","symbolSize","symbolKeepAspect"],c=0;c<h.length;c++){var d=l.getShallow(h[c],!0);d!=null&&r.setItemVisual(s,h[c],d)}}),r.count()&&n.each(function(s){var a=n.getItemModel(s),l=a.getShallow("category");if(l!=null){q(l)&&(l=o["ec-"+l]);var u=r.getItemVisual(l,"style"),h=n.ensureUniqueItemVisual(s,"style");V(h,u);for(var c=["symbol","symbolSize","symbolKeepAspect"],d=0;d<c.length;d++)n.setItemVisual(s,c[d],r.getItemVisual(l,c[d]))}})})}function Ec(e){return e instanceof Array||(e=[e,e]),e}function dQ(e){e.eachSeriesByType("graph",function(t){var i=t.getGraph(),r=t.getEdgeData(),n=Ec(t.get("edgeSymbol")),o=Ec(t.get("edgeSymbolSize"));r.setVisual("fromSymbol",n&&n[0]),r.setVisual("toSymbol",n&&n[1]),r.setVisual("fromSymbolSize",o&&o[0]),r.setVisual("toSymbolSize",o&&o[1]),r.setVisual("style",t.getModel("lineStyle").getLineStyle()),r.each(function(s){var a=r.getItemModel(s),l=i.getEdgeByIndex(s),u=Ec(a.getShallow("symbol",!0)),h=Ec(a.getShallow("symbolSize",!0)),c=a.getModel("lineStyle").getLineStyle(),d=r.ensureUniqueItemVisual(s,"style");switch(V(d,c),d.stroke){case"source":{var f=l.node1.getVisual("style");d.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");d.stroke=f&&f.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),h[0]&&l.setVisual("fromSymbolSize",h[0]),h[1]&&l.setVisual("toSymbolSize",h[1])})})}var Wy="-->",vp=function(e){return e.get("autoCurveness")||null},LL=function(e,t){var i=vp(e),r=20,n=[];if(Pe(i))r=i;else if(H(i)){e.__curvenessList=i;return}t>r&&(r=t);var o=r%2?r+2:r+3;n=[];for(var s=0;s<o;s++)n.push((s%2?s+1:s)/10*(s%2?-1:1));e.__curvenessList=n},nh=function(e,t,i){var r=[e.id,e.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[i.uid,r,n].join(Wy)},kL=function(e){var t=e.split(Wy);return[t[0],t[2],t[1]].join(Wy)},fQ=function(e,t){var i=nh(e.node1,e.node2,t);return t.__edgeMap[i]},pQ=function(e,t){var i=Uy(nh(e.node1,e.node2,t),t),r=Uy(nh(e.node2,e.node1,t),t);return i+r},Uy=function(e,t){var i=t.__edgeMap;return i[e]?i[e].length:0};function gQ(e){vp(e)&&(e.__curvenessList=[],e.__edgeMap={},LL(e))}function vQ(e,t,i,r){if(vp(i)){var n=nh(e,t,i),o=i.__edgeMap,s=o[kL(n)];o[n]&&!s?o[n].isForward=!0:s&&o[n]&&(s.isForward=!0,o[n].isForward=!1),o[n]=o[n]||[],o[n].push(r)}}function bw(e,t,i,r){var n=vp(t),o=H(n);if(!n)return null;var s=fQ(e,t);if(!s)return null;for(var a=-1,l=0;l<s.length;l++)if(s[l]===i){a=l;break}var u=pQ(e,t);LL(t,u),e.lineStyle=e.lineStyle||{};var h=nh(e.node1,e.node2,t),c=t.__curvenessList,d=o||u%2?0:1;if(s.isForward)return c[d+a];var f=kL(h),p=Uy(f,t),g=c[a+p+d];return r?o?n&&n[0]===0?(p+d)%2?g:-g:((p%2?0:1)+d)%2?g:-g:(p+d)%2?g:-g:c[a+p+d]}function OL(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view")){var i=e.getGraph();i.eachNode(function(r){var n=r.getModel();r.setLayout([+n.get("x"),+n.get("y")])}),xw(i,e)}}function xw(e,t){e.eachEdge(function(i,r){var n=Ar(i.getModel().get(["lineStyle","curveness"]),-bw(i,t,r,!0),0),o=Qr(i.node1.getLayout()),s=Qr(i.node2.getLayout()),a=[o,s];+n&&a.push([(o[0]+s[0])/2-(o[1]-s[1])*n,(o[1]+s[1])/2-(s[0]-o[0])*n]),i.setLayout(a)})}function mQ(e,t){e.eachSeriesByType("graph",function(i){var r=i.get("layout"),n=i.coordinateSystem;if(n&&n.type!=="view"){var o=i.getData(),s=[];_(n.dimensions,function(d){s=s.concat(o.mapDimensionsAll(d))});for(var a=0;a<o.count();a++){for(var l=[],u=!1,h=0;h<s.length;h++){var c=o.get(s[h],a);isNaN(c)||(u=!0),l.push(c)}u?o.setItemLayout(a,n.dataToPoint(l)):o.setItemLayout(a,[NaN,NaN])}xw(o.graph,i)}else(!r||r==="none")&&OL(i)})}function nu(e){var t=e.coordinateSystem;if(t.type!=="view")return 1;var i=e.option.nodeScaleRatio,r=t.scaleX,n=t.getZoom(),o=(n-1)*i+1;return o/r}function ou(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var nT=Math.PI,vv=[];function Rw(e,t,i,r){var n=e.coordinateSystem;if(!(n&&n.type!=="view")){var o=n.getBoundingRect(),s=e.getData(),a=s.graph,l=o.width/2+o.x,u=o.height/2+o.y,h=Math.min(o.width,o.height)/2,c=s.count();if(s.setLayout({cx:l,cy:u}),!!c){if(i){var d=n.pointToData(r),f=d[0],p=d[1],g=[f-l,p-u];Qa(g,g),Zc(g,g,h),i.setLayout([l+g[0],u+g[1]],!0);var v=e.get(["circular","rotateLabel"]);GL(i,v,l,u)}yQ[t](e,a,s,h,l,u,c),a.eachEdge(function(m,y){var C=Ar(m.getModel().get(["lineStyle","curveness"]),bw(m,e,y),0),S=Qr(m.node1.getLayout()),b=Qr(m.node2.getLayout()),w,x=(S[0]+b[0])/2,R=(S[1]+b[1])/2;+C&&(C*=3,w=[l*C+x*(1-C),u*C+R*(1-C)]),m.setLayout([S,b,w])})}}}var yQ={value:function(e,t,i,r,n,o,s){var a=0,l=i.getSum("value"),u=Math.PI*2/(l||s);t.eachNode(function(h){var c=h.getValue("value"),d=u*(l?c:1)/2;a+=d,h.setLayout([r*Math.cos(a)+n,r*Math.sin(a)+o]),a+=d})},symbolSize:function(e,t,i,r,n,o,s){var a=0;vv.length=s;var l=nu(e);t.eachNode(function(c){var d=ou(c);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var f=Math.asin(d/2/r);isNaN(f)&&(f=nT/2),vv[c.dataIndex]=f,a+=f*2});var u=(2*nT-a)/s/2,h=0;t.eachNode(function(c){var d=u+vv[c.dataIndex];h+=d,(!c.getLayout()||!c.getLayout().fixed)&&c.setLayout([r*Math.cos(h)+n,r*Math.sin(h)+o]),h+=d})}};function GL(e,t,i,r){var n=e.getGraphicEl();if(n){var o=e.getModel(),s=o.get(["label","rotate"])||0,a=n.getSymbolPath();if(t){var l=e.getLayout(),u=Math.atan2(l[1]-r,l[0]-i);u<0&&(u=Math.PI*2+u);var h=l[0]<i;h&&(u=u-Math.PI);var c=h?"left":"right";a.setTextConfig({rotation:-u,position:c,origin:"center"});var d=a.ensureState("emphasis");V(d.textConfig||(d.textConfig={}),{position:c})}else a.setTextConfig({rotation:s*=Math.PI/180})}}function CQ(e){e.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&Rw(t,"symbolSize")})}var ra=Mm;function SQ(e,t,i){for(var r=e,n=t,o=i.rect,s=o.width,a=o.height,l=[o.x+s/2,o.y+a/2],u=i.gravity==null?.1:i.gravity,h=0;h<r.length;h++){var c=r[h];c.p||(c.p=Is(s*(Math.random()-.5)+l[0],a*(Math.random()-.5)+l[1])),c.pp=Qr(c.p),c.edges=null}var d=i.friction==null?.6:i.friction,f=d,p,g;return{warmUp:function(){f=d*.8},setFixed:function(v){r[v].fixed=!0},setUnfixed:function(v){r[v].fixed=!1},beforeStep:function(v){p=v},afterStep:function(v){g=v},step:function(v){p&&p(r,n);for(var m=[],y=r.length,C=0;C<n.length;C++){var S=n[C];if(!S.ignoreForceLayout){var b=S.n1,w=S.n2;Qo(m,w.p,b.p);var x=Fm(m)-S.d,R=w.w/(b.w+w.w);isNaN(R)&&(R=0),Qa(m,m),!b.fixed&&ra(b.p,b.p,m,R*x*f),!w.fixed&&ra(w.p,w.p,m,-(1-R)*x*f)}}for(var C=0;C<y;C++){var D=r[C];D.fixed||(Qo(m,l,D.p),ra(D.p,D.p,m,u*f))}for(var C=0;C<y;C++)for(var b=r[C],T=C+1;T<y;T++){var w=r[T];Qo(m,w.p,b.p);var x=Fm(m);x===0&&(q3(m,Math.random()-.5,Math.random()-.5),x=1);var A=(b.rep+w.rep)/x/x;!b.fixed&&ra(b.pp,b.pp,m,A),!w.fixed&&ra(w.pp,w.pp,m,-A)}for(var P=[],C=0;C<y;C++){var D=r[C];D.fixed||(Qo(P,D.p,D.pp),ra(D.p,D.p,P,f),Ht(D.pp,D.p))}f=f*.992;var M=f<.01;g&&g(r,n,M),v&&v(M)}}}function wQ(e){e.eachSeriesByType("graph",function(t){var i=t.coordinateSystem;if(!(i&&i.type!=="view"))if(t.get("layout")==="force"){var r=t.preservedPoints||{},n=t.getGraph(),o=n.data,s=n.edgeData,a=t.getModel("force"),l=a.get("initLayout");t.preservedPoints?o.each(function(C){var S=o.getId(C);o.setItemLayout(C,r[S]||[NaN,NaN])}):!l||l==="none"?OL(t):l==="circular"&&Rw(t,"value");var u=o.getDataExtent("value"),h=s.getDataExtent("value"),c=a.get("repulsion"),d=a.get("edgeLength"),f=H(c)?c:[c,c],p=H(d)?d:[d,d];p=[p[1],p[0]];var g=o.mapArray("value",function(C,S){var b=o.getItemLayout(S),w=Oe(C,u,f);return isNaN(w)&&(w=(f[0]+f[1])/2),{w,rep:w,fixed:o.getItemModel(S).get("fixed"),p:!b||isNaN(b[0])||isNaN(b[1])?null:b}}),v=s.mapArray("value",function(C,S){var b=n.getEdgeByIndex(S),w=Oe(C,h,p);isNaN(w)&&(w=(p[0]+p[1])/2);var x=b.getModel(),R=Ar(b.getModel().get(["lineStyle","curveness"]),-bw(b,t,S,!0),0);return{n1:g[b.node1.dataIndex],n2:g[b.node2.dataIndex],d:w,curveness:R,ignoreForceLayout:x.get("ignoreForceLayout")}}),m=i.getBoundingRect(),y=SQ(g,v,{rect:m,gravity:a.get("gravity"),friction:a.get("friction")});y.beforeStep(function(C,S){for(var b=0,w=C.length;b<w;b++)C[b].fixed&&Ht(C[b].p,n.getNodeByIndex(b).getLayout())}),y.afterStep(function(C,S,b){for(var w=0,x=C.length;w<x;w++)C[w].fixed||n.getNodeByIndex(w).setLayout(C[w].p),r[o.getId(w)]=C[w].p;for(var w=0,x=S.length;w<x;w++){var R=S[w],D=n.getEdgeByIndex(w),T=R.n1.p,A=R.n2.p,P=D.getLayout();P=P?P.slice():[],P[0]=P[0]||[],P[1]=P[1]||[],Ht(P[0],T),Ht(P[1],A),+R.curveness&&(P[2]=[(T[0]+A[0])/2-(T[1]-A[1])*R.curveness,(T[1]+A[1])/2-(A[0]-T[0])*R.curveness]),D.setLayout(P)}}),t.forceLayout=y,t.preservedPoints=r,y.step()}else t.forceLayout=null})}function bQ(e,t,i){var r=V(e.getBoxLayoutParams(),{aspect:i});return pt(r,{width:t.getWidth(),height:t.getHeight()})}function xQ(e,t){var i=[];return e.eachSeriesByType("graph",function(r){var n=r.get("coordinateSystem");if(!n||n==="view"){var o=r.getData(),s=o.mapArray(function(v){var m=o.getItemModel(v);return[+m.get("x"),+m.get("y")]}),a=[],l=[];Wf(s,a,l),l[0]-a[0]===0&&(l[0]+=1,a[0]-=1),l[1]-a[1]===0&&(l[1]+=1,a[1]-=1);var u=(l[0]-a[0])/(l[1]-a[1]),h=bQ(r,t,u);isNaN(u)&&(a=[h.x,h.y],l=[h.x+h.width,h.y+h.height]);var c=l[0]-a[0],d=l[1]-a[1],f=h.width,p=h.height,g=r.coordinateSystem=new Ih;g.zoomLimit=r.get("scaleLimit"),g.setBoundingRect(a[0],a[1],c,d),g.setViewRect(h.x,h.y,f,p),g.setCenter(r.get("center"),t),g.setZoom(r.get("zoom")),i.push(g)}}),i}var oT=mt.prototype,mv=yh.prototype,NL=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(NL);function yv(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var RQ=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="ec-line",r}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new NL},t.prototype.buildPath=function(i,r){yv(r)?oT.buildPath.call(this,i,r):mv.buildPath.call(this,i,r)},t.prototype.pointAt=function(i){return yv(this.shape)?oT.pointAt.call(this,i):mv.pointAt.call(this,i)},t.prototype.tangentAt=function(i){var r=this.shape,n=yv(r)?[r.x2-r.x1,r.y2-r.y1]:mv.tangentAt.call(this,i);return Qa(n,n)},t}(be),Cv=["fromSymbol","toSymbol"];function sT(e){return"_"+e+"Type"}function aT(e,t,i){var r=t.getItemVisual(i,e);if(!r||r==="none")return r;var n=t.getItemVisual(i,e+"Size"),o=t.getItemVisual(i,e+"Rotate"),s=t.getItemVisual(i,e+"Offset"),a=t.getItemVisual(i,e+"KeepAspect"),l=hl(n),u=Gs(s||0,l);return r+l+u+(o||"")+(a||"")}function lT(e,t,i){var r=t.getItemVisual(i,e);if(!(!r||r==="none")){var n=t.getItemVisual(i,e+"Size"),o=t.getItemVisual(i,e+"Rotate"),s=t.getItemVisual(i,e+"Offset"),a=t.getItemVisual(i,e+"KeepAspect"),l=hl(n),u=Gs(s||0,l),h=ct(r,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,a);return h.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,h.name=e,h}}function DQ(e){var t=new RQ({name:"line",subPixelOptimize:!0});return $y(t.shape,e),t}function $y(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var i=t[2];i?(e.cpx1=i[0],e.cpy1=i[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Dw=function(e){L(t,e);function t(i,r,n){var o=e.call(this)||this;return o._createLine(i,r,n),o}return t.prototype._createLine=function(i,r,n){var o=i.hostModel,s=i.getItemLayout(r),a=DQ(s);a.shape.percent=0,Ze(a,{shape:{percent:1}},o,r),this.add(a),_(Cv,function(l){var u=lT(l,i,r);this.add(u),this[sT(l)]=aT(l,i,r)},this),this._updateCommonStl(i,r,n)},t.prototype.updateData=function(i,r,n){var o=i.hostModel,s=this.childOfName("line"),a=i.getItemLayout(r),l={shape:{}};$y(l.shape,a),Me(s,l,o,r),_(Cv,function(u){var h=aT(u,i,r),c=sT(u);if(this[c]!==h){this.remove(this.childOfName(u));var d=lT(u,i,r);this.add(d)}this[c]=h},this),this._updateCommonStl(i,r,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(i,r,n){var o=i.hostModel,s=this.childOfName("line"),a=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,u=n&&n.selectLineStyle,h=n&&n.labelStatesModels,c=n&&n.emphasisDisabled,d=n&&n.focus,f=n&&n.blurScope;if(!n||i.hasItemOption){var p=i.getItemModel(r),g=p.getModel("emphasis");a=g.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),c=g.get("disabled"),d=g.get("focus"),f=g.get("blurScope"),h=St(p)}var v=i.getItemVisual(r,"style"),m=v.stroke;s.useStyle(v),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=a,s.ensureState("blur").style=l,s.ensureState("select").style=u,_(Cv,function(w){var x=this.childOfName(w);if(x){x.setColor(m),x.style.opacity=v.opacity;for(var R=0;R<Qt.length;R++){var D=Qt[R],T=s.getState(D);if(T){var A=T.style||{},P=x.ensureState(D),M=P.style||(P.style={});A.stroke!=null&&(M[x.__isEmptyBrush?"stroke":"fill"]=A.stroke),A.opacity!=null&&(M.opacity=A.opacity)}}x.markRedraw()}},this);var y=o.getRawValue(r);Pt(this,h,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(w,x){return o.getFormattedLabel(w,x,i.dataType)}},inheritColor:m||"#000",defaultOpacity:v.opacity,defaultText:(y==null?i.getName(r):isFinite(y)?nt(y):y)+""});var C=this.getTextContent();if(C){var S=h.normal;C.__align=C.style.align,C.__verticalAlign=C.style.verticalAlign,C.__position=S.get("position")||"middle";var b=S.get("distance");H(b)||(b=[b,b]),C.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),tt(this,d,f,c)},t.prototype.highlight=function(){an(this)},t.prototype.downplay=function(){ln(this)},t.prototype.updateLayout=function(i,r){this.setLinePoints(i.getItemLayout(r))},t.prototype.setLinePoints=function(i){var r=this.childOfName("line");$y(r.shape,i),r.dirty()},t.prototype.beforeUpdate=function(){var i=this,r=i.childOfName("fromSymbol"),n=i.childOfName("toSymbol"),o=i.getTextContent();if(!r&&!n&&(!o||o.ignore))return;for(var s=1,a=this.parent;a;)a.scaleX&&(s/=a.scaleX),a=a.parent;var l=i.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,h=l.pointAt(0),c=l.pointAt(u),d=Qo([],c,h);Qa(d,d);function f(T,A){var P=T.__specifiedRotation;if(P==null){var M=l.tangentAt(A);T.attr("rotation",(A===1?-1:1)*Math.PI/2-Math.atan2(M[1],M[0]))}else T.attr("rotation",P)}if(r&&(r.setPosition(h),f(r,0),r.scaleX=r.scaleY=s*u,r.markRedraw()),n&&(n.setPosition(c),f(n,1),n.scaleX=n.scaleY=s*u,n.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,g=void 0,v=o.__labelDistance,m=v[0]*s,y=v[1]*s,C=u/2,S=l.tangentAt(C),b=[S[1],-S[0]],w=l.pointAt(C);b[1]>0&&(b[0]=-b[0],b[1]=-b[1]);var x=S[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var R=-Math.atan2(S[1],S[0]);c[0]<h[0]&&(R=Math.PI+R),o.rotation=R}var D=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":D=-y,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":D=y,g="top";break;default:D=0,g="middle"}switch(o.__position){case"end":o.x=d[0]*m+c[0],o.y=d[1]*y+c[1],p=d[0]>.8?"left":d[0]<-.8?"right":"center",g=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":o.x=-d[0]*m+h[0],o.y=-d[1]*y+h[1],p=d[0]>.8?"right":d[0]<-.8?"left":"center",g=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=m*x+h[0],o.y=h[1]+D,p=S[0]<0?"right":"left",o.originX=-m*x,o.originY=-D;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=w[0],o.y=w[1]+D,p="center",o.originY=-D;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-m*x+c[0],o.y=c[1]+D,p=S[0]>=0?"right":"left",o.originX=m*x,o.originY=-D;break}o.scaleX=o.scaleY=s,o.setStyle({verticalAlign:o.__verticalAlign||g,align:o.__align||p})}},t}(le),Tw=function(){function e(t){this.group=new le,this._LineCtor=t||Dw}return e.prototype.updateData=function(t){var i=this;this._progressiveEls=null;var r=this,n=r.group,o=r._lineData;r._lineData=t,o||n.removeAll();var s=uT(t);t.diff(o).add(function(a){i._doAdd(t,a,s)}).update(function(a,l){i._doUpdate(o,t,l,a,s)}).remove(function(a){n.remove(o.getItemGraphicEl(a))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(i,r){i.updateLayout(t,r)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=uT(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,i){this._progressiveEls=[];function r(a){!a.isGroup&&!TQ(a)&&(a.incremental=!0,a.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var o=i.getItemLayout(n);if(Sv(o)){var s=new this._LineCtor(i,n,this._seriesScope);s.traverse(r),this.group.add(s),i.setItemGraphicEl(n,s),this._progressiveEls.push(s)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){uo(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,i,r){var n=t.getItemLayout(i);if(Sv(n)){var o=new this._LineCtor(t,i,r);t.setItemGraphicEl(i,o),this.group.add(o)}},e.prototype._doUpdate=function(t,i,r,n,o){var s=t.getItemGraphicEl(r);if(!Sv(i.getItemLayout(n))){this.group.remove(s);return}s?s.updateData(i,n,o):s=new this._LineCtor(i,n,o),i.setItemGraphicEl(n,s),this.group.add(s)},e}();function TQ(e){return e.animators&&e.animators.length>0}function uT(e){var t=e.hostModel,i=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:i.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:i.get("disabled"),blurScope:i.get("blurScope"),focus:i.get("focus"),labelStatesModels:St(t)}}function hT(e){return isNaN(e[0])||isNaN(e[1])}function Sv(e){return e&&!hT(e[0])&&!hT(e[1])}var wv=[],bv=[],xv=[],na=bt,Rv=cs,cT=Math.abs;function dT(e,t,i){for(var r=e[0],n=e[1],o=e[2],s=1/0,a,l=i*i,u=.1,h=.1;h<=.9;h+=.1){wv[0]=na(r[0],n[0],o[0],h),wv[1]=na(r[1],n[1],o[1],h);var c=cT(Rv(wv,t)-l);c<s&&(s=c,a=h)}for(var d=0;d<32;d++){var f=a+u;bv[0]=na(r[0],n[0],o[0],a),bv[1]=na(r[1],n[1],o[1],a),xv[0]=na(r[0],n[0],o[0],f),xv[1]=na(r[1],n[1],o[1],f);var c=Rv(bv,t)-l;if(cT(c)<.01)break;var p=Rv(xv,t)-l;u/=2,c<0?p>=0?a=a+u:a=a-u:p>=0?a=a-u:a=a+u}return a}function Dv(e,t){var i=[],r=Ou,n=[[],[],[]],o=[[],[]],s=[];t/=2,e.eachEdge(function(a,l){var u=a.getLayout(),h=a.getVisual("fromSymbol"),c=a.getVisual("toSymbol");u.__original||(u.__original=[Qr(u[0]),Qr(u[1])],u[2]&&u.__original.push(Qr(u[2])));var d=u.__original;if(u[2]!=null){if(Ht(n[0],d[0]),Ht(n[1],d[2]),Ht(n[2],d[1]),h&&h!=="none"){var f=ou(a.node1),p=dT(n,d[0],f*t);r(n[0][0],n[1][0],n[2][0],p,i),n[0][0]=i[3],n[1][0]=i[4],r(n[0][1],n[1][1],n[2][1],p,i),n[0][1]=i[3],n[1][1]=i[4]}if(c&&c!=="none"){var f=ou(a.node2),p=dT(n,d[1],f*t);r(n[0][0],n[1][0],n[2][0],p,i),n[1][0]=i[1],n[2][0]=i[2],r(n[0][1],n[1][1],n[2][1],p,i),n[1][1]=i[1],n[2][1]=i[2]}Ht(u[0],n[0]),Ht(u[1],n[2]),Ht(u[2],n[1])}else{if(Ht(o[0],d[0]),Ht(o[1],d[1]),Qo(s,o[1],o[0]),Qa(s,s),h&&h!=="none"){var f=ou(a.node1);Mm(o[0],o[0],s,f*t)}if(c&&c!=="none"){var f=ou(a.node2);Mm(o[1],o[1],s,-f*t)}Ht(u[0],o[0]),Ht(u[1],o[1])}})}function fT(e){return e.type==="view"}var _Q=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i,r){var n=new _h,o=new Tw,s=this.group;this._controller=new Eh(r.getZr()),this._controllerHost={target:s},s.add(n.group),s.add(o.group),this._symbolDraw=n,this._lineDraw=o,this._firstRender=!0},t.prototype.render=function(i,r,n){var o=this,s=i.coordinateSystem;this._model=i;var a=this._symbolDraw,l=this._lineDraw,u=this.group;if(fT(s)){var h={x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY};this._firstRender?u.attr(h):Me(u,h,i)}Dv(i.getGraph(),nu(i));var c=i.getData();a.updateData(c);var d=i.getEdgeData();l.updateData(d),this._updateNodeAndLinkScale(),this._updateController(i,r,n),clearTimeout(this._layoutTimeout);var f=i.forceLayout,p=i.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,p);var g=i.get("layout");c.graph.eachNode(function(C){var S=C.dataIndex,b=C.getGraphicEl(),w=C.getModel();if(b){b.off("drag").off("dragend");var x=w.get("draggable");x&&b.on("drag",function(D){switch(g){case"force":f.warmUp(),!o._layouting&&o._startForceLayoutIteration(f,p),f.setFixed(S),c.setItemLayout(S,[b.x,b.y]);break;case"circular":c.setItemLayout(S,[b.x,b.y]),C.setLayout({fixed:!0},!0),Rw(i,"symbolSize",C,[D.offsetX,D.offsetY]),o.updateLayout(i);break;case"none":default:c.setItemLayout(S,[b.x,b.y]),xw(i.getGraph(),i),o.updateLayout(i);break}}).on("dragend",function(){f&&f.setUnfixed(S)}),b.setDraggable(x,!!w.get("cursor"));var R=w.get(["emphasis","focus"]);R==="adjacency"&&(ue(b).focus=C.getAdjacentDataIndices())}}),c.graph.eachEdge(function(C){var S=C.getGraphicEl(),b=C.getModel().get(["emphasis","focus"]);S&&b==="adjacency"&&(ue(S).focus={edge:[C.dataIndex],node:[C.node1.dataIndex,C.node2.dataIndex]})});var v=i.get("layout")==="circular"&&i.get(["circular","rotateLabel"]),m=c.getLayout("cx"),y=c.getLayout("cy");c.graph.eachNode(function(C){GL(C,v,m,y)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(i,r){var n=this;(function o(){i.step(function(s){n.updateLayout(n._model),(n._layouting=!s)&&(r?n._layoutTimeout=setTimeout(o,16):o())})})()},t.prototype._updateController=function(i,r,n){var o=this,s=this._controller,a=this._controllerHost,l=this.group;if(s.setPointerChecker(function(u,h,c){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(h,c)&&!fp(u,n,i)}),!fT(i.coordinateSystem)){s.disable();return}s.enable(i.get("roam")),a.zoomLimit=i.get("scaleLimit"),a.zoom=i.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(u){pw(a,u.dx,u.dy),n.dispatchAction({seriesId:i.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){gw(a,u.scale,u.originX,u.originY),n.dispatchAction({seriesId:i.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(),Dv(i.getGraph(),nu(i)),o._lineDraw.updateLayout(),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var i=this._model,r=i.getData(),n=nu(i);r.eachItemGraphicEl(function(o,s){o&&o.setSymbolScale(n)})},t.prototype.updateLayout=function(i){Dv(i.getGraph(),nu(i)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(We);function oa(e){return"_EC_"+e}var AQ=function(){function e(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(t,i){t=t==null?""+i:""+t;var r=this._nodesMap;if(!r[oa(t)]){var n=new Wo(t,i);return n.hostGraph=this,this.nodes.push(n),r[oa(t)]=n,n}},e.prototype.getNodeByIndex=function(t){var i=this.data.getRawIndex(t);return this.nodes[i]},e.prototype.getNodeById=function(t){return this._nodesMap[oa(t)]},e.prototype.addEdge=function(t,i,r){var n=this._nodesMap,o=this._edgesMap;if(Pe(t)&&(t=this.nodes[t]),Pe(i)&&(i=this.nodes[i]),t instanceof Wo||(t=n[oa(t)]),i instanceof Wo||(i=n[oa(i)]),!(!t||!i)){var s=t.id+"-"+i.id,a=new VL(t,i,r);return a.hostGraph=this,this._directed&&(t.outEdges.push(a),i.inEdges.push(a)),t.edges.push(a),t!==i&&i.edges.push(a),this.edges.push(a),o[s]=a,a}},e.prototype.getEdgeByIndex=function(t){var i=this.edgeData.getRawIndex(t);return this.edges[i]},e.prototype.getEdge=function(t,i){t instanceof Wo&&(t=t.id),i instanceof Wo&&(i=i.id);var r=this._edgesMap;return this._directed?r[t+"-"+i]:r[t+"-"+i]||r[i+"-"+t]},e.prototype.eachNode=function(t,i){for(var r=this.nodes,n=r.length,o=0;o<n;o++)r[o].dataIndex>=0&&t.call(i,r[o],o)},e.prototype.eachEdge=function(t,i){for(var r=this.edges,n=r.length,o=0;o<n;o++)r[o].dataIndex>=0&&r[o].node1.dataIndex>=0&&r[o].node2.dataIndex>=0&&t.call(i,r[o],o)},e.prototype.breadthFirstTraverse=function(t,i,r,n){if(i instanceof Wo||(i=this._nodesMap[oa(i)]),!!i){for(var o=r==="out"?"outEdges":r==="in"?"inEdges":"edges",s=0;s<this.nodes.length;s++)this.nodes[s].__visited=!1;if(!t.call(n,i,null))for(var a=[i];a.length;)for(var l=a.shift(),u=l[o],s=0;s<u.length;s++){var h=u[s],c=h.node1===l?h.node2:h.node1;if(!c.__visited){if(t.call(n,c,l))return;a.push(c),c.__visited=!0}}}},e.prototype.update=function(){for(var t=this.data,i=this.edgeData,r=this.nodes,n=this.edges,o=0,s=r.length;o<s;o++)r[o].dataIndex=-1;for(var o=0,s=t.count();o<s;o++)r[t.getRawIndex(o)].dataIndex=o;i.filterSelf(function(a){var l=n[i.getRawIndex(a)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var o=0,s=n.length;o<s;o++)n[o].dataIndex=-1;for(var o=0,s=i.count();o<s;o++)n[i.getRawIndex(o)].dataIndex=o},e.prototype.clone=function(){for(var t=new e(this._directed),i=this.nodes,r=this.edges,n=0;n<i.length;n++)t.addNode(i[n].id,i[n].dataIndex);for(var n=0;n<r.length;n++){var o=r[n];t.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return t},e}(),Wo=function(){function e(t,i){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=i??-1}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var i=this.hostGraph,r=i.data.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},i=0;i<this.edges.length;i++){var r=this.edges[i];r.dataIndex<0||(t.edge.push(r.dataIndex),t.node.push(r.node1.dataIndex,r.node2.dataIndex))}return t},e.prototype.getTrajectoryDataIndices=function(){for(var t=Q(),i=Q(),r=0;r<this.edges.length;r++){var n=this.edges[r];if(!(n.dataIndex<0)){t.set(n.dataIndex,!0);for(var o=[n.node1],s=[n.node2],a=0;a<o.length;){var l=o[a];a++,i.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)t.set(l.inEdges[u].dataIndex,!0),o.push(l.inEdges[u].node1)}for(a=0;a<s.length;){var h=s[a];a++,i.set(h.dataIndex,!0);for(var u=0;u<h.outEdges.length;u++)t.set(h.outEdges[u].dataIndex,!0),s.push(h.outEdges[u].node2)}}}return{edge:t.keys(),node:i.keys()}},e}(),VL=function(){function e(t,i,r){this.dataIndex=-1,this.node1=t,this.node2=i,this.dataIndex=r??-1}return e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var i=this.hostGraph,r=i.edgeData.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var t=Q(),i=Q();t.set(this.dataIndex,!0);for(var r=[this.node1],n=[this.node2],o=0;o<r.length;){var s=r[o];o++,i.set(s.dataIndex,!0);for(var a=0;a<s.inEdges.length;a++)t.set(s.inEdges[a].dataIndex,!0),r.push(s.inEdges[a].node1)}for(o=0;o<n.length;){var l=n[o];o++,i.set(l.dataIndex,!0);for(var a=0;a<l.outEdges.length;a++)t.set(l.outEdges[a].dataIndex,!0),n.push(l.outEdges[a].node2)}return{edge:t.keys(),node:i.keys()}},e}();function BL(e,t){return{getValue:function(i){var r=this[e][t];return r.getStore().get(r.getDimensionIndex(i||"value"),this.dataIndex)},setVisual:function(i,r){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,i,r)},getVisual:function(i){return this[e][t].getItemVisual(this.dataIndex,i)},setLayout:function(i,r){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,i,r)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}dt(Wo,BL("hostGraph","data"));dt(VL,BL("hostGraph","edgeData"));function HL(e,t,i,r,n){for(var o=new AQ(r),s=0;s<e.length;s++)o.addNode(xt(e[s].id,e[s].name,s),s);for(var a=[],l=[],u=0,s=0;s<t.length;s++){var h=t[s],c=h.source,d=h.target;o.addEdge(c,d,u)&&(l.push(h),a.push(xt(ft(h.id,null),c+" > "+d)),u++)}var f=i.get("coordinateSystem"),p;if(f==="cartesian2d"||f==="polar")p=mn(e,i);else{var g=bh.get(f),v=g?g.dimensions||[]:[];Ce(v,"value")<0&&v.concat(["value"]);var m=Rh(e,{coordDimensions:v,encodeDefine:i.getEncode()}).dimensions;p=new qt(m,i),p.initData(e)}var y=new qt(["value"],i);return y.initData(l,a),n&&n(p,y),bL({mainData:p,struct:o,structAttr:"graph",datas:{node:p,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var PQ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.hasSymbolVisual=!0,i}return t.prototype.init=function(i){e.prototype.init.apply(this,arguments);var r=this;function n(){return r._categoriesData}this.legendVisualProvider=new Fh(n,n),this.fillDataTextStyle(i.edges||i.links),this._updateCategoriesData()},t.prototype.mergeOption=function(i){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(i.edges||i.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(i){e.prototype.mergeDefaultAndTheme.apply(this,arguments),bs(i,"edgeLabel",["show"])},t.prototype.getInitialData=function(i,r){var n=i.edges||i.links||[],o=i.data||i.nodes||[],s=this;if(o&&n){gQ(this);var a=HL(o,n,this,!0,l);return _(a.edges,function(u){vQ(u.node1,u.node2,this,u.dataIndex)},this),a.data}function l(u,h){u.wrapMethod("getItemModel",function(p){var g=s._categoriesModels,v=p.getShallow("category"),m=g[v];return m&&(m.parentModel=p.parentModel,p.parentModel=m),p});var c=Ne.prototype.getModel;function d(p,g){var v=c.call(this,p,g);return v.resolveParentPath=f,v}h.wrapMethod("getItemModel",function(p){return p.resolveParentPath=f,p.getModel=d,p});function f(p){if(p&&(p[0]==="label"||p[1]==="label")){var g=p.slice();return p[0]==="label"?g[0]="edgeLabel":p[1]==="label"&&(g[1]="edgeLabel"),g}return p}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(i,r,n){if(n==="edge"){var o=this.getData(),s=this.getDataParams(i,n),a=o.graph.getEdgeByIndex(i),l=o.getName(a.node1.dataIndex),u=o.getName(a.node2.dataIndex),h=[];return l!=null&&h.push(l),u!=null&&h.push(u),wt("nameValue",{name:h.join(" > "),value:s.value,noValue:s.value==null})}var c=dE({series:this,dataIndex:i,multipleSeries:r});return c},t.prototype._updateCategoriesData=function(){var i=z(this.option.categories||[],function(n){return n.value!=null?n:V({value:0},n)}),r=new qt(["value"],this);r.initData(i),this._categoriesData=r,this._categoriesModels=r.mapArray(function(n){return r.getItemModel(n)})},t.prototype.setZoom=function(i){this.option.zoom=i},t.prototype.setCenter=function(i){this.option.center=i},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(qe),MQ={type:"graphRoam",event:"graphRoam",update:"none"};function FQ(e){e.registerChartView(_Q),e.registerSeriesModel(PQ),e.registerProcessor(hQ),e.registerVisual(cQ),e.registerVisual(dQ),e.registerLayout(mQ),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,CQ),e.registerLayout(wQ),e.registerCoordinateSystem("graphView",{dimensions:Ih.dimensions,create:xQ}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},at),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},at),e.registerAction(MQ,function(t,i,r){i.eachComponent({mainType:"series",query:t},function(n){var o=n.coordinateSystem,s=mw(o,t,void 0,r);n.setCenter&&n.setCenter(s.center),n.setZoom&&n.setZoom(s.zoom)})})}var EQ=function(){function e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return e}(),IQ=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="pointer",r}return t.prototype.getDefaultShape=function(){return new EQ},t.prototype.buildPath=function(i,r){var n=Math.cos,o=Math.sin,s=r.r,a=r.width,l=r.angle,u=r.x-n(l)*a*(a>=s/3?1:2),h=r.y-o(l)*a*(a>=s/3?1:2);l=r.angle-Math.PI/2,i.moveTo(u,h),i.lineTo(r.x+n(l)*a,r.y+o(l)*a),i.lineTo(r.x+n(r.angle)*s,r.y+o(r.angle)*s),i.lineTo(r.x-n(l)*a,r.y-o(l)*a),i.lineTo(u,h)},t}(be);function LQ(e,t){var i=e.get("center"),r=t.getWidth(),n=t.getHeight(),o=Math.min(r,n),s=K(i[0],t.getWidth()),a=K(i[1],t.getHeight()),l=K(e.get("radius"),o/2);return{cx:s,cy:a,r:l}}function Ic(e,t){var i=e==null?"":e+"";return t&&(q(t)?i=t.replace("{value}",i):ie(t)&&(i=t(e))),i}var kQ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){this.group.removeAll();var o=i.get(["axisLine","lineStyle","color"]),s=LQ(i,n);this._renderMain(i,r,n,o,s),this._data=i.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(i,r,n,o,s){var a=this.group,l=i.get("clockwise"),u=-i.get("startAngle")/180*Math.PI,h=-i.get("endAngle")/180*Math.PI,c=i.getModel("axisLine"),d=c.get("roundCap"),f=d?sf:Jt,p=c.get("show"),g=c.getModel("lineStyle"),v=g.get("width"),m=[u,h];yS(m,!l),u=m[0],h=m[1];for(var y=h-u,C=u,S=[],b=0;p&&b<o.length;b++){var w=Math.min(Math.max(o[b][0],0),1);h=u+y*w;var x=new f({shape:{startAngle:C,endAngle:h,cx:s.cx,cy:s.cy,clockwise:l,r0:s.r-v,r:s.r},silent:!0});x.setStyle({fill:o[b][1]}),x.setStyle(g.getLineStyle(["color","width"])),S.push(x),C=h}S.reverse(),_(S,function(D){return a.add(D)});var R=function(D){if(D<=0)return o[0][1];var T;for(T=0;T<o.length;T++)if(o[T][0]>=D&&(T===0?0:o[T-1][0])<D)return o[T][1];return o[T-1][1]};this._renderTicks(i,r,n,R,s,u,h,l,v),this._renderTitleAndDetail(i,r,n,R,s),this._renderAnchor(i,s),this._renderPointer(i,r,n,R,s,u,h,l,v)},t.prototype._renderTicks=function(i,r,n,o,s,a,l,u,h){for(var c=this.group,d=s.cx,f=s.cy,p=s.r,g=+i.get("min"),v=+i.get("max"),m=i.getModel("splitLine"),y=i.getModel("axisTick"),C=i.getModel("axisLabel"),S=i.get("splitNumber"),b=y.get("splitNumber"),w=K(m.get("length"),p),x=K(y.get("length"),p),R=a,D=(l-a)/S,T=D/b,A=m.getModel("lineStyle").getLineStyle(),P=y.getModel("lineStyle").getLineStyle(),M=m.get("distance"),F,E,I=0;I<=S;I++){if(F=Math.cos(R),E=Math.sin(R),m.get("show")){var O=M?M+h:h,k=new mt({shape:{x1:F*(p-O)+d,y1:E*(p-O)+f,x2:F*(p-w-O)+d,y2:E*(p-w-O)+f},style:A,silent:!0});A.stroke==="auto"&&k.setStyle({stroke:o(I/S)}),c.add(k)}if(C.get("show")){var O=C.get("distance")+M,G=Ic(nt(I/S*(v-g)+g),C.get("formatter")),W=o(I/S),$=F*(p-w-O)+d,X=E*(p-w-O)+f,te=C.get("rotate"),re=0;te==="radial"?(re=-R+2*Math.PI,re>Math.PI/2&&(re+=Math.PI)):te==="tangential"?re=-R-Math.PI/2:Pe(te)&&(re=te*Math.PI/180),re===0?c.add(new Ae({style:Xe(C,{text:G,x:$,y:X,verticalAlign:E<-.8?"top":E>.8?"bottom":"middle",align:F<-.4?"left":F>.4?"right":"center"},{inheritColor:W}),silent:!0})):c.add(new Ae({style:Xe(C,{text:G,x:$,y:X,verticalAlign:"middle",align:"center"},{inheritColor:W}),silent:!0,originX:$,originY:X,rotation:re}))}if(y.get("show")&&I!==S){var O=y.get("distance");O=O?O+h:h;for(var he=0;he<=b;he++){F=Math.cos(R),E=Math.sin(R);var Be=new mt({shape:{x1:F*(p-O)+d,y1:E*(p-O)+f,x2:F*(p-x-O)+d,y2:E*(p-x-O)+f},silent:!0,style:P});P.stroke==="auto"&&Be.setStyle({stroke:o((I+he/b)/S)}),c.add(Be),R+=T}R-=T}else R+=D}},t.prototype._renderPointer=function(i,r,n,o,s,a,l,u,h){var c=this.group,d=this._data,f=this._progressEls,p=[],g=i.get(["pointer","show"]),v=i.getModel("progress"),m=v.get("show"),y=i.getData(),C=y.mapDimension("value"),S=+i.get("min"),b=+i.get("max"),w=[S,b],x=[a,l];function R(T,A){var P=y.getItemModel(T),M=P.getModel("pointer"),F=K(M.get("width"),s.r),E=K(M.get("length"),s.r),I=i.get(["pointer","icon"]),O=M.get("offsetCenter"),k=K(O[0],s.r),G=K(O[1],s.r),W=M.get("keepAspect"),$;return I?$=ct(I,k-F/2,G-E,F,E,null,W):$=new IQ({shape:{angle:-Math.PI/2,width:F,r:E,x:k,y:G}}),$.rotation=-(A+Math.PI/2),$.x=s.cx,$.y=s.cy,$}function D(T,A){var P=v.get("roundCap"),M=P?sf:Jt,F=v.get("overlap"),E=F?v.get("width"):h/y.count(),I=F?s.r-E:s.r-(T+1)*E,O=F?s.r:s.r-T*E,k=new M({shape:{startAngle:a,endAngle:A,cx:s.cx,cy:s.cy,clockwise:u,r0:I,r:O}});return F&&(k.z2=Oe(y.get(C,T),[S,b],[100,0],!0)),k}(m||g)&&(y.diff(d).add(function(T){var A=y.get(C,T);if(g){var P=R(T,a);Ze(P,{rotation:-((isNaN(+A)?x[0]:Oe(A,w,x,!0))+Math.PI/2)},i),c.add(P),y.setItemGraphicEl(T,P)}if(m){var M=D(T,a),F=v.get("clip");Ze(M,{shape:{endAngle:Oe(A,w,x,F)}},i),c.add(M),iy(i.seriesIndex,y.dataType,T,M),p[T]=M}}).update(function(T,A){var P=y.get(C,T);if(g){var M=d.getItemGraphicEl(A),F=M?M.rotation:a,E=R(T,F);E.rotation=F,Me(E,{rotation:-((isNaN(+P)?x[0]:Oe(P,w,x,!0))+Math.PI/2)},i),c.add(E),y.setItemGraphicEl(T,E)}if(m){var I=f[A],O=I?I.shape.endAngle:a,k=D(T,O),G=v.get("clip");Me(k,{shape:{endAngle:Oe(P,w,x,G)}},i),c.add(k),iy(i.seriesIndex,y.dataType,T,k),p[T]=k}}).execute(),y.each(function(T){var A=y.getItemModel(T),P=A.getModel("emphasis"),M=P.get("focus"),F=P.get("blurScope"),E=P.get("disabled");if(g){var I=y.getItemGraphicEl(T),O=y.getItemVisual(T,"style"),k=O.fill;if(I instanceof Rt){var G=I.style;I.useStyle(V({image:G.image,x:G.x,y:G.y,width:G.width,height:G.height},O))}else I.useStyle(O),I.type!=="pointer"&&I.setColor(k);I.setStyle(A.getModel(["pointer","itemStyle"]).getItemStyle()),I.style.fill==="auto"&&I.setStyle("fill",o(Oe(y.get(C,T),w,[0,1],!0))),I.z2EmphasisLift=0,At(I,A),tt(I,M,F,E)}if(m){var W=p[T];W.useStyle(y.getItemVisual(T,"style")),W.setStyle(A.getModel(["progress","itemStyle"]).getItemStyle()),W.z2EmphasisLift=0,At(W,A),tt(W,M,F,E)}}),this._progressEls=p)},t.prototype._renderAnchor=function(i,r){var n=i.getModel("anchor"),o=n.get("show");if(o){var s=n.get("size"),a=n.get("icon"),l=n.get("offsetCenter"),u=n.get("keepAspect"),h=ct(a,r.cx-s/2+K(l[0],r.r),r.cy-s/2+K(l[1],r.r),s,s,null,u);h.z2=n.get("showAbove")?1:0,h.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(h)}},t.prototype._renderTitleAndDetail=function(i,r,n,o,s){var a=this,l=i.getData(),u=l.mapDimension("value"),h=+i.get("min"),c=+i.get("max"),d=new le,f=[],p=[],g=i.isAnimationEnabled(),v=i.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){f[m]=new Ae({silent:!0}),p[m]=new Ae({silent:!0})}).update(function(m,y){f[m]=a._titleEls[y],p[m]=a._detailEls[y]}).execute(),l.each(function(m){var y=l.getItemModel(m),C=l.get(u,m),S=new le,b=o(Oe(C,[h,c],[0,1],!0)),w=y.getModel("title");if(w.get("show")){var x=w.get("offsetCenter"),R=s.cx+K(x[0],s.r),D=s.cy+K(x[1],s.r),T=f[m];T.attr({z2:v?0:2,style:Xe(w,{x:R,y:D,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:b})}),S.add(T)}var A=y.getModel("detail");if(A.get("show")){var P=A.get("offsetCenter"),M=s.cx+K(P[0],s.r),F=s.cy+K(P[1],s.r),E=K(A.get("width"),s.r),I=K(A.get("height"),s.r),O=i.get(["progress","show"])?l.getItemVisual(m,"style").fill:b,T=p[m],k=A.get("formatter");T.attr({z2:v?0:2,style:Xe(A,{x:M,y:F,text:Ic(C,k),width:isNaN(E)?null:E,height:isNaN(I)?null:I,align:"center",verticalAlign:"middle"},{inheritColor:O})}),vF(T,{normal:A},C,function(W){return Ic(W,k)}),g&&mF(T,m,l,i,{getFormattedLabel:function(W,$,X,te,re,he){return Ic(he?he.interpolatedValue:C,k)}}),S.add(T)}d.add(S)}),this.group.add(d),this._titleEls=f,this._detailEls=p},t.type="gauge",t}(We),OQ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.visualStyleAccessPath="itemStyle",i}return t.prototype.getInitialData=function(i,r){return dl(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(qe);function GQ(e){e.registerChartView(kQ),e.registerSeriesModel(OQ)}var NQ=["itemStyle","opacity"],VQ=function(e){L(t,e);function t(i,r){var n=e.call(this)||this,o=n,s=new ti,a=new Ae;return o.setTextContent(a),n.setTextGuideLine(s),n.updateData(i,r,!0),n}return t.prototype.updateData=function(i,r,n){var o=this,s=i.hostModel,a=i.getItemModel(r),l=i.getItemLayout(r),u=a.getModel("emphasis"),h=a.get(NQ);h=h??1,n||sr(o),o.useStyle(i.getItemVisual(r,"style")),o.style.lineJoin="round",n?(o.setShape({points:l.points}),o.style.opacity=0,Ze(o,{style:{opacity:h}},s,r)):Me(o,{style:{opacity:h},shape:{points:l.points}},s,r),At(o,a),this._updateLabel(i,r),tt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(i,r){var n=this,o=this.getTextGuideLine(),s=n.getTextContent(),a=i.hostModel,l=i.getItemModel(r),u=i.getItemLayout(r),h=u.label,c=i.getItemVisual(r,"style"),d=c.fill;Pt(s,St(l),{labelFetcher:i.hostModel,labelDataIndex:r,defaultOpacity:c.opacity,defaultText:i.getName(r)},{normal:{align:h.textAlign,verticalAlign:h.verticalAlign}}),n.setTextConfig({local:!0,inside:!!h.inside,insideStroke:d,outsideFill:d});var f=h.linePoints;o.setShape({points:f}),n.textGuideLineConfig={anchor:f?new ge(f[0][0],f[0][1]):null},Me(s,{style:{x:h.x,y:h.y}},a,r),s.attr({rotation:h.rotation,originX:h.x,originY:h.y,z2:10}),rw(n,nw(l),{stroke:d})},t}(ei),BQ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.ignoreLabelLineUpdate=!0,i}return t.prototype.render=function(i,r,n){var o=i.getData(),s=this._data,a=this.group;o.diff(s).add(function(l){var u=new VQ(o,l);o.setItemGraphicEl(l,u),a.add(u)}).update(function(l,u){var h=s.getItemGraphicEl(u);h.updateData(o,l),a.add(h),o.setItemGraphicEl(l,h)}).remove(function(l){var u=s.getItemGraphicEl(l);Wu(u,i,l)}).execute(),this._data=o},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(We),HQ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Fh(Z(this.getData,this),Z(this.getRawData,this)),this._defaultLabelLine(i)},t.prototype.getInitialData=function(i,r){return dl(this,{coordDimensions:["value"],encodeDefaulter:fe(kS,this)})},t.prototype._defaultLabelLine=function(i){bs(i,"labelLine",["show"]);var r=i.labelLine,n=i.emphasis.labelLine;r.show=r.show&&i.label.show,n.show=n.show&&i.emphasis.label.show},t.prototype.getDataParams=function(i){var r=this.getData(),n=e.prototype.getDataParams.call(this,i),o=r.mapDimension("value"),s=r.getSum(o);return n.percent=s?+(r.get(o,i)/s*100).toFixed(2):0,n.$vars.push("percent"),n},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(qe);function zQ(e,t){return pt(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function WQ(e,t){for(var i=e.mapDimension("value"),r=e.mapArray(i,function(l){return l}),n=[],o=t==="ascending",s=0,a=e.count();s<a;s++)n[s]=s;return ie(t)?n.sort(t):t!=="none"&&n.sort(function(l,u){return o?r[l]-r[u]:r[u]-r[l]}),n}function UQ(e){var t=e.hostModel,i=t.get("orient");e.each(function(r){var n=e.getItemModel(r),o=n.getModel("label"),s=o.get("position"),a=n.getModel("labelLine"),l=e.getItemLayout(r),u=l.points,h=s==="inner"||s==="inside"||s==="center"||s==="insideLeft"||s==="insideRight",c,d,f,p;if(h)s==="insideLeft"?(d=(u[0][0]+u[3][0])/2+5,f=(u[0][1]+u[3][1])/2,c="left"):s==="insideRight"?(d=(u[1][0]+u[2][0])/2-5,f=(u[1][1]+u[2][1])/2,c="right"):(d=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,f=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,c="center"),p=[[d,f],[d,f]];else{var g=void 0,v=void 0,m=void 0,y=void 0,C=a.get("length");s==="left"?(g=(u[3][0]+u[0][0])/2,v=(u[3][1]+u[0][1])/2,m=g-C,d=m-5,c="right"):s==="right"?(g=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,m=g+C,d=m+5,c="left"):s==="top"?(g=(u[3][0]+u[0][0])/2,v=(u[3][1]+u[0][1])/2,y=v-C,f=y-5,c="center"):s==="bottom"?(g=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,y=v+C,f=y+5,c="center"):s==="rightTop"?(g=i==="horizontal"?u[3][0]:u[1][0],v=i==="horizontal"?u[3][1]:u[1][1],i==="horizontal"?(y=v-C,f=y-5,c="center"):(m=g+C,d=m+5,c="top")):s==="rightBottom"?(g=u[2][0],v=u[2][1],i==="horizontal"?(y=v+C,f=y+5,c="center"):(m=g+C,d=m+5,c="bottom")):s==="leftTop"?(g=u[0][0],v=i==="horizontal"?u[0][1]:u[1][1],i==="horizontal"?(y=v-C,f=y-5,c="center"):(m=g-C,d=m-5,c="right")):s==="leftBottom"?(g=i==="horizontal"?u[1][0]:u[3][0],v=i==="horizontal"?u[1][1]:u[2][1],i==="horizontal"?(y=v+C,f=y+5,c="center"):(m=g-C,d=m-5,c="right")):(g=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,i==="horizontal"?(y=v+C,f=y+5,c="center"):(m=g+C,d=m+5,c="left")),i==="horizontal"?(m=g,d=m):(y=v,f=y),p=[[g,v],[m,y]]}l.label={linePoints:p,x:d,y:f,verticalAlign:"middle",textAlign:c,inside:h}})}function $Q(e,t){e.eachSeriesByType("funnel",function(i){var r=i.getData(),n=r.mapDimension("value"),o=i.get("sort"),s=zQ(i,t),a=i.get("orient"),l=s.width,u=s.height,h=WQ(r,o),c=s.x,d=s.y,f=a==="horizontal"?[K(i.get("minSize"),u),K(i.get("maxSize"),u)]:[K(i.get("minSize"),l),K(i.get("maxSize"),l)],p=r.getDataExtent(n),g=i.get("min"),v=i.get("max");g==null&&(g=Math.min(p[0],0)),v==null&&(v=p[1]);var m=i.get("funnelAlign"),y=i.get("gap"),C=a==="horizontal"?l:u,S=(C-y*(r.count()-1))/r.count(),b=function(F,E){if(a==="horizontal"){var I=r.get(n,F)||0,O=Oe(I,[g,v],f,!0),k=void 0;switch(m){case"top":k=d;break;case"center":k=d+(u-O)/2;break;case"bottom":k=d+(u-O);break}return[[E,k],[E,k+O]]}var G=r.get(n,F)||0,W=Oe(G,[g,v],f,!0),$;switch(m){case"left":$=c;break;case"center":$=c+(l-W)/2;break;case"right":$=c+l-W;break}return[[$,E],[$+W,E]]};o==="ascending"&&(S=-S,y=-y,a==="horizontal"?c+=l:d+=u,h=h.reverse());for(var w=0;w<h.length;w++){var x=h[w],R=h[w+1],D=r.getItemModel(x);if(a==="horizontal"){var T=D.get(["itemStyle","width"]);T==null?T=S:(T=K(T,l),o==="ascending"&&(T=-T));var A=b(x,c),P=b(R,c+T);c+=T+y,r.setItemLayout(x,{points:A.concat(P.slice().reverse())})}else{var M=D.get(["itemStyle","height"]);M==null?M=S:(M=K(M,u),o==="ascending"&&(M=-M));var A=b(x,d),P=b(R,d+M);d+=M+y,r.setItemLayout(x,{points:A.concat(P.slice().reverse())})}}UQ(r)})}function KQ(e){e.registerChartView(BQ),e.registerSeriesModel(HQ),e.registerLayout($Q),e.registerProcessor(Mh("funnel"))}var YQ=.3,XQ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._dataGroup=new le,i._initialized=!1,i}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(i,r,n,o){this._progressiveEls=null;var s=this._dataGroup,a=i.getData(),l=this._data,u=i.coordinateSystem,h=u.dimensions,c=gT(i);a.diff(l).add(d).update(f).remove(p).execute();function d(v){var m=pT(a,s,v,h,u);Tv(m,a,v,c)}function f(v,m){var y=l.getItemGraphicEl(m),C=zL(a,v,h,u);a.setItemGraphicEl(v,y),Me(y,{shape:{points:C}},i,v),sr(y),Tv(y,a,v,c)}function p(v){var m=l.getItemGraphicEl(v);s.remove(m)}if(!this._initialized){this._initialized=!0;var g=qQ(u,i,function(){setTimeout(function(){s.removeClipPath()})});s.setClipPath(g)}this._data=a},t.prototype.incrementalPrepareRender=function(i,r,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(i,r,n){for(var o=r.getData(),s=r.coordinateSystem,a=s.dimensions,l=gT(r),u=this._progressiveEls=[],h=i.start;h<i.end;h++){var c=pT(o,this._dataGroup,h,a,s);c.incremental=!0,Tv(c,o,h,l),u.push(c)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(We);function qQ(e,t,i){var r=e.model,n=e.getRect(),o=new Te({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),s=r.get("layout")==="horizontal"?"width":"height";return o.setShape(s,0),Ze(o,{shape:{width:n.width,height:n.height}},t,i),o}function zL(e,t,i,r){for(var n=[],o=0;o<i.length;o++){var s=i[o],a=e.get(e.mapDimension(s),t);ZQ(a,r.getAxis(s).type)||n.push(r.dataToPoint(a,s))}return n}function pT(e,t,i,r,n){var o=zL(e,i,r,n),s=new ti({shape:{points:o},z2:10});return t.add(s),e.setItemGraphicEl(i,s),s}function gT(e){var t=e.get("smooth",!0);return t===!0&&(t=YQ),t=sn(t),Lu(t)&&(t=0),{smooth:t}}function Tv(e,t,i,r){e.useStyle(t.getItemVisual(i,"style")),e.style.fill=null,e.setShape("smooth",r.smooth);var n=t.getItemModel(i),o=n.getModel("emphasis");At(e,n,"lineStyle"),tt(e,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function ZQ(e,t){return t==="category"?e==null:e==null||isNaN(e)}var jQ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.visualStyleAccessPath="lineStyle",i.visualDrawType="stroke",i}return t.prototype.getInitialData=function(i,r){return mn(null,this,{useEncodeDefaulter:Z(QQ,null,this)})},t.prototype.getRawIndicesByActiveState=function(i){var r=this.coordinateSystem,n=this.getData(),o=[];return r.eachActiveState(n,function(s,a){i===s&&o.push(n.getRawIndex(a))}),o},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(qe);function QQ(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var i={};return _(t.dimensions,function(r){var n=JQ(r);i[r]=n}),i}}function JQ(e){return+e.replace("dim","")}var eJ=["lineStyle","opacity"],tJ={seriesType:"parallel",reset:function(e,t){var i=e.coordinateSystem,r={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(n,o){i.eachActiveState(o,function(s,a){var l=r[s];if(s==="normal"&&o.hasItemOption){var u=o.getItemModel(a).get(eJ,!0);u!=null&&(l=u)}var h=o.ensureUniqueItemVisual(a,"style");h.opacity=l},n.start,n.end)}}}};function iJ(e){rJ(e),nJ(e)}function rJ(e){if(!e.parallel){var t=!1;_(e.series,function(i){i&&i.type==="parallel"&&(t=!0)}),t&&(e.parallel=[{}])}}function nJ(e){var t=ze(e.parallelAxis);_(t,function(i){if(se(i)){var r=i.parallelIndex||0,n=ze(e.parallel)[r];n&&n.parallelAxisDefault&&pe(i,n.parallelAxisDefault,!1)}})}var oJ=5,sJ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){this._model=i,this._api=n,this._handlers||(this._handlers={},_(aJ,function(o,s){n.getZr().on(s,this._handlers[s]=Z(o,this))},this)),ul(this,"_throttledDispatchExpand",i.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(i,r){Yu(this,"_throttledDispatchExpand"),_(this._handlers,function(n,o){r.getZr().off(o,n)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(i){this._dispatchExpand(i)},t.prototype._dispatchExpand=function(i){i&&this._api.dispatchAction(V({type:"parallelAxisExpand"},i))},t.type="parallel",t}(Qe),aJ={mousedown:function(e){_v(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(_v(this,"click")&&t){var i=[e.offsetX,e.offsetY],r=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2);if(r>oJ)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!(this._mouseDownPoint||!_v(this,"mousemove"))){var t=this._model,i=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),r=i.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:i.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function _v(e,t){var i=e._model;return i.get("axisExpandable")&&i.get("axisExpandTriggerOn")===t}var lJ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(i){var r=this.option;i&&pe(r,i,!0),this._initDimensions()},t.prototype.contains=function(i,r){var n=i.get("parallelIndex");return n!=null&&r.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(i){_(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){i.hasOwnProperty(r)&&(this.option[r]=i[r])},this)},t.prototype._initDimensions=function(){var i=this.dimensions=[],r=this.parallelAxisIndex=[],n=Le(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(o){return(o.get("parallelIndex")||0)===this.componentIndex},this);_(n,function(o){i.push("dim"+o.get("dim")),r.push(o.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(Re),uJ=function(e){L(t,e);function t(i,r,n,o,s){var a=e.call(this,i,r,n)||this;return a.type=o||"value",a.axisIndex=s,a}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(ur);function Hs(e,t,i,r,n,o){e=e||0;var s=i[1]-i[0];if(n!=null&&(n=sa(n,[0,s])),o!=null&&(o=Math.max(o,n??0)),r==="all"){var a=Math.abs(t[1]-t[0]);a=sa(a,[0,s]),n=o=sa(a,[n,o]),r=0}t[0]=sa(t[0],i),t[1]=sa(t[1],i);var l=Av(t,r);t[r]+=e;var u=n||0,h=i.slice();l.sign<0?h[0]+=u:h[1]-=u,t[r]=sa(t[r],h);var c;return c=Av(t,r),n!=null&&(c.sign!==l.sign||c.span<n)&&(t[1-r]=t[r]+l.sign*n),c=Av(t,r),o!=null&&c.span>o&&(t[1-r]=t[r]+c.sign*o),t}function Av(e,t){var i=e[t]-e[1-t];return{span:Math.abs(i),sign:i>0?-1:i<0?1:t?-1:1}}function sa(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var Pv=_,WL=Math.min,UL=Math.max,vT=Math.floor,hJ=Math.ceil,mT=nt,cJ=Math.PI,dJ=function(){function e(t,i,r){this.type="parallel",this._axesMap=Q(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,i,r)}return e.prototype._init=function(t,i,r){var n=t.dimensions,o=t.parallelAxisIndex;Pv(n,function(s,a){var l=o[a],u=i.getComponent("parallelAxis",l),h=this._axesMap.set(s,new uJ(s,cp(u),[0,0],u.get("type"),l)),c=h.type==="category";h.onBand=c&&u.get("boundaryGap"),h.inverse=u.get("inverse"),u.axis=h,h.model=u,h.coordinateSystem=u.coordinateSystem=this},this)},e.prototype.update=function(t,i){this._updateAxesFromSeries(this._model,t)},e.prototype.containPoint=function(t){var i=this._makeLayoutInfo(),r=i.axisBase,n=i.layoutBase,o=i.pixelDimIndex,s=t[1-o],a=t[o];return s>=r&&s<=r+i.axisLength&&a>=n&&a<=n+i.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(t,i){i.eachSeries(function(r){if(t.contains(r,i)){var n=r.getData();Pv(this.dimensions,function(o){var s=this._axesMap.get(o);s.scale.unionExtentFromData(n,n.mapDimension(o)),Ba(s.scale,s.model)},this)}},this)},e.prototype.resize=function(t,i){this._rect=pt(t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var t=this._model,i=this._rect,r=["x","y"],n=["width","height"],o=t.get("layout"),s=o==="horizontal"?0:1,a=i[n[s]],l=[0,a],u=this.dimensions.length,h=Lc(t.get("axisExpandWidth"),l),c=Lc(t.get("axisExpandCount")||0,[0,u]),d=t.get("axisExpandable")&&u>3&&u>c&&c>1&&h>0&&a>0,f=t.get("axisExpandWindow"),p;if(f)p=Lc(f[1]-f[0],l),f[1]=f[0]+p;else{p=Lc(h*(c-1),l);var g=t.get("axisExpandCenter")||vT(u/2);f=[h*g-p/2],f[1]=f[0]+p}var v=(a-p)/(u-c);v<3&&(v=0);var m=[vT(mT(f[0]/h,1))+1,hJ(mT(f[1]/h,1))-1],y=v/h*f[0];return{layout:o,pixelDimIndex:s,layoutBase:i[r[s]],layoutLength:a,axisBase:i[r[1-s]],axisLength:i[n[1-s]],axisExpandable:d,axisExpandWidth:h,axisCollapseWidth:v,axisExpandWindow:f,axisCount:u,winInnerIndices:m,axisExpandWindow0Pos:y}},e.prototype._layoutAxes=function(){var t=this._rect,i=this._axesMap,r=this.dimensions,n=this._makeLayoutInfo(),o=n.layout;i.each(function(s){var a=[0,n.axisLength],l=s.inverse?1:0;s.setExtent(a[l],a[1-l])}),Pv(r,function(s,a){var l=(n.axisExpandable?pJ:fJ)(a,n),u={horizontal:{x:l.position,y:n.axisLength},vertical:{x:0,y:l.position}},h={horizontal:cJ/2,vertical:0},c=[u[o].x+t.x,u[o].y+t.y],d=h[o],f=Ci();Ls(f,f,d),Ir(f,f,c),this._axesLayout[s]={position:c,rotation:d,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},e.prototype.getAxis=function(t){return this._axesMap.get(t)},e.prototype.dataToPoint=function(t,i){return this.axisCoordToPoint(this._axesMap.get(i).dataToCoord(t),i)},e.prototype.eachActiveState=function(t,i,r,n){r==null&&(r=0),n==null&&(n=t.count());var o=this._axesMap,s=this.dimensions,a=[],l=[];_(s,function(v){a.push(t.mapDimension(v)),l.push(o.get(v).model)});for(var u=this.hasAxisBrushed(),h=r;h<n;h++){var c=void 0;if(!u)c="normal";else{c="active";for(var d=t.getValues(a,h),f=0,p=s.length;f<p;f++){var g=l[f].getActiveState(d[f]);if(g==="inactive"){c="inactive";break}}}i(c,h)}},e.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,i=this._axesMap,r=!1,n=0,o=t.length;n<o;n++)i.get(t[n]).model.getActiveState()!=="normal"&&(r=!0);return r},e.prototype.axisCoordToPoint=function(t,i){var r=this._axesLayout[i];return rr([t,0],r.transform)},e.prototype.getAxisLayout=function(t){return ae(this._axesLayout[t])},e.prototype.getSlidedAxisExpandWindow=function(t){var i=this._makeLayoutInfo(),r=i.pixelDimIndex,n=i.axisExpandWindow.slice(),o=n[1]-n[0],s=[0,i.axisExpandWidth*(i.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:n};var a=t[r]-i.layoutBase-i.axisExpandWindow0Pos,l,u="slide",h=i.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),d=c[0]!=null;if(h)d&&h&&a<o*c[0]?(u="jump",l=a-o*c[2]):d&&h&&a>o*(1-c[0])?(u="jump",l=a-o*(1-c[2])):(l=a-o*c[1])>=0&&(l=a-o*(1-c[1]))<=0&&(l=0),l*=i.axisExpandWidth/h,l?Hs(l,n,s,"all"):u="none";else{var f=n[1]-n[0],p=s[1]*a/f;n=[UL(0,p-f/2)],n[1]=WL(s[1],n[0]+f),n[0]=n[1]-f}return{axisExpandWindow:n,behavior:u}},e}();function Lc(e,t){return WL(UL(e,t[0]),t[1])}function fJ(e,t){var i=t.layoutLength/(t.axisCount-1);return{position:i*e,axisNameAvailableWidth:i,axisLabelShow:!0}}function pJ(e,t){var i=t.layoutLength,r=t.axisExpandWidth,n=t.axisCount,o=t.axisCollapseWidth,s=t.winInnerIndices,a,l=o,u=!1,h;return e<s[0]?(a=e*o,h=o):e<=s[1]?(a=t.axisExpandWindow0Pos+e*r-t.axisExpandWindow[0],l=r,u=!0):(a=i-(n-1-e)*o,h=o),{position:a,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:h}}function gJ(e,t){var i=[];return e.eachComponent("parallel",function(r,n){var o=new dJ(r,e,t);o.name="parallel_"+n,o.resize(r,t),r.coordinateSystem=o,o.model=r,i.push(o)}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var n=r.getReferringComponents("parallel",ht).models[0];r.coordinateSystem=n.coordinateSystem}}),i}var vJ={create:gJ},Ky=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.activeIntervals=[],i}return t.prototype.getAreaSelectStyle=function(){return Rs([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(i){var r=this.activeIntervals=ae(i);if(r)for(var n=r.length-1;n>=0;n--)Gi(r[n])},t.prototype.getActiveState=function(i){var r=this.activeIntervals;if(!r.length)return"normal";if(i==null||isNaN(+i))return"inactive";if(r.length===1){var n=r[0];if(n[0]<=i&&i<=n[1])return"active"}else for(var o=0,s=r.length;o<s;o++)if(r[o][0]<=i&&i<=r[o][1])return"active";return"inactive"},t}(Re);dt(Ky,Dh);var _s=!0,oh=Math.min,Wa=Math.max,mJ=Math.pow,yJ=1e4,CJ=6,SJ=6,yT="globalPan",wJ={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},bJ={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},CT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},xJ=0,_w=function(e){L(t,e);function t(i){var r=e.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=i,r.group=new le,r._uid="brushController_"+xJ++,_(MJ,function(n,o){this._handlers[o]=Z(n,this)},r),r}return t.prototype.enableBrush=function(i){return this._brushType&&this._doDisableBrush(),i.brushType&&this._doEnableBrush(i),this},t.prototype._doEnableBrush=function(i){var r=this._zr;this._enableGlobalPan||f9(r,yT,this._uid),_(this._handlers,function(n,o){r.on(o,n)}),this._brushType=i.brushType,this._brushOption=pe(ae(CT),i,!0)},t.prototype._doDisableBrush=function(){var i=this._zr;p9(i,yT,this._uid),_(this._handlers,function(r,n){i.off(n,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(i){if(i&&i.length){var r=this._panels={};_(i,function(n){r[n.panelId]=ae(n)})}else this._panels=null;return this},t.prototype.mount=function(i){i=i||{},this._enableGlobalPan=i.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:i.x||0,y:i.y||0,rotation:i.rotation||0,scaleX:i.scaleX||1,scaleY:i.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(i){i=z(i,function(d){return pe(ae(CT),d,!0)});var r="\0-brush-index-",n=this._covers,o=this._covers=[],s=this,a=this._creatingCover;return new un(n,i,u,l).add(h).update(h).remove(c).execute(),this;function l(d,f){return(d.id!=null?d.id:r+f)+"-"+d.brushType}function u(d,f){return l(d.__brushOption,f)}function h(d,f){var p=i[d];if(f!=null&&n[f]===a)o[d]=n[f];else{var g=o[d]=f!=null?(n[f].__brushOption=p,n[f]):KL(s,$L(s,p));Aw(s,g)}}function c(d){n[d]!==a&&s.group.remove(n[d])}},t.prototype.unmount=function(){return this.enableBrush(!1),Yy(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Wi);function $L(e,t){var i=mp[t.brushType].createCover(e,t);return i.__brushOption=t,XL(i,t),e.group.add(i),i}function KL(e,t){var i=Pw(t);return i.endCreating&&(i.endCreating(e,t),XL(t,t.__brushOption)),t}function YL(e,t){var i=t.__brushOption;Pw(t).updateCoverShape(e,t,i.range,i)}function XL(e,t){var i=t.z;i==null&&(i=yJ),e.traverse(function(r){r.z=i,r.z2=i})}function Aw(e,t){Pw(t).updateCommon(e,t),YL(e,t)}function Pw(e){return mp[e.__brushOption.brushType]}function Mw(e,t,i){var r=e._panels;if(!r)return _s;var n,o=e._transform;return _(r,function(s){s.isTargetByCursor(t,i,o)&&(n=s)}),n}function qL(e,t){var i=e._panels;if(!i)return _s;var r=t.__brushOption.panelId;return r!=null?i[r]:_s}function Yy(e){var t=e._covers,i=t.length;return _(t,function(r){e.group.remove(r)},e),t.length=0,!!i}function As(e,t){var i=z(e._covers,function(r){var n=r.__brushOption,o=ae(n.range);return{brushType:n.brushType,panelId:n.panelId,range:o}});e.trigger("brush",{areas:i,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function RJ(e){var t=e._track;if(!t.length)return!1;var i=t[t.length-1],r=t[0],n=i[0]-r[0],o=i[1]-r[1],s=mJ(n*n+o*o,.5);return s>CJ}function ZL(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function jL(e,t,i,r){var n=new le;return n.add(new Te({name:"main",style:Fw(i),silent:!0,draggable:!0,cursor:"move",drift:fe(ST,e,t,n,["n","s","w","e"]),ondragend:fe(As,t,{isEnd:!0})})),_(r,function(o){n.add(new Te({name:o.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:fe(ST,e,t,n,o),ondragend:fe(As,t,{isEnd:!0})}))}),n}function QL(e,t,i,r){var n=r.brushStyle.lineWidth||0,o=Wa(n,SJ),s=i[0][0],a=i[1][0],l=s-n/2,u=a-n/2,h=i[0][1],c=i[1][1],d=h-o+n/2,f=c-o+n/2,p=h-s,g=c-a,v=p+n,m=g+n;zr(e,t,"main",s,a,p,g),r.transformable&&(zr(e,t,"w",l,u,o,m),zr(e,t,"e",d,u,o,m),zr(e,t,"n",l,u,v,o),zr(e,t,"s",l,f,v,o),zr(e,t,"nw",l,u,o,o),zr(e,t,"ne",d,u,o,o),zr(e,t,"sw",l,f,o,o),zr(e,t,"se",d,f,o,o))}function Xy(e,t){var i=t.__brushOption,r=i.transformable,n=t.childAt(0);n.useStyle(Fw(i)),n.attr({silent:!r,cursor:r?"move":"default"}),_([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(o){var s=t.childOfName(o.join("")),a=o.length===1?qy(e,o[0]):TJ(e,o);s&&s.attr({silent:!r,invisible:!r,cursor:r?bJ[a]+"-resize":null})})}function zr(e,t,i,r,n,o,s){var a=t.childOfName(i);a&&a.setShape(AJ(Ew(e,t,[[r,n],[r+o,n+s]])))}function Fw(e){return ne({strokeNoScale:!0},e.brushStyle)}function JL(e,t,i,r){var n=[oh(e,i),oh(t,r)],o=[Wa(e,i),Wa(t,r)];return[[n[0],o[0]],[n[1],o[1]]]}function DJ(e){return vs(e.group)}function qy(e,t){var i={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},n=qf(i[t],DJ(e));return r[n]}function TJ(e,t){var i=[qy(e,t[0]),qy(e,t[1])];return(i[0]==="e"||i[0]==="w")&&i.reverse(),i.join("")}function ST(e,t,i,r,n,o){var s=i.__brushOption,a=e.toRectRange(s.range),l=ek(t,n,o);_(r,function(u){var h=wJ[u];a[h[0]][h[1]]+=l[h[0]]}),s.range=e.fromRectRange(JL(a[0][0],a[1][0],a[0][1],a[1][1])),Aw(t,i),As(t,{isEnd:!1})}function _J(e,t,i,r){var n=t.__brushOption.range,o=ek(e,i,r);_(n,function(s){s[0]+=o[0],s[1]+=o[1]}),Aw(e,t),As(e,{isEnd:!1})}function ek(e,t,i){var r=e.group,n=r.transformCoordToLocal(t,i),o=r.transformCoordToLocal(0,0);return[n[0]-o[0],n[1]-o[1]]}function Ew(e,t,i){var r=qL(e,t);return r&&r!==_s?r.clipPath(i,e._transform):ae(i)}function AJ(e){var t=oh(e[0][0],e[1][0]),i=oh(e[0][1],e[1][1]),r=Wa(e[0][0],e[1][0]),n=Wa(e[0][1],e[1][1]);return{x:t,y:i,width:r-t,height:n-i}}function PJ(e,t,i){if(!(!e._brushType||FJ(e,t.offsetX,t.offsetY))){var r=e._zr,n=e._covers,o=Mw(e,t,i);if(!e._dragging)for(var s=0;s<n.length;s++){var a=n[s].__brushOption;if(o&&(o===_s||a.panelId===o.panelId)&&mp[a.brushType].contain(n[s],i[0],i[1]))return}o&&r.setCursorStyle("crosshair")}}function Zy(e){var t=e.event;t.preventDefault&&t.preventDefault()}function jy(e,t,i){return e.childOfName("main").contain(t,i)}function tk(e,t,i,r){var n=e._creatingCover,o=e._creatingPanel,s=e._brushOption,a;if(e._track.push(i.slice()),RJ(e)||n){if(o&&!n){s.brushMode==="single"&&Yy(e);var l=ae(s);l.brushType=wT(l.brushType,o),l.panelId=o===_s?null:o.panelId,n=e._creatingCover=$L(e,l),e._covers.push(n)}if(n){var u=mp[wT(e._brushType,o)],h=n.__brushOption;h.range=u.getCreatingRange(Ew(e,n,e._track)),r&&(KL(e,n),u.updateCommon(e,n)),YL(e,n),a={isEnd:r}}}else r&&s.brushMode==="single"&&s.removeOnClick&&Mw(e,t,i)&&Yy(e)&&(a={isEnd:r,removeOnClick:!0});return a}function wT(e,t){return e==="auto"?t.defaultBrushType:e}var MJ={mousedown:function(e){if(this._dragging)bT(this,e);else if(!e.target||!e.target.draggable){Zy(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var i=this._creatingPanel=Mw(this,e,t);i&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,i=e.offsetY,r=this.group.transformCoordToLocal(t,i);if(PJ(this,e,r),this._dragging){Zy(e);var n=tk(this,e,r,!1);n&&As(this,n)}},mouseup:function(e){bT(this,e)}};function bT(e,t){if(e._dragging){Zy(t);var i=t.offsetX,r=t.offsetY,n=e.group.transformCoordToLocal(i,r),o=tk(e,t,n,!0);e._dragging=!1,e._track=[],e._creatingCover=null,o&&As(e,o)}}function FJ(e,t,i){var r=e._zr;return t<0||t>r.getWidth()||i<0||i>r.getHeight()}var mp={lineX:xT(0),lineY:xT(1),rect:{createCover:function(e,t){function i(r){return r}return jL({toRectRange:i,fromRectRange:i},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=ZL(e);return JL(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,i,r){QL(e,t,i,r)},updateCommon:Xy,contain:jy},polygon:{createCover:function(e,t){var i=new le;return i.add(new ti({name:"main",style:Fw(t),silent:!0})),i},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new ei({name:"main",draggable:!0,drift:fe(_J,e,t),ondragend:fe(As,e,{isEnd:!0})}))},updateCoverShape:function(e,t,i,r){t.childAt(0).setShape({points:Ew(e,t,i)})},updateCommon:Xy,contain:jy}};function xT(e){return{createCover:function(t,i){return jL({toRectRange:function(r){var n=[r,[0,100]];return e&&n.reverse(),n},fromRectRange:function(r){return r[e]}},t,i,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var i=ZL(t),r=oh(i[0][e],i[1][e]),n=Wa(i[0][e],i[1][e]);return[r,n]},updateCoverShape:function(t,i,r,n){var o,s=qL(t,i);if(s!==_s&&s.getLinearBrushOtherExtent)o=s.getLinearBrushOtherExtent(e);else{var a=t._zr;o=[0,[a.getWidth(),a.getHeight()][1-e]]}var l=[r,o];e&&l.reverse(),QL(t,i,l,n)},updateCommon:Xy,contain:jy}}function ik(e){return e=Iw(e),function(t){return fF(t,e)}}function rk(e,t){return e=Iw(e),function(i){var r=t??i,n=r?e.width:e.height,o=r?e.x:e.y;return[o,o+(n||0)]}}function nk(e,t,i){var r=Iw(e);return function(n,o){return r.contain(o[0],o[1])&&!fp(n,t,i)}}function Iw(e){return ve.create(e)}var EJ=["axisLine","axisTickLabel","axisName"],IJ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i,r){e.prototype.init.apply(this,arguments),(this._brushController=new _w(r.getZr())).on("brush",Z(this._onBrush,this))},t.prototype.render=function(i,r,n,o){if(!LJ(i,r,o)){this.axisModel=i,this.api=n,this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new le,this.group.add(this._axisGroup),!!i.get("show")){var a=OJ(i,r),l=a.coordinateSystem,u=i.getAreaSelectStyle(),h=u.width,c=i.axis.dim,d=l.getAxisLayout(c),f=V({strokeContainThreshold:h},d),p=new Zt(i,f);_(EJ,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(f,u,i,a,h,n),Sh(s,this._axisGroup,i)}}},t.prototype._refreshBrushController=function(i,r,n,o,s,a){var l=n.axis.getExtent(),u=l[1]-l[0],h=Math.min(30,Math.abs(u)*.1),c=ve.create({x:l[0],y:-s/2,width:u,height:s});c.x-=h,c.width+=2*h,this._brushController.mount({enableGlobalPan:!0,rotation:i.rotation,x:i.position[0],y:i.position[1]}).setPanels([{panelId:"pl",clipPath:ik(c),isTargetByCursor:nk(c,a,o),getLinearBrushOtherExtent:rk(c,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(kJ(n))},t.prototype._onBrush=function(i){var r=i.areas,n=this.axisModel,o=n.axis,s=z(r,function(a){return[o.coordToData(a.range[0],!0),o.coordToData(a.range[1],!0)]});(!n.option.realtime===i.isEnd||i.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:s})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(Qe);function LJ(e,t,i){return i&&i.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:i})[0]===e}function kJ(e){var t=e.axis;return z(e.activeIntervals,function(i){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(i[0],!0),t.dataToCoord(i[1],!0)]}})}function OJ(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}var GJ={type:"axisAreaSelect",event:"axisAreaSelected"};function NJ(e){e.registerAction(GJ,function(t,i){i.eachComponent({mainType:"parallelAxis",query:t},function(r){r.axis.model.setActiveIntervals(t.intervals)})}),e.registerAction("parallelAxisExpand",function(t,i){i.eachComponent({mainType:"parallel",query:t},function(r){r.setAxisExpand(t)})})}var VJ={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function ok(e){e.registerComponentView(sJ),e.registerComponentModel(lJ),e.registerCoordinateSystem("parallel",vJ),e.registerPreprocessor(iJ),e.registerComponentModel(Ky),e.registerComponentView(IJ),za(e,"parallel",Ky,VJ),NJ(e)}function BJ(e){we(ok),e.registerChartView(XQ),e.registerSeriesModel(jQ),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,tJ)}var HJ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return e}(),zJ=function(e){L(t,e);function t(i){return e.call(this,i)||this}return t.prototype.getDefaultShape=function(){return new HJ},t.prototype.buildPath=function(i,r){var n=r.extent;i.moveTo(r.x1,r.y1),i.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(i.lineTo(r.x2+n,r.y2),i.bezierCurveTo(r.cpx2+n,r.cpy2,r.cpx1+n,r.cpy1,r.x1+n,r.y1)):(i.lineTo(r.x2,r.y2+n),i.bezierCurveTo(r.cpx2,r.cpy2+n,r.cpx1,r.cpy1+n,r.x1,r.y1+n)),i.closePath()},t.prototype.highlight=function(){an(this)},t.prototype.downplay=function(){ln(this)},t}(be),WJ=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._focusAdjacencyDisabled=!1,i}return t.prototype.render=function(i,r,n){var o=this,s=i.getGraph(),a=this.group,l=i.layoutInfo,u=l.width,h=l.height,c=i.getData(),d=i.getData("edge"),f=i.get("orient");this._model=i,a.removeAll(),a.x=l.x,a.y=l.y,s.eachEdge(function(p){var g=new zJ,v=ue(g);v.dataIndex=p.dataIndex,v.seriesIndex=i.seriesIndex,v.dataType="edge";var m=p.getModel(),y=m.getModel("lineStyle"),C=y.get("curveness"),S=p.node1.getLayout(),b=p.node1.getModel(),w=b.get("localX"),x=b.get("localY"),R=p.node2.getLayout(),D=p.node2.getModel(),T=D.get("localX"),A=D.get("localY"),P=p.getLayout(),M,F,E,I,O,k,G,W;g.shape.extent=Math.max(1,P.dy),g.shape.orient=f,f==="vertical"?(M=(w!=null?w*u:S.x)+P.sy,F=(x!=null?x*h:S.y)+S.dy,E=(T!=null?T*u:R.x)+P.ty,I=A!=null?A*h:R.y,O=M,k=F*(1-C)+I*C,G=E,W=F*C+I*(1-C)):(M=(w!=null?w*u:S.x)+S.dx,F=(x!=null?x*h:S.y)+P.sy,E=T!=null?T*u:R.x,I=(A!=null?A*h:R.y)+P.ty,O=M*(1-C)+E*C,k=F,G=M*C+E*(1-C),W=I),g.setShape({x1:M,y1:F,x2:E,y2:I,cpx1:O,cpy1:k,cpx2:G,cpy2:W}),g.useStyle(y.getItemStyle()),RT(g.style,f,p);var $=""+m.get("value"),X=St(m,"edgeLabel");Pt(g,X,{labelFetcher:{getFormattedLabel:function(he,Be,rt,me,oe,Se){return i.getFormattedLabel(he,Be,"edge",me,Ar(oe,X.normal&&X.normal.get("formatter"),$),Se)}},labelDataIndex:p.dataIndex,defaultText:$}),g.setTextConfig({position:"inside"});var te=m.getModel("emphasis");At(g,m,"lineStyle",function(he){var Be=he.getItemStyle();return RT(Be,f,p),Be}),a.add(g),d.setItemGraphicEl(p.dataIndex,g);var re=te.get("focus");tt(g,re==="adjacency"?p.getAdjacentDataIndices():re==="trajectory"?p.getTrajectoryDataIndices():re,te.get("blurScope"),te.get("disabled"))}),s.eachNode(function(p){var g=p.getLayout(),v=p.getModel(),m=v.get("localX"),y=v.get("localY"),C=v.getModel("emphasis"),S=v.get(["itemStyle","borderRadius"])||0,b=new Te({shape:{x:m!=null?m*u:g.x,y:y!=null?y*h:g.y,width:g.dx,height:g.dy,r:S},style:v.getModel("itemStyle").getItemStyle(),z2:10});Pt(b,St(v),{labelFetcher:{getFormattedLabel:function(x,R){return i.getFormattedLabel(x,R,"node")}},labelDataIndex:p.dataIndex,defaultText:p.id}),b.disableLabelAnimation=!0,b.setStyle("fill",p.getVisual("color")),b.setStyle("decal",p.getVisual("style").decal),At(b,v),a.add(b),c.setItemGraphicEl(p.dataIndex,b),ue(b).dataType="node";var w=C.get("focus");tt(b,w==="adjacency"?p.getAdjacentDataIndices():w==="trajectory"?p.getTrajectoryDataIndices():w,C.get("blurScope"),C.get("disabled"))}),c.eachItemGraphicEl(function(p,g){var v=c.getItemModel(g);v.get("draggable")&&(p.drift=function(m,y){o._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=y,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:i.id,dataIndex:c.getRawIndex(g),localX:this.shape.x/u,localY:this.shape.y/h})},p.ondragend=function(){o._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&i.isAnimationEnabled()&&a.setClipPath(UJ(a.getBoundingRect(),i,function(){a.removeClipPath()})),this._data=i.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(We);function RT(e,t,i){switch(e.fill){case"source":e.fill=i.node1.getVisual("color"),e.decal=i.node1.getVisual("style").decal;break;case"target":e.fill=i.node2.getVisual("color"),e.decal=i.node2.getVisual("style").decal;break;case"gradient":var r=i.node1.getVisual("color"),n=i.node2.getVisual("color");q(r)&&q(n)&&(e.fill=new Ch(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:r,offset:0},{color:n,offset:1}]))}}function UJ(e,t,i){var r=new Te({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return Ze(r,{shape:{width:e.width+20}},t,i),r}var $J=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.getInitialData=function(i,r){var n=i.edges||i.links||[],o=i.data||i.nodes||[],s=i.levels||[];this.levelModels=[];for(var a=this.levelModels,l=0;l<s.length;l++)s[l].depth!=null&&s[l].depth>=0&&(a[s[l].depth]=new Ne(s[l],this,r));var u=HL(o,n,this,!0,h);return u.data;function h(c,d){c.wrapMethod("getItemModel",function(f,p){var g=f.parentModel,v=g.getData().getItemLayout(p);if(v){var m=v.depth,y=g.levelModels[m];y&&(f.parentModel=y)}return f}),d.wrapMethod("getItemModel",function(f,p){var g=f.parentModel,v=g.getGraph().getEdgeByIndex(p),m=v.node1.getLayout();if(m){var y=m.depth,C=g.levelModels[y];C&&(f.parentModel=C)}return f})}},t.prototype.setNodePosition=function(i,r){var n=this.option.data||this.option.nodes,o=n[i];o.localX=r[0],o.localY=r[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(i,r,n){function o(f){return isNaN(f)||f==null}if(n==="edge"){var s=this.getDataParams(i,n),a=s.data,l=s.value,u=a.source+" -- "+a.target;return wt("nameValue",{name:u,value:l,noValue:o(l)})}else{var h=this.getGraph().getNodeByIndex(i),c=h.getLayout().value,d=this.getDataParams(i,n).data.name;return wt("nameValue",{name:d!=null?d+"":null,value:c,noValue:o(c)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(i,r){var n=e.prototype.getDataParams.call(this,i,r);if(n.value==null&&r==="node"){var o=this.getGraph().getNodeByIndex(i),s=o.getLayout().value;n.value=s}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(qe);function KJ(e,t){e.eachSeriesByType("sankey",function(i){var r=i.get("nodeWidth"),n=i.get("nodeGap"),o=YJ(i,t);i.layoutInfo=o;var s=o.width,a=o.height,l=i.getGraph(),u=l.nodes,h=l.edges;qJ(u);var c=Le(u,function(g){return g.getLayout().value===0}),d=c.length!==0?0:i.get("layoutIterations"),f=i.get("orient"),p=i.get("nodeAlign");XJ(u,h,r,n,s,a,d,f,p)})}function YJ(e,t){return pt(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function XJ(e,t,i,r,n,o,s,a,l){ZJ(e,t,i,n,o,a,l),eee(e,t,o,n,r,s,a),uee(e,a)}function qJ(e){_(e,function(t){var i=qn(t.outEdges,df),r=qn(t.inEdges,df),n=t.getValue()||0,o=Math.max(i,r,n);t.setLayout({value:o},!0)})}function ZJ(e,t,i,r,n,o,s){for(var a=[],l=[],u=[],h=[],c=0,d=0;d<t.length;d++)a[d]=1;for(var d=0;d<e.length;d++)l[d]=e[d].inEdges.length,l[d]===0&&u.push(e[d]);for(var f=-1;u.length;){for(var p=0;p<u.length;p++){var g=u[p],v=g.hostGraph.data.getRawDataItem(g.dataIndex),m=v.depth!=null&&v.depth>=0;m&&v.depth>f&&(f=v.depth),g.setLayout({depth:m?v.depth:c},!0),o==="vertical"?g.setLayout({dy:i},!0):g.setLayout({dx:i},!0);for(var y=0;y<g.outEdges.length;y++){var C=g.outEdges[y],S=t.indexOf(C);a[S]=0;var b=C.node2,w=e.indexOf(b);--l[w]===0&&h.indexOf(b)<0&&h.push(b)}}++c,u=h,h=[]}for(var d=0;d<a.length;d++)if(a[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var x=f>c-1?f:c-1;s&&s!=="left"&&jJ(e,s,o,x);var R=o==="vertical"?(n-i)/x:(r-i)/x;JJ(e,R,o)}function sk(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return t.depth!=null&&t.depth>=0}function jJ(e,t,i,r){if(t==="right"){for(var n=[],o=e,s=0;o.length;){for(var a=0;a<o.length;a++){var l=o[a];l.setLayout({skNodeHeight:s},!0);for(var u=0;u<l.inEdges.length;u++){var h=l.inEdges[u];n.indexOf(h.node1)<0&&n.push(h.node1)}}o=n,n=[],++s}_(e,function(c){sk(c)||c.setLayout({depth:Math.max(0,r-c.getLayout().skNodeHeight)},!0)})}else t==="justify"&&QJ(e,r)}function QJ(e,t){_(e,function(i){!sk(i)&&!i.outEdges.length&&i.setLayout({depth:t},!0)})}function JJ(e,t,i){_(e,function(r){var n=r.getLayout().depth*t;i==="vertical"?r.setLayout({y:n},!0):r.setLayout({x:n},!0)})}function eee(e,t,i,r,n,o,s){var a=tee(e,s);iee(a,t,i,r,n,s),Mv(a,n,i,r,s);for(var l=1;o>0;o--)l*=.99,ree(a,l,s),Mv(a,n,i,r,s),lee(a,l,s),Mv(a,n,i,r,s)}function tee(e,t){var i=[],r=t==="vertical"?"y":"x",n=Qm(e,function(o){return o.getLayout()[r]});return n.keys.sort(function(o,s){return o-s}),_(n.keys,function(o){i.push(n.buckets.get(o))}),i}function iee(e,t,i,r,n,o){var s=1/0;_(e,function(a){var l=a.length,u=0;_(a,function(c){u+=c.getLayout().value});var h=o==="vertical"?(r-(l-1)*n)/u:(i-(l-1)*n)/u;h<s&&(s=h)}),_(e,function(a){_(a,function(l,u){var h=l.getLayout().value*s;o==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:h},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:h},!0))})}),_(t,function(a){var l=+a.getValue()*s;a.setLayout({dy:l},!0)})}function Mv(e,t,i,r,n){var o=n==="vertical"?"x":"y";_(e,function(s){s.sort(function(g,v){return g.getLayout()[o]-v.getLayout()[o]});for(var a,l,u,h=0,c=s.length,d=n==="vertical"?"dx":"dy",f=0;f<c;f++)l=s[f],u=h-l.getLayout()[o],u>0&&(a=l.getLayout()[o]+u,n==="vertical"?l.setLayout({x:a},!0):l.setLayout({y:a},!0)),h=l.getLayout()[o]+l.getLayout()[d]+t;var p=n==="vertical"?r:i;if(u=h-t-p,u>0){a=l.getLayout()[o]-u,n==="vertical"?l.setLayout({x:a},!0):l.setLayout({y:a},!0),h=a;for(var f=c-2;f>=0;--f)l=s[f],u=l.getLayout()[o]+l.getLayout()[d]+t-h,u>0&&(a=l.getLayout()[o]-u,n==="vertical"?l.setLayout({x:a},!0):l.setLayout({y:a},!0)),h=l.getLayout()[o]}})}function ree(e,t,i){_(e.slice().reverse(),function(r){_(r,function(n){if(n.outEdges.length){var o=qn(n.outEdges,nee,i)/qn(n.outEdges,df);if(isNaN(o)){var s=n.outEdges.length;o=s?qn(n.outEdges,oee,i)/s:0}if(i==="vertical"){var a=n.getLayout().x+(o-oo(n,i))*t;n.setLayout({x:a},!0)}else{var l=n.getLayout().y+(o-oo(n,i))*t;n.setLayout({y:l},!0)}}})})}function nee(e,t){return oo(e.node2,t)*e.getValue()}function oee(e,t){return oo(e.node2,t)}function see(e,t){return oo(e.node1,t)*e.getValue()}function aee(e,t){return oo(e.node1,t)}function oo(e,t){return t==="vertical"?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function df(e){return e.getValue()}function qn(e,t,i){for(var r=0,n=e.length,o=-1;++o<n;){var s=+t(e[o],i);isNaN(s)||(r+=s)}return r}function lee(e,t,i){_(e,function(r){_(r,function(n){if(n.inEdges.length){var o=qn(n.inEdges,see,i)/qn(n.inEdges,df);if(isNaN(o)){var s=n.inEdges.length;o=s?qn(n.inEdges,aee,i)/s:0}if(i==="vertical"){var a=n.getLayout().x+(o-oo(n,i))*t;n.setLayout({x:a},!0)}else{var l=n.getLayout().y+(o-oo(n,i))*t;n.setLayout({y:l},!0)}}})})}function uee(e,t){var i=t==="vertical"?"x":"y";_(e,function(r){r.outEdges.sort(function(n,o){return n.node2.getLayout()[i]-o.node2.getLayout()[i]}),r.inEdges.sort(function(n,o){return n.node1.getLayout()[i]-o.node1.getLayout()[i]})}),_(e,function(r){var n=0,o=0;_(r.outEdges,function(s){s.setLayout({sy:n},!0),n+=s.getLayout().dy}),_(r.inEdges,function(s){s.setLayout({ty:o},!0),o+=s.getLayout().dy})})}function hee(e){e.eachSeriesByType("sankey",function(t){var i=t.getGraph(),r=i.nodes,n=i.edges;if(r.length){var o=1/0,s=-1/0;_(r,function(a){var l=a.getLayout().value;l<o&&(o=l),l>s&&(s=l)}),_(r,function(a){var l=new Ct({type:"color",mappingMethod:"linear",dataExtent:[o,s],visual:t.get("color")}),u=l.mapValueToVisual(a.getLayout().value),h=a.getModel().get(["itemStyle","color"]);h!=null?(a.setVisual("color",h),a.setVisual("style",{fill:h})):(a.setVisual("color",u),a.setVisual("style",{fill:u}))})}n.length&&_(n,function(a){var l=a.getModel().get("lineStyle");a.setVisual("style",l)})})}function cee(e){e.registerChartView(WJ),e.registerSeriesModel($J),e.registerLayout(KJ),e.registerVisual(hee),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,i){i.eachComponent({mainType:"series",subType:"sankey",query:t},function(r){r.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var ak=function(){function e(){}return e.prototype._hasEncodeRule=function(t){var i=this.getEncode();return i&&i.get(t)!=null},e.prototype.getInitialData=function(t,i){var r,n=i.getComponent("xAxis",this.get("xAxisIndex")),o=i.getComponent("yAxis",this.get("yAxisIndex")),s=n.get("type"),a=o.get("type"),l;s==="category"?(t.layout="horizontal",r=n.getOrdinalMeta(),l=!this._hasEncodeRule("x")):a==="category"?(t.layout="vertical",r=o.getOrdinalMeta(),l=!this._hasEncodeRule("y")):t.layout=t.layout||"horizontal";var u=["x","y"],h=t.layout==="horizontal"?0:1,c=this._baseAxisDim=u[h],d=u[1-h],f=[n,o],p=f[h].get("type"),g=f[1-h].get("type"),v=t.data;if(v&&l){var m=[];_(v,function(S,b){var w;H(S)?(w=S.slice(),S.unshift(b)):H(S.value)?(w=V({},S),w.value=w.value.slice(),S.value.unshift(b)):w=S,m.push(w)}),t.data=m}var y=this.defaultValueDimensions,C=[{name:c,type:ef(p),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:ef(g),dimsDef:y.slice()}];return dl(this,{coordDimensions:C,dimensionsCount:y.length+1,encodeDefaulter:fe(VF,C,this)})},e.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},e}(),lk=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],i.visualDrawType="stroke",i}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(qe);dt(lk,ak,!0);var dee=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o=i.getData(),s=this.group,a=this._data;this._data||s.removeAll();var l=i.get("layout")==="horizontal"?1:0;o.diff(a).add(function(u){if(o.hasValue(u)){var h=o.getItemLayout(u),c=DT(h,o,u,l,!0);o.setItemGraphicEl(u,c),s.add(c)}}).update(function(u,h){var c=a.getItemGraphicEl(h);if(!o.hasValue(u)){s.remove(c);return}var d=o.getItemLayout(u);c?(sr(c),uk(d,c,o,u)):c=DT(d,o,u,l),s.add(c),o.setItemGraphicEl(u,c)}).remove(function(u){var h=a.getItemGraphicEl(u);h&&s.remove(h)}).execute(),this._data=o},t.prototype.remove=function(i){var r=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(o){o&&r.remove(o)})},t.type="boxplot",t}(We),fee=function(){function e(){}return e}(),pee=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="boxplotBoxPath",r}return t.prototype.getDefaultShape=function(){return new fee},t.prototype.buildPath=function(i,r){var n=r.points,o=0;for(i.moveTo(n[o][0],n[o][1]),o++;o<4;o++)i.lineTo(n[o][0],n[o][1]);for(i.closePath();o<n.length;o++)i.moveTo(n[o][0],n[o][1]),o++,i.lineTo(n[o][0],n[o][1])},t}(be);function DT(e,t,i,r,n){var o=e.ends,s=new pee({shape:{points:n?gee(o,r,e):o}});return uk(e,s,t,i,n),s}function uk(e,t,i,r,n){var o=i.hostModel,s=Os[n?"initProps":"updateProps"];s(t,{shape:{points:e.ends}},o,r),t.useStyle(i.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var a=i.getItemModel(r),l=a.getModel("emphasis");At(t,a),tt(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function gee(e,t,i){return z(e,function(r){return r=r.slice(),r[t]=i.initBaseline,r})}var Du=_;function vee(e){var t=mee(e);Du(t,function(i){var r=i.seriesModels;r.length&&(yee(i),Du(r,function(n,o){Cee(n,i.boxOffsetList[o],i.boxWidthList[o])}))})}function mee(e){var t=[],i=[];return e.eachSeriesByType("boxplot",function(r){var n=r.getBaseAxis(),o=Ce(i,n);o<0&&(o=i.length,i[o]=n,t[o]={axis:n,seriesModels:[]}),t[o].seriesModels.push(r)}),t}function yee(e){var t=e.axis,i=e.seriesModels,r=i.length,n=e.boxWidthList=[],o=e.boxOffsetList=[],s=[],a;if(t.type==="category")a=t.getBandWidth();else{var l=0;Du(i,function(p){l=Math.max(l,p.getData().count())});var u=t.getExtent();a=Math.abs(u[1]-u[0])/l}Du(i,function(p){var g=p.get("boxWidth");H(g)||(g=[g,g]),s.push([K(g[0],a)||0,K(g[1],a)||0])});var h=a*.8-2,c=h/r*.3,d=(h-c*(r-1))/r,f=d/2-h/2;Du(i,function(p,g){o.push(f),f+=c+d,n.push(Math.min(Math.max(d,s[g][0]),s[g][1]))})}function Cee(e,t,i){var r=e.coordinateSystem,n=e.getData(),o=i/2,s=e.get("layout")==="horizontal"?0:1,a=1-s,l=["x","y"],u=n.mapDimension(l[s]),h=n.mapDimensionsAll(l[a]);if(u==null||h.length<5)return;for(var c=0;c<n.count();c++){var d=n.get(u,c),f=C(d,h[2],c),p=C(d,h[0],c),g=C(d,h[1],c),v=C(d,h[3],c),m=C(d,h[4],c),y=[];S(y,g,!1),S(y,v,!0),y.push(p,g,m,v),b(y,p),b(y,m),b(y,f),n.setItemLayout(c,{initBaseline:f[a],ends:y})}function C(w,x,R){var D=n.get(x,R),T=[];T[s]=w,T[a]=D;var A;return isNaN(w)||isNaN(D)?A=[NaN,NaN]:(A=r.dataToPoint(T),A[s]+=t),A}function S(w,x,R){var D=x.slice(),T=x.slice();D[s]+=o,T[s]-=o,R?w.push(D,T):w.push(T,D)}function b(w,x){var R=x.slice(),D=x.slice();R[s]-=o,D[s]+=o,w.push(R,D)}}function See(e,t){t=t||{};for(var i=[],r=[],n=t.boundIQR,o=n==="none"||n===0,s=0;s<e.length;s++){var a=Gi(e[s].slice()),l=og(a,.25),u=og(a,.5),h=og(a,.75),c=a[0],d=a[a.length-1],f=(n??1.5)*(h-l),p=o?c:Math.max(c,l-f),g=o?d:Math.min(d,h+f),v=t.itemNameFormatter,m=ie(v)?v({value:s}):q(v)?v.replace("{value}",s+""):s+"";i.push([m,p,l,u,h,g]);for(var y=0;y<a.length;y++){var C=a[y];if(C<p||C>g){var S=[m,C];r.push(S)}}}return{boxData:i,outliers:r}}var wee={type:"echarts:boxplot",transform:function(t){var i=t.upstream;if(i.sourceFormat!==Gt){var r="";Ie(r)}var n=See(i.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function bee(e){e.registerSeriesModel(lk),e.registerChartView(dee),e.registerLayout(vee),e.registerTransform(wee)}var xee=["itemStyle","borderColor"],Ree=["itemStyle","borderColor0"],Dee=["itemStyle","borderColorDoji"],Tee=["itemStyle","color"],_ee=["itemStyle","color0"];function Lw(e,t){return t.get(e>0?Tee:_ee)}function kw(e,t){return t.get(e===0?Dee:e>0?xee:Ree)}var Aee={seriesType:"candlestick",plan:ll(),performRawSeries:!0,reset:function(e,t){if(!t.isSeriesFiltered(e)){var i=e.pipelineContext.large;return!i&&{progress:function(r,n){for(var o;(o=r.next())!=null;){var s=n.getItemModel(o),a=n.getItemLayout(o).sign,l=s.getItemStyle();l.fill=Lw(a,s),l.stroke=kw(a,s)||l.fill;var u=n.ensureUniqueItemVisual(o,"style");V(u,l)}}}}}},Pee=["color","borderColor"],Mee=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(i),this._isLargeDraw?this._renderLarge(i):this._renderNormal(i)},t.prototype.incrementalPrepareRender=function(i,r,n){this._clear(),this._updateDrawMode(i)},t.prototype.incrementalRender=function(i,r,n,o){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(i,r):this._incrementalRenderNormal(i,r)},t.prototype.eachRendered=function(i){uo(this._progressiveEls||this.group,i)},t.prototype._updateDrawMode=function(i){var r=i.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(i){var r=i.getData(),n=this._data,o=this.group,s=r.getLayout("isSimpleBox"),a=i.get("clip",!0),l=i.coordinateSystem,u=l.getArea&&l.getArea();this._data||o.removeAll(),r.diff(n).add(function(h){if(r.hasValue(h)){var c=r.getItemLayout(h);if(a&&TT(u,c))return;var d=Fv(c,h,!0);Ze(d,{shape:{points:c.ends}},i,h),Ev(d,r,h,s),o.add(d),r.setItemGraphicEl(h,d)}}).update(function(h,c){var d=n.getItemGraphicEl(c);if(!r.hasValue(h)){o.remove(d);return}var f=r.getItemLayout(h);if(a&&TT(u,f)){o.remove(d);return}d?(Me(d,{shape:{points:f.ends}},i,h),sr(d)):d=Fv(f),Ev(d,r,h,s),o.add(d),r.setItemGraphicEl(h,d)}).remove(function(h){var c=n.getItemGraphicEl(h);c&&o.remove(c)}).execute(),this._data=r},t.prototype._renderLarge=function(i){this._clear(),_T(i,this.group);var r=i.get("clip",!0)?Ah(i.coordinateSystem,!1,i):null;r?this.group.setClipPath(r):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(i,r){for(var n=r.getData(),o=n.getLayout("isSimpleBox"),s;(s=i.next())!=null;){var a=n.getItemLayout(s),l=Fv(a);Ev(l,n,s,o),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(i,r){_T(r,this.group,this._progressiveEls,!0)},t.prototype.remove=function(i){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(We),Fee=function(){function e(){}return e}(),Eee=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="normalCandlestickBox",r}return t.prototype.getDefaultShape=function(){return new Fee},t.prototype.buildPath=function(i,r){var n=r.points;this.__simpleBox?(i.moveTo(n[4][0],n[4][1]),i.lineTo(n[6][0],n[6][1])):(i.moveTo(n[0][0],n[0][1]),i.lineTo(n[1][0],n[1][1]),i.lineTo(n[2][0],n[2][1]),i.lineTo(n[3][0],n[3][1]),i.closePath(),i.moveTo(n[4][0],n[4][1]),i.lineTo(n[5][0],n[5][1]),i.moveTo(n[6][0],n[6][1]),i.lineTo(n[7][0],n[7][1]))},t}(be);function Fv(e,t,i){var r=e.ends;return new Eee({shape:{points:i?Iee(r,e):r},z2:100})}function TT(e,t){for(var i=!0,r=0;r<t.ends.length;r++)if(e.contain(t.ends[r][0],t.ends[r][1])){i=!1;break}return i}function Ev(e,t,i,r){var n=t.getItemModel(i);e.useStyle(t.getItemVisual(i,"style")),e.style.strokeNoScale=!0,e.__simpleBox=r,At(e,n);var o=t.getItemLayout(i).sign;_(e.states,function(a,l){var u=n.getModel(l),h=Lw(o,u),c=kw(o,u)||h,d=a.style||(a.style={});h&&(d.fill=h),c&&(d.stroke=c)});var s=n.getModel("emphasis");tt(e,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function Iee(e,t){return z(e,function(i){return i=i.slice(),i[1]=t.initBaseline,i})}var Lee=function(){function e(){}return e}(),Iv=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r.type="largeCandlestickBox",r}return t.prototype.getDefaultShape=function(){return new Lee},t.prototype.buildPath=function(i,r){for(var n=r.points,o=0;o<n.length;)if(this.__sign===n[o++]){var s=n[o++];i.moveTo(s,n[o++]),i.lineTo(s,n[o++])}else o+=3},t}(be);function _T(e,t,i,r){var n=e.getData(),o=n.getLayout("largePoints"),s=new Iv({shape:{points:o},__sign:1,ignoreCoarsePointer:!0});t.add(s);var a=new Iv({shape:{points:o},__sign:-1,ignoreCoarsePointer:!0});t.add(a);var l=new Iv({shape:{points:o},__sign:0,ignoreCoarsePointer:!0});t.add(l),Lv(1,s,e),Lv(-1,a,e),Lv(0,l,e),r&&(s.incremental=!0,a.incremental=!0),i&&i.push(s,a)}function Lv(e,t,i,r){var n=kw(e,i)||Lw(e,i),o=i.getModel("itemStyle").getItemStyle(Pee);t.useStyle(o),t.style.fill=null,t.style.stroke=n}var hk=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],i}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(i,r,n){var o=r.getItemLayout(i);return o&&n.rect(o.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(qe);dt(hk,ak,!0);function kee(e){!e||!H(e.series)||_(e.series,function(t){se(t)&&t.type==="k"&&(t.type="candlestick")})}var Oee={seriesType:"candlestick",plan:ll(),reset:function(e){var t=e.coordinateSystem,i=e.getData(),r=Gee(e,i),n=0,o=1,s=["x","y"],a=i.getDimensionIndex(i.mapDimension(s[n])),l=z(i.mapDimensionsAll(s[o]),i.getDimensionIndex,i),u=l[0],h=l[1],c=l[2],d=l[3];if(i.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),a<0||l.length<4)return;return{progress:e.pipelineContext.large?p:f};function f(g,v){for(var m,y=v.getStore();(m=g.next())!=null;){var C=y.get(a,m),S=y.get(u,m),b=y.get(h,m),w=y.get(c,m),x=y.get(d,m),R=Math.min(S,b),D=Math.max(S,b),T=O(R,C),A=O(D,C),P=O(w,C),M=O(x,C),F=[];k(F,A,0),k(F,T,1),F.push(W(M),W(A),W(P),W(T));var E=v.getItemModel(m),I=!!E.get(["itemStyle","borderColorDoji"]);v.setItemLayout(m,{sign:AT(y,m,S,b,h,I),initBaseline:S>b?A[o]:T[o],ends:F,brushRect:G(w,x,C)})}function O($,X){var te=[];return te[n]=X,te[o]=$,isNaN(X)||isNaN($)?[NaN,NaN]:t.dataToPoint(te)}function k($,X,te){var re=X.slice(),he=X.slice();re[n]=od(re[n]+r/2,1,!1),he[n]=od(he[n]-r/2,1,!0),te?$.push(re,he):$.push(he,re)}function G($,X,te){var re=O($,te),he=O(X,te);return re[n]-=r/2,he[n]-=r/2,{x:re[0],y:re[1],width:r,height:he[1]-re[1]}}function W($){return $[n]=od($[n],1),$}}function p(g,v){for(var m=Dr(g.count*4),y=0,C,S=[],b=[],w,x=v.getStore(),R=!!e.get(["itemStyle","borderColorDoji"]);(w=g.next())!=null;){var D=x.get(a,w),T=x.get(u,w),A=x.get(h,w),P=x.get(c,w),M=x.get(d,w);if(isNaN(D)||isNaN(P)||isNaN(M)){m[y++]=NaN,y+=3;continue}m[y++]=AT(x,w,T,A,h,R),S[n]=D,S[o]=P,C=t.dataToPoint(S,null,b),m[y++]=C?C[0]:NaN,m[y++]=C?C[1]:NaN,S[o]=M,C=t.dataToPoint(S,null,b),m[y++]=C?C[1]:NaN}v.setLayout("largePoints",m)}}};function AT(e,t,i,r,n,o){var s;return i>r?s=-1:i<r?s=1:s=o?0:t>0?e.get(n,t-1)<=r?1:-1:1,s}function Gee(e,t){var i=e.getBaseAxis(),r,n=i.type==="category"?i.getBandWidth():(r=i.getExtent(),Math.abs(r[1]-r[0])/t.count()),o=K(de(e.get("barMaxWidth"),n),n),s=K(de(e.get("barMinWidth"),1),n),a=e.get("barWidth");return a!=null?K(a,n):Math.max(Math.min(n/2,o),s)}function Nee(e){e.registerChartView(Mee),e.registerSeriesModel(hk),e.registerPreprocessor(kee),e.registerVisual(Aee),e.registerLayout(Oee)}function PT(e,t){var i=t.rippleEffectColor||t.color;e.eachChild(function(r){r.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?i:null,fill:t.brushType==="fill"?i:null}})})}var Vee=function(e){L(t,e);function t(i,r){var n=e.call(this)||this,o=new Th(i,r),s=new le;return n.add(o),n.add(s),n.updateData(i,r),n}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(i){for(var r=i.symbolType,n=i.color,o=i.rippleNumber,s=this.childAt(1),a=0;a<o;a++){var l=ct(r,-1,-1,2,2,n);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-a/o*i.period+i.effectOffset;l.animate("",!0).when(i.period,{scaleX:i.rippleScale/2,scaleY:i.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(i.period,{opacity:0}).delay(u).start(),s.add(l)}PT(s,i)},t.prototype.updateEffectAnimation=function(i){for(var r=this._effectCfg,n=this.childAt(1),o=["symbolType","period","rippleScale","rippleNumber"],s=0;s<o.length;s++){var a=o[s];if(r[a]!==i[a]){this.stopEffectAnimation(),this.startEffectAnimation(i);return}}PT(n,i)},t.prototype.highlight=function(){an(this)},t.prototype.downplay=function(){ln(this)},t.prototype.getSymbolType=function(){var i=this.childAt(0);return i&&i.getSymbolType()},t.prototype.updateData=function(i,r){var n=this,o=i.hostModel;this.childAt(0).updateData(i,r);var s=this.childAt(1),a=i.getItemModel(r),l=i.getItemVisual(r,"symbol"),u=hl(i.getItemVisual(r,"symbolSize")),h=i.getItemVisual(r,"style"),c=h&&h.fill,d=a.getModel("emphasis");s.setScale(u),s.traverse(function(v){v.setStyle("fill",c)});var f=Gs(i.getItemVisual(r,"symbolOffset"),u);f&&(s.x=f[0],s.y=f[1]);var p=i.getItemVisual(r,"symbolRotate");s.rotation=(p||0)*Math.PI/180||0;var g={};g.showEffectOn=o.get("showEffectOn"),g.rippleScale=a.get(["rippleEffect","scale"]),g.brushType=a.get(["rippleEffect","brushType"]),g.period=a.get(["rippleEffect","period"])*1e3,g.effectOffset=r/i.count(),g.z=o.getShallow("z")||0,g.zlevel=o.getShallow("zlevel")||0,g.symbolType=l,g.color=c,g.rippleEffectColor=a.get(["rippleEffect","color"]),g.rippleNumber=a.get(["rippleEffect","number"]),g.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(g):this.startEffectAnimation(g),this._effectCfg=g):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(v){v==="emphasis"?g.showEffectOn!=="render"&&n.startEffectAnimation(g):v==="normal"&&g.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=g,tt(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},t.prototype.fadeOut=function(i){i&&i()},t}(le),Bee=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(){this._symbolDraw=new _h(Vee)},t.prototype.render=function(i,r,n){var o=i.getData(),s=this._symbolDraw;s.updateData(o,{clipShape:this._getClipShape(i)}),this.group.add(s.group)},t.prototype._getClipShape=function(i){var r=i.coordinateSystem,n=r&&r.getArea&&r.getArea();return i.get("clip",!0)?n:null},t.prototype.updateTransform=function(i,r,n){var o=i.getData();this.group.dirty();var s=Ph("").reset(i,r,n);s.progress&&s.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(i){var r=i.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=c$(r.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(i,r){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(We),Hee=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.hasSymbolVisual=!0,i}return t.prototype.getInitialData=function(i,r){return mn(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(i,r,n){return n.point(r.getItemLayout(i))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(qe);function zee(e){e.registerChartView(Bee),e.registerSeriesModel(Hee),e.registerLayout(Ph("effectScatter"))}var ck=function(e){L(t,e);function t(i,r,n){var o=e.call(this)||this;return o.add(o.createLine(i,r,n)),o._updateEffectSymbol(i,r),o}return t.prototype.createLine=function(i,r,n){return new Dw(i,r,n)},t.prototype._updateEffectSymbol=function(i,r){var n=i.getItemModel(r),o=n.getModel("effect"),s=o.get("symbolSize"),a=o.get("symbol");H(s)||(s=[s,s]);var l=i.getItemVisual(r,"style"),u=o.get("color")||l&&l.stroke,h=this.childAt(1);this._symbolType!==a&&(this.remove(h),h=ct(a,-.5,-.5,1,1,u),h.z2=100,h.culling=!0,this.add(h)),h&&(h.setStyle("shadowColor",u),h.setStyle(o.getItemStyle(["color"])),h.scaleX=s[0],h.scaleY=s[1],h.setColor(u),this._symbolType=a,this._symbolScale=s,this._updateEffectAnimation(i,o,r))},t.prototype._updateEffectAnimation=function(i,r,n){var o=this.childAt(1);if(o){var s=i.getItemLayout(n),a=r.get("period")*1e3,l=r.get("loop"),u=r.get("roundTrip"),h=r.get("constantSpeed"),c=xt(r.get("delay"),function(f){return f/i.count()*a/3});if(o.ignore=!0,this._updateAnimationPoints(o,s),h>0&&(a=this._getLineLength(o)/h*1e3),a!==this._period||l!==this._loop||u!==this._roundTrip){o.stopAnimation();var d=void 0;ie(c)?d=c(n):d=c,o.__t>0&&(d=-a*o.__t),this._animateSymbol(o,a,d,l,u)}this._period=a,this._loop=l,this._roundTrip=u}},t.prototype._animateSymbol=function(i,r,n,o,s){if(r>0){i.__t=0;var a=this,l=i.animate("",o).when(s?r*2:r,{__t:s?2:1}).delay(n).during(function(){a._updateSymbolPosition(i)});o||l.done(function(){a.remove(i)}),l.start()}},t.prototype._getLineLength=function(i){return On(i.__p1,i.__cp1)+On(i.__cp1,i.__p2)},t.prototype._updateAnimationPoints=function(i,r){i.__p1=r[0],i.__p2=r[1],i.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},t.prototype.updateData=function(i,r,n){this.childAt(0).updateData(i,r,n),this._updateEffectSymbol(i,r)},t.prototype._updateSymbolPosition=function(i){var r=i.__p1,n=i.__p2,o=i.__cp1,s=i.__t<1?i.__t:2-i.__t,a=[i.x,i.y],l=a.slice(),u=bt,h=Gm;a[0]=u(r[0],o[0],n[0],s),a[1]=u(r[1],o[1],n[1],s);var c=i.__t<1?h(r[0],o[0],n[0],s):h(n[0],o[0],r[0],1-s),d=i.__t<1?h(r[1],o[1],n[1],s):h(n[1],o[1],r[1],1-s);i.rotation=-Math.atan2(d,c)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(i.__lastT!==void 0&&i.__lastT<i.__t?(i.scaleY=On(l,a)*1.05,s===1&&(a[0]=l[0]+(a[0]-l[0])/2,a[1]=l[1]+(a[1]-l[1])/2)):i.__lastT===1?i.scaleY=2*On(r,a):i.scaleY=this._symbolScale[1]),i.__lastT=i.__t,i.ignore=!1,i.x=a[0],i.y=a[1]},t.prototype.updateLayout=function(i,r){this.childAt(0).updateLayout(i,r);var n=i.getItemModel(r).getModel("effect");this._updateEffectAnimation(i,n,r)},t}(le),dk=function(e){L(t,e);function t(i,r,n){var o=e.call(this)||this;return o._createPolyline(i,r,n),o}return t.prototype._createPolyline=function(i,r,n){var o=i.getItemLayout(r),s=new ti({shape:{points:o}});this.add(s),this._updateCommonStl(i,r,n)},t.prototype.updateData=function(i,r,n){var o=i.hostModel,s=this.childAt(0),a={shape:{points:i.getItemLayout(r)}};Me(s,a,o,r),this._updateCommonStl(i,r,n)},t.prototype._updateCommonStl=function(i,r,n){var o=this.childAt(0),s=i.getItemModel(r),a=n&&n.emphasisLineStyle,l=n&&n.focus,u=n&&n.blurScope,h=n&&n.emphasisDisabled;if(!n||i.hasItemOption){var c=s.getModel("emphasis");a=c.getModel("lineStyle").getLineStyle(),h=c.get("disabled"),l=c.get("focus"),u=c.get("blurScope")}o.useStyle(i.getItemVisual(r,"style")),o.style.fill=null,o.style.strokeNoScale=!0;var d=o.ensureState("emphasis");d.style=a,tt(this,l,u,h)},t.prototype.updateLayout=function(i,r){var n=this.childAt(0);n.setShape("points",i.getItemLayout(r))},t}(le),Wee=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i._lastFrame=0,i._lastFramePercent=0,i}return t.prototype.createLine=function(i,r,n){return new dk(i,r,n)},t.prototype._updateAnimationPoints=function(i,r){this._points=r;for(var n=[0],o=0,s=1;s<r.length;s++){var a=r[s-1],l=r[s];o+=On(a,l),n.push(o)}if(o===0){this._length=0;return}for(var s=0;s<n.length;s++)n[s]/=o;this._offsets=n,this._length=o},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(i){var r=i.__t<1?i.__t:2-i.__t,n=this._points,o=this._offsets,s=n.length;if(o){var a=this._lastFrame,l;if(r<this._lastFramePercent){var u=Math.min(a+1,s-1);for(l=u;l>=0&&!(o[l]<=r);l--);l=Math.min(l,s-2)}else{for(l=a;l<s&&!(o[l]>r);l++);l=Math.min(l-1,s-2)}var h=(r-o[l])/(o[l+1]-o[l]),c=n[l],d=n[l+1];i.x=c[0]*(1-h)+h*d[0],i.y=c[1]*(1-h)+h*d[1];var f=i.__t<1?d[0]-c[0]:c[0]-d[0],p=i.__t<1?d[1]-c[1]:c[1]-d[1];i.rotation=-Math.atan2(p,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,i.ignore=!1}},t}(ck),Uee=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),$ee=function(e){L(t,e);function t(i){var r=e.call(this,i)||this;return r._off=0,r.hoverDataIdx=-1,r}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Uee},t.prototype.buildPath=function(i,r){var n=r.segs,o=r.curveness,s;if(r.polyline)for(s=this._off;s<n.length;){var a=n[s++];if(a>0){i.moveTo(n[s++],n[s++]);for(var l=1;l<a;l++)i.lineTo(n[s++],n[s++])}}else for(s=this._off;s<n.length;){var u=n[s++],h=n[s++],c=n[s++],d=n[s++];if(i.moveTo(u,h),o>0){var f=(u+c)/2-(h-d)*o,p=(h+d)/2-(c-u)*o;i.quadraticCurveTo(f,p,c,d)}else i.lineTo(c,d)}this.incremental&&(this._off=s,this.notClear=!0)},t.prototype.findDataIndex=function(i,r){var n=this.shape,o=n.segs,s=n.curveness,a=this.style.lineWidth;if(n.polyline)for(var l=0,u=0;u<o.length;){var h=o[u++];if(h>0)for(var c=o[u++],d=o[u++],f=1;f<h;f++){var p=o[u++],g=o[u++];if(Ln(c,d,p,g,a,i,r))return l}l++}else for(var l=0,u=0;u<o.length;){var c=o[u++],d=o[u++],p=o[u++],g=o[u++];if(s>0){var v=(c+p)/2-(d-g)*s,m=(d+g)/2-(p-c)*s;if(V1(c,d,v,m,p,g,a,i,r))return l}else if(Ln(c,d,p,g,a,i,r))return l;l++}return-1},t.prototype.contain=function(i,r){var n=this.transformCoordToLocal(i,r),o=this.getBoundingRect();if(i=n[0],r=n[1],o.contain(i,r)){var s=this.hoverDataIdx=this.findDataIndex(i,r);return s>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var i=this._rect;if(!i){for(var r=this.shape,n=r.segs,o=1/0,s=1/0,a=-1/0,l=-1/0,u=0;u<n.length;){var h=n[u++],c=n[u++];o=Math.min(h,o),a=Math.max(h,a),s=Math.min(c,s),l=Math.max(c,l)}i=this._rect=new ve(o,s,a,l)}return i},t}(be),Kee=function(){function e(){this.group=new le}return e.prototype.updateData=function(t){this._clear();var i=this._create();i.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(i,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,i){var r=this._newAdded[0],n=i.getLayout("linesPoints"),o=r&&r.shape.segs;if(o&&o.length<2e4){var s=o.length,a=new Float32Array(s+n.length);a.set(o),a.set(n,s),r.setShape({segs:a})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:n}),this._setCommon(l,i),l.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new $ee({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,i,r){var n=i.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var o=i.getVisual("style");o&&o.stroke&&t.setStyle("stroke",o.stroke),t.setStyle("fill",null);var s=ue(t);s.seriesIndex=n.seriesIndex,t.on("mousemove",function(a){s.dataIndex=null;var l=t.hoverDataIdx;l>0&&(s.dataIndex=l+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),fk={seriesType:"lines",plan:ll(),reset:function(e){var t=e.coordinateSystem;if(t){var i=e.get("polyline"),r=e.pipelineContext.large;return{progress:function(n,o){var s=[];if(r){var a=void 0,l=n.end-n.start;if(i){for(var u=0,h=n.start;h<n.end;h++)u+=e.getLineCoordsCount(h);a=new Float32Array(l+u*2)}else a=new Float32Array(l*4);for(var c=0,d=[],h=n.start;h<n.end;h++){var f=e.getLineCoords(h,s);i&&(a[c++]=f);for(var p=0;p<f;p++)d=t.dataToPoint(s[p],!1,d),a[c++]=d[0],a[c++]=d[1]}o.setLayout("linesPoints",a)}else for(var h=n.start;h<n.end;h++){var g=o.getItemModel(h),f=e.getLineCoords(h,s),v=[];if(i)for(var m=0;m<f;m++)v.push(t.dataToPoint(s[m]));else{v[0]=t.dataToPoint(s[0]),v[1]=t.dataToPoint(s[1]);var y=g.get(["lineStyle","curveness"]);+y&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*y,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*y])}o.setItemLayout(h,v)}}}}}},Yee=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o=i.getData(),s=this._updateLineDraw(o,i),a=i.get("zlevel"),l=i.get(["effect","trailLength"]),u=n.getZr(),h=u.painter.getType()==="svg";h||u.painter.getLayer(a).clear(!0),this._lastZlevel!=null&&!h&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(i)&&l>0&&(h||u.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),s.updateData(o);var c=i.get("clip",!0)&&Ah(i.coordinateSystem,!1,i);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},t.prototype.incrementalPrepareRender=function(i,r,n){var o=i.getData(),s=this._updateLineDraw(o,i);s.incrementalPrepareUpdate(o),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(i,r,n){this._lineDraw.incrementalUpdate(i,r.getData()),this._finished=i.end===r.getData().count()},t.prototype.eachRendered=function(i){this._lineDraw&&this._lineDraw.eachRendered(i)},t.prototype.updateTransform=function(i,r,n){var o=i.getData(),s=i.pipelineContext;if(!this._finished||s.large||s.progressiveRender)return{update:!0};var a=fk.reset(i,r,n);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(i,r){var n=this._lineDraw,o=this._showEffect(r),s=!!r.get("polyline"),a=r.pipelineContext,l=a.large;return(!n||o!==this._hasEffet||s!==this._isPolyline||l!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=l?new Kee:new Tw(s?o?Wee:dk:o?ck:Dw),this._hasEffet=o,this._isPolyline=s,this._isLargeDraw=l),this.group.add(n.group),n},t.prototype._showEffect=function(i){return!!i.get(["effect","show"])},t.prototype._clearLayer=function(i){var r=i.getZr(),n=r.painter.getType()==="svg";!n&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(i,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},t.prototype.dispose=function(i,r){this.remove(i,r)},t.type="lines",t}(We),Xee=typeof Uint32Array>"u"?Array:Uint32Array,qee=typeof Float64Array>"u"?Array:Float64Array;function MT(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=z(t,function(i){var r=[i[0].coord,i[1].coord],n={coords:r};return i[0].name&&(n.fromName=i[0].name),i[1].name&&(n.toName=i[1].name),nS([n,i[0],i[1]])}))}var Zee=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.visualStyleAccessPath="lineStyle",i.visualDrawType="stroke",i}return t.prototype.init=function(i){i.data=i.data||[],MT(i);var r=this._processFlatCoordsArray(i.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(i.data=new Float32Array(r.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(i){if(MT(i),i.data){var r=this._processFlatCoordsArray(i.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(i.data=new Float32Array(r.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(i){var r=this._processFlatCoordsArray(i.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=ku(this._flatCoords,r.flatCoords),this._flatCoordsOffset=ku(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),i.data=new Float32Array(r.count)),this.getRawData().appendData(i.data)},t.prototype._getCoordsFromItemModel=function(i){var r=this.getData().getItemModel(i),n=r.option instanceof Array?r.option:r.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(i){return this._flatCoordsOffset?this._flatCoordsOffset[i*2+1]:this._getCoordsFromItemModel(i).length},t.prototype.getLineCoords=function(i,r){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[i*2],o=this._flatCoordsOffset[i*2+1],s=0;s<o;s++)r[s]=r[s]||[],r[s][0]=this._flatCoords[n+s*2],r[s][1]=this._flatCoords[n+s*2+1];return o}else{for(var a=this._getCoordsFromItemModel(i),s=0;s<a.length;s++)r[s]=r[s]||[],r[s][0]=a[s][0],r[s][1]=a[s][1];return a.length}},t.prototype._processFlatCoordsArray=function(i){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),Pe(i[0])){for(var n=i.length,o=new Xee(n),s=new qee(n),a=0,l=0,u=0,h=0;h<n;){u++;var c=i[h++];o[l++]=a+r,o[l++]=c;for(var d=0;d<c;d++){var f=i[h++],p=i[h++];s[a++]=f,s[a++]=p}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,l),flatCoords:s,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:i.length}},t.prototype.getInitialData=function(i,r){var n=new qt(["value"],this);return n.hasItemOption=!1,n.initData(i.data,[],function(o,s,a,l){if(o instanceof Array)return NaN;n.hasItemOption=!0;var u=o.value;if(u!=null)return u instanceof Array?u[l]:u}),n},t.prototype.formatTooltip=function(i,r,n){var o=this.getData(),s=o.getItemModel(i),a=s.get("name");if(a)return a;var l=s.get("fromName"),u=s.get("toName"),h=[];return l!=null&&h.push(l),u!=null&&h.push(u),wt("nameValue",{name:h.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var i=this.option.progressive;return i??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var i=this.option.progressiveThreshold;return i??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var i=this.getModel("effect"),r=i.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:i.get("show")&&r>0?r+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(qe);function kc(e){return e instanceof Array||(e=[e,e]),e}var jee={seriesType:"lines",reset:function(e){var t=kc(e.get("symbol")),i=kc(e.get("symbolSize")),r=e.getData();r.setVisual("fromSymbol",t&&t[0]),r.setVisual("toSymbol",t&&t[1]),r.setVisual("fromSymbolSize",i&&i[0]),r.setVisual("toSymbolSize",i&&i[1]);function n(o,s){var a=o.getItemModel(s),l=kc(a.getShallow("symbol",!0)),u=kc(a.getShallow("symbolSize",!0));l[0]&&o.setItemVisual(s,"fromSymbol",l[0]),l[1]&&o.setItemVisual(s,"toSymbol",l[1]),u[0]&&o.setItemVisual(s,"fromSymbolSize",u[0]),u[1]&&o.setItemVisual(s,"toSymbolSize",u[1])}return{dataEach:r.hasItemOption?n:null}}};function Qee(e){e.registerChartView(Yee),e.registerSeriesModel(Zee),e.registerLayout(fk),e.registerVisual(jee)}var Jee=256,ete=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=eo.createCanvas();this.canvas=t}return e.prototype.update=function(t,i,r,n,o,s){var a=this._getBrush(),l=this._getGradient(o,"inRange"),u=this._getGradient(o,"outOfRange"),h=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),f=t.length;c.width=i,c.height=r;for(var p=0;p<f;++p){var g=t[p],v=g[0],m=g[1],y=g[2],C=n(y);d.globalAlpha=C,d.drawImage(a,v-h,m-h)}if(!c.width||!c.height)return c;for(var S=d.getImageData(0,0,c.width,c.height),b=S.data,w=0,x=b.length,R=this.minOpacity,D=this.maxOpacity,T=D-R;w<x;){var C=b[w+3]/256,A=Math.floor(C*(Jee-1))*4;if(C>0){var P=s(C)?l:u;C>0&&(C=C*T+R),b[w++]=P[A],b[w++]=P[A+1],b[w++]=P[A+2],b[w++]=P[A+3]*C*256}else w+=4}return d.putImageData(S,0,0),c},e.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=eo.createCanvas()),i=this.pointSize+this.blurSize,r=i*2;t.width=r,t.height=r;var n=t.getContext("2d");return n.clearRect(0,0,r,r),n.shadowOffsetX=r,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-i,i,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),t},e.prototype._getGradient=function(t,i){for(var r=this._gradientPixels,n=r[i]||(r[i]=new Uint8ClampedArray(256*4)),o=[0,0,0,0],s=0,a=0;a<256;a++)t[i](a/255,!0,o),n[s++]=o[0],n[s++]=o[1],n[s++]=o[2],n[s++]=o[3];return n},e}();function tte(e,t,i){var r=e[1]-e[0];t=z(t,function(s){return{interval:[(s.interval[0]-e[0])/r,(s.interval[1]-e[0])/r]}});var n=t.length,o=0;return function(s){var a;for(a=o;a<n;a++){var l=t[a].interval;if(l[0]<=s&&s<=l[1]){o=a;break}}if(a===n)for(a=o-1;a>=0;a--){var l=t[a].interval;if(l[0]<=s&&s<=l[1]){o=a;break}}return a>=0&&a<n&&i[a]}}function ite(e,t){var i=e[1]-e[0];return t=[(t[0]-e[0])/i,(t[1]-e[0])/i],function(r){return r>=t[0]&&r<=t[1]}}function FT(e){var t=e.dimensions;return t[0]==="lng"&&t[1]==="lat"}var rte=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o;r.eachComponent("visualMap",function(a){a.eachTargetSeries(function(l){l===i&&(o=a)})}),this._progressiveEls=null,this.group.removeAll();var s=i.coordinateSystem;s.type==="cartesian2d"||s.type==="calendar"?this._renderOnCartesianAndCalendar(i,n,0,i.getData().count()):FT(s)&&this._renderOnGeo(s,i,o,n)},t.prototype.incrementalPrepareRender=function(i,r,n){this.group.removeAll()},t.prototype.incrementalRender=function(i,r,n,o){var s=r.coordinateSystem;s&&(FT(s)?this.render(r,n,o):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,o,i.start,i.end,!0)))},t.prototype.eachRendered=function(i){uo(this._progressiveEls||this.group,i)},t.prototype._renderOnCartesianAndCalendar=function(i,r,n,o,s){var a=i.coordinateSystem,l=Vs(a,"cartesian2d"),u,h,c,d;if(l){var f=a.getAxis("x"),p=a.getAxis("y");u=f.getBandWidth()+.5,h=p.getBandWidth()+.5,c=f.scale.getExtent(),d=p.scale.getExtent()}for(var g=this.group,v=i.getData(),m=i.getModel(["emphasis","itemStyle"]).getItemStyle(),y=i.getModel(["blur","itemStyle"]).getItemStyle(),C=i.getModel(["select","itemStyle"]).getItemStyle(),S=i.get(["itemStyle","borderRadius"]),b=St(i),w=i.getModel("emphasis"),x=w.get("focus"),R=w.get("blurScope"),D=w.get("disabled"),T=l?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],A=n;A<o;A++){var P=void 0,M=v.getItemVisual(A,"style");if(l){var F=v.get(T[0],A),E=v.get(T[1],A);if(isNaN(v.get(T[2],A))||isNaN(F)||isNaN(E)||F<c[0]||F>c[1]||E<d[0]||E>d[1])continue;var I=a.dataToPoint([F,E]);P=new Te({shape:{x:I[0]-u/2,y:I[1]-h/2,width:u,height:h},style:M})}else{if(isNaN(v.get(T[1],A)))continue;P=new Te({z2:1,shape:a.dataToRect([v.get(T[0],A)]).contentShape,style:M})}if(v.hasItemOption){var O=v.getItemModel(A),k=O.getModel("emphasis");m=k.getModel("itemStyle").getItemStyle(),y=O.getModel(["blur","itemStyle"]).getItemStyle(),C=O.getModel(["select","itemStyle"]).getItemStyle(),S=O.get(["itemStyle","borderRadius"]),x=k.get("focus"),R=k.get("blurScope"),D=k.get("disabled"),b=St(O)}P.shape.r=S;var G=i.getRawValue(A),W="-";G&&G[2]!=null&&(W=G[2]+""),Pt(P,b,{labelFetcher:i,labelDataIndex:A,defaultOpacity:M.opacity,defaultText:W}),P.ensureState("emphasis").style=m,P.ensureState("blur").style=y,P.ensureState("select").style=C,tt(P,x,R,D),P.incremental=s,s&&(P.states.emphasis.hoverLayer=!0),g.add(P),v.setItemGraphicEl(A,P),this._progressiveEls&&this._progressiveEls.push(P)}},t.prototype._renderOnGeo=function(i,r,n,o){var s=n.targetVisuals.inRange,a=n.targetVisuals.outOfRange,l=r.getData(),u=this._hmLayer||this._hmLayer||new ete;u.blurSize=r.get("blurSize"),u.pointSize=r.get("pointSize"),u.minOpacity=r.get("minOpacity"),u.maxOpacity=r.get("maxOpacity");var h=i.getViewRect().clone(),c=i.getRoamTransform();h.applyTransform(c);var d=Math.max(h.x,0),f=Math.max(h.y,0),p=Math.min(h.width+h.x,o.getWidth()),g=Math.min(h.height+h.y,o.getHeight()),v=p-d,m=g-f,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],C=l.mapArray(y,function(x,R,D){var T=i.dataToPoint([x,R]);return T[0]-=d,T[1]-=f,T.push(D),T}),S=n.getExtent(),b=n.type==="visualMap.continuous"?ite(S,n.option.range):tte(S,n.getPieceList(),n.option.selected);u.update(C,v,m,s.color.getNormalizer(),{inRange:s.color.getColorMapper(),outOfRange:a.color.getColorMapper()},b);var w=new Rt({style:{width:v,height:m,x:d,y:f,image:u.canvas},silent:!0});this.group.add(w)},t.type="heatmap",t}(We),nte=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.getInitialData=function(i,r){return mn(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var i=bh.get(this.get("coordinateSystem"));if(i&&i.dimensions)return i.dimensions[0]==="lng"&&i.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(qe);function ote(e){e.registerChartView(rte),e.registerSeriesModel(nte)}var ste=["itemStyle","borderWidth"],ET=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],kv=new vn,ate=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o=this.group,s=i.getData(),a=this._data,l=i.coordinateSystem,u=l.getBaseAxis(),h=u.isHorizontal(),c=l.master.getRect(),d={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:i,coordSys:l,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:h,valueDim:ET[+h],categoryDim:ET[1-+h]};s.diff(a).add(function(p){if(s.hasValue(p)){var g=LT(s,p),v=IT(s,p,g,d),m=kT(s,d,v);s.setItemGraphicEl(p,m),o.add(m),GT(m,d,v)}}).update(function(p,g){var v=a.getItemGraphicEl(g);if(!s.hasValue(p)){o.remove(v);return}var m=LT(s,p),y=IT(s,p,m,d),C=Ck(s,y);v&&C!==v.__pictorialShapeStr&&(o.remove(v),s.setItemGraphicEl(p,null),v=null),v?pte(v,d,y):v=kT(s,d,y,!0),s.setItemGraphicEl(p,v),v.__pictorialSymbolMeta=y,o.add(v),GT(v,d,y)}).remove(function(p){var g=a.getItemGraphicEl(p);g&&OT(a,p,g.__pictorialSymbolMeta.animationModel,g)}).execute();var f=i.get("clip",!0)?Ah(i.coordinateSystem,!1,i):null;return f?o.setClipPath(f):o.removeClipPath(),this._data=s,this.group},t.prototype.remove=function(i,r){var n=this.group,o=this._data;i.get("animation")?o&&o.eachItemGraphicEl(function(s){OT(o,ue(s).dataIndex,i,s)}):n.removeAll()},t.type="pictorialBar",t}(We);function IT(e,t,i,r){var n=e.getItemLayout(t),o=i.get("symbolRepeat"),s=i.get("symbolClip"),a=i.get("symbolPosition")||"start",l=i.get("symbolRotate"),u=(l||0)*Math.PI/180||0,h=i.get("symbolPatternSize")||2,c=i.isAnimationEnabled(),d={dataIndex:t,layout:n,itemModel:i,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:s,symbolRepeat:o,symbolRepeatDirection:i.get("symbolRepeatDirection"),symbolPatternSize:h,rotation:u,animationModel:c?i:null,hoverScale:c&&i.get(["emphasis","scale"]),z2:i.getShallow("z",!0)||0};lte(i,o,n,r,d),ute(e,t,n,o,s,d.boundingLength,d.pxSign,h,r,d),hte(i,d.symbolScale,u,r,d);var f=d.symbolSize,p=Gs(i.get("symbolOffset"),f);return cte(i,f,n,o,s,p,a,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function lte(e,t,i,r,n){var o=r.valueDim,s=e.get("symbolBoundingData"),a=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=a.toGlobalCoord(a.dataToCoord(0)),u=1-+(i[o.wh]<=0),h;if(H(s)){var c=[Ov(a,s[0])-l,Ov(a,s[1])-l];c[1]<c[0]&&c.reverse(),h=c[u]}else s!=null?h=Ov(a,s)-l:t?h=r.coordSysExtent[o.index][u]-l:h=i[o.wh];n.boundingLength=h,t&&(n.repeatCutLength=i[o.wh]);var d=o.xy==="x",f=a.inverse;n.pxSign=d&&!f||!d&&f?h>=0?1:-1:h>0?1:-1}function Ov(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function ute(e,t,i,r,n,o,s,a,l,u){var h=l.valueDim,c=l.categoryDim,d=Math.abs(i[c.wh]),f=e.getItemVisual(t,"symbolSize"),p;H(f)?p=f.slice():f==null?p=["100%","100%"]:p=[f,f],p[c.index]=K(p[c.index],d),p[h.index]=K(p[h.index],r?d:Math.abs(o)),u.symbolSize=p;var g=u.symbolScale=[p[0]/a,p[1]/a];g[h.index]*=(l.isHorizontal?-1:1)*s}function hte(e,t,i,r,n){var o=e.get(ste)||0;o&&(kv.attr({scaleX:t[0],scaleY:t[1],rotation:i}),kv.updateTransform(),o/=kv.getLineScale(),o*=t[r.valueDim.index]),n.valueLineWidth=o||0}function cte(e,t,i,r,n,o,s,a,l,u,h,c){var d=h.categoryDim,f=h.valueDim,p=c.pxSign,g=Math.max(t[f.index]+a,0),v=g;if(r){var m=Math.abs(l),y=xt(e.get("symbolMargin"),"15%")+"",C=!1;y.lastIndexOf("!")===y.length-1&&(C=!0,y=y.slice(0,y.length-1));var S=K(y,t[f.index]),b=Math.max(g+S*2,0),w=C?0:S*2,x=D1(r),R=x?r:NT((m+w)/b),D=m-R*g;S=D/2/(C?R:Math.max(R-1,1)),b=g+S*2,w=C?0:S*2,!x&&r!=="fixed"&&(R=u?NT((Math.abs(u)+w)/b):0),v=R*b-w,c.repeatTimes=R,c.symbolMargin=S}var T=p*(v/2),A=c.pathPosition=[];A[d.index]=i[d.wh]/2,A[f.index]=s==="start"?T:s==="end"?l-T:l/2,o&&(A[0]+=o[0],A[1]+=o[1]);var P=c.bundlePosition=[];P[d.index]=i[d.xy],P[f.index]=i[f.xy];var M=c.barRectShape=V({},i);M[f.wh]=p*Math.max(Math.abs(i[f.wh]),Math.abs(A[f.index]+T)),M[d.wh]=i[d.wh];var F=c.clipShape={};F[d.xy]=-i[d.xy],F[d.wh]=h.ecSize[d.wh],F[f.xy]=0,F[f.wh]=i[f.wh]}function pk(e){var t=e.symbolPatternSize,i=ct(e.symbolType,-t/2,-t/2,t,t);return i.attr({culling:!0}),i.type!=="image"&&i.setStyle({strokeNoScale:!0}),i}function gk(e,t,i,r){var n=e.__pictorialBundle,o=i.symbolSize,s=i.valueLineWidth,a=i.pathPosition,l=t.valueDim,u=i.repeatTimes||0,h=0,c=o[t.valueDim.index]+s+i.symbolMargin*2;for(Ow(e,function(g){g.__pictorialAnimationIndex=h,g.__pictorialRepeatTimes=u,h<u?Ma(g,null,p(h),i,r):Ma(g,null,{scaleX:0,scaleY:0},i,r,function(){n.remove(g)}),h++});h<u;h++){var d=pk(i);d.__pictorialAnimationIndex=h,d.__pictorialRepeatTimes=u,n.add(d);var f=p(h);Ma(d,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},i,r)}function p(g){var v=a.slice(),m=i.pxSign,y=g;return(i.symbolRepeatDirection==="start"?m>0:m<0)&&(y=u-1-g),v[l.index]=c*(y-u/2+.5)+a[l.index],{x:v[0],y:v[1],scaleX:i.symbolScale[0],scaleY:i.symbolScale[1],rotation:i.rotation}}}function vk(e,t,i,r){var n=e.__pictorialBundle,o=e.__pictorialMainPath;o?Ma(o,null,{x:i.pathPosition[0],y:i.pathPosition[1],scaleX:i.symbolScale[0],scaleY:i.symbolScale[1],rotation:i.rotation},i,r):(o=e.__pictorialMainPath=pk(i),n.add(o),Ma(o,{x:i.pathPosition[0],y:i.pathPosition[1],scaleX:0,scaleY:0,rotation:i.rotation},{scaleX:i.symbolScale[0],scaleY:i.symbolScale[1]},i,r))}function mk(e,t,i){var r=V({},t.barRectShape),n=e.__pictorialBarRect;n?Ma(n,null,{shape:r},t,i):(n=e.__pictorialBarRect=new Te({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,e.add(n))}function yk(e,t,i,r){if(i.symbolClip){var n=e.__pictorialClipPath,o=V({},i.clipShape),s=t.valueDim,a=i.animationModel,l=i.dataIndex;if(n)Me(n,{shape:o},a,l);else{o[s.wh]=0,n=new Te({shape:o}),e.__pictorialBundle.setClipPath(n),e.__pictorialClipPath=n;var u={};u[s.wh]=i.clipShape[s.wh],Os[r?"updateProps":"initProps"](n,{shape:u},a,l)}}}function LT(e,t){var i=e.getItemModel(t);return i.getAnimationDelayParams=dte,i.isAnimationEnabled=fte,i}function dte(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function fte(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function kT(e,t,i,r){var n=new le,o=new le;return n.add(o),n.__pictorialBundle=o,o.x=i.bundlePosition[0],o.y=i.bundlePosition[1],i.symbolRepeat?gk(n,t,i):vk(n,t,i),mk(n,i,r),yk(n,t,i,r),n.__pictorialShapeStr=Ck(e,i),n.__pictorialSymbolMeta=i,n}function pte(e,t,i){var r=i.animationModel,n=i.dataIndex,o=e.__pictorialBundle;Me(o,{x:i.bundlePosition[0],y:i.bundlePosition[1]},r,n),i.symbolRepeat?gk(e,t,i,!0):vk(e,t,i,!0),mk(e,i,!0),yk(e,t,i,!0)}function OT(e,t,i,r){var n=r.__pictorialBarRect;n&&n.removeTextContent();var o=[];Ow(r,function(s){o.push(s)}),r.__pictorialMainPath&&o.push(r.__pictorialMainPath),r.__pictorialClipPath&&(i=null),_(o,function(s){io(s,{scaleX:0,scaleY:0},i,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function Ck(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function Ow(e,t,i){_(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(i,r)})}function Ma(e,t,i,r,n,o){t&&e.attr(t),r.symbolClip&&!n?i&&e.attr(i):i&&Os[n?"updateProps":"initProps"](e,i,r.animationModel,r.dataIndex,o)}function GT(e,t,i){var r=i.dataIndex,n=i.itemModel,o=n.getModel("emphasis"),s=o.getModel("itemStyle").getItemStyle(),a=n.getModel(["blur","itemStyle"]).getItemStyle(),l=n.getModel(["select","itemStyle"]).getItemStyle(),u=n.getShallow("cursor"),h=o.get("focus"),c=o.get("blurScope"),d=o.get("scale");Ow(e,function(g){if(g instanceof Rt){var v=g.style;g.useStyle(V({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},i.style))}else g.useStyle(i.style);var m=g.ensureState("emphasis");m.style=s,d&&(m.scaleX=g.scaleX*1.1,m.scaleY=g.scaleY*1.1),g.ensureState("blur").style=a,g.ensureState("select").style=l,u&&(g.cursor=u),g.z2=i.z2});var f=t.valueDim.posDesc[+(i.boundingLength>0)],p=e.__pictorialBarRect;p.ignoreClip=!0,Pt(p,St(n),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:Ha(t.seriesModel.getData(),r),inheritColor:i.style.fill,defaultOpacity:i.style.opacity,defaultOutsidePosition:f}),tt(e,h,c,o.get("disabled"))}function NT(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var gte=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.hasSymbolVisual=!0,i.defaultSymbol="roundRect",i}return t.prototype.getInitialData=function(i){return i.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=ho(Ju.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(Ju);function vte(e){e.registerChartView(ate),e.registerSeriesModel(gte),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,fe(iI,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,rI("pictorialBar"))}var mte=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._layers=[],i}return t.prototype.render=function(i,r,n){var o=i.getData(),s=this,a=this.group,l=i.getLayerSeries(),u=o.getLayout("layoutInfo"),h=u.rect,c=u.boundaryGap;a.x=0,a.y=h.y+c[0];function d(v){return v.name}var f=new un(this._layersSeries||[],l,d,d),p=[];f.add(Z(g,this,"add")).update(Z(g,this,"update")).remove(Z(g,this,"remove")).execute();function g(v,m,y){var C=s._layers;if(v==="remove"){a.remove(C[m]);return}for(var S=[],b=[],w,x=l[m].indices,R=0;R<x.length;R++){var D=o.getItemLayout(x[R]),T=D.x,A=D.y0,P=D.y;S.push(T,A),b.push(T,A+P),w=o.getItemVisual(x[R],"style")}var M,F=o.getItemLayout(x[0]),E=i.getModel("label"),I=E.get("margin"),O=i.getModel("emphasis");if(v==="add"){var k=p[m]=new le;M=new $I({shape:{points:S,stackedOnPoints:b,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),k.add(M),a.add(k),i.isAnimationEnabled()&&M.setClipPath(yte(M.getBoundingRect(),i,function(){M.removeClipPath()}))}else{var k=C[y];M=k.childAt(0),a.add(k),p[m]=k,Me(M,{shape:{points:S,stackedOnPoints:b}},i),sr(M)}Pt(M,St(i),{labelDataIndex:x[R-1],defaultText:o.getName(x[R-1]),inheritColor:w.fill},{normal:{verticalAlign:"middle"}}),M.setTextConfig({position:null,local:!0});var G=M.getTextContent();G&&(G.x=F.x-I,G.y=F.y0+F.y/2),M.useStyle(w),o.setItemGraphicEl(m,M),At(M,i),tt(M,O.get("focus"),O.get("blurScope"),O.get("disabled"))}this._layersSeries=l,this._layers=p},t.type="themeRiver",t}(We);function yte(e,t,i){var r=new Te({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return Ze(r,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,i),r}var Gv=2,Cte=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new Fh(Z(this.getData,this),Z(this.getRawData,this))},t.prototype.fixData=function(i){var r=i.length,n={},o=Qm(i,function(d){return n.hasOwnProperty(d[0]+"")||(n[d[0]+""]=-1),d[2]}),s=[];o.buckets.each(function(d,f){s.push({name:f,dataList:d})});for(var a=s.length,l=0;l<a;++l){for(var u=s[l].name,h=0;h<s[l].dataList.length;++h){var c=s[l].dataList[h][0]+"";n[c]=l}for(var c in n)n.hasOwnProperty(c)&&n[c]!==l&&(n[c]=l,i[r]=[c,0,u],r++)}return i},t.prototype.getInitialData=function(i,r){for(var n=this.getReferringComponents("singleAxis",ht).models[0],o=n.get("type"),s=Le(i.data,function(p){return p[2]!==void 0}),a=this.fixData(s||[]),l=[],u=this.nameMap=Q(),h=0,c=0;c<a.length;++c)l.push(a[c][Gv]),u.get(a[c][Gv])||(u.set(a[c][Gv],h),h++);var d=Rh(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:ef(o)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new qt(d,this);return f.initData(a),f},t.prototype.getLayerSeries=function(){for(var i=this.getData(),r=i.count(),n=[],o=0;o<r;++o)n[o]=o;var s=i.mapDimension("single"),a=Qm(n,function(u){return i.get("name",u)}),l=[];return a.buckets.each(function(u,h){u.sort(function(c,d){return i.get(s,c)-i.get(s,d)}),l.push({name:h,indices:u})}),l},t.prototype.getAxisTooltipData=function(i,r,n){H(i)||(i=i?[i]:[]);for(var o=this.getData(),s=this.getLayerSeries(),a=[],l=s.length,u,h=0;h<l;++h){for(var c=Number.MAX_VALUE,d=-1,f=s[h].indices.length,p=0;p<f;++p){var g=o.get(i[0],s[h].indices[p]),v=Math.abs(g-r);v<=c&&(u=g,c=v,d=s[h].indices[p])}a.push(d)}return{dataIndices:a,nestestValue:u}},t.prototype.formatTooltip=function(i,r,n){var o=this.getData(),s=o.getName(i),a=o.get(o.mapDimension("value"),i);return wt("nameValue",{name:s,value:a})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(qe);function Ste(e,t){e.eachSeriesByType("themeRiver",function(i){var r=i.getData(),n=i.coordinateSystem,o={},s=n.getRect();o.rect=s;var a=i.get("boundaryGap"),l=n.getAxis();if(o.boundaryGap=a,l.orient==="horizontal"){a[0]=K(a[0],s.height),a[1]=K(a[1],s.height);var u=s.height-a[0]-a[1];VT(r,i,u)}else{a[0]=K(a[0],s.width),a[1]=K(a[1],s.width);var h=s.width-a[0]-a[1];VT(r,i,h)}r.setLayout("layoutInfo",o)})}function VT(e,t,i){if(e.count())for(var r=t.coordinateSystem,n=t.getLayerSeries(),o=e.mapDimension("single"),s=e.mapDimension("value"),a=z(n,function(v){return z(v.indices,function(m){var y=r.dataToPoint(e.get(o,m));return y[1]=e.get(s,m),y})}),l=wte(a),u=l.y0,h=i/l.max,c=n.length,d=n[0].indices.length,f,p=0;p<d;++p){f=u[p]*h,e.setItemLayout(n[0].indices[p],{layerIndex:0,x:a[0][p][0],y0:f,y:a[0][p][1]*h});for(var g=1;g<c;++g)f+=a[g-1][p][1]*h,e.setItemLayout(n[g].indices[p],{layerIndex:g,x:a[g][p][0],y0:f,y:a[g][p][1]*h})}}function wte(e){for(var t=e.length,i=e[0].length,r=[],n=[],o=0,s=0;s<i;++s){for(var a=0,l=0;l<t;++l)a+=e[l][s][1];a>o&&(o=a),r.push(a)}for(var u=0;u<i;++u)n[u]=(o-r[u])/2;o=0;for(var h=0;h<i;++h){var c=r[h]+n[h];c>o&&(o=c)}return{y0:n,max:o}}function bte(e){e.registerChartView(mte),e.registerSeriesModel(Cte),e.registerLayout(Ste),e.registerProcessor(Mh("themeRiver"))}var xte=2,Rte=4,BT=function(e){L(t,e);function t(i,r,n,o){var s=e.call(this)||this;s.z2=xte,s.textConfig={inside:!0},ue(s).seriesIndex=r.seriesIndex;var a=new Ae({z2:Rte,silent:i.getModel().get(["label","silent"])});return s.setTextContent(a),s.updateData(!0,i,r,n,o),s}return t.prototype.updateData=function(i,r,n,o,s){this.node=r,r.piece=this,n=n||this._seriesModel,o=o||this._ecModel;var a=this;ue(a).dataIndex=r.dataIndex;var l=r.getModel(),u=l.getModel("emphasis"),h=r.getLayout(),c=V({},h);c.label=null;var d=r.getVisual("style");d.lineJoin="bevel";var f=r.getVisual("decal");f&&(d.decal=Va(f,s));var p=os(l.getModel("itemStyle"),c,!0);V(c,p),_(Qt,function(y){var C=a.ensureState(y),S=l.getModel([y,"itemStyle"]);C.style=S.getItemStyle();var b=os(S,c);b&&(C.shape=b)}),i?(a.setShape(c),a.shape.r=h.r0,Ze(a,{shape:{r:h.r}},n,r.dataIndex)):(Me(a,{shape:c},n),sr(a)),a.useStyle(d),this._updateLabel(n);var g=l.getShallow("cursor");g&&a.attr("cursor",g),this._seriesModel=n||this._seriesModel,this._ecModel=o||this._ecModel;var v=u.get("focus"),m=v==="relative"?ku(r.getAncestorsIndices(),r.getDescendantIndices()):v==="ancestor"?r.getAncestorsIndices():v==="descendant"?r.getDescendantIndices():v;tt(this,m,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(i){var r=this,n=this.node.getModel(),o=n.getModel("label"),s=this.node.getLayout(),a=s.endAngle-s.startAngle,l=(s.startAngle+s.endAngle)/2,u=Math.cos(l),h=Math.sin(l),c=this,d=c.getTextContent(),f=this.node.dataIndex,p=o.get("minAngle")/180*Math.PI,g=o.get("show")&&!(p!=null&&Math.abs(a)<p);d.ignore=!g,_(Hu,function(m){var y=m==="normal"?n.getModel("label"):n.getModel([m,"label"]),C=m==="normal",S=C?d:d.ensureState(m),b=i.getFormattedLabel(f,m);C&&(b=b||r.node.name),S.style=Xe(y,{},null,m!=="normal",!0),b&&(S.style.text=b);var w=y.get("show");w!=null&&!C&&(S.ignore=!w);var x=v(y,"position"),R=C?c:c.states[m],D=R.style.fill;R.textConfig={outsideFill:y.get("color")==="inherit"?D:null,inside:x!=="outside"};var T,A=v(y,"distance")||0,P=v(y,"align"),M=v(y,"rotate"),F=Math.PI*.5,E=Math.PI*1.5,I=mi(M==="tangential"?Math.PI/2-l:l),O=I>F&&!Vu(I-F)&&I<E;x==="outside"?(T=s.r+A,P=O?"right":"left"):!P||P==="center"?(a===2*Math.PI&&s.r0===0?T=0:T=(s.r+s.r0)/2,P="center"):P==="left"?(T=s.r0+A,P=O?"right":"left"):P==="right"&&(T=s.r-A,P=O?"left":"right"),S.style.align=P,S.style.verticalAlign=v(y,"verticalAlign")||"middle",S.x=T*u+s.cx,S.y=T*h+s.cy;var k=0;M==="radial"?k=mi(-l)+(O?Math.PI:0):M==="tangential"?k=mi(Math.PI/2-l)+(O?Math.PI:0):Pe(M)&&(k=M*Math.PI/180),S.rotation=mi(k)});function v(m,y){var C=m.get(y);return C??o.get(y)}d.dirtyStyle()},t}(Jt),Qy="sunburstRootToNode",HT="sunburstHighlight",Dte="sunburstUnhighlight";function Tte(e){e.registerAction({type:Qy,update:"updateView"},function(t,i){i.eachComponent({mainType:"series",subType:"sunburst",query:t},r);function r(n,o){var s=th(t,[Qy],n);if(s){var a=n.getViewRoot();a&&(t.direction=Sw(a,s.node)?"rollUp":"drillDown"),n.resetViewRoot(s.node)}}}),e.registerAction({type:HT,update:"none"},function(t,i,r){t=V({},t),i.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(o){var s=th(t,[HT],o);s&&(t.dataIndex=s.node.dataIndex)}r.dispatchAction(V(t,{type:"highlight"}))}),e.registerAction({type:Dte,update:"updateView"},function(t,i,r){t=V({},t),r.dispatchAction(V(t,{type:"downplay"}))})}var _te=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n,o){var s=this;this.seriesModel=i,this.api=n,this.ecModel=r;var a=i.getData(),l=a.tree.root,u=i.getViewRoot(),h=this.group,c=i.get("renderLabelForZeroData"),d=[];u.eachNode(function(y){d.push(y)});var f=this._oldChildren||[];p(d,f),m(l,u),this._initEvents(),this._oldChildren=d;function p(y,C){if(y.length===0&&C.length===0)return;new un(C,y,S,S).add(b).update(b).remove(fe(b,null)).execute();function S(w){return w.getId()}function b(w,x){var R=w==null?null:y[w],D=x==null?null:C[x];g(R,D)}}function g(y,C){if(!c&&y&&!y.getValue()&&(y=null),y!==l&&C!==l){if(C&&C.piece)y?(C.piece.updateData(!1,y,i,r,n),a.setItemGraphicEl(y.dataIndex,C.piece)):v(C);else if(y){var S=new BT(y,i,r,n);h.add(S),a.setItemGraphicEl(y.dataIndex,S)}}}function v(y){y&&y.piece&&(h.remove(y.piece),y.piece=null)}function m(y,C){C.depth>0?(s.virtualPiece?s.virtualPiece.updateData(!1,y,i,r,n):(s.virtualPiece=new BT(y,i,r,n),h.add(s.virtualPiece)),C.piece.off("click"),s.virtualPiece.on("click",function(S){s._rootToNode(C.parentNode)})):s.virtualPiece&&(h.remove(s.virtualPiece),s.virtualPiece=null)}},t.prototype._initEvents=function(){var i=this;this.group.off("click"),this.group.on("click",function(r){var n=!1,o=i.seriesModel.getViewRoot();o.eachNode(function(s){if(!n&&s.piece&&s.piece===r.target){var a=s.getModel().get("nodeClick");if(a==="rootToNode")i._rootToNode(s);else if(a==="link"){var l=s.getModel(),u=l.get("link");if(u){var h=l.get("target",!0)||"_blank";Kd(u,h)}}n=!0}})})},t.prototype._rootToNode=function(i){i!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Qy,from:this.uid,seriesId:this.seriesModel.id,targetNode:i})},t.prototype.containPoint=function(i,r){var n=r.getData(),o=n.getItemLayout(0);if(o){var s=i[0]-o.cx,a=i[1]-o.cy,l=Math.sqrt(s*s+a*a);return l<=o.r&&l>=o.r0}},t.type="sunburst",t}(We),Ate=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.ignoreStyleOnData=!0,i}return t.prototype.getInitialData=function(i,r){var n={name:i.name,children:i.data};Sk(n);var o=this._levelModels=z(i.levels||[],function(l){return new Ne(l,this,r)},this),s=Cw.createTree(n,this,a);function a(l){l.wrapMethod("getItemModel",function(u,h){var c=s.getNodeByDataIndex(h),d=o[c.depth];return d&&(u.parentModel=d),u})}return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(i){var r=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(i);return r.treePathInfo=gp(n,this),r},t.prototype.getLevelModel=function(i){return this._levelModels&&this._levelModels[i.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(i){i?this._viewRoot=i:i=this._viewRoot;var r=this.getRawData().tree.root;(!i||i!==r&&!r.contains(i))&&(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){DL(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(qe);function Sk(e){var t=0;_(e.children,function(r){Sk(r);var n=r.value;H(n)&&(n=n[0]),t+=n});var i=e.value;H(i)&&(i=i[0]),(i==null||isNaN(i))&&(i=t),i<0&&(i=0),H(e.value)?e.value[0]=i:e.value=i}var zT=Math.PI/180;function Pte(e,t,i){t.eachSeriesByType(e,function(r){var n=r.get("center"),o=r.get("radius");H(o)||(o=[0,o]),H(n)||(n=[n,n]);var s=i.getWidth(),a=i.getHeight(),l=Math.min(s,a),u=K(n[0],s),h=K(n[1],a),c=K(o[0],l/2),d=K(o[1],l/2),f=-r.get("startAngle")*zT,p=r.get("minAngle")*zT,g=r.getData().tree.root,v=r.getViewRoot(),m=v.depth,y=r.get("sort");y!=null&&wk(v,y);var C=0;_(v.children,function(I){!isNaN(I.getValue())&&C++});var S=v.getValue(),b=Math.PI/(S||C)*2,w=v.depth>0,x=v.height-(w?-1:1),R=(d-c)/(x||1),D=r.get("clockwise"),T=r.get("stillShowZeroSum"),A=D?1:-1,P=function(I,O){if(I){var k=O;if(I!==g){var G=I.getValue(),W=S===0&&T?b:G*b;W<p&&(W=p),k=O+A*W;var $=I.depth-m-(w?-1:1),X=c+R*$,te=c+R*($+1),re=r.getLevelModel(I);if(re){var he=re.get("r0",!0),Be=re.get("r",!0),rt=re.get("radius",!0);rt!=null&&(he=rt[0],Be=rt[1]),he!=null&&(X=K(he,l/2)),Be!=null&&(te=K(Be,l/2))}I.setLayout({angle:W,startAngle:O,endAngle:k,clockwise:D,cx:u,cy:h,r0:X,r:te})}if(I.children&&I.children.length){var me=0;_(I.children,function(oe){me+=P(oe,O+me)})}return k-O}};if(w){var M=c,F=c+R,E=Math.PI*2;g.setLayout({angle:E,startAngle:f,endAngle:f+E,clockwise:D,cx:u,cy:h,r0:M,r:F})}P(v,f)})}function wk(e,t){var i=e.children||[];e.children=Mte(i,t),i.length&&_(e.children,function(r){wk(r,t)})}function Mte(e,t){if(ie(t)){var i=z(e,function(n,o){var s=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return s}},index:o}});return i.sort(function(n,o){return t(n.params,o.params)}),z(i,function(n){return e[n.index]})}else{var r=t==="asc";return e.sort(function(n,o){var s=(n.getValue()-o.getValue())*(r?1:-1);return s===0?(n.dataIndex-o.dataIndex)*(r?-1:1):s})}}function Fte(e){var t={};function i(r,n,o){for(var s=r;s&&s.depth>1;)s=s.parentNode;var a=n.getColorFromPalette(s.name||s.dataIndex+"",t);return r.depth>1&&q(a)&&(a=Bm(a,(r.depth-1)/(o-1)*.5)),a}e.eachSeriesByType("sunburst",function(r){var n=r.getData(),o=n.tree;o.eachNode(function(s){var a=s.getModel(),l=a.getModel("itemStyle").getItemStyle();l.fill||(l.fill=i(s,r,o.root.height));var u=n.ensureUniqueItemVisual(s.dataIndex,"style");V(u,l)})})}function Ete(e){e.registerChartView(_te),e.registerSeriesModel(Ate),e.registerLayout(fe(Pte,"sunburst")),e.registerProcessor(fe(Mh,"sunburst")),e.registerVisual(Fte),Tte(e)}var WT={color:"fill",borderColor:"stroke"},Ite={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},tn=_e(),Lte=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(i,r){return mn(null,this)},t.prototype.getDataParams=function(i,r,n){var o=e.prototype.getDataParams.call(this,i,r);return n&&(o.info=tn(n).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(qe);function kte(e,t){return t=t||[0,0],z(["x","y"],function(i,r){var n=this.getAxis(i),o=t[r],s=e[r]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(o-s)-n.dataToCoord(o+s))},this)}function Ote(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(i){return e.dataToPoint(i)},size:Z(kte,e)}}}function Gte(e,t){return t=t||[0,0],z([0,1],function(i){var r=t[i],n=e[i]/2,o=[],s=[];return o[i]=r-n,s[i]=r+n,o[1-i]=s[1-i]=t[1-i],Math.abs(this.dataToPoint(o)[i]-this.dataToPoint(s)[i])},this)}function Nte(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(i){return e.dataToPoint(i)},size:Z(Gte,e)}}}function Vte(e,t){var i=this.getAxis(),r=t instanceof Array?t[0]:t,n=(e instanceof Array?e[0]:e)/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(r-n)-i.dataToCoord(r+n))}function Bte(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(i){return e.dataToPoint(i)},size:Z(Vte,e)}}}function Hte(e,t){return t=t||[0,0],z(["Radius","Angle"],function(i,r){var n="get"+i+"Axis",o=this[n](),s=t[r],a=e[r]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-a)-o.dataToCoord(s+a));return i==="Angle"&&(l=l*Math.PI/180),l},this)}function zte(e){var t=e.getRadiusAxis(),i=e.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:r[1],r0:r[0]},api:{coord:function(n){var o=t.dataToRadius(n[0]),s=i.dataToAngle(n[1]),a=e.coordToPoint([o,s]);return a.push(o,s*Math.PI/180),a},size:Z(Hte,e)}}}function Wte(e){var t=e.getRect(),i=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:i.start,end:i.end,weeks:i.weeks,dayCount:i.allDay}},api:{coord:function(r,n){return e.dataToPoint(r,n)}}}}function bk(e,t,i,r){return e&&(e.legacy||e.legacy!==!1&&!i&&!r&&t!=="tspan"&&(t==="text"||j(e,"text")))}function xk(e,t,i){var r=e,n,o,s;if(t==="text")s=r;else{s={},j(r,"text")&&(s.text=r.text),j(r,"rich")&&(s.rich=r.rich),j(r,"textFill")&&(s.fill=r.textFill),j(r,"textStroke")&&(s.stroke=r.textStroke),j(r,"fontFamily")&&(s.fontFamily=r.fontFamily),j(r,"fontSize")&&(s.fontSize=r.fontSize),j(r,"fontStyle")&&(s.fontStyle=r.fontStyle),j(r,"fontWeight")&&(s.fontWeight=r.fontWeight),o={type:"text",style:s,silent:!0},n={};var a=j(r,"textPosition");i?n.position=a?r.textPosition:"inside":a&&(n.position=r.textPosition),j(r,"textPosition")&&(n.position=r.textPosition),j(r,"textOffset")&&(n.offset=r.textOffset),j(r,"textRotation")&&(n.rotation=r.textRotation),j(r,"textDistance")&&(n.distance=r.textDistance)}return UT(s,e),_(s.rich,function(l){UT(l,l)}),{textConfig:n,textContent:o}}function UT(e,t){t&&(t.font=t.textFont||t.font,j(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),j(t,"textAlign")&&(e.align=t.textAlign),j(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),j(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),j(t,"textWidth")&&(e.width=t.textWidth),j(t,"textHeight")&&(e.height=t.textHeight),j(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),j(t,"textPadding")&&(e.padding=t.textPadding),j(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),j(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),j(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),j(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),j(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),j(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),j(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function $T(e,t,i){var r=e;r.textPosition=r.textPosition||i.position||"inside",i.offset!=null&&(r.textOffset=i.offset),i.rotation!=null&&(r.textRotation=i.rotation),i.distance!=null&&(r.textDistance=i.distance);var n=r.textPosition.indexOf("inside")>=0,o=e.fill||"#000";KT(r,t);var s=r.textFill==null;return n?s&&(r.textFill=i.insideFill||"#fff",!r.textStroke&&i.insideStroke&&(r.textStroke=i.insideStroke),!r.textStroke&&(r.textStroke=o),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(s&&(r.textFill=e.fill||i.outsideFill||"#000"),!r.textStroke&&i.outsideStroke&&(r.textStroke=i.outsideStroke)),r.text=t.text,r.rich=t.rich,_(t.rich,function(a){KT(a,a)}),r}function KT(e,t){t&&(j(t,"fill")&&(e.textFill=t.fill),j(t,"stroke")&&(e.textStroke=t.fill),j(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),j(t,"font")&&(e.font=t.font),j(t,"fontStyle")&&(e.fontStyle=t.fontStyle),j(t,"fontWeight")&&(e.fontWeight=t.fontWeight),j(t,"fontSize")&&(e.fontSize=t.fontSize),j(t,"fontFamily")&&(e.fontFamily=t.fontFamily),j(t,"align")&&(e.textAlign=t.align),j(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),j(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),j(t,"width")&&(e.textWidth=t.width),j(t,"height")&&(e.textHeight=t.height),j(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),j(t,"padding")&&(e.textPadding=t.padding),j(t,"borderColor")&&(e.textBorderColor=t.borderColor),j(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),j(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),j(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),j(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),j(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),j(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),j(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),j(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),j(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),j(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var Rk={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},YT=De(Rk);Er(Lr,function(e,t){return e[t]=1,e},{});Lr.join(", ");var ff=["","style","shape","extra"],Ua=_e();function Gw(e,t,i,r,n){var o=e+"Animation",s=il(e,r,n)||{},a=Ua(t).userDuring;return s.duration>0&&(s.during=a?Z(Xte,{el:t,userDuring:a}):null,s.setToFinal=!0,s.scope=e),V(s,i[o]),s}function cd(e,t,i,r){r=r||{};var n=r.dataIndex,o=r.isInit,s=r.clearStyle,a=i.isAnimationEnabled(),l=Ua(e),u=t.style;l.userDuring=t.during;var h={},c={};if(Zte(e,t,c),qT("shape",t,c),qT("extra",t,c),!o&&a&&(qte(e,t,h),XT("shape",e,t,h),XT("extra",e,t,h),jte(e,t,u,h)),c.style=u,Ute(e,c,s),Kte(e,t),a)if(o){var d={};_(ff,function(p){var g=p?t[p]:t;g&&g.enterFrom&&(p&&(d[p]=d[p]||{}),V(p?d[p]:d,g.enterFrom))});var f=Gw("enter",e,t,i,n);f.duration>0&&e.animateFrom(d,f)}else $te(e,t,n||0,i,h);Dk(e,t),u?e.dirty():e.markRedraw()}function Dk(e,t){for(var i=Ua(e).leaveToProps,r=0;r<ff.length;r++){var n=ff[r],o=n?t[n]:t;o&&o.leaveTo&&(i||(i=Ua(e).leaveToProps={}),n&&(i[n]=i[n]||{}),V(n?i[n]:i,o.leaveTo))}}function yp(e,t,i,r){if(e){var n=e.parent,o=Ua(e).leaveToProps;if(o){var s=Gw("update",e,t,i,0);s.done=function(){n.remove(e)},e.animateTo(o,s)}else n.remove(e)}}function Cs(e){return e==="all"}function Ute(e,t,i){var r=t.style;if(!e.isGroup&&r){if(i){e.useStyle({});for(var n=e.animators,o=0;o<n.length;o++){var s=n[o];s.targetName==="style"&&s.changeTarget(e.style)}}e.setStyle(r)}t&&(t.style=null,t&&e.attr(t),t.style=r)}function $te(e,t,i,r,n){if(n){var o=Gw("update",e,t,r,i);o.duration>0&&e.animateFrom(n,o)}}function Kte(e,t){j(t,"silent")&&(e.silent=t.silent),j(t,"ignore")&&(e.ignore=t.ignore),e instanceof zi&&j(t,"invisible")&&(e.invisible=t.invisible),e instanceof be&&j(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var vr={},Yte={setTransform:function(e,t){return vr.el[e]=t,this},getTransform:function(e){return vr.el[e]},setShape:function(e,t){var i=vr.el,r=i.shape||(i.shape={});return r[e]=t,i.dirtyShape&&i.dirtyShape(),this},getShape:function(e){var t=vr.el.shape;if(t)return t[e]},setStyle:function(e,t){var i=vr.el,r=i.style;return r&&(r[e]=t,i.dirtyStyle&&i.dirtyStyle()),this},getStyle:function(e){var t=vr.el.style;if(t)return t[e]},setExtra:function(e,t){var i=vr.el.extra||(vr.el.extra={});return i[e]=t,this},getExtra:function(e){var t=vr.el.extra;if(t)return t[e]}};function Xte(){var e=this,t=e.el;if(t){var i=Ua(t).userDuring,r=e.userDuring;if(i!==r){e.el=e.userDuring=null;return}vr.el=t,r(Yte)}}function XT(e,t,i,r){var n=i[e];if(n){var o=t[e],s;if(o){var a=i.transition,l=n.transition;if(l)if(!s&&(s=r[e]={}),Cs(l))V(s,o);else for(var u=ze(l),h=0;h<u.length;h++){var c=u[h],d=o[c];s[c]=d}else if(Cs(a)||Ce(a,e)>=0){!s&&(s=r[e]={});for(var f=De(o),h=0;h<f.length;h++){var c=f[h],d=o[c];Qte(n[c],d)&&(s[c]=d)}}}}}function qT(e,t,i){var r=t[e];if(r)for(var n=i[e]={},o=De(r),s=0;s<o.length;s++){var a=o[s];n[a]=pu(r[a])}}function qte(e,t,i){for(var r=t.transition,n=Cs(r)?Lr:ze(r||[]),o=0;o<n.length;o++){var s=n[o];if(!(s==="style"||s==="shape"||s==="extra")){var a=e[s];i[s]=a}}}function Zte(e,t,i){for(var r=0;r<YT.length;r++){var n=YT[r],o=Rk[n],s=t[n];s&&(i[o[0]]=s[0],i[o[1]]=s[1])}for(var r=0;r<Lr.length;r++){var a=Lr[r];t[a]!=null&&(i[a]=t[a])}}function jte(e,t,i,r){if(i){var n=e.style,o;if(n){var s=i.transition,a=t.transition;if(s&&!Cs(s)){var l=ze(s);!o&&(o=r.style={});for(var u=0;u<l.length;u++){var h=l[u],c=n[h];o[h]=c}}else if(e.getAnimationStyleProps&&(Cs(a)||Cs(s)||Ce(a,"style")>=0)){var d=e.getAnimationStyleProps(),f=d?d.style:null;if(f){!o&&(o=r.style={});for(var p=De(i),u=0;u<p.length;u++){var h=p[u];if(f[h]){var c=n[h];o[h]=c}}}}}}}function Qte(e,t){return Ot(e)?e!==t:e!=null&&isFinite(e)}var Tk=_e(),Jte=["percent","easing","shape","style","extra"];function _k(e){e.stopAnimation("keyframe"),e.attr(Tk(e))}function pf(e,t,i){if(!(!i.isAnimationEnabled()||!t)){if(H(t)){_(t,function(a){pf(e,a,i)});return}var r=t.keyframes,n=t.duration;if(i&&n==null){var o=il("enter",i,0);n=o&&o.duration}if(!(!r||!n)){var s=Tk(e);_(ff,function(a){if(!(a&&!e[a])){var l;r.sort(function(u,h){return u.percent-h.percent}),_(r,function(u){var h=e.animators,c=a?u[a]:u;if(c){var d=De(c);if(a||(d=Le(d,function(g){return Ce(Jte,g)<0})),!!d.length){l||(l=e.animate(a,t.loop,!0),l.scope="keyframe");for(var f=0;f<h.length;f++)h[f]!==l&&h[f].targetName===l.targetName&&h[f].stopTracks(d);a&&(s[a]=s[a]||{});var p=a?s[a]:s;_(d,function(g){p[g]=((a?e[a]:e)||{})[g]}),l.whenWithKeys(n*u.percent,c,d,u.easing)}}}),l&&l.delay(t.delay||0).duration(n).start(t.easing)}})}}}var rn="emphasis",Wn="normal",Nw="blur",Vw="select",so=[Wn,rn,Nw,Vw],Nv={normal:["itemStyle"],emphasis:[rn,"itemStyle"],blur:[Nw,"itemStyle"],select:[Vw,"itemStyle"]},Vv={normal:["label"],emphasis:[rn,"label"],blur:[Nw,"label"],select:[Vw,"label"]},eie=["x","y"],tie="e\0\0",Di={normal:{},emphasis:{},blur:{},select:{}},iie={cartesian2d:Ote,geo:Nte,single:Bte,polar:zte,calendar:Wte};function Jy(e){return e instanceof be}function eC(e){return e instanceof zi}function rie(e,t){t.copyTransform(e),eC(t)&&eC(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,Jy(t)&&Jy(e)&&t.setShape(e.shape))}var nie=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n,o){this._progressiveEls=null;var s=this._data,a=i.getData(),l=this.group,u=ZT(i,a,r,n);s||l.removeAll(),a.diff(s).add(function(c){Bv(n,null,c,u(c,o),i,l,a)}).remove(function(c){var d=s.getItemGraphicEl(c);d&&yp(d,tn(d).option,i)}).update(function(c,d){var f=s.getItemGraphicEl(d);Bv(n,f,c,u(c,o),i,l,a)}).execute();var h=i.get("clip",!0)?Ah(i.coordinateSystem,!1,i):null;h?l.setClipPath(h):l.removeClipPath(),this._data=a},t.prototype.incrementalPrepareRender=function(i,r,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(i,r,n,o,s){var a=r.getData(),l=ZT(r,a,n,o),u=this._progressiveEls=[];function h(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var c=i.start;c<i.end;c++){var d=Bv(null,null,c,l(c,s),r,this.group,a);d&&(d.traverse(h),u.push(d))}},t.prototype.eachRendered=function(i){uo(this._progressiveEls||this.group,i)},t.prototype.filterForExposedEvent=function(i,r,n,o){var s=r.element;if(s==null||n.name===s)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===s)return!0;return!1},t.type="custom",t}(We);function Bw(e){var t=e.type,i;if(t==="path"){var r=e.shape,n=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,o=Mk(r);i=Xf(o,null,n,r.layout||"center"),tn(i).customPathData=o}else if(t==="image")i=new Rt({}),tn(i).customImagePath=e.style.image;else if(t==="text")i=new Ae({});else if(t==="group")i=new le;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var s=_S(t);if(!s){var a="";Ie(a)}i=new s}return tn(i).customGraphicType=t,i.name=e.name,i.z2EmphasisLift=1,i.z2SelectLift=1,i}function Hw(e,t,i,r,n,o,s){_k(t);var a=n&&n.normal.cfg;a&&t.setTextConfig(a),r&&r.transition==null&&(r.transition=eie);var l=r&&r.style;if(l){if(t.type==="text"){var u=l;j(u,"textFill")&&(u.fill=u.textFill),j(u,"textStroke")&&(u.stroke=u.textStroke)}var h=void 0,c=Jy(t)?l.decal:null;e&&c&&(c.dirty=!0,h=Va(c,e)),l.__decalPattern=h}if(eC(t)&&l){var h=l.__decalPattern;h&&(l.decal=h)}cd(t,r,o,{dataIndex:i,isInit:s,clearStyle:!0}),pf(t,r.keyframeAnimation,o)}function Ak(e,t,i,r,n){var o=t.isGroup?null:t,s=n&&n[e].cfg;if(o){var a=o.ensureState(e);if(r===!1){var l=o.getState(e);l&&(l.style=null)}else a.style=r||null;s&&(a.textConfig=s),Ds(o)}}function oie(e,t,i){if(!e.isGroup){var r=e,n=i.currentZ,o=i.currentZLevel;r.z=n,r.zlevel=o;var s=t.z2;s!=null&&(r.z2=s||0);for(var a=0;a<so.length;a++)sie(r,t,so[a])}}function sie(e,t,i){var r=i===Wn,n=r?t:gf(t,i),o=n?n.z2:null,s;o!=null&&(s=r?e:e.ensureState(i),s.z2=o||0)}function ZT(e,t,i,r){var n=e.get("renderItem"),o=e.coordinateSystem,s={};o&&(s=o.prepareCustoms?o.prepareCustoms(o):iie[o.type](o));for(var a=ne({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:S,style:w,ordinalRawValue:b,styleEmphasis:x,visual:T,barLayout:A,currentSeriesIndices:P,font:M},s.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:aie(e.getData())},u,h,c={},d={},f={},p={},g=0;g<so.length;g++){var v=so[g];f[v]=e.getModel(Nv[v]),p[v]=e.getModel(Vv[v])}function m(F){return F===u?h||(h=t.getItemModel(F)):t.getItemModel(F)}function y(F,E){return t.hasItemOption?F===u?c[E]||(c[E]=m(F).getModel(Nv[E])):m(F).getModel(Nv[E]):f[E]}function C(F,E){return t.hasItemOption?F===u?d[E]||(d[E]=m(F).getModel(Vv[E])):m(F).getModel(Vv[E]):p[E]}return function(F,E){return u=F,h=null,c={},d={},n&&n(ne({dataIndexInside:F,dataIndex:t.getRawIndex(F),actionType:E?E.type:null},l),a)};function S(F,E){return E==null&&(E=u),t.getStore().get(t.getDimensionIndex(F||0),E)}function b(F,E){E==null&&(E=u),F=F||0;var I=t.getDimensionInfo(F);if(!I){var O=t.getDimensionIndex(F);return O>=0?t.getStore().get(O,E):void 0}var k=t.get(I.name,E),G=I&&I.ordinalMeta;return G?G.categories[k]:k}function w(F,E){E==null&&(E=u);var I=t.getItemVisual(E,"style"),O=I&&I.fill,k=I&&I.opacity,G=y(E,Wn).getItemStyle();O!=null&&(G.fill=O),k!=null&&(G.opacity=k);var W={inheritColor:q(O)?O:"#000"},$=C(E,Wn),X=Xe($,null,W,!1,!0);X.text=$.getShallow("show")?de(e.getFormattedLabel(E,Wn),Ha(t,E)):null;var te=Ud($,W,!1);return D(F,G),G=$T(G,X,te),F&&R(G,F),G.legacy=!0,G}function x(F,E){E==null&&(E=u);var I=y(E,rn).getItemStyle(),O=C(E,rn),k=Xe(O,null,null,!0,!0);k.text=O.getShallow("show")?Ar(e.getFormattedLabel(E,rn),e.getFormattedLabel(E,Wn),Ha(t,E)):null;var G=Ud(O,null,!0);return D(F,I),I=$T(I,k,G),F&&R(I,F),I.legacy=!0,I}function R(F,E){for(var I in E)j(E,I)&&(F[I]=E[I])}function D(F,E){F&&(F.textFill&&(E.textFill=F.textFill),F.textPosition&&(E.textPosition=F.textPosition))}function T(F,E){if(E==null&&(E=u),j(WT,F)){var I=t.getItemVisual(E,"style");return I?I[WT[F]]:null}if(j(Ite,F))return t.getItemVisual(E,F)}function A(F){if(o.type==="cartesian2d"){var E=o.getBaseAxis();return Z8(ne({axis:E},F))}}function P(){return i.getCurrentSeriesIndices()}function M(F){return AS(F,i)}}function aie(e){var t={};return _(e.dimensions,function(i){var r=e.getDimensionInfo(i);if(!r.isExtraCoord){var n=r.coordDim,o=t[n]=t[n]||[];o[r.coordDimIndex]=e.getDimensionIndex(i)}}),t}function Bv(e,t,i,r,n,o,s){if(!r){o.remove(t);return}var a=zw(e,t,i,r,n,o);return a&&s.setItemGraphicEl(i,a),a&&tt(a,r.focus,r.blurScope,r.emphasisDisabled),a}function zw(e,t,i,r,n,o){var s=-1,a=t;t&&Pk(t,r,n)&&(s=Ce(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=Bw(r),a&&rie(a,u)),r.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Di.normal.cfg=Di.normal.conOpt=Di.emphasis.cfg=Di.emphasis.conOpt=Di.blur.cfg=Di.blur.conOpt=Di.select.cfg=Di.select.conOpt=null,Di.isLegacy=!1,uie(u,i,r,n,l,Di),lie(u,i,r,n,l),Hw(e,u,i,r,Di,n,l),j(r,"info")&&(tn(u).info=r.info);for(var h=0;h<so.length;h++){var c=so[h];if(c!==Wn){var d=gf(r,c),f=Ww(r,d,c);Ak(c,u,d,f,Di)}}return oie(u,r,n),r.type==="group"&&hie(e,u,i,r,n),s>=0?o.replaceAt(u,s):o.add(u),u}function Pk(e,t,i){var r=tn(e),n=t.type,o=t.shape,s=t.style;return i.isUniversalTransitionEnabled()||n!=null&&n!==r.customGraphicType||n==="path"&&pie(o)&&Mk(o)!==r.customPathData||n==="image"&&j(s,"image")&&s.image!==r.customImagePath}function lie(e,t,i,r,n){var o=i.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var s=e.getClipPath();s&&Pk(s,o,r)&&(s=null),s||(s=Bw(o),e.setClipPath(s)),Hw(null,s,t,o,null,r,n)}}function uie(e,t,i,r,n,o){if(!e.isGroup){jT(i,null,o),jT(i,rn,o);var s=o.normal.conOpt,a=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(s!=null||a!=null||u!=null||l!=null){var h=e.getTextContent();if(s===!1)h&&e.removeTextContent();else{s=o.normal.conOpt=s||{type:"text"},h?h.clearStates():(h=Bw(s),e.setTextContent(h)),Hw(null,h,t,s,null,r,n);for(var c=s&&s.style,d=0;d<so.length;d++){var f=so[d];if(f!==Wn){var p=o[f].conOpt;Ak(f,h,p,Ww(s,p,f),null)}}c?h.dirty():h.markRedraw()}}}}function jT(e,t,i){var r=t?gf(e,t):e,n=t?Ww(e,r,rn):e.style,o=e.type,s=r?r.textConfig:null,a=e.textContent,l=a?t?gf(a,t):a:null;if(n&&(i.isLegacy||bk(n,o,!!s,!!l))){i.isLegacy=!0;var u=xk(n,o,!t);!s&&u.textConfig&&(s=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var h=l;!h.type&&(h.type="text")}var c=t?i[t]:i.normal;c.cfg=s,c.conOpt=l}function gf(e,t){return t?e?e[t]:null:e}function Ww(e,t,i){var r=t&&t.style;return r==null&&i===rn&&e&&(r=e.styleEmphasis),r}function hie(e,t,i,r,n){var o=r.children,s=o?o.length:0,a=r.$mergeChildren,l=a==="byName"||r.diffChildrenByName,u=a===!1;if(!(!s&&!l&&!u)){if(l){die({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:i,seriesModel:n,group:t});return}u&&t.removeAll();for(var h=0;h<s;h++){var c=o[h],d=t.childAt(h);c?(c.ignore==null&&(c.ignore=!1),zw(e,d,i,c,n,t)):d.ignore=!0}for(var f=t.childCount()-1;f>=h;f--){var p=t.childAt(f);cie(t,p,n)}}}function cie(e,t,i){t&&yp(t,tn(e).option,i)}function die(e){new un(e.oldChildren,e.newChildren,QT,QT,e).add(JT).update(JT).remove(fie).execute()}function QT(e,t){var i=e&&e.name;return i??tie+t}function JT(e,t){var i=this.context,r=e!=null?i.newChildren[e]:null,n=t!=null?i.oldChildren[t]:null;zw(i.api,n,i.dataIndex,r,i.seriesModel,i.group)}function fie(e){var t=this.context,i=t.oldChildren[e];i&&yp(i,tn(i).option,t.seriesModel)}function Mk(e){return e&&(e.pathData||e.d)}function pie(e){return e&&(j(e,"pathData")||j(e,"d"))}function gie(e){e.registerChartView(nie),e.registerSeriesModel(Lte)}var qo=_e(),e_=ae,Hv=Z,Uw=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,i,r,n){var o=i.get("value"),s=i.get("status");if(this._axisModel=t,this._axisPointerModel=i,this._api=r,!(!n&&this._lastValue===o&&this._lastStatus===s)){this._lastValue=o,this._lastStatus=s;var a=this._group,l=this._handle;if(!s||s==="hide"){a&&a.hide(),l&&l.hide();return}a&&a.show(),l&&l.show();var u={};this.makeElOption(u,o,t,i,r);var h=u.graphicKey;h!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=h;var c=this._moveAnimation=this.determineAnimation(t,i);if(!a)a=this._group=new le,this.createPointerEl(a,u,t,i),this.createLabelEl(a,u,t,i),r.getZr().add(a);else{var d=fe(t_,i,c);this.updatePointerEl(a,u,d),this.updateLabelEl(a,u,d,i)}r_(a,i,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,i){var r=i.get("animation"),n=t.axis,o=n.type==="category",s=i.get("snap");if(!s&&!o)return!1;if(r==="auto"||r==null){var a=this.animationThreshold;if(o&&n.getBandWidth()>a)return!0;if(s){var l=dw(t).seriesDataCount,u=n.getExtent();return Math.abs(u[0]-u[1])/l>a}return!1}return r===!0},e.prototype.makeElOption=function(t,i,r,n,o){},e.prototype.createPointerEl=function(t,i,r,n){var o=i.pointer;if(o){var s=qo(t).pointerEl=new Os[o.type](e_(i.pointer));t.add(s)}},e.prototype.createLabelEl=function(t,i,r,n){if(i.label){var o=qo(t).labelEl=new Ae(e_(i.label));t.add(o),i_(o,n)}},e.prototype.updatePointerEl=function(t,i,r){var n=qo(t).pointerEl;n&&i.pointer&&(n.setStyle(i.pointer.style),r(n,{shape:i.pointer.shape}))},e.prototype.updateLabelEl=function(t,i,r,n){var o=qo(t).labelEl;o&&(o.setStyle(i.label.style),r(o,{x:i.label.x,y:i.label.y}),i_(o,n))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var i=this._axisPointerModel,r=this._api.getZr(),n=this._handle,o=i.getModel("handle"),s=i.get("status");if(!o.get("show")||!s||s==="hide"){n&&r.remove(n),this._handle=null;return}var a;this._handle||(a=!0,n=this._handle=wh(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){on(u.event)},onmousedown:Hv(this._onHandleDragMove,this,0,0),drift:Hv(this._onHandleDragMove,this),ondragend:Hv(this._onHandleDragEnd,this)}),r.add(n)),r_(n,i,!1),n.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");H(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,ul(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,a)}},e.prototype._moveHandleToValue=function(t,i){t_(this._axisPointerModel,!i&&this._moveAnimation,this._handle,zv(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,i){var r=this._handle;if(r){this._dragging=!0;var n=this.updateHandleTransform(zv(r),[t,i],this._axisModel,this._axisPointerModel);this._payloadInfo=n,r.stopAnimation(),r.attr(zv(n)),qo(r).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var i=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:i.cursorPoint[0],y:i.cursorPoint[1],tooltipOption:i.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var i=this._axisPointerModel.get("value");this._moveHandleToValue(i),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var i=t.getZr(),r=this._group,n=this._handle;i&&r&&(this._lastGraphicKey=null,r&&i.remove(r),n&&i.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),Yu(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,i,r){return r=r||0,{x:t[r],y:t[1-r],width:i[r],height:i[1-r]}},e}();function t_(e,t,i,r){Fk(qo(i).lastProp,r)||(qo(i).lastProp=r,t?Me(i,r,e):(i.stopAnimation(),i.attr(r)))}function Fk(e,t){if(se(e)&&se(t)){var i=!0;return _(t,function(r,n){i=i&&Fk(e[n],r)}),!!i}else return e===t}function i_(e,t){e[t.get(["label","show"])?"show":"hide"]()}function zv(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function r_(e,t,i){var r=t.get("z"),n=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(r!=null&&(o.z=r),n!=null&&(o.zlevel=n),o.silent=i)})}function $w(e){var t=e.get("type"),i=e.getModel(t+"Style"),r;return t==="line"?(r=i.getLineStyle(),r.fill=null):t==="shadow"&&(r=i.getAreaStyle(),r.stroke=null),r}function Ek(e,t,i,r,n){var o=i.get("value"),s=Ik(o,t.axis,t.ecModel,i.get("seriesDataIndices"),{precision:i.get(["label","precision"]),formatter:i.get(["label","formatter"])}),a=i.getModel("label"),l=ol(a.get("padding")||0),u=a.getFont(),h=ph(s,u),c=n.position,d=h.width+l[1]+l[3],f=h.height+l[0]+l[2],p=n.align;p==="right"&&(c[0]-=d),p==="center"&&(c[0]-=d/2);var g=n.verticalAlign;g==="bottom"&&(c[1]-=f),g==="middle"&&(c[1]-=f/2),vie(c,d,f,r);var v=a.get("backgroundColor");(!v||v==="auto")&&(v=t.get(["axisLine","lineStyle","color"])),e.label={x:c[0],y:c[1],style:Xe(a,{text:s,font:u,fill:a.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function vie(e,t,i,r){var n=r.getWidth(),o=r.getHeight();e[0]=Math.min(e[0]+t,n)-t,e[1]=Math.min(e[1]+i,o)-i,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function Ik(e,t,i,r,n){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:n.precision}),s=n.formatter;if(s){var a={value:tw(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};_(r,function(l){var u=i.getSeriesByIndex(l.seriesIndex),h=l.dataIndexInside,c=u&&u.getDataParams(h);c&&a.seriesData.push(c)}),q(s)?o=s.replace("{value}",o):ie(s)&&(o=s(a))}return o}function Kw(e,t,i){var r=Ci();return Ls(r,r,i.rotation),Ir(r,r,i.position),rr([e.dataToCoord(t),(i.labelOffset||0)+(i.labelDirection||1)*(i.labelMargin||0)],r)}function Lk(e,t,i,r,n,o){var s=Zt.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=n.get(["label","margin"]),Ek(t,r,n,o,{position:Kw(r.axis,e,i),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function Yw(e,t,i){return i=i||0,{x1:e[i],y1:e[1-i],x2:t[i],y2:t[1-i]}}function kk(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}}function n_(e,t,i,r,n,o){return{cx:e,cy:t,r0:i,r,startAngle:n,endAngle:o,clockwise:!0}}var mie=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(i,r,n,o,s){var a=n.axis,l=a.grid,u=o.get("type"),h=o_(l,a).getOtherAxis(a).getGlobalExtent(),c=a.toGlobalCoord(a.dataToCoord(r,!0));if(u&&u!=="none"){var d=$w(o),f=yie[u](a,c,h);f.style=d,i.graphicKey=f.type,i.pointer=f}var p=Ly(l.model,n);Lk(r,i,p,n,o,s)},t.prototype.getHandleTransform=function(i,r,n){var o=Ly(r.axis.grid.model,r,{labelInside:!1});o.labelMargin=n.get(["handle","margin"]);var s=Kw(r.axis,i,o);return{x:s[0],y:s[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(i,r,n,o){var s=n.axis,a=s.grid,l=s.getGlobalExtent(!0),u=o_(a,s).getOtherAxis(s).getGlobalExtent(),h=s.dim==="x"?0:1,c=[i.x,i.y];c[h]+=r[h],c[h]=Math.min(l[1],c[h]),c[h]=Math.max(l[0],c[h]);var d=(u[1]+u[0])/2,f=[d,d];f[h]=c[h];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:i.rotation,cursorPoint:f,tooltipOption:p[h]}},t}(Uw);function o_(e,t){var i={};return i[t.dim+"AxisIndex"]=t.index,e.getCartesian(i)}var yie={line:function(e,t,i){var r=Yw([t,i[0]],[t,i[1]],s_(e));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(e,t,i){var r=Math.max(1,e.getBandWidth()),n=i[1]-i[0];return{type:"Rect",shape:kk([t-r/2,i[0]],[r,n],s_(e))}}};function s_(e){return e.dim==="x"?0:1}var Cie=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Re),Xr=_e(),Sie=_;function Ok(e,t,i){if(!xe.node){var r=t.getZr();Xr(r).records||(Xr(r).records={}),wie(r,t);var n=Xr(r).records[e]||(Xr(r).records[e]={});n.handler=i}}function wie(e,t){if(Xr(e).initialized)return;Xr(e).initialized=!0,i("click",fe(a_,"click")),i("mousemove",fe(a_,"mousemove")),i("globalout",xie);function i(r,n){e.on(r,function(o){var s=Rie(t);Sie(Xr(e).records,function(a){a&&n(a,o,s.dispatchAction)}),bie(s.pendings,t)})}}function bie(e,t){var i=e.showTip.length,r=e.hideTip.length,n;i?n=e.showTip[i-1]:r&&(n=e.hideTip[r-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function xie(e,t,i){e.handler("leave",null,i)}function a_(e,t,i,r){t.handler(e,i,r)}function Rie(e){var t={showTip:[],hideTip:[]},i=function(r){var n=t[r.type];n?n.push(r):(r.dispatchAction=i,e.dispatchAction(r))};return{dispatchAction:i,pendings:t}}function tC(e,t){if(!xe.node){var i=t.getZr(),r=(Xr(i).records||{})[e];r&&(Xr(i).records[e]=null)}}var Die=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o=r.getComponent("tooltip"),s=i.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";Ok("axisPointer",n,function(a,l,u){s!=="none"&&(a==="leave"||s.indexOf(a)>=0)&&u({type:"updateAxisPointer",currTrigger:a,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(i,r){tC("axisPointer",r)},t.prototype.dispose=function(i,r){tC("axisPointer",r)},t.type="axisPointer",t}(Qe);function Gk(e,t){var i=[],r=e.seriesIndex,n;if(r==null||!(n=t.getSeriesByIndex(r)))return{point:[]};var o=n.getData(),s=xs(o,e);if(s==null||s<0||H(s))return{point:[]};var a=o.getItemGraphicEl(s),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),c=h.dim,d=u.dim,f=c==="x"||c==="radius"?1:0,p=o.mapDimension(d),g=[];g[f]=o.get(p,s),g[1-f]=o.get(o.getCalculationInfo("stackResultDimension"),s),i=l.dataToPoint(g)||[]}else i=l.dataToPoint(o.getValues(z(l.dimensions,function(m){return o.mapDimension(m)}),s))||[];else if(a){var v=a.getBoundingRect().clone();v.applyTransform(a.transform),i=[v.x+v.width/2,v.y+v.height/2]}return{point:i,el:a}}var l_=_e();function Tie(e,t,i){var r=e.currTrigger,n=[e.x,e.y],o=e,s=e.dispatchAction||Z(i.dispatchAction,i),a=t.getComponent("axisPointer").coordSysAxesInfo;if(a){dd(n)&&(n=Gk({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=dd(n),u=o.axesInfo,h=a.axesInfo,c=r==="leave"||dd(n),d={},f={},p={list:[],map:{}},g={showPointer:fe(Aie,f),showTooltip:fe(Pie,p)};_(a.coordSysMap,function(m,y){var C=l||m.containPoint(n);_(a.coordSysAxesInfo[y],function(S,b){var w=S.axis,x=Iie(u,S);if(!c&&C&&(!u||x)){var R=x&&x.value;R==null&&!l&&(R=w.pointToData(n)),R!=null&&u_(S,R,g,!1,d)}})});var v={};return _(h,function(m,y){var C=m.linkGroup;C&&!f[y]&&_(C.axesInfo,function(S,b){var w=f[b];if(S!==m&&w){var x=w.value;C.mapper&&(x=m.axis.scale.parse(C.mapper(x,h_(S),h_(m)))),v[m.key]=x}})}),_(v,function(m,y){u_(h[y],m,g,!0,d)}),Mie(f,h,d),Fie(p,n,e,s),Eie(h,s,i),d}}function u_(e,t,i,r,n){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){i.showPointer(e,t);return}var s=_ie(t,e),a=s.payloadBatch,l=s.snapToValue;a[0]&&n.seriesIndex==null&&V(n,a[0]),!r&&e.snap&&o.containData(l)&&l!=null&&(t=l),i.showPointer(e,t,a),i.showTooltip(e,s,l)}}function _ie(e,t){var i=t.axis,r=i.dim,n=e,o=[],s=Number.MAX_VALUE,a=-1;return _(t.seriesModels,function(l,u){var h=l.getData().mapDimensionsAll(r),c,d;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(h,e,i);d=f.dataIndices,c=f.nestestValue}else{if(d=l.getData().indicesOfNearest(h[0],e,i.type==="category"?.5:null),!d.length)return;c=l.getData().get(h[0],d[0])}if(!(c==null||!isFinite(c))){var p=e-c,g=Math.abs(p);g<=s&&((g<s||p>=0&&a<0)&&(s=g,a=p,n=c,o.length=0),_(d,function(v){o.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:o,snapToValue:n}}function Aie(e,t,i,r){e[t.key]={value:i,payloadBatch:r}}function Pie(e,t,i,r){var n=i.payloadBatch,o=t.axis,s=o.model,a=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var l=t.coordSys.model,u=eh(l),h=e.map[u];h||(h=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(h)),h.dataByAxis.push({axisDim:o.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:r,valueLabelOpt:{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function Mie(e,t,i){var r=i.axesInfo=[];_(t,function(n,o){var s=n.axisPointerModel.option,a=e[o];a?(!n.useHandle&&(s.status="show"),s.value=a.value,s.seriesDataIndices=(a.payloadBatch||[]).slice()):!n.useHandle&&(s.status="hide"),s.status==="show"&&r.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:s.value})})}function Fie(e,t,i,r){if(dd(t)||!e.list.length){r({type:"hideTip"});return}var n=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:i.tooltipOption,position:i.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:e.list})}function Eie(e,t,i){var r=i.getZr(),n="axisPointerLastHighlights",o=l_(r)[n]||{},s=l_(r)[n]={};_(e,function(u,h){var c=u.axisPointerModel.option;c.status==="show"&&u.triggerEmphasis&&_(c.seriesDataIndices,function(d){var f=d.seriesIndex+" | "+d.dataIndex;s[f]=d})});var a=[],l=[];_(o,function(u,h){!s[h]&&l.push(u)}),_(s,function(u,h){!o[h]&&a.push(u)}),l.length&&i.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),a.length&&i.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:a})}function Iie(e,t){for(var i=0;i<(e||[]).length;i++){var r=e[i];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}function h_(e){var t=e.axis.model,i={},r=i.axisDim=e.axis.dim;return i.axisIndex=i[r+"AxisIndex"]=t.componentIndex,i.axisName=i[r+"AxisName"]=t.name,i.axisId=i[r+"AxisId"]=t.id,i}function dd(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function Lh(e){Bs.registerAxisPointerClass("CartesianAxisPointer",mie),e.registerComponentModel(Cie),e.registerComponentView(Die),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var i=t.axisPointer.link;i&&!H(i)&&(t.axisPointer.link=[i])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,i){t.getComponent("axisPointer").coordSysAxesInfo=WZ(t,i)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Tie)}function Lie(e){we(cL),we(Lh)}var kie=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(i,r,n,o,s){var a=n.axis;a.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=a.polar,u=l.getOtherAxis(a),h=u.getExtent(),c=a.dataToCoord(r),d=o.get("type");if(d&&d!=="none"){var f=$w(o),p=Gie[d](a,l,c,h);p.style=f,i.graphicKey=p.type,i.pointer=p}var g=o.get(["label","margin"]),v=Oie(r,n,o,l,g);Ek(i,n,o,s,v)},t}(Uw);function Oie(e,t,i,r,n){var o=t.axis,s=o.dataToCoord(e),a=r.getAngleAxis().getExtent()[0];a=a/180*Math.PI;var l=r.getRadiusAxis().getExtent(),u,h,c;if(o.dim==="radius"){var d=Ci();Ls(d,d,a),Ir(d,d,[r.cx,r.cy]),u=rr([s,-n],d);var f=t.getModel("axisLabel").get("rotate")||0,p=Zt.innerTextLayout(a,f*Math.PI/180,-1);h=p.textAlign,c=p.textVerticalAlign}else{var g=l[1];u=r.coordToPoint([g+n,s]);var v=r.cx,m=r.cy;h=Math.abs(u[0]-v)/g<.3?"center":u[0]>v?"left":"right",c=Math.abs(u[1]-m)/g<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:h,verticalAlign:c}}var Gie={line:function(e,t,i,r){return e.dim==="angle"?{type:"Line",shape:Yw(t.coordToPoint([r[0],i]),t.coordToPoint([r[1],i]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:i}}},shadow:function(e,t,i,r){var n=Math.max(1,e.getBandWidth()),o=Math.PI/180;return e.dim==="angle"?{type:"Sector",shape:n_(t.cx,t.cy,r[0],r[1],(-i-n/2)*o,(-i+n/2)*o)}:{type:"Sector",shape:n_(t.cx,t.cy,i-n/2,i+n/2,0,Math.PI*2)}}},Nie=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.findAxisModel=function(i){var r,n=this.ecModel;return n.eachComponent(i,function(o){o.getCoordSysModel()===this&&(r=o)},this),r},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(Re),Xw=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",ht).models[0]},t.type="polarAxis",t}(Re);dt(Xw,Dh);var Vie=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="angleAxis",t}(Xw),Bie=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="radiusAxis",t}(Xw),qw=function(e){L(t,e);function t(i,r){return e.call(this,"radius",i,r)||this}return t.prototype.pointToData=function(i,r){return this.polar.pointToData(i,r)[this.dim==="radius"?0:1]},t}(ur);qw.prototype.dataToRadius=ur.prototype.dataToCoord;qw.prototype.radiusToData=ur.prototype.coordToData;var Hie=_e(),Zw=function(e){L(t,e);function t(i,r){return e.call(this,"angle",i,r||[0,360])||this}return t.prototype.pointToData=function(i,r){return this.polar.pointToData(i,r)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var i=this,r=i.getLabelModel(),n=i.scale,o=n.getExtent(),s=n.count();if(o[1]-o[0]<1)return 0;var a=o[0],l=i.dataToCoord(a+1)-i.dataToCoord(a),u=Math.abs(l),h=ph(a==null?"":a+"",r.getFont(),"center","top"),c=Math.max(h.height,7),d=c/u;isNaN(d)&&(d=1/0);var f=Math.max(0,Math.floor(d)),p=Hie(i.model),g=p.lastAutoInterval,v=p.lastTickCount;return g!=null&&v!=null&&Math.abs(g-f)<=1&&Math.abs(v-s)<=1&&g>f?f=g:(p.lastTickCount=s,p.lastAutoInterval=f),f},t}(ur);Zw.prototype.dataToAngle=ur.prototype.dataToCoord;Zw.prototype.angleToData=ur.prototype.coordToData;var Nk=["radius","angle"],zie=function(){function e(t){this.dimensions=Nk,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new qw,this._angleAxis=new Zw,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(t){var i=this.pointToCoord(t);return this._radiusAxis.contain(i[0])&&this._angleAxis.contain(i[1])},e.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},e.prototype.getAxis=function(t){var i="_"+t+"Axis";return this[i]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(t){var i=[],r=this._angleAxis,n=this._radiusAxis;return r.scale.type===t&&i.push(r),n.scale.type===t&&i.push(n),i},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(t){var i=this._angleAxis;return t===i?this._radiusAxis:i},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(t){var i=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[i],otherAxes:[this.getOtherAxis(i)]}},e.prototype.dataToPoint=function(t,i){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],i),this._angleAxis.dataToAngle(t[1],i)])},e.prototype.pointToData=function(t,i){var r=this.pointToCoord(t);return[this._radiusAxis.radiusToData(r[0],i),this._angleAxis.angleToData(r[1],i)]},e.prototype.pointToCoord=function(t){var i=t[0]-this.cx,r=t[1]-this.cy,n=this.getAngleAxis(),o=n.getExtent(),s=Math.min(o[0],o[1]),a=Math.max(o[0],o[1]);n.inverse?s=a-360:a=s+360;var l=Math.sqrt(i*i+r*r);i/=l,r/=l;for(var u=Math.atan2(-r,i)/Math.PI*180,h=u<s?1:-1;u<s||u>a;)u+=h*360;return[l,u]},e.prototype.coordToPoint=function(t){var i=t[0],r=t[1]/180*Math.PI,n=Math.cos(r)*i+this.cx,o=-Math.sin(r)*i+this.cy;return[n,o]},e.prototype.getArea=function(){var t=this.getAngleAxis(),i=this.getRadiusAxis(),r=i.getExtent().slice();r[0]>r[1]&&r.reverse();var n=t.getExtent(),o=Math.PI/180,s=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-n[0]*o,endAngle:-n[1]*o,clockwise:t.inverse,contain:function(a,l){var u=a-this.cx,h=l-this.cy,c=u*u+h*h,d=this.r,f=this.r0;return d!==f&&c-s<=d*d&&c+s>=f*f}}},e.prototype.convertToPixel=function(t,i,r){var n=c_(i);return n===this?this.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,i,r){var n=c_(i);return n===this?this.pointToData(r):null},e}();function c_(e){var t=e.seriesModel,i=e.polarModel;return i&&i.coordinateSystem||t&&t.coordinateSystem}function Wie(e,t,i){var r=t.get("center"),n=i.getWidth(),o=i.getHeight();e.cx=K(r[0],n),e.cy=K(r[1],o);var s=e.getRadiusAxis(),a=Math.min(n,o)/2,l=t.get("radius");l==null?l=[0,"100%"]:H(l)||(l=[0,l]);var u=[K(l[0],a),K(l[1],a)];s.inverse?s.setExtent(u[1],u[0]):s.setExtent(u[0],u[1])}function Uie(e,t){var i=this,r=i.getAngleAxis(),n=i.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),e.eachSeries(function(a){if(a.coordinateSystem===i){var l=a.getData();_(tf(l,"radius"),function(u){n.scale.unionExtentFromData(l,u)}),_(tf(l,"angle"),function(u){r.scale.unionExtentFromData(l,u)})}}),Ba(r.scale,r.model),Ba(n.scale,n.model),r.type==="category"&&!r.onBand){var o=r.getExtent(),s=360/r.scale.count();r.inverse?o[1]+=s:o[1]-=s,r.setExtent(o[0],o[1])}}function $ie(e){return e.mainType==="angleAxis"}function d_(e,t){var i;if(e.type=t.get("type"),e.scale=cp(t),e.onBand=t.get("boundaryGap")&&e.type==="category",e.inverse=t.get("inverse"),$ie(t)){e.inverse=e.inverse!==t.get("clockwise");var r=t.get("startAngle"),n=(i=t.get("endAngle"))!==null&&i!==void 0?i:r+(e.inverse?-360:360);e.setExtent(r,n)}t.axis=e,e.model=t}var Kie={dimensions:Nk,create:function(e,t){var i=[];return e.eachComponent("polar",function(r,n){var o=new zie(n+"");o.update=Uie;var s=o.getRadiusAxis(),a=o.getAngleAxis(),l=r.findAxisModel("radiusAxis"),u=r.findAxisModel("angleAxis");d_(s,l),d_(a,u),Wie(o,r,t),i.push(o),r.coordinateSystem=o,o.model=r}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var n=r.getReferringComponents("polar",ht).models[0];r.coordinateSystem=n.coordinateSystem}}),i}},Yie=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Oc(e,t,i){t[1]>t[0]&&(t=t.slice().reverse());var r=e.coordToPoint([t[0],i]),n=e.coordToPoint([t[1],i]);return{x1:r[0],y1:r[1],x2:n[0],y2:n[1]}}function Gc(e){var t=e.getRadiusAxis();return t.inverse?0:1}function f_(e){var t=e[0],i=e[e.length-1];t&&i&&Math.abs(Math.abs(t.coord-i.coord)-360)<1e-4&&e.pop()}var Xie=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.axisPointerClass="PolarAxisPointer",i}return t.prototype.render=function(i,r){if(this.group.removeAll(),!!i.get("show")){var n=i.axis,o=n.polar,s=o.getRadiusAxis().getExtent(),a=n.getTicksCoords(),l=n.getMinorTicksCoords(),u=z(n.getViewLabels(),function(h){h=ae(h);var c=n.scale,d=c.type==="ordinal"?c.getRawOrdinalNumber(h.tickValue):h.tickValue;return h.coord=n.dataToCoord(d),h});f_(u),f_(a),_(Yie,function(h){i.get([h,"show"])&&(!n.scale.isBlank()||h==="axisLine")&&qie[h](this.group,i,o,a,l,s,u)},this)}},t.type="angleAxis",t}(Bs),qie={axisLine:function(e,t,i,r,n,o){var s=t.getModel(["axisLine","lineStyle"]),a=i.getAngleAxis(),l=Math.PI/180,u=a.getExtent(),h=Gc(i),c=h?0:1,d,f=Math.abs(u[1]-u[0])===360?"Circle":"Arc";o[c]===0?d=new Os[f]({shape:{cx:i.cx,cy:i.cy,r:o[h],startAngle:-u[0]*l,endAngle:-u[1]*l,clockwise:a.inverse},style:s.getLineStyle(),z2:1,silent:!0}):d=new mh({shape:{cx:i.cx,cy:i.cy,r:o[h],r0:o[c]},style:s.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,e.add(d)},axisTick:function(e,t,i,r,n,o){var s=t.getModel("axisTick"),a=(s.get("inside")?-1:1)*s.get("length"),l=o[Gc(i)],u=z(r,function(h){return new mt({shape:Oc(i,[l,l+a],h.coord)})});e.add(Li(u,{style:ne(s.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,i,r,n,o){if(n.length){for(var s=t.getModel("axisTick"),a=t.getModel("minorTick"),l=(s.get("inside")?-1:1)*a.get("length"),u=o[Gc(i)],h=[],c=0;c<n.length;c++)for(var d=0;d<n[c].length;d++)h.push(new mt({shape:Oc(i,[u,u+l],n[c][d].coord)}));e.add(Li(h,{style:ne(a.getModel("lineStyle").getLineStyle(),ne(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,i,r,n,o,s){var a=t.getCategories(!0),l=t.getModel("axisLabel"),u=l.get("margin"),h=t.get("triggerEvent");_(s,function(c,d){var f=l,p=c.tickValue,g=o[Gc(i)],v=i.coordToPoint([g+u,c.coord]),m=i.cx,y=i.cy,C=Math.abs(v[0]-m)/g<.3?"center":v[0]>m?"left":"right",S=Math.abs(v[1]-y)/g<.3?"middle":v[1]>y?"top":"bottom";if(a&&a[p]){var b=a[p];se(b)&&b.textStyle&&(f=new Ne(b.textStyle,l,l.ecModel))}var w=new Ae({silent:Zt.isLabelSilent(t),style:Xe(f,{x:v[0],y:v[1],fill:f.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:c.formattedLabel,align:C,verticalAlign:S})});if(e.add(w),h){var x=Zt.makeAxisEventDataBase(t);x.targetType="axisLabel",x.value=c.rawLabel,ue(w).eventData=x}},this)},splitLine:function(e,t,i,r,n,o){var s=t.getModel("splitLine"),a=s.getModel("lineStyle"),l=a.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=0;c<r.length;c++){var d=u++%l.length;h[d]=h[d]||[],h[d].push(new mt({shape:Oc(i,o,r[c].coord)}))}for(var c=0;c<h.length;c++)e.add(Li(h[c],{style:ne({stroke:l[c%l.length]},a.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,i,r,n,o){if(n.length){for(var s=t.getModel("minorSplitLine"),a=s.getModel("lineStyle"),l=[],u=0;u<n.length;u++)for(var h=0;h<n[u].length;h++)l.push(new mt({shape:Oc(i,o,n[u][h].coord)}));e.add(Li(l,{style:a.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,i,r,n,o){if(r.length){var s=t.getModel("splitArea"),a=s.getModel("areaStyle"),l=a.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=Math.PI/180,d=-r[0].coord*c,f=Math.min(o[0],o[1]),p=Math.max(o[0],o[1]),g=t.get("clockwise"),v=1,m=r.length;v<=m;v++){var y=v===m?r[0].coord:r[v].coord,C=u++%l.length;h[C]=h[C]||[],h[C].push(new Jt({shape:{cx:i.cx,cy:i.cy,r0:f,r:p,startAngle:d,endAngle:-y*c,clockwise:g},silent:!0})),d=-y*c}for(var v=0;v<h.length;v++)e.add(Li(h[v],{style:ne({fill:l[v%l.length]},a.getAreaStyle()),silent:!0}))}}},Zie=["axisLine","axisTickLabel","axisName"],jie=["splitLine","splitArea","minorSplitLine"],Qie=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.axisPointerClass="PolarAxisPointer",i}return t.prototype.render=function(i,r){if(this.group.removeAll(),!!i.get("show")){var n=this._axisGroup,o=this._axisGroup=new le;this.group.add(o);var s=i.axis,a=s.polar,l=a.getAngleAxis(),u=s.getTicksCoords(),h=s.getMinorTicksCoords(),c=l.getExtent()[0],d=s.getExtent(),f=ere(a,i,c),p=new Zt(i,f);_(Zie,p.add,p),o.add(p.getGroup()),Sh(n,o,i),_(jie,function(g){i.get([g,"show"])&&!s.scale.isBlank()&&Jie[g](this.group,i,a,c,d,u,h)},this)}},t.type="radiusAxis",t}(Bs),Jie={splitLine:function(e,t,i,r,n,o){var s=t.getModel("splitLine"),a=s.getModel("lineStyle"),l=a.get("color"),u=0,h=i.getAngleAxis(),c=Math.PI/180,d=h.getExtent(),f=Math.abs(d[1]-d[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var p=[],g=0;g<o.length;g++){var v=u++%l.length;p[v]=p[v]||[],p[v].push(new Os[f]({shape:{cx:i.cx,cy:i.cy,r:Math.max(o[g].coord,0),startAngle:-d[0]*c,endAngle:-d[1]*c,clockwise:h.inverse}}))}for(var g=0;g<p.length;g++)e.add(Li(p[g],{style:ne({stroke:l[g%l.length],fill:null},a.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,i,r,n,o,s){if(s.length){for(var a=t.getModel("minorSplitLine"),l=a.getModel("lineStyle"),u=[],h=0;h<s.length;h++)for(var c=0;c<s[h].length;c++)u.push(new vn({shape:{cx:i.cx,cy:i.cy,r:s[h][c].coord}}));e.add(Li(u,{style:ne({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(e,t,i,r,n,o){if(o.length){var s=t.getModel("splitArea"),a=s.getModel("areaStyle"),l=a.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],c=o[0].coord,d=1;d<o.length;d++){var f=u++%l.length;h[f]=h[f]||[],h[f].push(new Jt({shape:{cx:i.cx,cy:i.cy,r0:c,r:o[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),c=o[d].coord}for(var d=0;d<h.length;d++)e.add(Li(h[d],{style:ne({fill:l[d%l.length]},a.getAreaStyle()),silent:!0}))}}};function ere(e,t,i){return{position:[e.cx,e.cy],rotation:i/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function Vk(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function Bk(e,t){return t.dim+e.model.componentIndex}function tre(e,t,i){var r={},n=ire(Le(t.getSeriesByType(e),function(o){return!t.isSeriesFiltered(o)&&o.coordinateSystem&&o.coordinateSystem.type==="polar"}));t.eachSeriesByType(e,function(o){if(o.coordinateSystem.type==="polar"){var s=o.getData(),a=o.coordinateSystem,l=a.getBaseAxis(),u=Bk(a,l),h=Vk(o),c=n[u][h],d=c.offset,f=c.width,p=a.getOtherAxis(l),g=o.coordinateSystem.cx,v=o.coordinateSystem.cy,m=o.get("barMinHeight")||0,y=o.get("barMinAngle")||0;r[h]=r[h]||[];for(var C=s.mapDimension(p.dim),S=s.mapDimension(l.dim),b=no(s,C),w=l.dim!=="radius"||!o.get("roundCap",!0),x=p.model,R=x.get("startValue"),D=p.dataToCoord(R||0),T=0,A=s.count();T<A;T++){var P=s.get(C,T),M=s.get(S,T),F=P>=0?"p":"n",E=D;b&&(r[h][M]||(r[h][M]={p:D,n:D}),E=r[h][M][F]);var I=void 0,O=void 0,k=void 0,G=void 0;if(p.dim==="radius"){var W=p.dataToCoord(P)-D,$=l.dataToCoord(M);Math.abs(W)<m&&(W=(W<0?-1:1)*m),I=E,O=E+W,k=$-d,G=k-f,b&&(r[h][M][F]=O)}else{var X=p.dataToCoord(P,w)-D,te=l.dataToCoord(M);Math.abs(X)<y&&(X=(X<0?-1:1)*y),I=te+d,O=I+f,k=E,G=E+X,b&&(r[h][M][F]=G)}s.setItemLayout(T,{cx:g,cy:v,r0:I,r:O,startAngle:-k*Math.PI/180,endAngle:-G*Math.PI/180,clockwise:k>=G})}}})}function ire(e){var t={};_(e,function(r,n){var o=r.getData(),s=r.coordinateSystem,a=s.getBaseAxis(),l=Bk(s,a),u=a.getExtent(),h=a.type==="category"?a.getBandWidth():Math.abs(u[1]-u[0])/o.count(),c=t[l]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=c.stacks;t[l]=c;var f=Vk(r);d[f]||c.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var p=K(r.get("barWidth"),h),g=K(r.get("barMaxWidth"),h),v=r.get("barGap"),m=r.get("barCategoryGap");p&&!d[f].width&&(p=Math.min(c.remainedWidth,p),d[f].width=p,c.remainedWidth-=p),g&&(d[f].maxWidth=g),v!=null&&(c.gap=v),m!=null&&(c.categoryGap=m)});var i={};return _(t,function(r,n){i[n]={};var o=r.stacks,s=r.bandWidth,a=K(r.categoryGap,s),l=K(r.gap,1),u=r.remainedWidth,h=r.autoWidthCount,c=(u-a)/(h+(h-1)*l);c=Math.max(c,0),_(o,function(g,v){var m=g.maxWidth;m&&m<c&&(m=Math.min(m,u),g.width&&(m=Math.min(m,g.width)),u-=m,g.width=m,h--)}),c=(u-a)/(h+(h-1)*l),c=Math.max(c,0);var d=0,f;_(o,function(g,v){g.width||(g.width=c),f=g,d+=g.width*(1+l)}),f&&(d-=f.width*l);var p=-d/2;_(o,function(g,v){i[n][v]=i[n][v]||{offset:p,width:g.width},p+=g.width*(1+l)})}),i}var rre={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},nre={splitNumber:5},ore=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="polar",t}(Qe);function sre(e){we(Lh),Bs.registerAxisPointerClass("PolarAxisPointer",kie),e.registerCoordinateSystem("polar",Kie),e.registerComponentModel(Nie),e.registerComponentView(ore),za(e,"angle",Vie,rre),za(e,"radius",Bie,nre),e.registerComponentView(Xie),e.registerComponentView(Qie),e.registerLayout(fe(tre,"bar"))}function iC(e,t){t=t||{};var i=e.coordinateSystem,r=e.axis,n={},o=r.position,s=r.orient,a=i.getRect(),l=[a.x,a.x+a.width,a.y,a.y+a.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};n.position=[s==="vertical"?u.vertical[o]:l[0],s==="horizontal"?u.horizontal[o]:l[3]];var h={horizontal:0,vertical:1};n.rotation=Math.PI/2*h[s];var c={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=c[o],e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),xt(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var d=t.rotate;return d==null&&(d=e.get(["axisLabel","rotate"])),n.labelRotation=o==="top"?-d:d,n.z2=1,n}var are=["axisLine","axisTickLabel","axisName"],lre=["splitArea","splitLine"],ure=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.axisPointerClass="SingleAxisPointer",i}return t.prototype.render=function(i,r,n,o){var s=this.group;s.removeAll();var a=this._axisGroup;this._axisGroup=new le;var l=iC(i),u=new Zt(i,l);_(are,u.add,u),s.add(this._axisGroup),s.add(u.getGroup()),_(lre,function(h){i.get([h,"show"])&&hre[h](this,this.group,this._axisGroup,i)},this),Sh(a,this._axisGroup,i),e.prototype.render.call(this,i,r,n,o)},t.prototype.remove=function(){lL(this)},t.type="singleAxis",t}(Bs),hre={splitLine:function(e,t,i,r){var n=r.axis;if(!n.scale.isBlank()){var o=r.getModel("splitLine"),s=o.getModel("lineStyle"),a=s.get("color");a=a instanceof Array?a:[a];for(var l=s.get("width"),u=r.coordinateSystem.getRect(),h=n.isHorizontal(),c=[],d=0,f=n.getTicksCoords({tickModel:o}),p=[],g=[],v=0;v<f.length;++v){var m=n.toGlobalCoord(f[v].coord);h?(p[0]=m,p[1]=u.y,g[0]=m,g[1]=u.y+u.height):(p[0]=u.x,p[1]=m,g[0]=u.x+u.width,g[1]=m);var y=new mt({shape:{x1:p[0],y1:p[1],x2:g[0],y2:g[1]},silent:!0});Ga(y.shape,l);var C=d++%a.length;c[C]=c[C]||[],c[C].push(y)}for(var S=s.getLineStyle(["color"]),v=0;v<c.length;++v)t.add(Li(c[v],{style:ne({stroke:a[v%a.length]},S),silent:!0}))}},splitArea:function(e,t,i,r){aL(e,i,r,r)}},fd=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(Re);dt(fd,Dh.prototype);var cre=function(e){L(t,e);function t(i,r,n,o,s){var a=e.call(this,i,r,n)||this;return a.type=o||"value",a.position=s||"bottom",a}return t.prototype.isHorizontal=function(){var i=this.position;return i==="top"||i==="bottom"},t.prototype.pointToData=function(i,r){return this.coordinateSystem.pointToData(i)[0]},t}(ur),Hk=["single"],dre=function(){function e(t,i,r){this.type="single",this.dimension="single",this.dimensions=Hk,this.axisPointerEnabled=!0,this.model=t,this._init(t,i,r)}return e.prototype._init=function(t,i,r){var n=this.dimension,o=new cre(n,cp(t),[0,0],t.get("type"),t.get("position")),s=o.type==="category";o.onBand=s&&t.get("boundaryGap"),o.inverse=t.get("inverse"),o.orient=t.get("orient"),t.axis=o,o.model=t,o.coordinateSystem=this,this._axis=o},e.prototype.update=function(t,i){t.eachSeries(function(r){if(r.coordinateSystem===this){var n=r.getData();_(n.mapDimensionsAll(this.dimension),function(o){this._axis.scale.unionExtentFromData(n,o)},this),Ba(this._axis.scale,this._axis.model)}},this)},e.prototype.resize=function(t,i){this._rect=pt({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:i.getWidth(),height:i.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var t=this._rect,i=this._axis,r=i.isHorizontal(),n=r?[0,t.width]:[0,t.height],o=i.inverse?1:0;i.setExtent(n[o],n[1-o]),this._updateAxisTransform(i,r?t.x:t.y)},e.prototype._updateAxisTransform=function(t,i){var r=t.getExtent(),n=r[0]+r[1],o=t.isHorizontal();t.toGlobalCoord=o?function(s){return s+i}:function(s){return n-s+i},t.toLocalCoord=o?function(s){return s-i}:function(s){return n-s+i}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(t){var i=this.getRect(),r=this.getAxis(),n=r.orient;return n==="horizontal"?r.contain(r.toLocalCoord(t[0]))&&t[1]>=i.y&&t[1]<=i.y+i.height:r.contain(r.toLocalCoord(t[1]))&&t[0]>=i.y&&t[0]<=i.y+i.height},e.prototype.pointToData=function(t){var i=this.getAxis();return[i.coordToData(i.toLocalCoord(t[i.orient==="horizontal"?0:1]))]},e.prototype.dataToPoint=function(t){var i=this.getAxis(),r=this.getRect(),n=[],o=i.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),n[o]=i.toGlobalCoord(i.dataToCoord(+t)),n[1-o]=o===0?r.y+r.height/2:r.x+r.width/2,n},e.prototype.convertToPixel=function(t,i,r){var n=p_(i);return n===this?this.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,i,r){var n=p_(i);return n===this?this.pointToData(r):null},e}();function p_(e){var t=e.seriesModel,i=e.singleAxisModel;return i&&i.coordinateSystem||t&&t.coordinateSystem}function fre(e,t){var i=[];return e.eachComponent("singleAxis",function(r,n){var o=new dre(r,e,t);o.name="single_"+n,o.resize(r,t),r.coordinateSystem=o,i.push(o)}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var n=r.getReferringComponents("singleAxis",ht).models[0];r.coordinateSystem=n&&n.coordinateSystem}}),i}var pre={create:fre,dimensions:Hk},g_=["x","y"],gre=["width","height"],vre=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(i,r,n,o,s){var a=n.axis,l=a.coordinateSystem,u=Wv(l,1-vf(a)),h=l.dataToPoint(r)[0],c=o.get("type");if(c&&c!=="none"){var d=$w(o),f=mre[c](a,h,u);f.style=d,i.graphicKey=f.type,i.pointer=f}var p=iC(n);Lk(r,i,p,n,o,s)},t.prototype.getHandleTransform=function(i,r,n){var o=iC(r,{labelInside:!1});o.labelMargin=n.get(["handle","margin"]);var s=Kw(r.axis,i,o);return{x:s[0],y:s[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(i,r,n,o){var s=n.axis,a=s.coordinateSystem,l=vf(s),u=Wv(a,l),h=[i.x,i.y];h[l]+=r[l],h[l]=Math.min(u[1],h[l]),h[l]=Math.max(u[0],h[l]);var c=Wv(a,1-l),d=(c[1]+c[0])/2,f=[d,d];return f[l]=h[l],{x:h[0],y:h[1],rotation:i.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},t}(Uw),mre={line:function(e,t,i){var r=Yw([t,i[0]],[t,i[1]],vf(e));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(e,t,i){var r=e.getBandWidth(),n=i[1]-i[0];return{type:"Rect",shape:kk([t-r/2,i[0]],[r,n],vf(e))}}};function vf(e){return e.isHorizontal()?0:1}function Wv(e,t){var i=e.getRect();return[i[g_[t]],i[g_[t]]+i[gre[t]]]}var yre=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="single",t}(Qe);function Cre(e){we(Lh),Bs.registerAxisPointerClass("SingleAxisPointer",vre),e.registerComponentView(yre),e.registerComponentView(ure),e.registerComponentModel(fd),za(e,"single",fd,fd.defaultOption),e.registerCoordinateSystem("single",pre)}var Sre=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i,r,n){var o=sl(i);e.prototype.init.apply(this,arguments),v_(i,o)},t.prototype.mergeOption=function(i){e.prototype.mergeOption.apply(this,arguments),v_(this.option,i)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(Re);function v_(e,t){var i=e.cellSize,r;H(i)?r=i:r=e.cellSize=[i,i],r.length===1&&(r[1]=r[0]);var n=z([0,1],function(o){return HY(t,o)&&(r[o]="auto"),r[o]!=null&&r[o]!=="auto"});ro(e,t,{type:"box",ignoreSize:n})}var wre=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){var o=this.group;o.removeAll();var s=i.coordinateSystem,a=s.getRangeInfo(),l=s.getOrient(),u=r.getLocaleModel();this._renderDayRect(i,a,o),this._renderLines(i,a,l,o),this._renderYearText(i,a,l,o),this._renderMonthText(i,u,l,o),this._renderWeekText(i,u,a,l,o)},t.prototype._renderDayRect=function(i,r,n){for(var o=i.coordinateSystem,s=i.getModel("itemStyle").getItemStyle(),a=o.getCellWidth(),l=o.getCellHeight(),u=r.start.time;u<=r.end.time;u=o.getNextNDay(u,1).time){var h=o.dataToRect([u],!1).tl,c=new Te({shape:{x:h[0],y:h[1],width:a,height:l},cursor:"default",style:s});n.add(c)}},t.prototype._renderLines=function(i,r,n,o){var s=this,a=i.coordinateSystem,l=i.getModel(["splitLine","lineStyle"]).getLineStyle(),u=i.get(["splitLine","show"]),h=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=r.start,d=0;c.time<=r.end.time;d++){p(c.formatedDate),d===0&&(c=a.getDateInfo(r.start.y+"-"+r.start.m));var f=c.date;f.setMonth(f.getMonth()+1),c=a.getDateInfo(f)}p(a.getNextNDay(r.end.time,1).formatedDate);function p(g){s._firstDayOfMonth.push(a.getDateInfo(g)),s._firstDayPoints.push(a.dataToRect([g],!1).tl);var v=s._getLinePointsOfOneWeek(i,g,n);s._tlpoints.push(v[0]),s._blpoints.push(v[v.length-1]),u&&s._drawSplitline(v,l,o)}u&&this._drawSplitline(s._getEdgesPoints(s._tlpoints,h,n),l,o),u&&this._drawSplitline(s._getEdgesPoints(s._blpoints,h,n),l,o)},t.prototype._getEdgesPoints=function(i,r,n){var o=[i[0].slice(),i[i.length-1].slice()],s=n==="horizontal"?0:1;return o[0][s]=o[0][s]-r/2,o[1][s]=o[1][s]+r/2,o},t.prototype._drawSplitline=function(i,r,n){var o=new ti({z2:20,shape:{points:i},style:r});n.add(o)},t.prototype._getLinePointsOfOneWeek=function(i,r,n){for(var o=i.coordinateSystem,s=o.getDateInfo(r),a=[],l=0;l<7;l++){var u=o.getNextNDay(s.time,l),h=o.dataToRect([u.time],!1);a[2*u.day]=h.tl,a[2*u.day+1]=h[n==="horizontal"?"bl":"tr"]}return a},t.prototype._formatterLabel=function(i,r){return q(i)&&i?NY(i,r):ie(i)?i(r):r.nameMap},t.prototype._yearTextPositionControl=function(i,r,n,o,s){var a=r[0],l=r[1],u=["center","bottom"];o==="bottom"?(l+=s,u=["center","top"]):o==="left"?a-=s:o==="right"?(a+=s,u=["center","top"]):l-=s;var h=0;return(o==="left"||o==="right")&&(h=Math.PI/2),{rotation:h,x:a,y:l,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(i,r,n,o){var s=i.getModel("yearLabel");if(s.get("show")){var a=s.get("margin"),l=s.get("position");l||(l=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],h=(u[0][0]+u[1][0])/2,c=(u[0][1]+u[1][1])/2,d=n==="horizontal"?0:1,f={top:[h,u[d][1]],bottom:[h,u[1-d][1]],left:[u[1-d][0],c],right:[u[d][0],c]},p=r.start.y;+r.end.y>+r.start.y&&(p=p+"-"+r.end.y);var g=s.get("formatter"),v={start:r.start.y,end:r.end.y,nameMap:p},m=this._formatterLabel(g,v),y=new Ae({z2:30,style:Xe(s,{text:m}),silent:s.get("silent")});y.attr(this._yearTextPositionControl(y,f[l],n,l,a)),o.add(y)}},t.prototype._monthTextPositionControl=function(i,r,n,o,s){var a="left",l="top",u=i[0],h=i[1];return n==="horizontal"?(h=h+s,r&&(a="center"),o==="start"&&(l="bottom")):(u=u+s,r&&(l="middle"),o==="start"&&(a="right")),{x:u,y:h,align:a,verticalAlign:l}},t.prototype._renderMonthText=function(i,r,n,o){var s=i.getModel("monthLabel");if(s.get("show")){var a=s.get("nameMap"),l=s.get("margin"),u=s.get("position"),h=s.get("align"),c=[this._tlpoints,this._blpoints];(!a||q(a))&&(a&&(r=hy(a)||r),a=r.get(["time","monthAbbr"])||[]);var d=u==="start"?0:1,f=n==="horizontal"?0:1;l=u==="start"?-l:l;for(var p=h==="center",g=s.get("silent"),v=0;v<c[d].length-1;v++){var m=c[d][v].slice(),y=this._firstDayOfMonth[v];if(p){var C=this._firstDayPoints[v];m[f]=(C[f]+c[0][v+1][f])/2}var S=s.get("formatter"),b=a[+y.m-1],w={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:b},x=this._formatterLabel(S,w),R=new Ae({z2:30,style:V(Xe(s,{text:x}),this._monthTextPositionControl(m,p,n,u,l)),silent:g});o.add(R)}}},t.prototype._weekTextPositionControl=function(i,r,n,o,s){var a="center",l="middle",u=i[0],h=i[1],c=n==="start";return r==="horizontal"?(u=u+o+(c?1:-1)*s[0]/2,a=c?"right":"left"):(h=h+o+(c?1:-1)*s[1]/2,l=c?"bottom":"top"),{x:u,y:h,align:a,verticalAlign:l}},t.prototype._renderWeekText=function(i,r,n,o,s){var a=i.getModel("dayLabel");if(a.get("show")){var l=i.coordinateSystem,u=a.get("position"),h=a.get("nameMap"),c=a.get("margin"),d=l.getFirstDayOfWeek();if(!h||q(h)){h&&(r=hy(h)||r);var f=r.get(["time","dayOfWeekShort"]);h=f||z(r.get(["time","dayOfWeekAbbr"]),function(w){return w[0]})}var p=l.getNextNDay(n.end.time,7-n.lweek).time,g=[l.getCellWidth(),l.getCellHeight()];c=K(c,Math.min(g[1],g[0])),u==="start"&&(p=l.getNextNDay(n.start.time,-(7+n.fweek)).time,c=-c);for(var v=a.get("silent"),m=0;m<7;m++){var y=l.getNextNDay(p,m),C=l.dataToRect([y.time],!1).center,S=m;S=Math.abs((m+d)%7);var b=new Ae({z2:30,style:V(Xe(a,{text:h[S]}),this._weekTextPositionControl(C,o,u,c,g)),silent:v});s.add(b)}}},t.type="calendar",t}(Qe),Uv=864e5,bre=function(){function e(t,i,r){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(t){t=kr(t);var i=t.getFullYear(),r=t.getMonth()+1,n=r<10?"0"+r:""+r,o=t.getDate(),s=o<10?"0"+o:""+o,a=t.getDay();return a=Math.abs((a+7-this.getFirstDayOfWeek())%7),{y:i+"",m:n,d:s,day:a,time:t.getTime(),formatedDate:i+"-"+n+"-"+s,date:t}},e.prototype.getNextNDay=function(t,i){return i=i||0,i===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+i),this.getDateInfo(t))},e.prototype.update=function(t,i){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,n=["width","height"],o=this._model.getCellSize().slice(),s=this._model.getBoxLayoutParams(),a=this._orient==="horizontal"?[r,7]:[7,r];_([0,1],function(c){h(o,c)&&(s[n[c]]=o[c]*a[c])});var l={width:i.getWidth(),height:i.getHeight()},u=this._rect=pt(s,l);_([0,1],function(c){h(o,c)||(o[c]=u[n[c]]/a[c])});function h(c,d){return c[d]!=null&&c[d]!=="auto"}this._sw=o[0],this._sh=o[1]},e.prototype.dataToPoint=function(t,i){H(t)&&(t=t[0]),i==null&&(i=!0);var r=this.getDateInfo(t),n=this._rangeInfo,o=r.formatedDate;if(i&&!(r.time>=n.start.time&&r.time<n.end.time+Uv))return[NaN,NaN];var s=r.day,a=this._getRangeInfo([n.start.time,o]).nthWeek;return this._orient==="vertical"?[this._rect.x+s*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]},e.prototype.pointToData=function(t){var i=this.pointToDate(t);return i&&i.time},e.prototype.dataToRect=function(t,i){var r=this.dataToPoint(t,i);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},e.prototype.pointToDate=function(t){var i=Math.floor((t[0]-this._rect.x)/this._sw)+1,r=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,i-1,n):this._getDateByWeeksAndDay(i,r-1,n)},e.prototype.convertToPixel=function(t,i,r){var n=m_(i);return n===this?n.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,i,r){var n=m_(i);return n===this?n.pointToData(r):null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var t=this._model.get("range"),i;if(H(t)&&t.length===1&&(t=t[0]),H(t))i=t;else{var r=t.toString();if(/^\d{4}$/.test(r)&&(i=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var n=this.getDateInfo(r),o=n.date;o.setMonth(o.getMonth()+1);var s=this.getNextNDay(o,-1);i=[n.formatedDate,s.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(i=[r,r])}if(!i)return t;var a=this._getRangeInfo(i);return a.start.time>a.end.time&&i.reverse(),i},e.prototype._getRangeInfo=function(t){var i=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],r;i[0].time>i[1].time&&(r=!0,i.reverse());var n=Math.floor(i[1].time/Uv)-Math.floor(i[0].time/Uv)+1,o=new Date(i[0].time),s=o.getDate(),a=i[1].date.getDate();o.setDate(s+n-1);var l=o.getDate();if(l!==a)for(var u=o.getTime()-i[1].time>0?1:-1;(l=o.getDate())!==a&&(o.getTime()-i[1].time)*u>0;)n-=u,o.setDate(l-u);var h=Math.floor((n+i[0].day+6)/7),c=r?-h+1:h-1;return r&&i.reverse(),{range:[i[0].formatedDate,i[1].formatedDate],start:i[0],end:i[1],allDay:n,weeks:h,nthWeek:c,fweek:i[0].day,lweek:i[1].day}},e.prototype._getDateByWeeksAndDay=function(t,i,r){var n=this._getRangeInfo(r);if(t>n.weeks||t===0&&i<n.fweek||t===n.weeks&&i>n.lweek)return null;var o=(t-1)*7-n.fweek+i,s=new Date(n.start.time);return s.setDate(+n.start.d+o),this.getDateInfo(s)},e.create=function(t,i){var r=[];return t.eachComponent("calendar",function(n){var o=new e(n);r.push(o),n.coordinateSystem=o}),t.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=r[n.get("calendarIndex")||0])}),r},e.dimensions=["time","value"],e}();function m_(e){var t=e.calendarModel,i=e.seriesModel,r=t?t.coordinateSystem:i?i.coordinateSystem:null;return r}function xre(e){e.registerComponentModel(Sre),e.registerComponentView(wre),e.registerCoordinateSystem("calendar",bre)}function Rre(e,t){var i=e.existing;if(t.id=e.keyInfo.id,!t.type&&i&&(t.type=i.type),t.parentId==null){var r=t.parentOption;r?t.parentId=r.id:i&&(t.parentId=i.parentId)}t.parentOption=null}function y_(e,t){var i;return _(t,function(r){e[r]!=null&&e[r]!=="auto"&&(i=!0)}),i}function Dre(e,t,i){var r=V({},i),n=e[t],o=i.$action||"merge";o==="merge"?n?(pe(n,r,!0),ro(n,r,{ignoreSize:!0}),LF(i,n),Nc(i,n),Nc(i,n,"shape"),Nc(i,n,"style"),Nc(i,n,"extra"),i.clipPath=n.clipPath):e[t]=r:o==="replace"?e[t]=r:o==="remove"&&n&&(e[t]=null)}var zk=["transition","enterFrom","leaveTo"],Tre=zk.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Nc(e,t,i){if(i&&(!e[i]&&t[i]&&(e[i]={}),e=e[i],t=t[i]),!(!e||!t))for(var r=i?zk:Tre,n=0;n<r.length;n++){var o=r[n];e[o]==null&&t[o]!=null&&(e[o]=t[o])}}function _re(e,t){if(e&&(e.hv=t.hv=[y_(t,["left","right"]),y_(t,["top","bottom"])],e.type==="group")){var i=e,r=t;i.width==null&&(i.width=r.width=0),i.height==null&&(i.height=r.height=0)}}var Are=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.preventAutoZ=!0,i}return t.prototype.mergeOption=function(i,r){var n=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,i,r),this.option.elements=n},t.prototype.optionUpdated=function(i,r){var n=this.option,o=(r?n:i).elements,s=n.elements=r?[]:n.elements,a=[];this._flatten(o,a,null);var l=M1(s,a,"normalMerge"),u=this._elOptionsToUpdate=[];_(l,function(h,c){var d=h.newOption;d&&(u.push(d),Rre(h,d),Dre(s,c,d),_re(s[c],d))},this),n.elements=Le(s,function(h){return h&&delete h.$action,h!=null})},t.prototype._flatten=function(i,r,n){_(i,function(o){if(o){n&&(o.parentOption=n),r.push(o);var s=o.children;s&&s.length&&this._flatten(s,r,o),delete o.children}},this)},t.prototype.useElOptionsToUpdate=function(){var i=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,i},t.type="graphic",t.defaultOption={elements:[]},t}(Re),C_={path:null,compoundPath:null,group:le,image:Rt,text:Ae},Fi=_e(),Pre=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(){this._elMap=Q()},t.prototype.render=function(i,r,n){i!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=i,this._updateElements(i),this._relocate(i,n)},t.prototype._updateElements=function(i){var r=i.useElOptionsToUpdate();if(r){var n=this._elMap,o=this.group,s=i.get("z"),a=i.get("zlevel");_(r,function(l){var u=ft(l.id,null),h=u!=null?n.get(u):null,c=ft(l.parentId,null),d=c!=null?n.get(c):o,f=l.type,p=l.style;f==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var g=l.textContent,v=l.textConfig;if(p&&bk(p,f,!!v,!!g)){var m=xk(p,f,!0);!v&&m.textConfig&&(v=l.textConfig=m.textConfig),!g&&m.textContent&&(g=m.textContent)}var y=Mre(l),C=l.$action||"merge",S=C==="merge",b=C==="replace";if(S){var w=!h,x=h;w?x=S_(u,d,l.type,n):(x&&(Fi(x).isNew=!1),_k(x)),x&&(cd(x,y,i,{isInit:w}),w_(x,l,s,a))}else if(b){pd(h,l,n,i);var R=S_(u,d,l.type,n);R&&(cd(R,y,i,{isInit:!0}),w_(R,l,s,a))}else C==="remove"&&(Dk(h,l),pd(h,l,n,i));var D=n.get(u);if(D&&g)if(S){var T=D.getTextContent();T?T.attr(g):D.setTextContent(new Ae(g))}else b&&D.setTextContent(new Ae(g));if(D){var A=l.clipPath;if(A){var P=A.type,M=void 0,w=!1;if(S){var F=D.getClipPath();w=!F||Fi(F).type!==P,M=w?rC(P):F}else b&&(w=!0,M=rC(P));D.setClipPath(M),cd(M,A,i,{isInit:w}),pf(M,A.keyframeAnimation,i)}var E=Fi(D);D.setTextConfig(v),E.option=l,Fre(D,i,l),ks({el:D,componentModel:i,itemName:D.name,itemTooltipOption:l.tooltip}),pf(D,l.keyframeAnimation,i)}})}},t.prototype._relocate=function(i,r){for(var n=i.option.elements,o=this.group,s=this._elMap,a=r.getWidth(),l=r.getHeight(),u=["x","y"],h=0;h<n.length;h++){var c=n[h],d=ft(c.id,null),f=d!=null?s.get(d):null;if(!(!f||!f.isGroup)){var p=f.parent,g=p===o,v=Fi(f),m=Fi(p);v.width=K(v.option.width,g?a:m.width)||0,v.height=K(v.option.height,g?l:m.height)||0}}for(var h=n.length-1;h>=0;h--){var c=n[h],d=ft(c.id,null),f=d!=null?s.get(d):null;if(f){var p=f.parent,m=Fi(p),y=p===o?{width:a,height:l}:{width:m.width,height:m.height},C={},S=ip(f,c,y,null,{hv:c.hv,boundingMode:c.bounding},C);if(!Fi(f).isNew&&S){for(var b=c.transition,w={},x=0;x<u.length;x++){var R=u[x],D=C[R];b&&(Cs(b)||Ce(b,R)>=0)?w[R]=D:f[R]=D}Me(f,w,i,0)}else f.attr(C)}}},t.prototype._clear=function(){var i=this,r=this._elMap;r.each(function(n){pd(n,Fi(n).option,r,i._lastGraphicModel)}),this._elMap=Q()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(Qe);function rC(e){var t=j(C_,e)?C_[e]:_S(e),i=new t({});return Fi(i).type=e,i}function S_(e,t,i,r){var n=rC(i);return t.add(n),r.set(e,n),Fi(n).id=e,Fi(n).isNew=!0,n}function pd(e,t,i,r){var n=e&&e.parent;n&&(e.type==="group"&&e.traverse(function(o){pd(o,t,i,r)}),yp(e,t,r),i.removeKey(Fi(e).id))}function w_(e,t,i,r){e.isGroup||_([["cursor",zi.prototype.cursor],["zlevel",r||0],["z",i||0],["z2",0]],function(n){var o=n[0];j(t,o)?e[o]=de(t[o],n[1]):e[o]==null&&(e[o]=n[1])}),_(De(t),function(n){if(n.indexOf("on")===0){var o=t[n];e[n]=ie(o)?o:null}}),j(t,"draggable")&&(e.draggable=t.draggable),t.name!=null&&(e.name=t.name),t.id!=null&&(e.id=t.id)}function Mre(e){return e=V({},e),_(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(IF),function(t){delete e[t]}),e}function Fre(e,t,i){var r=ue(e).eventData;!e.silent&&!e.ignore&&!r&&(r=ue(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),r&&(r.info=i.info)}function Ere(e){e.registerComponentModel(Are),e.registerComponentView(Pre),e.registerPreprocessor(function(t){var i=t.graphic;H(i)?!i[0]||!i[0].elements?t.graphic=[{elements:i}]:t.graphic=[t.graphic[0]]:i&&!i.elements&&(t.graphic=[{elements:[i]}])})}var b_=["x","y","radius","angle","single"],Ire=["cartesian2d","polar","singleAxis"];function Lre(e){var t=e.get("coordinateSystem");return Ce(Ire,t)>=0}function Un(e){return e+"Axis"}function kre(e,t){var i=Q(),r=[],n=Q();e.eachComponent({mainType:"dataZoom",query:t},function(h){n.get(h.uid)||a(h)});var o;do o=!1,e.eachComponent("dataZoom",s);while(o);function s(h){!n.get(h.uid)&&l(h)&&(a(h),o=!0)}function a(h){n.set(h.uid,!0),r.push(h),u(h)}function l(h){var c=!1;return h.eachTargetAxis(function(d,f){var p=i.get(d);p&&p[f]&&(c=!0)}),c}function u(h){h.eachTargetAxis(function(c,d){(i.get(c)||i.set(c,[]))[d]=!0})}return r}function Wk(e){var t=e.ecModel,i={infoList:[],infoMap:Q()};return e.eachTargetAxis(function(r,n){var o=t.getComponent(Un(r),n);if(o){var s=o.getCoordSysModel();if(s){var a=s.uid,l=i.infoMap.get(a);l||(l={model:s,axisModels:[]},i.infoList.push(l),i.infoMap.set(a,l)),l.axisModels.push(o)}}}),i}var $v=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),sh=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._autoThrottle=!0,i._noTarget=!0,i._rangePropMode=["percent","percent"],i}return t.prototype.init=function(i,r,n){var o=x_(i);this.settledOption=o,this.mergeDefaultAndTheme(i,n),this._doInit(o)},t.prototype.mergeOption=function(i){var r=x_(i);pe(this.option,i,!0),pe(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(i){var r=this.option;this._setDefaultThrottle(i),this._updateRangeUse(i);var n=this.settledOption;_([["start","startValue"],["end","endValue"]],function(o,s){this._rangePropMode[s]==="value"&&(r[o[0]]=n[o[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var i=this.get("orient",!0),r=this._targetAxisInfoMap=Q(),n=this._fillSpecifiedTargetAxis(r);n?this._orient=i||this._makeAutoOrientByTargetAxis():(this._orient=i||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(o){o.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(i){var r=!1;return _(b_,function(n){var o=this.getReferringComponents(Un(n),_4);if(o.specified){r=!0;var s=new $v;_(o.models,function(a){s.add(a.componentIndex)}),i.set(n,s)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(i,r){var n=this.ecModel,o=!0;if(o){var s=r==="vertical"?"y":"x",a=n.findComponents({mainType:s+"Axis"});l(a,s)}if(o){var a=n.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===r}});l(a,"single")}function l(u,h){var c=u[0];if(c){var d=new $v;if(d.add(c.componentIndex),i.set(h,d),o=!1,h==="x"||h==="y"){var f=c.getReferringComponents("grid",ht).models[0];f&&_(u,function(p){c.componentIndex!==p.componentIndex&&f===p.getReferringComponents("grid",ht).models[0]&&d.add(p.componentIndex)})}}}o&&_(b_,function(u){if(o){var h=n.findComponents({mainType:Un(u),filter:function(d){return d.get("type",!0)==="category"}});if(h[0]){var c=new $v;c.add(h[0].componentIndex),i.set(u,c),o=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var i;return this.eachTargetAxis(function(r){!i&&(i=r)},this),i==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(i){if(i.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(i){var r=this._rangePropMode,n=this.get("rangeMode");_([["start","startValue"],["end","endValue"]],function(o,s){var a=i[o[0]]!=null,l=i[o[1]]!=null;a&&!l?r[s]="percent":!a&&l?r[s]="value":n?r[s]=n[s]:a&&(r[s]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var i;return this.eachTargetAxis(function(r,n){i==null&&(i=this.ecModel.getComponent(Un(r),n))},this),i},t.prototype.eachTargetAxis=function(i,r){this._targetAxisInfoMap.each(function(n,o){_(n.indexList,function(s){i.call(r,o,s)})})},t.prototype.getAxisProxy=function(i,r){var n=this.getAxisModel(i,r);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(i,r){var n=this._targetAxisInfoMap.get(i);if(n&&n.indexMap[r])return this.ecModel.getComponent(Un(i),r)},t.prototype.setRawRange=function(i){var r=this.option,n=this.settledOption;_([["start","startValue"],["end","endValue"]],function(o){(i[o[0]]!=null||i[o[1]]!=null)&&(r[o[0]]=n[o[0]]=i[o[0]],r[o[1]]=n[o[1]]=i[o[1]])},this),this._updateRangeUse(i)},t.prototype.setCalculatedRange=function(i){var r=this.option;_(["start","startValue","end","endValue"],function(n){r[n]=i[n]})},t.prototype.getPercentRange=function(){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataPercentWindow()},t.prototype.getValueRange=function(i,r){if(i==null&&r==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(i,r).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(i){if(i)return i.__dzAxisProxy;for(var r,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var s=n[o],a=this._targetAxisInfoMap.get(s),l=0;l<a.indexList.length;l++){var u=this.getAxisProxy(s,a.indexList[l]);if(u.hostedBy(this))return u;r||(r=u)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(Re);function x_(e){var t={};return _(["start","end","startValue","endValue","throttle"],function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t}var Ore=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="dataZoom.select",t}(sh),jw=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n,o){this.dataZoomModel=i,this.ecModel=r,this.api=n},t.type="dataZoom",t}(Qe),Gre=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="dataZoom.select",t}(jw),ga=_,R_=Gi,Nre=function(){function e(t,i,r,n){this._dimName=t,this._axisIndex=i,this.ecModel=n,this._dataZoomModel=r}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(i){if(Lre(i)){var r=Un(this._dimName),n=i.getReferringComponents(r,ht).models[0];n&&this._axisIndex===n.componentIndex&&t.push(i)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return ae(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var i=this._dataExtent,r=this.getAxisModel(),n=r.axis.scale,o=this._dataZoomModel.getRangePropMode(),s=[0,100],a=[],l=[],u;ga(["start","end"],function(d,f){var p=t[d],g=t[d+"Value"];o[f]==="percent"?(p==null&&(p=s[f]),g=n.parse(Oe(p,s,i))):(u=!0,g=g==null?i[f]:n.parse(g),p=Oe(g,i,s)),l[f]=g==null||isNaN(g)?i[f]:g,a[f]=p==null||isNaN(p)?s[f]:p}),R_(l),R_(a);var h=this._minMaxSpan;u?c(l,a,i,s,!1):c(a,l,s,i,!0);function c(d,f,p,g,v){var m=v?"Span":"ValueSpan";Hs(0,d,p,"all",h["min"+m],h["max"+m]);for(var y=0;y<2;y++)f[y]=Oe(d[y],p,g,!0),v&&(f[y]=n.parse(f[y]))}return{valueWindow:l,percentWindow:a}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var i=this.getTargetSeriesModels();this._dataExtent=Vre(this,this._dimName,i),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,i){if(t!==this._dataZoomModel)return;var r=this._dimName,n=this.getTargetSeriesModels(),o=t.get("filterMode"),s=this._valueWindow;if(o==="none")return;ga(n,function(l){var u=l.getData(),h=u.mapDimensionsAll(r);if(h.length){if(o==="weakFilter"){var c=u.getStore(),d=z(h,function(f){return u.getDimensionIndex(f)},u);u.filterSelf(function(f){for(var p,g,v,m=0;m<h.length;m++){var y=c.get(d[m],f),C=!isNaN(y),S=y<s[0],b=y>s[1];if(C&&!S&&!b)return!0;C&&(v=!0),S&&(p=!0),b&&(g=!0)}return v&&p&&g})}else ga(h,function(f){if(o==="empty")l.setData(u=u.map(f,function(g){return a(g)?g:NaN}));else{var p={};p[f]=s,u.selectRange(p)}});ga(h,function(f){u.setApproximateExtent(s,f)})}});function a(l){return l>=s[0]&&l<=s[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},i=this._dataZoomModel,r=this._dataExtent;ga(["min","max"],function(n){var o=i.get(n+"Span"),s=i.get(n+"ValueSpan");s!=null&&(s=this.getAxisModel().axis.scale.parse(s)),s!=null?o=Oe(r[0]+s,r,[0,100],!0):o!=null&&(s=Oe(o,[0,100],r,!0)-r[0]),t[n+"Span"]=o,t[n+"ValueSpan"]=s},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),i=this._percentWindow,r=this._valueWindow;if(i){var n=b1(r,[0,500]);n=Math.min(n,20);var o=t.axis.scale.rawExtentInfo;i[0]!==0&&o.setDeterminedMinMax("min",+r[0].toFixed(n)),i[1]!==100&&o.setDeterminedMinMax("max",+r[1].toFixed(n)),o.freeze()}},e}();function Vre(e,t,i){var r=[1/0,-1/0];ga(i,function(s){yq(r,s.getData(),t)});var n=e.getAxisModel(),o=aI(n.axis.scale,n,r).calculate();return[o.min,o.max]}var Bre={getTargetSeries:function(e){function t(n){e.eachComponent("dataZoom",function(o){o.eachTargetAxis(function(s,a){var l=e.getComponent(Un(s),a);n(s,a,l,o)})})}t(function(n,o,s,a){s.__dzAxisProxy=null});var i=[];t(function(n,o,s,a){s.__dzAxisProxy||(s.__dzAxisProxy=new Nre(n,o,a,e),i.push(s.__dzAxisProxy))});var r=Q();return _(i,function(n){_(n.getTargetSeriesModels(),function(o){r.set(o.uid,o)})}),r},overallReset:function(e,t){e.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(r,n){i.getAxisProxy(r,n).reset(i)}),i.eachTargetAxis(function(r,n){i.getAxisProxy(r,n).filterData(i,t)})}),e.eachComponent("dataZoom",function(i){var r=i.findRepresentativeAxisProxy();if(r){var n=r.getDataPercentWindow(),o=r.getDataValueWindow();i.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}})}};function Hre(e){e.registerAction("dataZoom",function(t,i){var r=kre(i,t);_(r,function(n){n.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var D_=!1;function Qw(e){D_||(D_=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,Bre),Hre(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function zre(e){e.registerComponentModel(Ore),e.registerComponentView(Gre),Qw(e)}var Ii=function(){function e(){}return e}(),Uk={};function va(e,t){Uk[e]=t}function $k(e){return Uk[e]}var Wre=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var i=this.ecModel;_(this.option.feature,function(r,n){var o=$k(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(i)),pe(r,o.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(Re);function Ure(e,t,i){var r=t.getBoxLayoutParams(),n=t.get("padding"),o={width:i.getWidth(),height:i.getHeight()},s=pt(r,o,n);ms(t.get("orient"),e,t.get("itemGap"),s.width,s.height),ip(e,r,o,n)}function Kk(e,t){var i=ol(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),e=new Te({shape:{x:e.x-i[3],y:e.y-i[0],width:e.width+i[1]+i[3],height:e.height+i[0]+i[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1}),e}var $re=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(i,r,n,o){var s=this.group;if(s.removeAll(),!i.get("show"))return;var a=+i.get("itemSize"),l=i.get("orient")==="vertical",u=i.get("feature")||{},h=this._features||(this._features={}),c=[];_(u,function(p,g){c.push(g)}),new un(this._featureNames||[],c).add(d).update(d).remove(fe(d,null)).execute(),this._featureNames=c;function d(p,g){var v=c[p],m=c[g],y=u[v],C=new Ne(y,i,i.ecModel),S;if(o&&o.newTitle!=null&&o.featureName===v&&(y.title=o.newTitle),v&&!m){if(Kre(v))S={onclick:C.option.onclick,featureName:v};else{var b=$k(v);if(!b)return;S=new b}h[v]=S}else if(S=h[m],!S)return;S.uid=nl("toolbox-feature"),S.model=C,S.ecModel=r,S.api=n;var w=S instanceof Ii;if(!v&&m){w&&S.dispose&&S.dispose(r,n);return}if(!C.get("show")||w&&S.unusable){w&&S.remove&&S.remove(r,n);return}f(C,S,v),C.setIconStatus=function(x,R){var D=this.option,T=this.iconPaths;D.iconStatus=D.iconStatus||{},D.iconStatus[x]=R,T[x]&&(R==="emphasis"?an:ln)(T[x])},S instanceof Ii&&S.render&&S.render(C,r,n,o)}function f(p,g,v){var m=p.getModel("iconStyle"),y=p.getModel(["emphasis","iconStyle"]),C=g instanceof Ii&&g.getIcons?g.getIcons():p.get("icon"),S=p.get("title")||{},b,w;q(C)?(b={},b[v]=C):b=C,q(S)?(w={},w[v]=S):w=S;var x=p.iconPaths={};_(b,function(R,D){var T=wh(R,{},{x:-a/2,y:-a/2,width:a,height:a});T.setStyle(m.getItemStyle());var A=T.ensureState("emphasis");A.style=y.getItemStyle();var P=new Ae({style:{text:w[D],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:AS({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},r)},ignore:!0});T.setTextContent(P),ks({el:T,componentModel:i,itemName:D,formatterParamsExtra:{title:w[D]}}),T.__title=w[D],T.on("mouseover",function(){var M=y.getItemStyle(),F=l?i.get("right")==null&&i.get("left")!=="right"?"right":"left":i.get("bottom")==null&&i.get("top")!=="bottom"?"bottom":"top";P.setStyle({fill:y.get("textFill")||M.fill||M.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),T.setTextConfig({position:y.get("textPosition")||F}),P.ignore=!i.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",D])!=="emphasis"&&n.leaveEmphasis(this),P.hide()}),(p.get(["iconStatus",D])==="emphasis"?an:ln)(T),s.add(T),T.on("click",Z(g.onclick,g,r,n,D)),x[D]=T})}Ure(s,i,n),s.add(Kk(s.getBoundingRect(),i)),l||s.eachChild(function(p){var g=p.__title,v=p.ensureState("emphasis"),m=v.textConfig||(v.textConfig={}),y=p.getTextContent(),C=y&&y.ensureState("emphasis");if(C&&!ie(C)&&g){var S=C.style||(C.style={}),b=ph(g,Ae.makeFont(S)),w=p.x+s.x,x=p.y+s.y+a,R=!1;x+b.height>n.getHeight()&&(m.position="top",R=!0);var D=R?-5-b.height:a+10;w+b.width/2>n.getWidth()?(m.position=["100%",D],S.align="right"):w-b.width/2<0&&(m.position=[0,D],S.align="left")}})},t.prototype.updateView=function(i,r,n,o){_(this._features,function(s){s instanceof Ii&&s.updateView&&s.updateView(s.model,r,n,o)})},t.prototype.remove=function(i,r){_(this._features,function(n){n instanceof Ii&&n.remove&&n.remove(i,r)}),this.group.removeAll()},t.prototype.dispose=function(i,r){_(this._features,function(n){n instanceof Ii&&n.dispose&&n.dispose(i,r)})},t.type="toolbox",t}(Qe);function Kre(e){return e.indexOf("my")===0}var Yre=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(i,r){var n=this.model,o=n.get("name")||i.get("title.0.text")||"echarts",s=r.getZr().painter.getType()==="svg",a=s?"svg":n.get("type",!0)||"png",l=r.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||i.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=xe.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var h=document.createElement("a");h.download=o+"."+a,h.target="_blank",h.href=l;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});h.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||s){var d=l.split(","),f=d[0].indexOf("base64")>-1,p=s?decodeURIComponent(d[1]):d[1];f&&(p=window.atob(p));var g=o+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var v=p.length,m=new Uint8Array(v);v--;)m[v]=p.charCodeAt(v);var y=new Blob([m]);window.navigator.msSaveOrOpenBlob(y,g)}else{var C=document.createElement("iframe");document.body.appendChild(C);var S=C.contentWindow,b=S.document;b.open("image/svg+xml","replace"),b.write(p),b.close(),S.focus(),b.execCommand("SaveAs",!0,g),document.body.removeChild(C)}}else{var w=n.get("lang"),x='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(w&&w[0]||"")+'" /></body>',R=window.open();R.document.write(x),R.document.title=o}},t.getDefaultOption=function(i){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:i.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:i.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},t}(Ii),T_="__ec_magicType_stack__",Xre=[["line","bar"],["stack"]],qre=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getIcons=function(){var i=this.model,r=i.get("icon"),n={};return _(i.get("type"),function(o){r[o]&&(n[o]=r[o])}),n},t.getDefaultOption=function(i){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:i.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},t.prototype.onclick=function(i,r,n){var o=this.model,s=o.get(["seriesIndex",n]);if(__[n]){var a={series:[]},l=function(c){var d=c.subType,f=c.id,p=__[n](d,f,c,o);p&&(ne(p,c.option),a.series.push(p));var g=c.coordinateSystem;if(g&&g.type==="cartesian2d"&&(n==="line"||n==="bar")){var v=g.getAxesByScale("ordinal")[0];if(v){var m=v.dim,y=m+"Axis",C=c.getReferringComponents(y,ht).models[0],S=C.componentIndex;a[y]=a[y]||[];for(var b=0;b<=S;b++)a[y][S]=a[y][S]||{};a[y][S].boundaryGap=n==="bar"}}};_(Xre,function(c){Ce(c,n)>=0&&_(c,function(d){o.setIconStatus(d,"normal")})}),o.setIconStatus(n,"emphasis"),i.eachComponent({mainType:"series",query:s==null?null:{seriesIndex:s}},l);var u,h=n;n==="stack"&&(u=pe({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),o.get(["iconStatus",n])!=="emphasis"&&(h="tiled")),r.dispatchAction({type:"changeMagicType",currentType:h,newOption:a,newTitle:u,featureName:"magicType"})}},t}(Ii),__={line:function(e,t,i,r){if(e==="bar")return pe({id:t,type:"line",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(e,t,i,r){if(e==="line")return pe({id:t,type:"bar",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(e,t,i,r){var n=i.get("stack")===T_;if(e==="line"||e==="bar")return r.setIconStatus("stack",n?"normal":"emphasis"),pe({id:t,stack:n?"":T_},r.get(["option","stack"])||{},!0)}};Nr({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});var Cp=new Array(60).join("-"),$a="	";function Zre(e){var t={},i=[],r=[];return e.eachRawSeries(function(n){var o=n.coordinateSystem;if(o&&(o.type==="cartesian2d"||o.type==="polar")){var s=o.getBaseAxis();if(s.type==="category"){var a=s.dim+"_"+s.index;t[a]||(t[a]={categoryAxis:s,valueAxis:o.getOtherAxis(s),series:[]},r.push({axisDim:s.dim,axisIndex:s.index})),t[a].series.push(n)}else i.push(n)}else i.push(n)}),{seriesGroupByCategoryAxis:t,other:i,meta:r}}function jre(e){var t=[];return _(e,function(i,r){var n=i.categoryAxis,o=i.valueAxis,s=o.dim,a=[" "].concat(z(i.series,function(f){return f.name})),l=[n.model.getCategories()];_(i.series,function(f){var p=f.getRawData();l.push(f.getRawData().mapArray(p.mapDimension(s),function(g){return g}))});for(var u=[a.join($a)],h=0;h<l[0].length;h++){for(var c=[],d=0;d<l.length;d++)c.push(l[d][h]);u.push(c.join($a))}t.push(u.join(`
`))}),t.join(`

`+Cp+`

`)}function Qre(e){return z(e,function(t){var i=t.getRawData(),r=[t.name],n=[];return i.each(i.dimensions,function(){for(var o=arguments.length,s=arguments[o-1],a=i.getName(s),l=0;l<o-1;l++)n[l]=arguments[l];r.push((a?a+$a:"")+n.join($a))}),r.join(`
`)}).join(`

`+Cp+`

`)}function Jre(e){var t=Zre(e);return{value:Le([jre(t.seriesGroupByCategoryAxis),Qre(t.other)],function(i){return!!i.replace(/[\n\t\s]/g,"")}).join(`

`+Cp+`

`),meta:t.meta}}function mf(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ene(e){var t=e.slice(0,e.indexOf(`
`));if(t.indexOf($a)>=0)return!0}var nC=new RegExp("["+$a+"]+","g");function tne(e){for(var t=e.split(/\n+/g),i=mf(t.shift()).split(nC),r=[],n=z(i,function(l){return{name:l,data:[]}}),o=0;o<t.length;o++){var s=mf(t[o]).split(nC);r.push(s.shift());for(var a=0;a<s.length;a++)n[a]&&(n[a].data[o]=s[a])}return{series:n,categories:r}}function ine(e){for(var t=e.split(/\n+/g),i=mf(t.shift()),r=[],n=0;n<t.length;n++){var o=mf(t[n]);if(o){var s=o.split(nC),a="",l=void 0,u=!1;isNaN(s[0])?(u=!0,a=s[0],s=s.slice(1),r[n]={name:a,value:[]},l=r[n].value):l=r[n]=[];for(var h=0;h<s.length;h++)l.push(+s[h]);l.length===1&&(u?r[n].value=l[0]:r[n]=l[0])}}return{name:i,data:r}}function rne(e,t){var i=e.split(new RegExp(`
*`+Cp+`
*`,"g")),r={series:[]};return _(i,function(n,o){if(ene(n)){var s=tne(n),a=t[o],l=a.axisDim+"Axis";a&&(r[l]=r[l]||[],r[l][a.axisIndex]={data:s.categories},r.series=r.series.concat(s.series))}else{var s=ine(n);r.series.push(s)}}),r}var nne=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(i,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var n=r.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var s=document.createElement("div");s.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",s.style.backgroundColor=o.get("backgroundColor")||"#fff";var a=document.createElement("h4"),l=o.get("lang")||[];a.innerHTML=l[0]||o.get("title"),a.style.cssText="margin:10px 20px",a.style.color=o.get("textColor");var u=document.createElement("div"),h=document.createElement("textarea");u.style.cssText="overflow:auto";var c=o.get("optionToContent"),d=o.get("contentToOption"),f=Jre(i);if(ie(c)){var p=c(r.getOption());q(p)?u.innerHTML=p:ka(p)&&u.appendChild(p)}else{h.readOnly=o.get("readOnly");var g=h.style;g.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",g.color=o.get("textColor"),g.borderColor=o.get("textareaBorderColor"),g.backgroundColor=o.get("textareaColor"),h.value=f.value,u.appendChild(h)}var v=f.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",C=document.createElement("div"),S=document.createElement("div");y+=";background-color:"+o.get("buttonColor"),y+=";color:"+o.get("buttonTextColor");var b=this;function w(){n.removeChild(s),b._dom=null}Om(C,"click",w),Om(S,"click",function(){if(d==null&&c!=null||d!=null&&c==null){w();return}var x;try{ie(d)?x=d(u,r.getOption()):x=rne(h.value,v)}catch(R){throw w(),new Error("Data view format error "+R)}x&&r.dispatchAction({type:"changeDataView",newOption:x}),w()}),C.innerHTML=l[1],S.innerHTML=l[2],S.style.cssText=C.style.cssText=y,!o.get("readOnly")&&m.appendChild(S),m.appendChild(C),s.appendChild(a),s.appendChild(u),s.appendChild(m),u.style.height=n.clientHeight-80+"px",n.appendChild(s),this._dom=s},t.prototype.remove=function(i,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(i,r){this.remove(i,r)},t.getDefaultOption=function(i){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:i.getLocaleModel().get(["toolbox","dataView","title"]),lang:i.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},t}(Ii);function one(e,t){return z(e,function(i,r){var n=t&&t[r];if(se(n)&&!H(n)){var o=se(i)&&!H(i);o||(i={value:i});var s=n.name!=null&&i.name==null;return i=ne(i,n),s&&delete i.name,i}else return i})}Nr({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var i=[];_(e.newOption.series,function(r){var n=t.getSeriesByName(r.name)[0];if(!n)i.push(V({type:"scatter"},r));else{var o=n.get("data");i.push({name:r.name,data:one(r.data,o)})}}),t.mergeOption(ne({series:i},e.newOption))});var Yk=_,Xk=_e();function sne(e,t){var i=Jw(e);Yk(t,function(r,n){for(var o=i.length-1;o>=0;o--){var s=i[o];if(s[n])break}if(o<0){var a=e.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(a){var l=a.getPercentRange();i[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),i.push(t)}function ane(e){var t=Jw(e),i=t[t.length-1];t.length>1&&t.pop();var r={};return Yk(i,function(n,o){for(var s=t.length-1;s>=0;s--)if(n=t[s][o],n){r[o]=n;break}}),r}function lne(e){Xk(e).snapshots=null}function une(e){return Jw(e).length}function Jw(e){var t=Xk(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var hne=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(i,r){lne(i),r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(i){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:i.getLocaleModel().get(["toolbox","restore","title"])};return r},t}(Ii);Nr({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var cne=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],e0=function(){function e(t,i,r){var n=this;this._targetInfoList=[];var o=A_(i,t);_(dne,function(s,a){(!r||!r.include||Ce(r.include,a)>=0)&&s(o,n._targetInfoList)})}return e.prototype.setOutputRanges=function(t,i){return this.matchOutputRanges(t,i,function(r,n,o){if((r.coordRanges||(r.coordRanges=[])).push(n),!r.coordRange){r.coordRange=n;var s=Kv[r.brushType](0,o,n);r.__rangeOffset={offset:E_[r.brushType](s.values,r.range,[1,1]),xyMinMax:s.xyMinMax}}}),t},e.prototype.matchOutputRanges=function(t,i,r){_(t,function(n){var o=this.findTargetInfo(n,i);o&&o!==!0&&_(o.coordSyses,function(s){var a=Kv[n.brushType](1,s,n.range,!0);r(n,a.values,s,i)})},this)},e.prototype.setInputRanges=function(t,i){_(t,function(r){var n=this.findTargetInfo(r,i);if(r.range=r.range||[],n&&n!==!0){r.panelId=n.panelId;var o=Kv[r.brushType](0,n.coordSys,r.coordRange),s=r.__rangeOffset;r.range=s?E_[r.brushType](o.values,s.offset,fne(o.xyMinMax,s.xyMinMax)):o.values}},this)},e.prototype.makePanelOpts=function(t,i){return z(this._targetInfoList,function(r){var n=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:i?i(r):null,clipPath:ik(n),isTargetByCursor:nk(n,t,r.coordSysModel),getLinearBrushOtherExtent:rk(n)}})},e.prototype.controlSeries=function(t,i,r){var n=this.findTargetInfo(t,r);return n===!0||n&&Ce(n.coordSyses,i.coordinateSystem)>=0},e.prototype.findTargetInfo=function(t,i){for(var r=this._targetInfoList,n=A_(i,t),o=0;o<r.length;o++){var s=r[o],a=t.panelId;if(a){if(s.panelId===a)return s}else for(var l=0;l<P_.length;l++)if(P_[l](n,s))return s}return!0},e}();function oC(e){return e[0]>e[1]&&e.reverse(),e}function A_(e,t){return vu(e,t,{includeMainTypes:cne})}var dne={grid:function(e,t){var i=e.xAxisModels,r=e.yAxisModels,n=e.gridModels,o=Q(),s={},a={};!i&&!r&&!n||(_(i,function(l){var u=l.axis.grid.model;o.set(u.id,u),s[u.id]=!0}),_(r,function(l){var u=l.axis.grid.model;o.set(u.id,u),a[u.id]=!0}),_(n,function(l){o.set(l.id,l),s[l.id]=!0,a[l.id]=!0}),o.each(function(l){var u=l.coordinateSystem,h=[];_(u.getCartesians(),function(c,d){(Ce(i,c.getAxis("x").model)>=0||Ce(r,c.getAxis("y").model)>=0)&&h.push(c)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:h[0],coordSyses:h,getPanelRect:M_.grid,xAxisDeclared:s[l.id],yAxisDeclared:a[l.id]})}))},geo:function(e,t){_(e.geoModels,function(i){var r=i.coordinateSystem;t.push({panelId:"geo--"+i.id,geoModel:i,coordSysModel:i,coordSys:r,coordSyses:[r],getPanelRect:M_.geo})})}},P_=[function(e,t){var i=e.xAxisModel,r=e.yAxisModel,n=e.gridModel;return!n&&i&&(n=i.axis.grid.model),!n&&r&&(n=r.axis.grid.model),n&&n===t.gridModel},function(e,t){var i=e.geoModel;return i&&i===t.geoModel}],M_={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(vs(e)),t}},Kv={lineX:fe(F_,0),lineY:fe(F_,1),rect:function(e,t,i,r){var n=e?t.pointToData([i[0][0],i[1][0]],r):t.dataToPoint([i[0][0],i[1][0]],r),o=e?t.pointToData([i[0][1],i[1][1]],r):t.dataToPoint([i[0][1],i[1][1]],r),s=[oC([n[0],o[0]]),oC([n[1],o[1]])];return{values:s,xyMinMax:s}},polygon:function(e,t,i,r){var n=[[1/0,-1/0],[1/0,-1/0]],o=z(i,function(s){var a=e?t.pointToData(s,r):t.dataToPoint(s,r);return n[0][0]=Math.min(n[0][0],a[0]),n[1][0]=Math.min(n[1][0],a[1]),n[0][1]=Math.max(n[0][1],a[0]),n[1][1]=Math.max(n[1][1],a[1]),a});return{values:o,xyMinMax:n}}};function F_(e,t,i,r){var n=i.getAxis(["x","y"][e]),o=oC(z([0,1],function(a){return t?n.coordToData(n.toLocalCoord(r[a]),!0):n.toGlobalCoord(n.dataToCoord(r[a]))})),s=[];return s[e]=o,s[1-e]=[NaN,NaN],{values:o,xyMinMax:s}}var E_={lineX:fe(I_,0),lineY:fe(I_,1),rect:function(e,t,i){return[[e[0][0]-i[0]*t[0][0],e[0][1]-i[0]*t[0][1]],[e[1][0]-i[1]*t[1][0],e[1][1]-i[1]*t[1][1]]]},polygon:function(e,t,i){return z(e,function(r,n){return[r[0]-i[0]*t[n][0],r[1]-i[1]*t[n][1]]})}};function I_(e,t,i,r){return[t[0]-r[e]*i[0],t[1]-r[e]*i[1]]}function fne(e,t){var i=L_(e),r=L_(t),n=[i[0]/r[0],i[1]/r[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function L_(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var sC=_,pne=b4("toolbox-dataZoom_"),gne=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(i,r,n,o){this._brushController||(this._brushController=new _w(n.getZr()),this._brushController.on("brush",Z(this._onBrush,this)).mount()),yne(i,r,this,o,n),mne(i,r)},t.prototype.onclick=function(i,r,n){vne[n].call(this)},t.prototype.remove=function(i,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(i,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(i){var r=i.areas;if(!i.isEnd||!r.length)return;var n={},o=this.ecModel;this._brushController.updateCovers([]);var s=new e0(t0(this.model),o,{include:["grid"]});s.matchOutputRanges(r,o,function(u,h,c){if(c.type==="cartesian2d"){var d=u.brushType;d==="rect"?(a("x",c,h[0]),a("y",c,h[1])):a({lineX:"x",lineY:"y"}[d],c,h)}}),sne(o,n),this._dispatchZoomAction(n);function a(u,h,c){var d=h.getAxis(u),f=d.model,p=l(u,f,o),g=p.findRepresentativeAxisProxy(f).getMinMaxSpan();(g.minValueSpan!=null||g.maxValueSpan!=null)&&(c=Hs(0,c.slice(),d.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),p&&(n[p.id]={dataZoomId:p.id,startValue:c[0],endValue:c[1]})}function l(u,h,c){var d;return c.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var p=f.getAxisModel(u,h.componentIndex);p&&(d=f)}),d}},t.prototype._dispatchZoomAction=function(i){var r=[];sC(i,function(n,o){r.push(ae(n))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(i){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:i.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},t}(Ii),vne={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(ane(this.ecModel))}};function t0(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function mne(e,t){e.setIconStatus("back",une(t)>1?"emphasis":"normal")}function yne(e,t,i,r,n){var o=i._isZoomActive;r&&r.type==="takeGlobalCursor"&&(o=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),i._isZoomActive=o,e.setIconStatus("zoom",o?"emphasis":"normal");var s=new e0(t0(e),t,{include:["grid"]}),a=s.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});i._brushController.setPanels(a).enableBrush(o&&a.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}YY("dataZoom",function(e){var t=e.getComponent("toolbox",0),i=["feature","dataZoom"];if(!t||t.get(i)==null)return;var r=t.getModel(i),n=[],o=t0(r),s=vu(e,o);sC(s.xAxisModels,function(l){return a(l,"xAxis","xAxisIndex")}),sC(s.yAxisModels,function(l){return a(l,"yAxis","yAxisIndex")});function a(l,u,h){var c=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:pne+u+c};d[h]=c,n.push(d)}return n});function Cne(e){e.registerComponentModel(Wre),e.registerComponentView($re),va("saveAsImage",Yre),va("magicType",qre),va("dataView",nne),va("dataZoom",gne),va("restore",hne),we(zre)}var Sne=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Re);function qk(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function Zk(e){if(xe.domSupported){for(var t=document.documentElement.style,i=0,r=e.length;i<r;i++)if(e[i]in t)return e[i]}}var jk=Zk(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),wne=Zk(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Qk(e,t){if(!e)return t;t=FF(t,!0);var i=e.indexOf(t);return e=i===-1?t:"-"+e.slice(0,i)+"-"+t,e.toLowerCase()}function bne(e,t){var i=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return i?i[t]:null}var xne=Qk(wne,"transition"),i0=Qk(jk,"transform"),Rne="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(xe.transform3dSupported?"will-change:transform;":"");function Dne(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Tne(e,t,i){if(!q(i)||i==="inside")return"";var r=e.get("backgroundColor"),n=e.get("borderWidth");t=Ts(t);var o=Dne(i),s=Math.max(Math.round(n)*1.5,6),a="",l=i0+":",u;Ce(["left","right"],o)>-1?(a+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(a+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var h=u*Math.PI/180,c=s+n,d=c*Math.abs(Math.cos(h))+c*Math.abs(Math.sin(h)),f=Math.round(((d-Math.SQRT2*n)/2+Math.SQRT2*n-(d-c)/2)*100)/100;a+=";"+o+":-"+f+"px";var p=t+" solid "+n+"px;",g=["position:absolute;width:"+s+"px;height:"+s+"px;z-index:-1;",a+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+g.join("")+'"></div>'}function _ne(e,t){var i="cubic-bezier(0.23,1,0.32,1)",r=" "+e/2+"s "+i,n="opacity"+r+",visibility"+r;return t||(r=" "+e+"s "+i,n+=xe.transformSupported?","+i0+r:",left"+r+",top"+r),xne+":"+n}function k_(e,t,i){var r=e.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!xe.transformSupported)return i?"top:"+n+";left:"+r+";":[["top",n],["left",r]];var o=xe.transform3dSupported,s="translate"+(o?"3d":"")+"("+r+","+n+(o?",0":"")+")";return i?"top:0;left:0;"+i0+":"+s+";":[["top",0],["left",0],[jk,s]]}function Ane(e){var t=[],i=e.get("fontSize"),r=e.getTextColor();r&&t.push("color:"+r),t.push("font:"+e.getFont());var n=de(e.get("lineHeight"),Math.round(i*3/2));i&&t.push("line-height:"+n+"px");var o=e.get("textShadowColor"),s=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,l=e.get("textShadowOffsetY")||0;return o&&s&&t.push("text-shadow:"+a+"px "+l+"px "+s+"px "+o),_(["decoration","align"],function(u){var h=e.get(u);h&&t.push("text-"+u+":"+h)}),t.join(";")}function Pne(e,t,i){var r=[],n=e.get("transitionDuration"),o=e.get("backgroundColor"),s=e.get("shadowBlur"),a=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),h=e.getModel("textStyle"),c=cE(e,"html"),d=l+"px "+u+"px "+s+"px "+a;return r.push("box-shadow:"+d),t&&n&&r.push(_ne(n,i)),o&&r.push("background-color:"+o),_(["width","color","radius"],function(f){var p="border-"+f,g=FF(p),v=e.get(g);v!=null&&r.push(p+":"+v+(f==="color"?"":"px"))}),r.push(Ane(h)),c!=null&&r.push("padding:"+ol(c).join("px ")+"px"),r.join(";")+";"}function O_(e,t,i,r,n){var o=t&&t.painter;if(i){var s=o&&o.getViewportRoot();s&&e$(e,s,i,r,n)}else{e[0]=r,e[1]=n;var a=o&&o.getViewportRootOffset();a&&(e[0]+=a.offsetLeft,e[1]+=a.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Mne=function(){function e(t,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,xe.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var n=this._zr=t.getZr(),o=i.appendTo,s=o&&(q(o)?document.querySelector(o):ka(o)?o:ie(o)&&o(t.getDom()));O_(this._styleCoord,n,s,t.getWidth()/2,t.getHeight()/2),(s||t.getDom()).appendChild(r),this._api=t,this._container=s;var a=this;r.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!a._enterable){var u=n.handler,h=n.painter.getViewportRoot();Ai(h,l,!0),u.dispatch("mousemove",l)}},r.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return e.prototype.update=function(t){if(!this._container){var i=this._api.getDom(),r=bne(i,"position"),n=i.style;n.position!=="absolute"&&r!=="absolute"&&(n.position="relative")}var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this.el.className=t.get("className")||""},e.prototype.show=function(t,i){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,n=r.style,o=this._styleCoord;r.innerHTML?n.cssText=Rne+Pne(t,!this._firstShow,this._longHide)+k_(o[0],o[1],!0)+("border-color:"+Ts(i)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,i,r,n,o){var s=this.el;if(t==null){s.innerHTML="";return}var a="";if(q(o)&&r.get("trigger")==="item"&&!qk(r)&&(a=Tne(r,n,o)),q(t))s.innerHTML=t+a;else if(t){s.innerHTML="",H(t)||(t=[t]);for(var l=0;l<t.length;l++)ka(t[l])&&t[l].parentNode!==s&&s.appendChild(t[l]);if(a&&s.childNodes.length){var u=document.createElement("div");u.innerHTML=a,s.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},e.prototype.moveTo=function(t,i){if(this.el){var r=this._styleCoord;if(O_(r,this._zr,this._container,t,i),r[0]!=null&&r[1]!=null){var n=this.el.style,o=k_(r[0],r[1]);_(o,function(s){n[s[0]]=s[1]})}}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],i=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),i*this._zr.getHeight())},e.prototype.hide=function(){var t=this,i=this.el.style;i.visibility="hidden",i.opacity="0",xe.transform3dSupported&&(i.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Z(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},e}(),Fne=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),N_(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var i=t.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,i,r,n,o){var s=this;se(t)&&Ie(""),this.el&&this._zr.remove(this.el);var a=r.getModel("textStyle");this.el=new Ae({style:{rich:i.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:a.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:cE(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),_(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){s.el.style[u]=r.get(u)}),_(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){s.el.style[u]=a.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,i=this.el.getBoundingRect(),r=G_(t.style);return[i.width+r.left+r.right,i.height+r.top+r.bottom]},e.prototype.moveTo=function(t,i){var r=this.el;if(r){var n=this._styleCoord;N_(n,this._zr,t,i),t=n[0],i=n[1];var o=r.style,s=En(o.borderWidth||0),a=G_(o);r.x=t+s+a.left,r.y=i+s+a.top,r.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],i=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),i*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Z(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function En(e){return Math.max(0,e)}function G_(e){var t=En(e.shadowBlur||0),i=En(e.shadowOffsetX||0),r=En(e.shadowOffsetY||0);return{left:En(t-i),right:En(t+i),top:En(t-r),bottom:En(t+r)}}function N_(e,t,i,r){e[0]=i,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Ene=new Te({shape:{x:-1,y:-1,width:2,height:2}}),Ine=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i,r){if(!(xe.node||!r.getDom())){var n=i.getComponent("tooltip"),o=this._renderMode=P4(n.get("renderMode"));this._tooltipContent=o==="richText"?new Fne(r):new Mne(r,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},t.prototype.render=function(i,r,n){if(!(xe.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=i,this._ecModel=r,this._api=n;var o=this._tooltipContent;o.update(i),o.setEnterable(i.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&i.get("transitionDuration")?ul(this,"_updatePosition",50,"fixRate"):Yu(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var i=this._tooltipModel,r=i.get("triggerOn");Ok("itemTooltip",this._api,Z(function(n,o,s){r!=="none"&&(r.indexOf(n)>=0?this._tryShow(o,s):n==="leave"&&this._hide(s))},this))},t.prototype._keepShow=function(){var i=this._tooltipModel,r=this._ecModel,n=this._api,o=i.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&s.manuallyShowTip(i,r,n,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(i,r,n,o){if(!(o.from===this.uid||xe.node||!n.getDom())){var s=V_(o,n);this._ticket="";var a=o.dataByCoordSys,l=Gne(o,r,n);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},s)}else if(o.tooltip&&o.x!=null&&o.y!=null){var h=Ene;h.x=o.x,h.y=o.y,h.update(),ue(h).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:h},s)}else if(a)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:a,tooltipOption:o.tooltipOption},s);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(i,r,n,o))return;var c=Gk(o,r),d=c.point[0],f=c.point[1];d!=null&&f!=null&&this._tryShow({offsetX:d,offsetY:f,target:c.el,position:o.position,positionDefault:"bottom"},s)}else o.x!=null&&o.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:n.getZr().findHover(o.x,o.y).target},s))}},t.prototype.manuallyHideTip=function(i,r,n,o){var s=this._tooltipContent;this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(V_(o,n))},t.prototype._manuallyAxisShowTip=function(i,r,n,o){var s=o.seriesIndex,a=o.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||a==null||l==null)){var u=r.getSeriesByIndex(s);if(u){var h=u.getData(),c=Hl([h.getItemModel(a),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(c.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:a,position:o.position}),!0}}},t.prototype._tryShow=function(i,r){var n=i.target,o=this._tooltipModel;if(o){this._lastX=i.offsetX,this._lastY=i.offsetY;var s=i.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,i);else if(n){var a=ue(n);if(a.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;is(n,function(h){if(ue(h).dataIndex!=null)return l=h,!0;if(ue(h).tooltipConfig!=null)return u=h,!0},!0),l?this._showSeriesItemTooltip(i,l,r):u?this._showComponentItemTooltip(i,u,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},t.prototype._showOrMove=function(i,r){var n=i.get("showDelay");r=Z(r,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(r,n):r()},t.prototype._showAxisTooltip=function(i,r){var n=this._ecModel,o=this._tooltipModel,s=[r.offsetX,r.offsetY],a=Hl([r.tooltipOption],o),l=this._renderMode,u=[],h=wt("section",{blocks:[],noHeader:!0}),c=[],d=new Fg;_(i,function(y){_(y.dataByAxis,function(C){var S=n.getComponent(C.axisDim+"Axis",C.axisIndex),b=C.value;if(!(!S||b==null)){var w=Ik(b,S.axis,n,C.seriesDataIndices,C.valueLabelOpt),x=wt("section",{header:w,noHeader:!Ji(w),sortBlocks:!0,blocks:[]});h.blocks.push(x),_(C.seriesDataIndices,function(R){var D=n.getSeriesByIndex(R.seriesIndex),T=R.dataIndexInside,A=D.getDataParams(T);if(!(A.dataIndex<0)){A.axisDim=C.axisDim,A.axisIndex=C.axisIndex,A.axisType=C.axisType,A.axisId=C.axisId,A.axisValue=tw(S.axis,{value:b}),A.axisValueLabel=w,A.marker=d.makeTooltipMarker("item",Ts(A.color),l);var P=Dx(D.formatTooltip(T,!0,null)),M=P.frag;if(M){var F=Hl([D],o).get("valueFormatter");x.blocks.push(F?V({valueFormatter:F},M):M)}P.text&&c.push(P.text),u.push(A)}})}})}),h.blocks.reverse(),c.reverse();var f=r.position,p=a.get("order"),g=Fx(h,d,l,p,n.get("useUTC"),a.get("textStyle"));g&&c.unshift(g);var v=l==="richText"?`

`:"<br/>",m=c.join(v);this._showOrMove(a,function(){this._updateContentNotChangedOnAxis(i,u)?this._updatePosition(a,f,s[0],s[1],this._tooltipContent,u):this._showTooltipContent(a,m,u,Math.random()+"",s[0],s[1],f,null,d)})},t.prototype._showSeriesItemTooltip=function(i,r,n){var o=this._ecModel,s=ue(r),a=s.seriesIndex,l=o.getSeriesByIndex(a),u=s.dataModel||l,h=s.dataIndex,c=s.dataType,d=u.getData(c),f=this._renderMode,p=i.positionDefault,g=Hl([d.getItemModel(h),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),v=g.get("trigger");if(!(v!=null&&v!=="item")){var m=u.getDataParams(h,c),y=new Fg;m.marker=y.makeTooltipMarker("item",Ts(m.color),f);var C=Dx(u.formatTooltip(h,!1,c)),S=g.get("order"),b=g.get("valueFormatter"),w=C.frag,x=w?Fx(b?V({valueFormatter:b},w):w,y,f,S,o.get("useUTC"),g.get("textStyle")):C.text,R="item_"+u.name+"_"+h;this._showOrMove(g,function(){this._showTooltipContent(g,x,m,R,i.offsetX,i.offsetY,i.position,i.target,y)}),n({type:"showTip",dataIndexInside:h,dataIndex:d.getRawIndex(h),seriesIndex:a,from:this.uid})}},t.prototype._showComponentItemTooltip=function(i,r,n){var o=this._renderMode==="html",s=ue(r),a=s.tooltipConfig,l=a.option||{},u=l.encodeHTMLContent;if(q(l)){var h=l;l={content:h,formatter:h},u=!0}u&&o&&l.content&&(l=ae(l),l.content=$t(l.content));var c=[l],d=this._ecModel.getComponent(s.componentMainType,s.componentIndex);d&&c.push(d),c.push({formatter:l.content});var f=i.positionDefault,p=Hl(c,this._tooltipModel,f?{position:f}:null),g=p.get("content"),v=Math.random()+"",m=new Fg;this._showOrMove(p,function(){var y=ae(p.get("formatterParams")||{});this._showTooltipContent(p,g,y,v,i.offsetX,i.offsetY,i.position,r,m)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(i,r,n,o,s,a,l,u,h){if(this._ticket="",!(!i.get("showContent")||!i.get("show"))){var c=this._tooltipContent;c.setEnterable(i.get("enterable"));var d=i.get("formatter");l=l||i.get("position");var f=r,p=this._getNearestPoint([s,a],n,i.get("trigger"),i.get("borderColor")),g=p.color;if(d)if(q(d)){var v=i.ecModel.get("useUTC"),m=H(n)?n[0]:n,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;f=d,y&&(f=jf(m.axisValue,f,v)),f=EF(f,n,!0)}else if(ie(d)){var C=Z(function(S,b){S===this._ticket&&(c.setContent(b,h,i,g,l),this._updatePosition(i,l,s,a,c,n,u))},this);this._ticket=o,f=d(n,o,C)}else f=d;c.setContent(f,h,i,g,l),c.show(i,g),this._updatePosition(i,l,s,a,c,n,u)}},t.prototype._getNearestPoint=function(i,r,n,o){if(n==="axis"||H(r))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!H(r))return{color:o||r.color||r.borderColor}},t.prototype._updatePosition=function(i,r,n,o,s,a,l){var u=this._api.getWidth(),h=this._api.getHeight();r=r||i.get("position");var c=s.getSize(),d=i.get("align"),f=i.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),ie(r)&&(r=r([n,o],a,s.el,p,{viewSize:[u,h],contentSize:c.slice()})),H(r))n=K(r[0],u),o=K(r[1],h);else if(se(r)){var g=r;g.width=c[0],g.height=c[1];var v=pt(g,{width:u,height:h});n=v.x,o=v.y,d=null,f=null}else if(q(r)&&l){var m=One(r,p,c,i.get("borderWidth"));n=m[0],o=m[1]}else{var m=Lne(n,o,s,u,h,d?null:20,f?null:20);n=m[0],o=m[1]}if(d&&(n-=B_(d)?c[0]/2:d==="right"?c[0]:0),f&&(o-=B_(f)?c[1]/2:f==="bottom"?c[1]:0),qk(i)){var m=kne(n,o,s,u,h);n=m[0],o=m[1]}s.moveTo(n,o)},t.prototype._updateContentNotChangedOnAxis=function(i,r){var n=this._lastDataByCoordSys,o=this._cbParamsList,s=!!n&&n.length===i.length;return s&&_(n,function(a,l){var u=a.dataByAxis||[],h=i[l]||{},c=h.dataByAxis||[];s=s&&u.length===c.length,s&&_(u,function(d,f){var p=c[f]||{},g=d.seriesDataIndices||[],v=p.seriesDataIndices||[];s=s&&d.value===p.value&&d.axisType===p.axisType&&d.axisId===p.axisId&&g.length===v.length,s&&_(g,function(m,y){var C=v[y];s=s&&m.seriesIndex===C.seriesIndex&&m.dataIndex===C.dataIndex}),o&&_(d.seriesDataIndices,function(m){var y=m.seriesIndex,C=r[y],S=o[y];C&&S&&S.data!==C.data&&(s=!1)})})}),this._lastDataByCoordSys=i,this._cbParamsList=r,!!s},t.prototype._hide=function(i){this._lastDataByCoordSys=null,i({type:"hideTip",from:this.uid})},t.prototype.dispose=function(i,r){xe.node||!r.getDom()||(Yu(this,"_updatePosition"),this._tooltipContent.dispose(),tC("itemTooltip",r))},t.type="tooltip",t}(Qe);function Hl(e,t,i){var r=t.ecModel,n;i?(n=new Ne(i,r,r),n=new Ne(t.option,n,r)):n=t;for(var o=e.length-1;o>=0;o--){var s=e[o];s&&(s instanceof Ne&&(s=s.get("tooltip",!0)),q(s)&&(s={formatter:s}),s&&(n=new Ne(s,n,r)))}return n}function V_(e,t){return e.dispatchAction||Z(t.dispatchAction,t)}function Lne(e,t,i,r,n,o,s){var a=i.getSize(),l=a[0],u=a[1];return o!=null&&(e+l+o+2>r?e-=l+o:e+=o),s!=null&&(t+u+s>n?t-=u+s:t+=s),[e,t]}function kne(e,t,i,r,n){var o=i.getSize(),s=o[0],a=o[1];return e=Math.min(e+s,r)-s,t=Math.min(t+a,n)-a,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function One(e,t,i,r){var n=i[0],o=i[1],s=Math.ceil(Math.SQRT2*r)+8,a=0,l=0,u=t.width,h=t.height;switch(e){case"inside":a=t.x+u/2-n/2,l=t.y+h/2-o/2;break;case"top":a=t.x+u/2-n/2,l=t.y-o-s;break;case"bottom":a=t.x+u/2-n/2,l=t.y+h+s;break;case"left":a=t.x-n-s,l=t.y+h/2-o/2;break;case"right":a=t.x+u+s,l=t.y+h/2-o/2}return[a,l]}function B_(e){return e==="center"||e==="middle"}function Gne(e,t,i){var r=gS(e).queryOptionMap,n=r.keys()[0];if(!(!n||n==="series")){var o=gh(t,n,r.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),s=o.models[0];if(s){var a=i.getViewOfComponentModel(s),l;if(a.group.traverse(function(u){var h=ue(u).tooltipConfig;if(h&&h.name===e.name)return l=u,!0}),l)return{componentMainType:n,componentIndex:s.componentIndex,el:l}}}}function Nne(e){we(Lh),e.registerComponentModel(Sne),e.registerComponentView(Ine),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},at),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},at)}var Vne=["rect","polygon","keep","clear"];function Bne(e,t){var i=ze(e?e.brush:[]);if(i.length){var r=[];_(i,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(r=r.concat(u))});var n=e&&e.toolbox;H(n)&&(n=n[0]),n||(n={feature:{}},e.toolbox=[n]);var o=n.feature||(n.feature={}),s=o.brush||(o.brush={}),a=s.type||(s.type=[]);a.push.apply(a,r),Hne(a),t&&!a.length&&a.push.apply(a,Vne)}}function Hne(e){var t={};_(e,function(i){t[i]=1}),e.length=0,_(t,function(i,r){e.push(r)})}var H_=_;function z_(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function aC(e,t,i){var r={};return H_(t,function(o){var s=r[o]=n();H_(e[o],function(a,l){if(Ct.isValidType(l)){var u={type:l,visual:a};i&&i(u,o),s[l]=new Ct(u),l==="opacity"&&(u=ae(u),u.type="colorAlpha",s.__hidden.__alphaForOpacity=new Ct(u))}})}),r;function n(){var o=function(){};o.prototype.__hidden=o.prototype;var s=new o;return s}}function Jk(e,t,i){var r;_(i,function(n){t.hasOwnProperty(n)&&z_(t[n])&&(r=!0)}),r&&_(i,function(n){t.hasOwnProperty(n)&&z_(t[n])?e[n]=ae(t[n]):delete e[n]})}function zne(e,t,i,r,n,o){var s={};_(e,function(c){var d=Ct.prepareVisualTypes(t[c]);s[c]=d});var a;function l(c){return US(i,a,c)}function u(c,d){wE(i,a,c,d)}i.each(h);function h(c,d){a=c;var f=i.getRawDataItem(a);if(!(f&&f.visualMap===!1))for(var p=r.call(n,c),g=t[p],v=s[p],m=0,y=v.length;m<y;m++){var C=v[m];g[C]&&g[C].applyVisual(c,l,u)}}}function Wne(e,t,i,r){var n={};return _(e,function(o){var s=Ct.prepareVisualTypes(t[o]);n[o]=s}),{progress:function(s,a){var l;r!=null&&(l=a.getDimensionIndex(r));function u(b){return US(a,c,b)}function h(b,w){wE(a,c,b,w)}for(var c,d=a.getStore();(c=s.next())!=null;){var f=a.getRawDataItem(c);if(!(f&&f.visualMap===!1))for(var p=r!=null?d.get(l,c):c,g=i(p),v=t[g],m=n[g],y=0,C=m.length;y<C;y++){var S=m[y];v[S]&&v[S].applyVisual(p,u,h)}}}}}function Une(e){var t=e.brushType,i={point:function(r){return W_[t].point(r,i,e)},rect:function(r){return W_[t].rect(r,i,e)}};return i}var W_={lineX:U_(0),lineY:U_(1),rect:{point:function(e,t,i){return e&&i.boundingRect.contain(e[0],e[1])},rect:function(e,t,i){return e&&i.boundingRect.intersect(e)}},polygon:{point:function(e,t,i){return e&&i.boundingRect.contain(e[0],e[1])&&Yo(i.range,e[0],e[1])},rect:function(e,t,i){var r=i.range;if(!e||r.length<=1)return!1;var n=e.x,o=e.y,s=e.width,a=e.height,l=r[0];if(Yo(r,n,o)||Yo(r,n+s,o)||Yo(r,n,o+a)||Yo(r,n+s,o+a)||ve.create(e).contain(l[0],l[1])||Ql(n,o,n+s,o,r)||Ql(n,o,n,o+a,r)||Ql(n+s,o,n+s,o+a,r)||Ql(n,o+a,n+s,o+a,r))return!0}}};function U_(e){var t=["x","y"],i=["width","height"];return{point:function(r,n,o){if(r){var s=o.range,a=r[e];return zl(a,s)}},rect:function(r,n,o){if(r){var s=o.range,a=[r[t[e]],r[t[e]]+r[i[e]]];return a[1]<a[0]&&a.reverse(),zl(a[0],s)||zl(a[1],s)||zl(s[0],a)||zl(s[1],a)}}}}function zl(e,t){return t[0]<=e&&e<=t[1]}var $_=["inBrush","outOfBrush"],Yv="__ecBrushSelect",lC="__ecInBrushSelectEvent";function eO(e){e.eachComponent({mainType:"brush"},function(t){var i=t.brushTargetManager=new e0(t.option,e);i.setInputRanges(t.areas,e)})}function $ne(e,t,i){var r=[],n,o;e.eachComponent({mainType:"brush"},function(s){i&&i.type==="takeGlobalCursor"&&s.setBrushOption(i.key==="brush"?i.brushOption:{brushType:!1})}),eO(e),e.eachComponent({mainType:"brush"},function(s,a){var l={brushId:s.id,brushIndex:a,brushName:s.name,areas:ae(s.areas),selected:[]};r.push(l);var u=s.option,h=u.brushLink,c=[],d=[],f=[],p=!1;a||(n=u.throttleType,o=u.throttleDelay);var g=z(s.areas,function(b){var w=qne[b.brushType],x=ne({boundingRect:w?w(b):void 0},b);return x.selectors=Une(x),x}),v=aC(s.option,$_,function(b){b.mappingMethod="fixed"});H(h)&&_(h,function(b){c[b]=1});function m(b){return h==="all"||!!c[b]}function y(b){return!!b.length}e.eachSeries(function(b,w){var x=f[w]=[];b.subType==="parallel"?C(b,w):S(b,w,x)});function C(b,w){var x=b.coordinateSystem;p=p||x.hasAxisBrushed(),m(w)&&x.eachActiveState(b.getData(),function(R,D){R==="active"&&(d[D]=1)})}function S(b,w,x){if(!(!b.brushSelector||Xne(s,w))&&(_(g,function(D){s.brushTargetManager.controlSeries(D,b,e)&&x.push(D),p=p||y(x)}),m(w)&&y(x))){var R=b.getData();R.each(function(D){K_(b,x,R,D)&&(d[D]=1)})}}e.eachSeries(function(b,w){var x={seriesId:b.id,seriesIndex:w,seriesName:b.name,dataIndex:[]};l.selected.push(x);var R=f[w],D=b.getData(),T=m(w)?function(A){return d[A]?(x.dataIndex.push(D.getRawIndex(A)),"inBrush"):"outOfBrush"}:function(A){return K_(b,R,D,A)?(x.dataIndex.push(D.getRawIndex(A)),"inBrush"):"outOfBrush"};(m(w)?p:y(R))&&zne($_,v,D,T)})}),Kne(t,n,o,r,i)}function Kne(e,t,i,r,n){if(n){var o=e.getZr();if(!o[lC]){o[Yv]||(o[Yv]=Yne);var s=ul(o,Yv,i,t);s(e,r)}}}function Yne(e,t){if(!e.isDisposed()){var i=e.getZr();i[lC]=!0,e.dispatchAction({type:"brushSelect",batch:t}),i[lC]=!1}}function K_(e,t,i,r){for(var n=0,o=t.length;n<o;n++){var s=t[n];if(e.brushSelector(r,i,s.selectors,s))return!0}}function Xne(e,t){var i=e.option.seriesIndex;return i!=null&&i!=="all"&&(H(i)?Ce(i,t)<0:t!==i)}var qne={rect:function(e){return Y_(e.range)},polygon:function(e){for(var t,i=e.range,r=0,n=i.length;r<n;r++){t=t||[[1/0,-1/0],[1/0,-1/0]];var o=i[r];o[0]<t[0][0]&&(t[0][0]=o[0]),o[0]>t[0][1]&&(t[0][1]=o[0]),o[1]<t[1][0]&&(t[1][0]=o[1]),o[1]>t[1][1]&&(t[1][1]=o[1])}return t&&Y_(t)}};function Y_(e){return new ve(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var Zne=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i,r){this.ecModel=i,this.api=r,this.model,(this._brushController=new _w(r.getZr())).on("brush",Z(this._onBrush,this)).mount()},t.prototype.render=function(i,r,n,o){this.model=i,this._updateController(i,r,n,o)},t.prototype.updateTransform=function(i,r,n,o){eO(r),this._updateController(i,r,n,o)},t.prototype.updateVisual=function(i,r,n,o){this.updateTransform(i,r,n,o)},t.prototype.updateView=function(i,r,n,o){this._updateController(i,r,n,o)},t.prototype._updateController=function(i,r,n,o){(!o||o.$from!==i.id)&&this._brushController.setPanels(i.brushTargetManager.makePanelOpts(n)).enableBrush(i.brushOption).updateCovers(i.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(i){var r=this.model.id,n=this.model.brushTargetManager.setOutputRanges(i.areas,this.ecModel);(!i.isEnd||i.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:ae(n),$from:r}),i.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:ae(n),$from:r})},t.type="brush",t}(Qe),jne="#ddd",Qne=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.areas=[],i.brushOption={},i}return t.prototype.optionUpdated=function(i,r){var n=this.option;!r&&Jk(n,i,["inBrush","outOfBrush"]);var o=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:jne},o.hasOwnProperty("liftZ")||(o.liftZ=5)},t.prototype.setAreas=function(i){i&&(this.areas=z(i,function(r){return X_(this.option,r)},this))},t.prototype.setBrushOption=function(i){this.brushOption=X_(this.option,i),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(Re);function X_(e,t){return pe({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Ne(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var Jne=["rect","polygon","lineX","lineY","keep","clear"],eoe=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(i,r,n){var o,s,a;r.eachComponent({mainType:"brush"},function(l){o=l.brushType,s=l.brushOption.brushMode||"single",a=a||!!l.areas.length}),this._brushType=o,this._brushMode=s,_(i.get("type",!0),function(l){i.setIconStatus(l,(l==="keep"?s==="multiple":l==="clear"?a:l===o)?"emphasis":"normal")})},t.prototype.updateView=function(i,r,n){this.render(i,r,n)},t.prototype.getIcons=function(){var i=this.model,r=i.get("icon",!0),n={};return _(i.get("type",!0),function(o){r[o]&&(n[o]=r[o])}),n},t.prototype.onclick=function(i,r,n){var o=this._brushType,s=this._brushMode;n==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?o:o===n?!1:n,brushMode:n==="keep"?s==="multiple"?"single":"multiple":s}})},t.getDefaultOption=function(i){var r={show:!0,type:Jne.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:i.getLocaleModel().get(["toolbox","brush","title"])};return r},t}(Ii);function toe(e){e.registerComponentView(Zne),e.registerComponentModel(Qne),e.registerPreprocessor(Bne),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,$ne),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,i){i.eachComponent({mainType:"brush",query:t},function(r){r.setAreas(t.areas)})}),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},at),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},at),va("brush",eoe)}var ioe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.layoutMode={type:"box",ignoreSize:!0},i}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Re),roe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.render=function(i,r,n){if(this.group.removeAll(),!!i.get("show")){var o=this.group,s=i.getModel("textStyle"),a=i.getModel("subtextStyle"),l=i.get("textAlign"),u=de(i.get("textBaseline"),i.get("textVerticalAlign")),h=new Ae({style:Xe(s,{text:i.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),c=h.getBoundingRect(),d=i.get("subtext"),f=new Ae({style:Xe(a,{text:d,fill:a.getTextColor(),y:c.height+i.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=i.get("link"),g=i.get("sublink"),v=i.get("triggerEvent",!0);h.silent=!p&&!v,f.silent=!g&&!v,p&&h.on("click",function(){Kd(p,"_"+i.get("target"))}),g&&f.on("click",function(){Kd(g,"_"+i.get("subtarget"))}),ue(h).eventData=ue(f).eventData=v?{componentType:"title",componentIndex:i.componentIndex}:null,o.add(h),d&&o.add(f);var m=o.getBoundingRect(),y=i.getBoxLayoutParams();y.width=m.width,y.height=m.height;var C=pt(y,{width:n.getWidth(),height:n.getHeight()},i.get("padding"));l||(l=i.get("left")||i.get("right"),l==="middle"&&(l="center"),l==="right"?C.x+=C.width:l==="center"&&(C.x+=C.width/2)),u||(u=i.get("top")||i.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?C.y+=C.height:u==="middle"&&(C.y+=C.height/2),u=u||"top"),o.x=C.x,o.y=C.y,o.markRedraw();var S={align:l,verticalAlign:u};h.setStyle(S),f.setStyle(S),m=o.getBoundingRect();var b=C.margin,w=i.getItemStyle(["color","opacity"]);w.fill=i.get("backgroundColor");var x=new Te({shape:{x:m.x-b[3],y:m.y-b[0],width:m.width+b[1]+b[3],height:m.height+b[0]+b[2],r:i.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});o.add(x)}},t.type="title",t}(Qe);function noe(e){e.registerComponentModel(ioe),e.registerComponentView(roe)}var q_=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.layoutMode="box",i}return t.prototype.init=function(i,r,n){this.mergeDefaultAndTheme(i,n),this._initData()},t.prototype.mergeOption=function(i){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(i){i==null&&(i=this.option.currentIndex);var r=this._data.count();this.option.loop?i=(i%r+r)%r:(i>=r&&(i=r-1),i<0&&(i=0)),this.option.currentIndex=i},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(i){this.option.autoPlay=!!i},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var i=this.option,r=i.data||[],n=i.axisType,o=this._names=[],s;n==="category"?(s=[],_(r,function(u,h){var c=ft(el(u),""),d;se(u)?(d=ae(u),d.value=h):d=h,s.push(d),o.push(c)})):s=r;var a={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new qt([{name:"value",type:a}],this);l.initData(s,o)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(Re),tO=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="timeline.slider",t.defaultOption=ho(q_.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(q_);dt(tO,np.prototype);var ooe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="timeline",t}(Qe),soe=function(e){L(t,e);function t(i,r,n,o){var s=e.call(this,i,r,n)||this;return s.type=o||"value",s}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(ur),Xv=Math.PI,Z_=_e(),aoe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(i,r){this.api=r},t.prototype.render=function(i,r,n){if(this.model=i,this.api=n,this.ecModel=r,this.group.removeAll(),i.get("show",!0)){var o=this._layout(i,n),s=this._createGroup("_mainGroup"),a=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(o,i);i.formatTooltip=function(u){var h=l.scale.getLabel({value:u});return wt("nameValue",{noName:!0,value:h})},_(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](o,s,l,i)},this),this._renderAxisLabel(o,a,l,i),this._position(o,i)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(i,r){var n=i.get(["label","position"]),o=i.get("orient"),s=uoe(i,r),a;n==null||n==="auto"?a=o==="horizontal"?s.y+s.height/2<r.getHeight()/2?"-":"+":s.x+s.width/2<r.getWidth()/2?"+":"-":q(n)?a={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][n]:a=n;var l={horizontal:"center",vertical:a>=0||a==="+"?"left":"right"},u={horizontal:a>=0||a==="+"?"top":"bottom",vertical:"middle"},h={horizontal:0,vertical:Xv/2},c=o==="vertical"?s.height:s.width,d=i.getModel("controlStyle"),f=d.get("show",!0),p=f?d.get("itemSize"):0,g=f?d.get("itemGap"):0,v=p+g,m=i.get(["label","rotate"])||0;m=m*Xv/180;var y,C,S,b=d.get("position",!0),w=f&&d.get("showPlayBtn",!0),x=f&&d.get("showPrevBtn",!0),R=f&&d.get("showNextBtn",!0),D=0,T=c;b==="left"||b==="bottom"?(w&&(y=[0,0],D+=v),x&&(C=[D,0],D+=v),R&&(S=[T-p,0],T-=v)):(w&&(y=[T-p,0],T-=v),x&&(C=[0,0],D+=v),R&&(S=[T-p,0],T-=v));var A=[D,T];return i.get("inverse")&&A.reverse(),{viewRect:s,mainLength:c,orient:o,rotation:h[o],labelRotation:m,labelPosOpt:a,labelAlign:i.get(["label","align"])||l[o],labelBaseline:i.get(["label","verticalAlign"])||i.get(["label","baseline"])||u[o],playPosition:y,prevBtnPosition:C,nextBtnPosition:S,axisExtent:A,controlSize:p,controlGap:g}},t.prototype._position=function(i,r){var n=this._mainGroup,o=this._labelGroup,s=i.viewRect;if(i.orient==="vertical"){var a=Ci(),l=s.x,u=s.y+s.height;Ir(a,a,[-l,-u]),Ls(a,a,-Xv/2),Ir(a,a,[l,u]),s=s.clone(),s.applyTransform(a)}var h=y(s),c=y(n.getBoundingRect()),d=y(o.getBoundingRect()),f=[n.x,n.y],p=[o.x,o.y];p[0]=f[0]=h[0][0];var g=i.labelPosOpt;if(g==null||q(g)){var v=g==="+"?0:1;C(f,c,h,1,v),C(p,d,h,1,1-v)}else{var v=g>=0?0:1;C(f,c,h,1,v),p[1]=f[1]+g}n.setPosition(f),o.setPosition(p),n.rotation=o.rotation=i.rotation,m(n),m(o);function m(S){S.originX=h[0][0]-S.x,S.originY=h[1][0]-S.y}function y(S){return[[S.x,S.x+S.width],[S.y,S.y+S.height]]}function C(S,b,w,x,R){S[x]+=w[x][R]-b[x][R]}},t.prototype._createAxis=function(i,r){var n=r.getData(),o=r.get("axisType"),s=loe(r,o);s.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var a=n.getDataExtent("value");s.setExtent(a[0],a[1]),s.calcNiceTicks();var l=new soe("value",s,i.axisExtent,o);return l.model=r,l},t.prototype._createGroup=function(i){var r=this[i]=new le;return this.group.add(r),r},t.prototype._renderAxisLine=function(i,r,n,o){var s=n.getExtent();if(o.get(["lineStyle","show"])){var a=new mt({shape:{x1:s[0],y1:0,x2:s[1],y2:0},style:V({lineCap:"round"},o.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(a);var l=this._progressLine=new mt({shape:{x1:s[0],x2:this._currentPointer?this._currentPointer.x:s[0],y1:0,y2:0},style:ne({lineCap:"round",lineWidth:a.style.lineWidth},o.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},t.prototype._renderAxisTick=function(i,r,n,o){var s=this,a=o.getData(),l=n.scale.getTicks();this._tickSymbols=[],_(l,function(u){var h=n.dataToCoord(u.value),c=a.getItemModel(u.value),d=c.getModel("itemStyle"),f=c.getModel(["emphasis","itemStyle"]),p=c.getModel(["progress","itemStyle"]),g={x:h,y:0,onclick:Z(s._changeTimeline,s,u.value)},v=j_(c,d,r,g);v.ensureState("emphasis").style=f.getItemStyle(),v.ensureState("progress").style=p.getItemStyle(),gs(v);var m=ue(v);c.get("tooltip")?(m.dataIndex=u.value,m.dataModel=o):m.dataIndex=m.dataModel=null,s._tickSymbols.push(v)})},t.prototype._renderAxisLabel=function(i,r,n,o){var s=this,a=n.getLabelModel();if(a.get("show")){var l=o.getData(),u=n.getViewLabels();this._tickLabels=[],_(u,function(h){var c=h.tickValue,d=l.getItemModel(c),f=d.getModel("label"),p=d.getModel(["emphasis","label"]),g=d.getModel(["progress","label"]),v=n.dataToCoord(h.tickValue),m=new Ae({x:v,y:0,rotation:i.labelRotation-i.rotation,onclick:Z(s._changeTimeline,s,c),silent:!1,style:Xe(f,{text:h.formattedLabel,align:i.labelAlign,verticalAlign:i.labelBaseline})});m.ensureState("emphasis").style=Xe(p),m.ensureState("progress").style=Xe(g),r.add(m),gs(m),Z_(m).dataIndex=c,s._tickLabels.push(m)})}},t.prototype._renderControl=function(i,r,n,o){var s=i.controlSize,a=i.rotation,l=o.getModel("controlStyle").getItemStyle(),u=o.getModel(["emphasis","controlStyle"]).getItemStyle(),h=o.getPlayState(),c=o.get("inverse",!0);d(i.nextBtnPosition,"next",Z(this._changeTimeline,this,c?"-":"+")),d(i.prevBtnPosition,"prev",Z(this._changeTimeline,this,c?"+":"-")),d(i.playPosition,h?"stop":"play",Z(this._handlePlayClick,this,!h),!0);function d(f,p,g,v){if(f){var m=or(de(o.get(["controlStyle",p+"BtnSize"]),s),s),y=[0,-m/2,m,m],C=hoe(o,p+"Icon",y,{x:f[0],y:f[1],originX:s/2,originY:0,rotation:v?-a:0,rectHover:!0,style:l,onclick:g});C.ensureState("emphasis").style=u,r.add(C),gs(C)}}},t.prototype._renderCurrentPointer=function(i,r,n,o){var s=o.getData(),a=o.getCurrentIndex(),l=s.getItemModel(a).getModel("checkpointStyle"),u=this,h={onCreate:function(c){c.draggable=!0,c.drift=Z(u._handlePointerDrag,u),c.ondragend=Z(u._handlePointerDragend,u),Q_(c,u._progressLine,a,n,o,!0)},onUpdate:function(c){Q_(c,u._progressLine,a,n,o)}};this._currentPointer=j_(l,l,this._mainGroup,{},this._currentPointer,h)},t.prototype._handlePlayClick=function(i){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:i,from:this.uid})},t.prototype._handlePointerDrag=function(i,r,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(i){this._pointerChangeTimeline([i.offsetX,i.offsetY],!0)},t.prototype._pointerChangeTimeline=function(i,r){var n=this._toAxisCoord(i)[0],o=this._axis,s=Gi(o.getExtent().slice());n>s[1]&&(n=s[1]),n<s[0]&&(n=s[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var a=this._progressLine;a&&(a.shape.x2=n,a.dirty());var l=this._findNearestTick(n),u=this.model;(r||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var i=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=i.model;i._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(i){var r=this._mainGroup.getLocalTransform();return rr(i,r,!0)},t.prototype._findNearestTick=function(i){var r=this.model.getData(),n=1/0,o,s=this._axis;return r.each(["value"],function(a,l){var u=s.dataToCoord(a),h=Math.abs(u-i);h<n&&(n=h,o=l)}),o},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(i){var r=this.model.getCurrentIndex();i==="+"?i=r+1:i==="-"&&(i=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:i,from:this.uid})},t.prototype._updateTicksStatus=function(){var i=this.model.getCurrentIndex(),r=this._tickSymbols,n=this._tickLabels;if(r)for(var o=0;o<r.length;o++)r&&r[o]&&r[o].toggleState("progress",o<i);if(n)for(var o=0;o<n.length;o++)n&&n[o]&&n[o].toggleState("progress",Z_(n[o]).dataIndex<=i)},t.type="timeline.slider",t}(ooe);function loe(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new hp({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new JS({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new hn}}function uoe(e,t){return pt(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}function hoe(e,t,i,r){var n=r.style,o=wh(e.get(["controlStyle",t]),r||{},new ve(i[0],i[1],i[2],i[3]));return n&&o.setStyle(n),o}function j_(e,t,i,r,n,o){var s=t.get("color");if(n)n.setColor(s),i.add(n),o&&o.onUpdate(n);else{var a=e.get("symbol");n=ct(a,-1,-1,2,2,s),n.setStyle("strokeNoScale",!0),i.add(n),o&&o.onCreate(n)}var l=t.getItemStyle(["color"]);n.setStyle(l),r=pe({rectHover:!0,z2:100},r,!0);var u=hl(e.get("symbolSize"));r.scaleX=u[0]/2,r.scaleY=u[1]/2;var h=Gs(e.get("symbolOffset"),u);h&&(r.x=(r.x||0)+h[0],r.y=(r.y||0)+h[1]);var c=e.get("symbolRotate");return r.rotation=(c||0)*Math.PI/180||0,n.attr(r),n.updateTransform(),n}function Q_(e,t,i,r,n,o){if(!e.dragging){var s=n.getModel("checkpointStyle"),a=r.dataToCoord(n.getData().get("value",i));if(o||!s.get("animation",!0))e.attr({x:a,y:0}),t&&t.attr({shape:{x2:a}});else{var l={duration:s.get("animationDuration",!0),easing:s.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:a,y:0},l),t&&t.animateTo({shape:{x2:a}},l)}}}function coe(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,i,r){var n=i.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),i.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),ne({currentIndex:n.option.currentIndex},t)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,i){var r=i.getComponent("timeline");r&&t.playState!=null&&r.setPlayState(t.playState)})}function doe(e){var t=e&&e.timeline;H(t)||(t=t?[t]:[]),_(t,function(i){i&&foe(i)})}function foe(e){var t=e.type,i={number:"value",time:"time"};if(i[t]&&(e.axisType=i[t],delete e.type),J_(e),Zo(e,"controlPosition")){var r=e.controlStyle||(e.controlStyle={});Zo(r,"position")||(r.position=e.controlPosition),r.position==="none"&&!Zo(r,"show")&&(r.show=!1,delete r.position),delete e.controlPosition}_(e.data||[],function(n){se(n)&&!H(n)&&(!Zo(n,"value")&&Zo(n,"name")&&(n.value=n.name),J_(n))})}function J_(e){var t=e.itemStyle||(e.itemStyle={}),i=t.emphasis||(t.emphasis={}),r=e.label||e.label||{},n=r.normal||(r.normal={}),o={normal:1,emphasis:1};_(r,function(s,a){!o[a]&&!Zo(n,a)&&(n[a]=s)}),i.label&&!Zo(r,"emphasis")&&(r.emphasis=i.label,delete i.label)}function Zo(e,t){return e.hasOwnProperty(t)}function poe(e){e.registerComponentModel(tO),e.registerComponentView(aoe),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),coe(e),e.registerPreprocessor(doe)}function r0(e,t){if(!e)return!1;for(var i=H(e)?e:[e],r=0;r<i.length;r++)if(i[r]&&i[r][t])return!0;return!1}function Vc(e){bs(e,"label",["show"])}var Bc=_e(),dn=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.createdBySelf=!1,i}return t.prototype.init=function(i,r,n){this.mergeDefaultAndTheme(i,n),this._mergeOption(i,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(xe.node)return!1;var i=this.__hostSeries;return this.getShallow("animation")&&i&&i.isAnimationEnabled()},t.prototype.mergeOption=function(i,r){this._mergeOption(i,r,!1,!1)},t.prototype._mergeOption=function(i,r,n,o){var s=this.mainType;n||r.eachSeries(function(a){var l=a.get(this.mainType,!0),u=Bc(a)[s];if(!l||!l.data){Bc(a)[s]=null;return}u?u._mergeOption(l,r,!0):(o&&Vc(l),_(l.data,function(h){h instanceof Array?(Vc(h[0]),Vc(h[1])):Vc(h)}),u=this.createMarkerModelFromSeries(l,this,r),V(u,{mainType:this.mainType,seriesIndex:a.seriesIndex,name:a.name,createdBySelf:!0}),u.__hostSeries=a),Bc(a)[s]=u},this)},t.prototype.formatTooltip=function(i,r,n){var o=this.getData(),s=this.getRawValue(i),a=o.getName(i);return wt("section",{header:this.name,blocks:[wt("nameValue",{name:a,value:s,noName:!a,noValue:s==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(i){this._data=i},t.prototype.getDataParams=function(i,r){var n=np.prototype.getDataParams.call(this,i,r),o=this.__hostSeries;return o&&(n.seriesId=o.id,n.seriesName=o.name,n.seriesType=o.subType),n},t.getMarkerModelFromSeries=function(i,r){return Bc(i)[r]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Re);dt(dn,np.prototype);var goe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.createMarkerModelFromSeries=function(i,r,n){return new t(i,r,n)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(dn);function uC(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function voe(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function Hc(e,t,i,r,n,o){var s=[],a=no(t,r),l=a?t.getCalculationInfo("stackResultDimension"):r,u=n0(t,l,e),h=t.indicesOfNearest(l,u)[0];s[n]=t.get(i,h),s[o]=t.get(l,h);var c=t.get(r,h),d=xr(t.get(r,h));return d=Math.min(d,20),d>=0&&(s[o]=+s[o].toFixed(d)),[s,c]}var qv={min:fe(Hc,"min"),max:fe(Hc,"max"),average:fe(Hc,"average"),median:fe(Hc,"median")};function ah(e,t){if(t){var i=e.getData(),r=e.coordinateSystem,n=r&&r.dimensions;if(!voe(t)&&!H(t.coord)&&H(n)){var o=iO(t,i,r,e);if(t=ae(t),t.type&&qv[t.type]&&o.baseAxis&&o.valueAxis){var s=Ce(n,o.baseAxis.dim),a=Ce(n,o.valueAxis.dim),l=qv[t.type](i,o.baseDataDim,o.valueDataDim,s,a);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!H(n))t.coord=[];else for(var u=t.coord,h=0;h<2;h++)qv[u[h]]&&(u[h]=n0(i,i.mapDimension(n[h]),u[h]));return t}}function iO(e,t,i,r){var n={};return e.valueIndex!=null||e.valueDim!=null?(n.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,n.valueAxis=i.getAxis(moe(r,n.valueDataDim)),n.baseAxis=i.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=r.getBaseAxis(),n.valueAxis=i.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function moe(e,t){var i=e.getData().getDimensionInfo(t);return i&&i.coordDim}function lh(e,t){return e&&e.containData&&t.coord&&!uC(t)?e.containData(t.coord):!0}function yoe(e,t,i){return e&&e.containZone&&t.coord&&i.coord&&!uC(t)&&!uC(i)?e.containZone(t.coord,i.coord):!0}function rO(e,t){return e?function(i,r,n,o){var s=o<2?i.coord&&i.coord[o]:i.value;return Xn(s,t[o])}:function(i,r,n,o){return Xn(i.value,t[o])}}function n0(e,t,i){if(i==="average"){var r=0,n=0;return e.each(t,function(o,s){isNaN(o)||(r+=o,n++)}),r/n}else return i==="median"?e.getMedian(t):e.getDataExtent(t)[i==="max"?1:0]}var Zv=_e(),o0=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.init=function(){this.markerGroupMap=Q()},t.prototype.render=function(i,r,n){var o=this,s=this.markerGroupMap;s.each(function(a){Zv(a).keep=!1}),r.eachSeries(function(a){var l=dn.getMarkerModelFromSeries(a,o.type);l&&o.renderSeries(a,l,r,n)}),s.each(function(a){!Zv(a).keep&&o.group.remove(a.group)})},t.prototype.markKeep=function(i){Zv(i).keep=!0},t.prototype.toggleBlurSeries=function(i,r){var n=this;_(i,function(o){var s=dn.getMarkerModelFromSeries(o,n.type);if(s){var a=s.getData();a.eachItemGraphicEl(function(l){l&&(r?q1(l):bS(l))})}})},t.type="marker",t}(Qe);function eA(e,t,i){var r=t.coordinateSystem;e.each(function(n){var o=e.getItemModel(n),s,a=K(o.get("x"),i.getWidth()),l=K(o.get("y"),i.getHeight());if(!isNaN(a)&&!isNaN(l))s=[a,l];else if(t.getMarkerPosition)s=t.getMarkerPosition(e.getValues(e.dimensions,n));else if(r){var u=e.get(r.dimensions[0],n),h=e.get(r.dimensions[1],n);s=r.dataToPoint([u,h])}isNaN(a)||(s[0]=a),isNaN(l)||(s[1]=l),e.setItemLayout(n,s)})}var Coe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.updateTransform=function(i,r,n){r.eachSeries(function(o){var s=dn.getMarkerModelFromSeries(o,"markPoint");s&&(eA(s.getData(),o,n),this.markerGroupMap.get(o.id).updateLayout())},this)},t.prototype.renderSeries=function(i,r,n,o){var s=i.coordinateSystem,a=i.id,l=i.getData(),u=this.markerGroupMap,h=u.get(a)||u.set(a,new _h),c=Soe(s,i,r);r.setData(c),eA(r.getData(),i,o),c.each(function(d){var f=c.getItemModel(d),p=f.getShallow("symbol"),g=f.getShallow("symbolSize"),v=f.getShallow("symbolRotate"),m=f.getShallow("symbolOffset"),y=f.getShallow("symbolKeepAspect");if(ie(p)||ie(g)||ie(v)||ie(m)){var C=r.getRawValue(d),S=r.getDataParams(d);ie(p)&&(p=p(C,S)),ie(g)&&(g=g(C,S)),ie(v)&&(v=v(C,S)),ie(m)&&(m=m(C,S))}var b=f.getModel("itemStyle").getItemStyle(),w=xh(l,"color");b.fill||(b.fill=w),c.setItemVisual(d,{symbol:p,symbolSize:g,symbolRotate:v,symbolOffset:m,symbolKeepAspect:y,style:b})}),h.updateData(c),this.group.add(h.group),c.eachItemGraphicEl(function(d){d.traverse(function(f){ue(f).dataModel=r})}),this.markKeep(h),h.group.silent=r.get("silent")||i.get("silent")},t.type="markPoint",t}(o0);function Soe(e,t,i){var r;e?r=z(e&&e.dimensions,function(a){var l=t.getData().getDimensionInfo(t.getData().mapDimension(a))||{};return V(V({},l),{name:a,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new qt(r,i),o=z(i.get("data"),fe(ah,t));e&&(o=Le(o,fe(lh,e)));var s=rO(!!e,r);return n.initData(o,null,s),n}function woe(e){e.registerComponentModel(goe),e.registerComponentView(Coe),e.registerPreprocessor(function(t){r0(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var boe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.createMarkerModelFromSeries=function(i,r,n){return new t(i,r,n)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(dn),zc=_e(),xoe=function(e,t,i,r){var n=e.getData(),o;if(H(r))o=r;else{var s=r.type;if(s==="min"||s==="max"||s==="average"||s==="median"||r.xAxis!=null||r.yAxis!=null){var a=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)a=t.getAxis(r.yAxis!=null?"y":"x"),l=xt(r.yAxis,r.xAxis);else{var u=iO(r,n,t,e);a=u.valueAxis;var h=ZE(n,u.valueDataDim);l=n0(n,h,s)}var c=a.dim==="x"?0:1,d=1-c,f=ae(r),p={coord:[]};f.type=null,f.coord=[],f.coord[d]=-1/0,p.coord[d]=1/0;var g=i.get("precision");g>=0&&Pe(l)&&(l=+l.toFixed(Math.min(g,20))),f.coord[c]=p.coord[c]=l,o=[f,p,{type:s,valueIndex:r.valueIndex,value:l}]}else o=[]}var v=[ah(e,o[0]),ah(e,o[1]),V({},o[2])];return v[2].type=v[2].type||null,pe(v[2],v[0]),pe(v[2],v[1]),v};function yf(e){return!isNaN(e)&&!isFinite(e)}function tA(e,t,i,r){var n=1-e,o=r.dimensions[e];return yf(t[n])&&yf(i[n])&&t[e]===i[e]&&r.getAxis(o).containData(t[e])}function Roe(e,t){if(e.type==="cartesian2d"){var i=t[0].coord,r=t[1].coord;if(i&&r&&(tA(1,i,r,e)||tA(0,i,r,e)))return!0}return lh(e,t[0])&&lh(e,t[1])}function jv(e,t,i,r,n){var o=r.coordinateSystem,s=e.getItemModel(t),a,l=K(s.get("x"),n.getWidth()),u=K(s.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(u))a=[l,u];else{if(r.getMarkerPosition)a=r.getMarkerPosition(e.getValues(e.dimensions,t));else{var h=o.dimensions,c=e.get(h[0],t),d=e.get(h[1],t);a=o.dataToPoint([c,d])}if(Vs(o,"cartesian2d")){var f=o.getAxis("x"),p=o.getAxis("y"),h=o.dimensions;yf(e.get(h[0],t))?a[0]=f.toGlobalCoord(f.getExtent()[i?0:1]):yf(e.get(h[1],t))&&(a[1]=p.toGlobalCoord(p.getExtent()[i?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}e.setItemLayout(t,a)}var Doe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.updateTransform=function(i,r,n){r.eachSeries(function(o){var s=dn.getMarkerModelFromSeries(o,"markLine");if(s){var a=s.getData(),l=zc(s).from,u=zc(s).to;l.each(function(h){jv(l,h,!0,o,n),jv(u,h,!1,o,n)}),a.each(function(h){a.setItemLayout(h,[l.getItemLayout(h),u.getItemLayout(h)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(i,r,n,o){var s=i.coordinateSystem,a=i.id,l=i.getData(),u=this.markerGroupMap,h=u.get(a)||u.set(a,new Tw);this.group.add(h.group);var c=Toe(s,i,r),d=c.from,f=c.to,p=c.line;zc(r).from=d,zc(r).to=f,r.setData(p);var g=r.get("symbol"),v=r.get("symbolSize"),m=r.get("symbolRotate"),y=r.get("symbolOffset");H(g)||(g=[g,g]),H(v)||(v=[v,v]),H(m)||(m=[m,m]),H(y)||(y=[y,y]),c.from.each(function(S){C(d,S,!0),C(f,S,!1)}),p.each(function(S){var b=p.getItemModel(S).getModel("lineStyle").getLineStyle();p.setItemLayout(S,[d.getItemLayout(S),f.getItemLayout(S)]),b.stroke==null&&(b.stroke=d.getItemVisual(S,"style").fill),p.setItemVisual(S,{fromSymbolKeepAspect:d.getItemVisual(S,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(S,"symbolOffset"),fromSymbolRotate:d.getItemVisual(S,"symbolRotate"),fromSymbolSize:d.getItemVisual(S,"symbolSize"),fromSymbol:d.getItemVisual(S,"symbol"),toSymbolKeepAspect:f.getItemVisual(S,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(S,"symbolOffset"),toSymbolRotate:f.getItemVisual(S,"symbolRotate"),toSymbolSize:f.getItemVisual(S,"symbolSize"),toSymbol:f.getItemVisual(S,"symbol"),style:b})}),h.updateData(p),c.line.eachItemGraphicEl(function(S){ue(S).dataModel=r,S.traverse(function(b){ue(b).dataModel=r})});function C(S,b,w){var x=S.getItemModel(b);jv(S,b,w,i,o);var R=x.getModel("itemStyle").getItemStyle();R.fill==null&&(R.fill=xh(l,"color")),S.setItemVisual(b,{symbolKeepAspect:x.get("symbolKeepAspect"),symbolOffset:de(x.get("symbolOffset",!0),y[w?0:1]),symbolRotate:de(x.get("symbolRotate",!0),m[w?0:1]),symbolSize:de(x.get("symbolSize"),v[w?0:1]),symbol:de(x.get("symbol",!0),g[w?0:1]),style:R})}this.markKeep(h),h.group.silent=r.get("silent")||i.get("silent")},t.type="markLine",t}(o0);function Toe(e,t,i){var r;e?r=z(e&&e.dimensions,function(u){var h=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return V(V({},h),{name:u,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new qt(r,i),o=new qt(r,i),s=new qt([],i),a=z(i.get("data"),fe(xoe,t,e,i));e&&(a=Le(a,fe(Roe,e)));var l=rO(!!e,r);return n.initData(z(a,function(u){return u[0]}),null,l),o.initData(z(a,function(u){return u[1]}),null,l),s.initData(z(a,function(u){return u[2]})),s.hasItemOption=!0,{from:n,to:o,line:s}}function _oe(e){e.registerComponentModel(boe),e.registerComponentView(Doe),e.registerPreprocessor(function(t){r0(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Aoe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.createMarkerModelFromSeries=function(i,r,n){return new t(i,r,n)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(dn),Wc=_e(),Poe=function(e,t,i,r){var n=r[0],o=r[1];if(!(!n||!o)){var s=ah(e,n),a=ah(e,o),l=s.coord,u=a.coord;l[0]=xt(l[0],-1/0),l[1]=xt(l[1],-1/0),u[0]=xt(u[0],1/0),u[1]=xt(u[1],1/0);var h=nS([{},s,a]);return h.coord=[s.coord,a.coord],h.x0=s.x,h.y0=s.y,h.x1=a.x,h.y1=a.y,h}};function Cf(e){return!isNaN(e)&&!isFinite(e)}function iA(e,t,i,r){var n=1-e;return Cf(t[n])&&Cf(i[n])}function Moe(e,t){var i=t.coord[0],r=t.coord[1],n={coord:i,x:t.x0,y:t.y0},o={coord:r,x:t.x1,y:t.y1};return Vs(e,"cartesian2d")?i&&r&&(iA(1,i,r)||iA(0,i,r))?!0:yoe(e,n,o):lh(e,n)||lh(e,o)}function rA(e,t,i,r,n){var o=r.coordinateSystem,s=e.getItemModel(t),a,l=K(s.get(i[0]),n.getWidth()),u=K(s.get(i[1]),n.getHeight());if(!isNaN(l)&&!isNaN(u))a=[l,u];else{if(r.getMarkerPosition){var h=e.getValues(["x0","y0"],t),c=e.getValues(["x1","y1"],t),d=o.clampData(h),f=o.clampData(c),p=[];i[0]==="x0"?p[0]=d[0]>f[0]?c[0]:h[0]:p[0]=d[0]>f[0]?h[0]:c[0],i[1]==="y0"?p[1]=d[1]>f[1]?c[1]:h[1]:p[1]=d[1]>f[1]?h[1]:c[1],a=r.getMarkerPosition(p,i,!0)}else{var g=e.get(i[0],t),v=e.get(i[1],t),m=[g,v];o.clampData&&o.clampData(m,m),a=o.dataToPoint(m,!0)}if(Vs(o,"cartesian2d")){var y=o.getAxis("x"),C=o.getAxis("y"),g=e.get(i[0],t),v=e.get(i[1],t);Cf(g)?a[0]=y.toGlobalCoord(y.getExtent()[i[0]==="x0"?0:1]):Cf(v)&&(a[1]=C.toGlobalCoord(C.getExtent()[i[1]==="y0"?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}return a}var nA=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Foe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.updateTransform=function(i,r,n){r.eachSeries(function(o){var s=dn.getMarkerModelFromSeries(o,"markArea");if(s){var a=s.getData();a.each(function(l){var u=z(nA,function(c){return rA(a,l,c,o,n)});a.setItemLayout(l,u);var h=a.getItemGraphicEl(l);h.setShape("points",u)})}},this)},t.prototype.renderSeries=function(i,r,n,o){var s=i.coordinateSystem,a=i.id,l=i.getData(),u=this.markerGroupMap,h=u.get(a)||u.set(a,{group:new le});this.group.add(h.group),this.markKeep(h);var c=Eoe(s,i,r);r.setData(c),c.each(function(d){var f=z(nA,function(R){return rA(c,d,R,i,o)}),p=s.getAxis("x").scale,g=s.getAxis("y").scale,v=p.getExtent(),m=g.getExtent(),y=[p.parse(c.get("x0",d)),p.parse(c.get("x1",d))],C=[g.parse(c.get("y0",d)),g.parse(c.get("y1",d))];Gi(y),Gi(C);var S=!(v[0]>y[1]||v[1]<y[0]||m[0]>C[1]||m[1]<C[0]),b=!S;c.setItemLayout(d,{points:f,allClipped:b});var w=c.getItemModel(d).getModel("itemStyle").getItemStyle(),x=xh(l,"color");w.fill||(w.fill=x,q(w.fill)&&(w.fill=Ld(w.fill,.4))),w.stroke||(w.stroke=x),c.setItemVisual(d,"style",w)}),c.diff(Wc(h).data).add(function(d){var f=c.getItemLayout(d);if(!f.allClipped){var p=new ei({shape:{points:f.points}});c.setItemGraphicEl(d,p),h.group.add(p)}}).update(function(d,f){var p=Wc(h).data.getItemGraphicEl(f),g=c.getItemLayout(d);g.allClipped?p&&h.group.remove(p):(p?Me(p,{shape:{points:g.points}},r,d):p=new ei({shape:{points:g.points}}),c.setItemGraphicEl(d,p),h.group.add(p))}).remove(function(d){var f=Wc(h).data.getItemGraphicEl(d);h.group.remove(f)}).execute(),c.eachItemGraphicEl(function(d,f){var p=c.getItemModel(f),g=c.getItemVisual(f,"style");d.useStyle(c.getItemVisual(f,"style")),Pt(d,St(p),{labelFetcher:r,labelDataIndex:f,defaultText:c.getName(f)||"",inheritColor:q(g.fill)?Ld(g.fill,1):"#000"}),At(d,p),tt(d,null,null,p.get(["emphasis","disabled"])),ue(d).dataModel=r}),Wc(h).data=c,h.group.silent=r.get("silent")||i.get("silent")},t.type="markArea",t}(o0);function Eoe(e,t,i){var r,n,o=["x0","y0","x1","y1"];if(e){var s=z(e&&e.dimensions,function(u){var h=t.getData(),c=h.getDimensionInfo(h.mapDimension(u))||{};return V(V({},c),{name:u,ordinalMeta:null})});n=z(o,function(u,h){return{name:u,type:s[h%2].type}}),r=new qt(n,i)}else n=[{name:"value",type:"float"}],r=new qt(n,i);var a=z(i.get("data"),fe(Poe,t,e,i));e&&(a=Le(a,fe(Moe,e)));var l=e?function(u,h,c,d){var f=u.coord[Math.floor(d/2)][d%2];return Xn(f,n[d])}:function(u,h,c,d){return Xn(u.value,n[d])};return r.initData(a,null,l),r.hasItemOption=!0,r}function Ioe(e){e.registerComponentModel(Aoe),e.registerComponentView(Foe),e.registerPreprocessor(function(t){r0(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Loe=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},hC=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.layoutMode={type:"box",ignoreSize:!0},i}return t.prototype.init=function(i,r,n){this.mergeDefaultAndTheme(i,n),i.selected=i.selected||{},this._updateSelector(i)},t.prototype.mergeOption=function(i,r){e.prototype.mergeOption.call(this,i,r),this._updateSelector(i)},t.prototype._updateSelector=function(i){var r=i.selector,n=this.ecModel;r===!0&&(r=i.selector=["all","inverse"]),H(r)&&_(r,function(o,s){q(o)&&(o={type:o}),r[s]=pe(o,Loe(n,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var i=this._data;if(i[0]&&this.get("selectedMode")==="single"){for(var r=!1,n=0;n<i.length;n++){var o=i[n].get("name");if(this.isSelected(o)){this.select(o),r=!0;break}}!r&&this.select(i[0].get("name"))}},t.prototype._updateData=function(i){var r=[],n=[];i.eachRawSeries(function(l){var u=l.name;n.push(u);var h;if(l.legendVisualProvider){var c=l.legendVisualProvider,d=c.getAllNames();i.isSeriesFiltered(l)||(n=n.concat(d)),d.length?r=r.concat(d):h=!0}else h=!0;h&&pS(l)&&r.push(l.name)}),this._availableNames=n;var o=this.get("data")||r,s=Q(),a=z(o,function(l){return(q(l)||Pe(l))&&(l={name:l}),s.get(l.name)?null:(s.set(l.name,!0),new Ne(l,this,this.ecModel))},this);this._data=Le(a,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(i){var r=this.option.selected,n=this.get("selectedMode");if(n==="single"){var o=this._data;_(o,function(s){r[s.get("name")]=!1})}r[i]=!0},t.prototype.unSelect=function(i){this.get("selectedMode")!=="single"&&(this.option.selected[i]=!1)},t.prototype.toggleSelected=function(i){var r=this.option.selected;r.hasOwnProperty(i)||(r[i]=!0),this[r[i]?"unSelect":"select"](i)},t.prototype.allSelect=function(){var i=this._data,r=this.option.selected;_(i,function(n){r[n.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var i=this._data,r=this.option.selected;_(i,function(n){var o=n.get("name",!0);r.hasOwnProperty(o)||(r[o]=!0),r[o]=!r[o]})},t.prototype.isSelected=function(i){var r=this.option.selected;return!(r.hasOwnProperty(i)&&!r[i])&&Ce(this._availableNames,i)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Re),aa=fe,cC=_,Uc=le,nO=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.newlineDisabled=!1,i}return t.prototype.init=function(){this.group.add(this._contentGroup=new Uc),this.group.add(this._selectorGroup=new Uc),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(i,r,n){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!i.get("show",!0)){var s=i.get("align"),a=i.get("orient");(!s||s==="auto")&&(s=i.get("left")==="right"&&a==="vertical"?"right":"left");var l=i.get("selector",!0),u=i.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=a==="horizontal"?"end":"start"),this.renderInner(s,i,r,n,l,a,u);var h=i.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},d=i.get("padding"),f=pt(h,c,d),p=this.layoutInner(i,s,f,o,l,u),g=pt(ne({width:p.width,height:p.height},h),c,d);this.group.x=g.x-p.x,this.group.y=g.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Kk(p,i))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(i,r,n,o,s,a,l){var u=this.getContentGroup(),h=Q(),c=r.get("selectedMode"),d=[];n.eachRawSeries(function(f){!f.get("legendHoverLink")&&d.push(f.id)}),cC(r.getData(),function(f,p){var g=f.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var v=new Uc;v.newline=!0,u.add(v);return}var m=n.getSeriesByName(g)[0];if(!h.get(g))if(m){var y=m.getData(),C=y.getVisual("legendLineStyle")||{},S=y.getVisual("legendIcon"),b=y.getVisual("style"),w=this._createItem(m,g,p,f,r,i,C,b,S,c,o);w.on("click",aa(oA,g,null,o,d)).on("mouseover",aa(dC,m.name,null,o,d)).on("mouseout",aa(fC,m.name,null,o,d)),n.ssr&&w.eachChild(function(x){var R=ue(x);R.seriesIndex=m.seriesIndex,R.dataIndex=p,R.ssrType="legend"}),h.set(g,!0)}else n.eachRawSeries(function(x){if(!h.get(g)&&x.legendVisualProvider){var R=x.legendVisualProvider;if(!R.containName(g))return;var D=R.indexOfName(g),T=R.getItemVisual(D,"style"),A=R.getItemVisual(D,"legendIcon"),P=Si(T.fill);P&&P[3]===0&&(P[3]=.2,T=V(V({},T),{fill:en(P,"rgba")}));var M=this._createItem(x,g,p,f,r,i,{},T,A,c,o);M.on("click",aa(oA,null,g,o,d)).on("mouseover",aa(dC,null,g,o,d)).on("mouseout",aa(fC,null,g,o,d)),n.ssr&&M.eachChild(function(F){var E=ue(F);E.seriesIndex=x.seriesIndex,E.dataIndex=p,E.ssrType="legend"}),h.set(g,!0)}},this)},this),s&&this._createSelector(s,r,o,a,l)},t.prototype._createSelector=function(i,r,n,o,s){var a=this.getSelectorGroup();cC(i,function(u){var h=u.type,c=new Ae({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:h==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});a.add(c);var d=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);Pt(c,{normal:d,emphasis:f},{defaultText:u.title}),gs(c)})},t.prototype._createItem=function(i,r,n,o,s,a,l,u,h,c,d){var f=i.visualDrawType,p=s.get("itemWidth"),g=s.get("itemHeight"),v=s.isSelected(r),m=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),C=o.get("icon");h=C||h||"roundRect";var S=koe(h,o,l,u,f,v,d),b=new Uc,w=o.getModel("textStyle");if(ie(i.getLegendIcon)&&(!C||C==="inherit"))b.add(i.getLegendIcon({itemWidth:p,itemHeight:g,icon:h,iconRotate:m,itemStyle:S.itemStyle,lineStyle:S.lineStyle,symbolKeepAspect:y}));else{var x=C==="inherit"&&i.getData().getVisual("symbol")?m==="inherit"?i.getData().getVisual("symbolRotate"):m:0;b.add(Ooe({itemWidth:p,itemHeight:g,icon:h,iconRotate:x,itemStyle:S.itemStyle,lineStyle:S.lineStyle,symbolKeepAspect:y}))}var R=a==="left"?p+5:-5,D=a,T=s.get("formatter"),A=r;q(T)&&T?A=T.replace("{name}",r??""):ie(T)&&(A=T(r));var P=v?w.getTextColor():o.get("inactiveColor");b.add(new Ae({style:Xe(w,{text:A,x:R,y:g/2,fill:P,align:D,verticalAlign:"middle"},{inheritColor:P})}));var M=new Te({shape:b.getBoundingRect(),style:{fill:"transparent"}}),F=o.getModel("tooltip");return F.get("show")&&ks({el:M,componentModel:s,itemName:r,itemTooltipOption:F.option}),b.add(M),b.eachChild(function(E){E.silent=!0}),M.silent=!c,this.getContentGroup().add(b),gs(b),b.__legendDataIndex=n,b},t.prototype.layoutInner=function(i,r,n,o,s,a){var l=this.getContentGroup(),u=this.getSelectorGroup();ms(i.get("orient"),l,i.get("itemGap"),n.width,n.height);var h=l.getBoundingRect(),c=[-h.x,-h.y];if(u.markRedraw(),l.markRedraw(),s){ms("horizontal",u,i.get("selectorItemGap",!0));var d=u.getBoundingRect(),f=[-d.x,-d.y],p=i.get("selectorButtonGap",!0),g=i.getOrient().index,v=g===0?"width":"height",m=g===0?"height":"width",y=g===0?"y":"x";a==="end"?f[g]+=h[v]+p:c[g]+=d[v]+p,f[1-g]+=h[m]/2-d[m]/2,u.x=f[0],u.y=f[1],l.x=c[0],l.y=c[1];var C={x:0,y:0};return C[v]=h[v]+p+d[v],C[m]=Math.max(h[m],d[m]),C[y]=Math.min(0,d[y]+f[1-g]),C}else return l.x=c[0],l.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Qe);function koe(e,t,i,r,n,o,s){function a(v,m){v.lineWidth==="auto"&&(v.lineWidth=m.lineWidth>0?2:0),cC(v,function(y,C){v[C]==="inherit"&&(v[C]=m[C])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),h=e.lastIndexOf("empty",0)===0?"fill":"stroke",c=l.getShallow("decal");u.decal=!c||c==="inherit"?r.decal:Va(c,s),u.fill==="inherit"&&(u.fill=r[n]),u.stroke==="inherit"&&(u.stroke=r[h]),u.opacity==="inherit"&&(u.opacity=(n==="fill"?r:i).opacity),a(u,r);var d=t.getModel("lineStyle"),f=d.getLineStyle();if(a(f,i),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!o){var p=t.get("inactiveBorderWidth"),g=u[h];u.lineWidth=p==="auto"?r.lineWidth>0&&g?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),f.stroke=d.get("inactiveColor"),f.lineWidth=d.get("inactiveWidth")}return{itemStyle:u,lineStyle:f}}function Ooe(e){var t=e.icon||"roundRect",i=ct(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return i.setStyle(e.itemStyle),i.rotation=(e.iconRotate||0)*Math.PI/180,i.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i}function oA(e,t,i,r){fC(e,t,i,r),i.dispatchAction({type:"legendToggleSelect",name:e??t}),dC(e,t,i,r)}function oO(e){for(var t=e.getZr().storage.getDisplayList(),i,r=0,n=t.length;r<n&&!(i=t[r].states.emphasis);)r++;return i&&i.hoverLayer}function dC(e,t,i,r){oO(i)||i.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function fC(e,t,i,r){oO(i)||i.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function Goe(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(i){for(var r=0;r<t.length;r++)if(!t[r].isSelected(i.name))return!1;return!0})}function Wl(e,t,i){var r=e==="allSelect"||e==="inverseSelect",n={},o=[];i.eachComponent({mainType:"legend",query:t},function(a){r?a[e]():a[e](t.name),sA(a,n),o.push(a.componentIndex)});var s={};return i.eachComponent("legend",function(a){_(n,function(l,u){a[l?"select":"unSelect"](u)}),sA(a,s)}),r?{selected:s,legendIndex:o}:{name:t.name,selected:s}}function sA(e,t){var i=t||{};return _(e.getData(),function(r){var n=r.get("name");if(!(n===`
`||n==="")){var o=e.isSelected(n);j(i,n)?i[n]=i[n]&&o:i[n]=o}}),i}function Noe(e){e.registerAction("legendToggleSelect","legendselectchanged",fe(Wl,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",fe(Wl,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",fe(Wl,"inverseSelect")),e.registerAction("legendSelect","legendselected",fe(Wl,"select")),e.registerAction("legendUnSelect","legendunselected",fe(Wl,"unSelect"))}function sO(e){e.registerComponentModel(hC),e.registerComponentView(nO),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,Goe),e.registerSubTypeDefaulter("legend",function(){return"plain"}),Noe(e)}var Voe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.setScrollDataIndex=function(i){this.option.scrollDataIndex=i},t.prototype.init=function(i,r,n){var o=sl(i);e.prototype.init.call(this,i,r,n),aA(this,i,o)},t.prototype.mergeOption=function(i,r){e.prototype.mergeOption.call(this,i,r),aA(this,this.option,i)},t.type="legend.scroll",t.defaultOption=ho(hC.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(hC);function aA(e,t,i){var r=e.getOrient(),n=[1,1];n[r.index]=0,ro(t,i,{type:"box",ignoreSize:!!n})}var lA=le,Qv=["width","height"],Jv=["x","y"],Boe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.newlineDisabled=!0,i._currentIndex=0,i}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new lA),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new lA)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(i,r,n,o,s,a,l){var u=this;e.prototype.renderInner.call(this,i,r,n,o,s,a,l);var h=this._controllerGroup,c=r.get("pageIconSize",!0),d=H(c)?c:[c,c];p("pagePrev",0);var f=r.getModel("pageTextStyle");h.add(new Ae({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(g,v){var m=g+"DataIndex",y=wh(r.get("pageIcons",!0)[r.getOrient().name][v],{onclick:Z(u._pageGo,u,m,r,o)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});y.name=g,h.add(y)}},t.prototype.layoutInner=function(i,r,n,o,s,a){var l=this.getSelectorGroup(),u=i.getOrient().index,h=Qv[u],c=Jv[u],d=Qv[1-u],f=Jv[1-u];s&&ms("horizontal",l,i.get("selectorItemGap",!0));var p=i.get("selectorButtonGap",!0),g=l.getBoundingRect(),v=[-g.x,-g.y],m=ae(n);s&&(m[h]=n[h]-g[h]-p);var y=this._layoutContentAndController(i,o,m,u,h,d,f,c);if(s){if(a==="end")v[u]+=y[h]+p;else{var C=g[h]+p;v[u]-=C,y[c]-=C}y[h]+=g[h]+p,v[1-u]+=y[f]+y[d]/2-g[d]/2,y[d]=Math.max(y[d],g[d]),y[f]=Math.min(y[f],g[f]+v[1-u]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(i,r,n,o,s,a,l,u){var h=this.getContentGroup(),c=this._containerGroup,d=this._controllerGroup;ms(i.get("orient"),h,i.get("itemGap"),o?n.width:null,o?null:n.height),ms("horizontal",d,i.get("pageButtonItemGap",!0));var f=h.getBoundingRect(),p=d.getBoundingRect(),g=this._showController=f[s]>n[s],v=[-f.x,-f.y];r||(v[o]=h[u]);var m=[0,0],y=[-p.x,-p.y],C=de(i.get("pageButtonGap",!0),i.get("itemGap",!0));if(g){var S=i.get("pageButtonPosition",!0);S==="end"?y[o]+=n[s]-p[s]:m[o]+=p[s]+C}y[1-o]+=f[a]/2-p[a]/2,h.setPosition(v),c.setPosition(m),d.setPosition(y);var b={x:0,y:0};if(b[s]=g?n[s]:f[s],b[a]=Math.max(f[a],p[a]),b[l]=Math.min(0,p[l]+y[1-o]),c.__rectSize=n[s],g){var w={x:0,y:0};w[s]=Math.max(n[s]-p[s]-C,0),w[a]=b[a],c.setClipPath(new Te({shape:w})),c.__rectSize=w[s]}else d.eachChild(function(R){R.attr({invisible:!0,silent:!0})});var x=this._getPageInfo(i);return x.pageIndex!=null&&Me(h,{x:x.contentPosition[0],y:x.contentPosition[1]},g?i:null),this._updatePageInfoView(i,x),b},t.prototype._pageGo=function(i,r,n){var o=this._getPageInfo(r)[i];o!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:r.id})},t.prototype._updatePageInfoView=function(i,r){var n=this._controllerGroup;_(["pagePrev","pageNext"],function(h){var c=h+"DataIndex",d=r[c]!=null,f=n.childOfName(h);f&&(f.setStyle("fill",d?i.get("pageIconColor",!0):i.get("pageIconInactiveColor",!0)),f.cursor=d?"pointer":"default")});var o=n.childOfName("pageText"),s=i.get("pageFormatter"),a=r.pageIndex,l=a!=null?a+1:0,u=r.pageCount;o&&s&&o.setStyle("text",q(s)?s.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):s({current:l,total:u}))},t.prototype._getPageInfo=function(i){var r=i.get("scrollDataIndex",!0),n=this.getContentGroup(),o=this._containerGroup.__rectSize,s=i.getOrient().index,a=Qv[s],l=Jv[s],u=this._findTargetItemIndex(r),h=n.children(),c=h[u],d=h.length,f=d?1:0,p={contentPosition:[n.x,n.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return p;var g=S(c);p.contentPosition[s]=-g.s;for(var v=u+1,m=g,y=g,C=null;v<=d;++v)C=S(h[v]),(!C&&y.e>m.s+o||C&&!b(C,m.s))&&(y.i>m.i?m=y:m=C,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),y=C;for(var v=u-1,m=g,y=g,C=null;v>=-1;--v)C=S(h[v]),(!C||!b(y,C.s))&&m.i<y.i&&(y=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=C;return p;function S(w){if(w){var x=w.getBoundingRect(),R=x[l]+w[l];return{s:R,e:R+x[a],i:w.__legendDataIndex}}}function b(w,x){return w.e>=x&&w.s<=x+o}},t.prototype._findTargetItemIndex=function(i){if(!this._showController)return 0;var r,n=this.getContentGroup(),o;return n.eachChild(function(s,a){var l=s.__legendDataIndex;o==null&&l!=null&&(o=a),l===i&&(r=a)}),r??o},t.type="legend.scroll",t}(nO);function Hoe(e){e.registerAction("legendScroll","legendscroll",function(t,i){var r=t.scrollDataIndex;r!=null&&i.eachComponent({mainType:"legend",subType:"scroll",query:t},function(n){n.setScrollDataIndex(r)})})}function zoe(e){we(sO),e.registerComponentModel(Voe),e.registerComponentView(Boe),Hoe(e)}function Woe(e){we(sO),we(zoe)}var Uoe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="dataZoom.inside",t.defaultOption=ho(sh.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(sh),s0=_e();function $oe(e,t,i){s0(e).coordSysRecordMap.each(function(r){var n=r.dataZoomInfoMap.get(t.uid);n&&(n.getRange=i)})}function Koe(e,t){for(var i=s0(e).coordSysRecordMap,r=i.keys(),n=0;n<r.length;n++){var o=r[n],s=i.get(o),a=s.dataZoomInfoMap;if(a){var l=t.uid,u=a.get(l);u&&(a.removeKey(l),a.keys().length||aO(i,s))}}}function aO(e,t){if(t){e.removeKey(t.model.uid);var i=t.controller;i&&i.dispose()}}function Yoe(e,t){var i={model:t,containsPoint:fe(qoe,t),dispatchAction:fe(Xoe,e),dataZoomInfoMap:null,controller:null},r=i.controller=new Eh(e.getZr());return _(["pan","zoom","scrollMove"],function(n){r.on(n,function(o){var s=[];i.dataZoomInfoMap.each(function(a){if(o.isAvailableBehavior(a.model.option)){var l=(a.getRange||{})[n],u=l&&l(a.dzReferCoordSysInfo,i.model.mainType,i.controller,o);!a.model.get("disabled",!0)&&u&&s.push({dataZoomId:a.model.id,start:u[0],end:u[1]})}}),s.length&&i.dispatchAction(s)})}),i}function Xoe(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function qoe(e,t,i,r){return e.coordinateSystem.containPoint([i,r])}function Zoe(e){var t,i="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return e.each(function(o){var s=o.model,a=s.get("disabled",!0)?!1:s.get("zoomLock",!0)?"move":!0;r[i+a]>r[i+t]&&(t=a),n=n&&s.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function joe(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,i){var r=s0(i),n=r.coordSysRecordMap||(r.coordSysRecordMap=Q());n.each(function(o){o.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(o){var s=Wk(o);_(s.infoList,function(a){var l=a.model.uid,u=n.get(l)||n.set(l,Yoe(i,a.model)),h=u.dataZoomInfoMap||(u.dataZoomInfoMap=Q());h.set(o.uid,{dzReferCoordSysInfo:a,model:o,getRange:null})})}),n.each(function(o){var s=o.controller,a,l=o.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(a=l.get(u))}if(!a){aO(n,o);return}var h=Zoe(l);s.enable(h.controlType,h.opt),s.setPointerChecker(o.containsPoint),ul(o,"dispatchAction",a.model.get("throttle",!0),"fixRate")})})}var Qoe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type="dataZoom.inside",i}return t.prototype.render=function(i,r,n){if(e.prototype.render.apply(this,arguments),i.noTarget()){this._clear();return}this.range=i.getPercentRange(),$oe(n,i,{pan:Z(em.pan,this),zoom:Z(em.zoom,this),scrollMove:Z(em.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Koe(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(jw),em={zoom:function(e,t,i,r){var n=this.range,o=n.slice(),s=e.axisModels[0];if(s){var a=tm[t](null,[r.originX,r.originY],s,i,e),l=(a.signal>0?a.pixelStart+a.pixelLength-a.pixel:a.pixel-a.pixelStart)/a.pixelLength*(o[1]-o[0])+o[0],u=Math.max(1/r.scale,0);o[0]=(o[0]-l)*u+l,o[1]=(o[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Hs(0,o,[0,100],0,h.minSpan,h.maxSpan),this.range=o,n[0]!==o[0]||n[1]!==o[1])return o}},pan:uA(function(e,t,i,r,n,o){var s=tm[r]([o.oldX,o.oldY],[o.newX,o.newY],t,n,i);return s.signal*(e[1]-e[0])*s.pixel/s.pixelLength}),scrollMove:uA(function(e,t,i,r,n,o){var s=tm[r]([0,0],[o.scrollDelta,o.scrollDelta],t,n,i);return s.signal*(e[1]-e[0])*o.scrollDelta})};function uA(e){return function(t,i,r,n){var o=this.range,s=o.slice(),a=t.axisModels[0];if(a){var l=e(s,a,t,i,r,n);if(Hs(l,s,[0,100],"all"),this.range=s,o[0]!==s[0]||o[1]!==s[1])return s}}}var tm={grid:function(e,t,i,r,n){var o=i.axis,s={},a=n.model.coordinateSystem.getRect();return e=e||[0,0],o.dim==="x"?(s.pixel=t[0]-e[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s},polar:function(e,t,i,r,n){var o=i.axis,s={},a=n.model.coordinateSystem,l=a.getRadiusAxis().getExtent(),u=a.getAngleAxis().getExtent();return e=e?a.pointToCoord(e):[0,0],t=a.pointToCoord(t),i.mainType==="radiusAxis"?(s.pixel=t[0]-e[0],s.pixelLength=l[1]-l[0],s.pixelStart=l[0],s.signal=o.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=u[1]-u[0],s.pixelStart=u[0],s.signal=o.inverse?-1:1),s},singleAxis:function(e,t,i,r,n){var o=i.axis,s=n.model.coordinateSystem.getRect(),a={};return e=e||[0,0],o.orient==="horizontal"?(a.pixel=t[0]-e[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a}};function lO(e){Qw(e),e.registerComponentModel(Uoe),e.registerComponentView(Qoe),joe(e)}var Joe=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=ho(sh.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(sh),Ul=Te,hA=7,ese=1,im=30,tse=7,$l="horizontal",cA="vertical",ise=5,rse=["line","bar","candlestick","scatter"],nse={easing:"cubicOut",duration:100,delay:0},ose=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._displayables={},i}return t.prototype.init=function(i,r){this.api=r,this._onBrush=Z(this._onBrush,this),this._onBrushEnd=Z(this._onBrushEnd,this)},t.prototype.render=function(i,r,n,o){if(e.prototype.render.apply(this,arguments),ul(this,"_dispatchZoomAction",i.get("throttle"),"fixRate"),this._orient=i.getOrient(),i.get("show")===!1){this.group.removeAll();return}if(i.noTarget()){this._clear(),this.group.removeAll();return}(!o||o.type!=="dataZoom"||o.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Yu(this,"_dispatchZoomAction");var i=this.api.getZr();i.off("mousemove",this._onBrush),i.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var i=this.group;i.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new le;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),i.add(r),this._positionGroup()},t.prototype._resetLocation=function(){var i=this.dataZoomModel,r=this.api,n=i.get("brushSelect"),o=n?tse:0,s=this._findCoordRect(),a={width:r.getWidth(),height:r.getHeight()},l=this._orient===$l?{right:a.width-s.x-s.width,top:a.height-im-hA-o,width:s.width,height:im}:{right:hA,top:s.y,width:im,height:s.height},u=sl(i.option);_(["right","top","width","height"],function(c){u[c]==="ph"&&(u[c]=l[c])});var h=pt(u,a);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===cA&&this._size.reverse()},t.prototype._positionGroup=function(){var i=this.group,r=this._location,n=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),s=o&&o.get("inverse"),a=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n===$l&&!s?{scaleY:l?1:-1,scaleX:1}:n===$l&&s?{scaleY:l?1:-1,scaleX:-1}:n===cA&&!s?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=i.getBoundingRect([a]);i.x=r.x-u.x,i.y=r.y-u.y,i.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var i=this.dataZoomModel,r=this._size,n=this._displayables.sliderGroup,o=i.get("brushSelect");n.add(new Ul({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:i.get("backgroundColor")},z2:-40}));var s=new Ul({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:Z(this._onClickPanel,this)}),a=this.api.getZr();o?(s.on("mousedown",this._onBrushStart,this),s.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),n.add(s)},t.prototype._renderDataShadow=function(){var i=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!i)return;var r=this._size,n=this._shadowSize||[],o=i.series,s=o.getRawData(),a=o.getShadowDim&&o.getShadowDim(),l=a&&s.getDimensionInfo(a)?o.getShadowDim():i.otherDim;if(l==null)return;var u=this._shadowPolygonPts,h=this._shadowPolylinePts;if(s!==this._shadowData||l!==this._shadowDim||r[0]!==n[0]||r[1]!==n[1]){var c=s.getDataExtent(l),d=(c[1]-c[0])*.3;c=[c[0]-d,c[1]+d];var f=[0,r[1]],p=[0,r[0]],g=[[r[0],0],[0,0]],v=[],m=p[1]/(s.count()-1),y=0,C=Math.round(s.count()/r[0]),S;s.each([l],function(D,T){if(C>0&&T%C){y+=m;return}var A=D==null||isNaN(D)||D==="",P=A?0:Oe(D,c,f,!0);A&&!S&&T?(g.push([g[g.length-1][0],0]),v.push([v[v.length-1][0],0])):!A&&S&&(g.push([y,0]),v.push([y,0])),g.push([y,P]),v.push([y,P]),y+=m,S=A}),u=this._shadowPolygonPts=g,h=this._shadowPolylinePts=v}this._shadowData=s,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var b=this.dataZoomModel;function w(D){var T=b.getModel(D?"selectedDataBackground":"dataBackground"),A=new le,P=new ei({shape:{points:u},segmentIgnoreThreshold:1,style:T.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),M=new ti({shape:{points:h},segmentIgnoreThreshold:1,style:T.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return A.add(P),A.add(M),A}for(var x=0;x<3;x++){var R=w(x===1);this._displayables.sliderGroup.add(R),this._displayables.dataShadowSegs.push(R)}},t.prototype._prepareDataShadowInfo=function(){var i=this.dataZoomModel,r=i.get("showDataShadow");if(r!==!1){var n,o=this.ecModel;return i.eachTargetAxis(function(s,a){var l=i.getAxisProxy(s,a).getTargetSeriesModels();_(l,function(u){if(!n&&!(r!==!0&&Ce(rse,u.get("type"))<0)){var h=o.getComponent(Un(s),a).axis,c=sse(s),d,f=u.coordinateSystem;c!=null&&f.getOtherAxis&&(d=f.getOtherAxis(h).inverse),c=u.getData().mapDimension(c),n={thisAxis:h,series:u,thisDim:s,otherDim:c,otherAxisInverse:d}}},this)},this),n}},t.prototype._renderHandle=function(){var i=this.group,r=this._displayables,n=r.handles=[null,null],o=r.handleLabels=[null,null],s=this._displayables.sliderGroup,a=this._size,l=this.dataZoomModel,u=this.api,h=l.get("borderRadius")||0,c=l.get("brushSelect"),d=r.filler=new Ul({silent:c,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});s.add(d),s.add(new Ul({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:h},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:ese,fill:"rgba(0,0,0,0)"}})),_([0,1],function(C){var S=l.get("handleIcon");!qd[S]&&S.indexOf("path://")<0&&S.indexOf("image://")<0&&(S="path://"+S);var b=ct(S,-1,0,2,2,null,!0);b.attr({cursor:dA(this._orient),draggable:!0,drift:Z(this._onDragMove,this,C),ondragend:Z(this._onDragEnd,this),onmouseover:Z(this._showDataInfo,this,!0),onmouseout:Z(this._showDataInfo,this,!1),z2:5});var w=b.getBoundingRect(),x=l.get("handleSize");this._handleHeight=K(x,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,b.setStyle(l.getModel("handleStyle").getItemStyle()),b.style.strokeNoScale=!0,b.rectHover=!0,b.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),gs(b);var R=l.get("handleColor");R!=null&&(b.style.fill=R),s.add(n[C]=b);var D=l.getModel("textStyle"),T=l.get("handleLabel")||{},A=T.show||!1;i.add(o[C]=new Ae({silent:!0,invisible:!A,style:Xe(D,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:D.getTextColor(),font:D.getFont()}),z2:10}))},this);var f=d;if(c){var p=K(l.get("moveHandleSize"),a[1]),g=r.moveHandle=new Te({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:p}}),v=p*.8,m=r.moveHandleIcon=ct(l.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);m.silent=!0,m.y=a[1]+p/2-.5,g.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(a[1]/2,Math.max(p,10));f=r.moveZone=new Te({invisible:!0,shape:{y:a[1]-y,height:p+y}}),f.on("mouseover",function(){u.enterEmphasis(g)}).on("mouseout",function(){u.leaveEmphasis(g)}),s.add(g),s.add(m),s.add(f)}f.attr({draggable:!0,cursor:dA(this._orient),drift:Z(this._onDragMove,this,"all"),ondragstart:Z(this._showDataInfo,this,!0),ondragend:Z(this._onDragEnd,this),onmouseover:Z(this._showDataInfo,this,!0),onmouseout:Z(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var i=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[Oe(i[0],[0,100],r,!0),Oe(i[1],[0,100],r,!0)]},t.prototype._updateInterval=function(i,r){var n=this.dataZoomModel,o=this._handleEnds,s=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Hs(r,o,s,n.get("zoomLock")?"all":i,a.minSpan!=null?Oe(a.minSpan,l,s,!0):null,a.maxSpan!=null?Oe(a.maxSpan,l,s,!0):null);var u=this._range,h=this._range=Gi([Oe(o[0],s,l,!0),Oe(o[1],s,l,!0)]);return!u||u[0]!==h[0]||u[1]!==h[1]},t.prototype._updateView=function(i){var r=this._displayables,n=this._handleEnds,o=Gi(n.slice()),s=this._size;_([0,1],function(f){var p=r.handles[f],g=this._handleHeight;p.attr({scaleX:g/2,scaleY:g/2,x:n[f]+(f?-1:1),y:s[1]/2-g/2})},this),r.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:s[1]});var a={x:o[0],width:o[1]-o[0]};r.moveHandle&&(r.moveHandle.setShape(a),r.moveZone.setShape(a),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",a.x+a.width/2));for(var l=r.dataShadowSegs,u=[0,o[0],o[1],s[0]],h=0;h<l.length;h++){var c=l[h],d=c.getClipPath();d||(d=new Te,c.setClipPath(d)),d.setShape({x:u[h],y:0,width:u[h+1]-u[h],height:s[1]})}this._updateDataInfo(i)},t.prototype._updateDataInfo=function(i){var r=this.dataZoomModel,n=this._displayables,o=n.handleLabels,s=this._orient,a=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,h=this._range,c=i?l.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:l.getDataValueWindow();a=[this._formatLabel(c[0],u),this._formatLabel(c[1],u)]}}var d=Gi(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(p){var g=vs(n.handles[p].parent,this.group),v=qf(p===0?"right":"left",g),m=this._handleWidth/2+ise,y=rr([d[p]+(p===0?-m:m),this._size[1]/2],g);o[p].setStyle({x:y[0],y:y[1],verticalAlign:s===$l?"middle":v,align:s===$l?v:"center",text:a[p]})}},t.prototype._formatLabel=function(i,r){var n=this.dataZoomModel,o=n.get("labelFormatter"),s=n.get("labelPrecision");(s==null||s==="auto")&&(s=r.getPixelPrecision());var a=i==null||isNaN(i)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(i)}):i.toFixed(Math.min(s,20));return ie(o)?o(i,a):q(o)?o.replace("{value}",a):a},t.prototype._showDataInfo=function(i){var r=this.dataZoomModel.get("handleLabel")||{},n=r.show||!1,o=this.dataZoomModel.getModel(["emphasis","handleLabel"]),s=o.get("show")||!1,a=i||this._dragging?s:n,l=this._displayables,u=l.handleLabels;u[0].attr("invisible",!a),u[1].attr("invisible",!a),l.moveHandle&&this.api[a?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},t.prototype._onDragMove=function(i,r,n,o){this._dragging=!0,on(o.event);var s=this._displayables.sliderGroup.getLocalTransform(),a=rr([r,n],s,!0),l=this._updateInterval(i,a[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var i=this.dataZoomModel.get("realtime");!i&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(i){var r=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(i.offsetX,i.offsetY);if(!(n[0]<0||n[0]>r[0]||n[1]<0||n[1]>r[1])){var o=this._handleEnds,s=(o[0]+o[1])/2,a=this._updateInterval("all",n[0]-s);this._updateView(),a&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(i){var r=i.offsetX,n=i.offsetY;this._brushStart=new ge(r,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(i){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var n=r.shape,o=+new Date;if(!(o-this._brushStartTime<200&&Math.abs(n.width)<5)){var s=this._getViewExtent(),a=[0,100];this._range=Gi([Oe(n.x,s,a,!0),Oe(n.x+n.width,s,a,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(i){this._brushing&&(on(i.event),this._updateBrushRect(i.offsetX,i.offsetY))},t.prototype._updateBrushRect=function(i,r){var n=this._displayables,o=this.dataZoomModel,s=n.brushRect;s||(s=n.brushRect=new Ul({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(s)),s.attr("ignore",!1);var a=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(i,r),h=l.transformCoordToLocal(a.x,a.y),c=this._size;u[0]=Math.max(Math.min(c[0],u[0]),0),s.setShape({x:h[0],y:0,width:u[0]-h[0],height:c[1]})},t.prototype._dispatchZoomAction=function(i){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:i?nse:null,start:r[0],end:r[1]})},t.prototype._findCoordRect=function(){var i,r=Wk(this.dataZoomModel).infoList;if(!i&&r.length){var n=r[0].model.coordinateSystem;i=n.getRect&&n.getRect()}if(!i){var o=this.api.getWidth(),s=this.api.getHeight();i={x:o*.2,y:s*.2,width:o*.6,height:s*.6}}return i},t.type="dataZoom.slider",t}(jw);function sse(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function dA(e){return e==="vertical"?"ns-resize":"ew-resize"}function uO(e){e.registerComponentModel(Joe),e.registerComponentView(ose),Qw(e)}function ase(e){we(lO),we(uO)}var hO={get:function(e,t,i){var r=ae((lse[e]||{})[t]);return i&&H(r)?r[r.length-1]:r}},lse={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},fA=Ct.mapVisual,use=Ct.eachVisual,hse=H,pA=_,cse=Gi,dse=Oe,Sf=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.stateList=["inRange","outOfRange"],i.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],i.layoutMode={type:"box",ignoreSize:!0},i.dataBound=[-1/0,1/0],i.targetVisuals={},i.controllerVisuals={},i}return t.prototype.init=function(i,r,n){this.mergeDefaultAndTheme(i,n)},t.prototype.optionUpdated=function(i,r){var n=this.option;!r&&Jk(n,i,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(i){var r=this.stateList;i=Z(i,this),this.controllerVisuals=aC(this.option.controller,r,i),this.targetVisuals=aC(this.option.target,r,i)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var i=this.option.seriesIndex,r=[];return i==null||i==="all"?this.ecModel.eachSeries(function(n,o){r.push(o)}):r=ze(i),r},t.prototype.eachTargetSeries=function(i,r){_(this.getTargetSeriesIndices(),function(n){var o=this.ecModel.getSeriesByIndex(n);o&&i.call(r,o)},this)},t.prototype.isTargetSeries=function(i){var r=!1;return this.eachTargetSeries(function(n){n===i&&(r=!0)}),r},t.prototype.formatValueText=function(i,r,n){var o=this.option,s=o.precision,a=this.dataBound,l=o.formatter,u;n=n||["<",">"],H(i)&&(i=i.slice(),u=!0);var h=r?i:u?[c(i[0]),c(i[1])]:c(i);if(q(l))return l.replace("{value}",u?h[0]:h).replace("{value2}",u?h[1]:h);if(ie(l))return u?l(i[0],i[1]):l(i);if(u)return i[0]===a[0]?n[0]+" "+h[1]:i[1]===a[1]?n[1]+" "+h[0]:h[0]+" - "+h[1];return h;function c(d){return d===a[0]?"min":d===a[1]?"max":(+d).toFixed(Math.min(s,20))}},t.prototype.resetExtent=function(){var i=this.option,r=cse([i.min,i.max]);this._dataExtent=r},t.prototype.getDataDimensionIndex=function(i){var r=this.option.dimension;if(r!=null)return i.getDimensionIndex(r);for(var n=i.dimensions,o=n.length-1;o>=0;o--){var s=n[o],a=i.getDimensionInfo(s);if(!a.isCalculationCoord)return a.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var i=this.ecModel,r=this.option,n={inRange:r.inRange,outOfRange:r.outOfRange},o=r.target||(r.target={}),s=r.controller||(r.controller={});pe(o,n),pe(s,n);var a=this.isCategory();l.call(this,o),l.call(this,s),u.call(this,o,"inRange","outOfRange"),h.call(this,s);function l(c){hse(r.color)&&!c.inRange&&(c.inRange={color:r.color.slice().reverse()}),c.inRange=c.inRange||{color:i.get("gradientColor")}}function u(c,d,f){var p=c[d],g=c[f];p&&!g&&(g=c[f]={},pA(p,function(v,m){if(Ct.isValidType(m)){var y=hO.get(m,"inactive",a);y!=null&&(g[m]=y,m==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function h(c){var d=(c.inRange||{}).symbol||(c.outOfRange||{}).symbol,f=(c.inRange||{}).symbolSize||(c.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),g=this.getItemSymbol(),v=g||"roundRect";pA(this.stateList,function(m){var y=this.itemSize,C=c[m];C||(C=c[m]={color:a?p:[p]}),C.symbol==null&&(C.symbol=d&&ae(d)||(a?v:[v])),C.symbolSize==null&&(C.symbolSize=f&&ae(f)||(a?y[0]:[y[0],y[0]])),C.symbol=fA(C.symbol,function(w){return w==="none"?v:w});var S=C.symbolSize;if(S!=null){var b=-1/0;use(S,function(w){w>b&&(b=w)}),C.symbolSize=fA(S,function(w){return dse(w,[0,b],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(i){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(i){return null},t.prototype.getVisualMeta=function(i){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Re),gA=[20,140],fse=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.optionUpdated=function(i,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var i=this.itemSize;(i[0]==null||isNaN(i[0]))&&(i[0]=gA[0]),(i[1]==null||isNaN(i[1]))&&(i[1]=gA[1])},t.prototype._resetRange=function(){var i=this.getExtent(),r=this.option.range;!r||r.auto?(i.auto=1,this.option.range=i):H(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],i[0]),r[1]=Math.min(r[1],i[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),_(this.stateList,function(i){var r=this.option.controller[i].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},t.prototype.setSelected=function(i){this.option.range=i.slice(),this._resetRange()},t.prototype.getSelected=function(){var i=this.getExtent(),r=Gi((this.get("range")||[]).slice());return r[0]>i[1]&&(r[0]=i[1]),r[1]>i[1]&&(r[1]=i[1]),r[0]<i[0]&&(r[0]=i[0]),r[1]<i[0]&&(r[1]=i[0]),r},t.prototype.getValueState=function(i){var r=this.option.range,n=this.getExtent();return(r[0]<=n[0]||r[0]<=i)&&(r[1]>=n[1]||i<=r[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(i){var r=[];return this.eachTargetSeries(function(n){var o=[],s=n.getData();s.each(this.getDataDimensionIndex(s),function(a,l){i[0]<=a&&a<=i[1]&&o.push(l)},this),r.push({seriesId:n.id,dataIndex:o})},this),r},t.prototype.getVisualMeta=function(i){var r=vA(this,"outOfRange",this.getExtent()),n=vA(this,"inRange",this.option.range.slice()),o=[];function s(f,p){o.push({value:f,color:i(f,p)})}for(var a=0,l=0,u=n.length,h=r.length;l<h&&(!n.length||r[l]<=n[0]);l++)r[l]<n[a]&&s(r[l],"outOfRange");for(var c=1;a<u;a++,c=0)c&&o.length&&s(n[a],"outOfRange"),s(n[a],"inRange");for(var c=1;l<h;l++)(!n.length||n[n.length-1]<r[l])&&(c&&(o.length&&s(o[o.length-1].value,"outOfRange"),c=0),s(r[l],"outOfRange"));var d=o.length;return{stops:o,outerColors:[d?o[0].color:"transparent",d?o[d-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=ho(Sf.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(Sf);function vA(e,t,i){if(i[0]===i[1])return i.slice();for(var r=200,n=(i[1]-i[0])/r,o=i[0],s=[],a=0;a<=r&&o<i[1];a++)s.push(o),o+=n;return s.push(i[1]),s}var cO=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i.autoPositionValues={left:1,right:1,top:1,bottom:1},i}return t.prototype.init=function(i,r){this.ecModel=i,this.api=r},t.prototype.render=function(i,r,n,o){if(this.visualMapModel=i,i.get("show")===!1){this.group.removeAll();return}this.doRender(i,r,n,o)},t.prototype.renderBackground=function(i){var r=this.visualMapModel,n=ol(r.get("padding")||0),o=i.getBoundingRect();i.add(new Te({z2:-1,silent:!0,shape:{x:o.x-n[3],y:o.y-n[0],width:o.width+n[3]+n[1],height:o.height+n[0]+n[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},t.prototype.getControllerVisual=function(i,r,n){n=n||{};var o=n.forceState,s=this.visualMapModel,a={};if(r==="color"){var l=s.get("contentColor");a.color=l}function u(f){return a[f]}function h(f,p){a[f]=p}var c=s.controllerVisuals[o||s.getValueState(i)],d=Ct.prepareVisualTypes(c);return _(d,function(f){var p=c[f];n.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",p=c.__alphaForOpacity),Ct.dependsOn(f,r)&&p&&p.applyVisual(i,u,h)}),a[r]},t.prototype.positionGroup=function(i){var r=this.visualMapModel,n=this.api;ip(i,r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(i,r,n,o){},t.type="visualMap",t}(Qe),mA=[["left","right","width"],["top","bottom","height"]];function dO(e,t,i){var r=e.option,n=r.align;if(n!=null&&n!=="auto")return n;for(var o={width:t.getWidth(),height:t.getHeight()},s=r.orient==="horizontal"?1:0,a=mA[s],l=[0,null,10],u={},h=0;h<3;h++)u[mA[1-s][h]]=l[h],u[a[h]]=h===2?i[0]:r[a[h]];var c=[["x","width",3],["y","height",0]][s],d=pt(u,o,r.padding);return a[(d.margin[c[2]]||0)+d[c[0]]+d[c[1]]*.5<o[c[1]]*.5?0:1]}function gd(e,t){return _(e||[],function(i){i.dataIndex!=null&&(i.dataIndexInside=i.dataIndex,i.dataIndex=null),i.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var mr=Oe,pse=_,yA=Math.min,rm=Math.max,gse=12,vse=6,mse=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._shapes={},i._dataInterval=[],i._handleEnds=[],i._hoverLinkDataIndices=[],i}return t.prototype.init=function(i,r){e.prototype.init.call(this,i,r),this._hoverLinkFromSeriesMouseOver=Z(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Z(this._hideIndicator,this)},t.prototype.doRender=function(i,r,n,o){(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var i=this.visualMapModel,r=this.group;this._orient=i.get("orient"),this._useHandle=i.get("calculable"),this._resetInterval(),this._renderBar(r);var n=i.get("text");this._renderEndsText(r,n,0),this._renderEndsText(r,n,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},t.prototype._renderEndsText=function(i,r,n){if(r){var o=r[1-n];o=o!=null?o+"":"";var s=this.visualMapModel,a=s.get("textGap"),l=s.itemSize,u=this._shapes.mainGroup,h=this._applyTransform([l[0]/2,n===0?-a:l[1]+a],u),c=this._applyTransform(n===0?"bottom":"top",u),d=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new Ae({style:Xe(f,{x:h[0],y:h[1],verticalAlign:d==="horizontal"?"middle":c,align:d==="horizontal"?c:"center",text:o})}))}},t.prototype._renderBar=function(i){var r=this.visualMapModel,n=this._shapes,o=r.itemSize,s=this._orient,a=this._useHandle,l=dO(r,this.api,o),u=n.mainGroup=this._createBarGroup(l),h=new le;u.add(h),h.add(n.outOfRange=CA()),h.add(n.inRange=CA(null,a?wA(this._orient):null,Z(this._dragHandle,this,"all",!1),Z(this._dragHandle,this,"all",!0))),h.setClipPath(new Te({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var c=r.textStyleModel.getTextRect(""),d=rm(c.width,c.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(r,u,0,o,d,s),this._createHandle(r,u,1,o,d,s)),this._createIndicator(r,u,o,d,s),i.add(u)},t.prototype._createHandle=function(i,r,n,o,s,a){var l=Z(this._dragHandle,this,n,!1),u=Z(this._dragHandle,this,n,!0),h=or(i.get("handleSize"),o[0]),c=ct(i.get("handleIcon"),-h/2,-h/2,h,h,null,!0),d=wA(this._orient);c.attr({cursor:d,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){on(m.event)}}),c.x=o[0]/2,c.useStyle(i.getModel("handleStyle").getItemStyle()),c.setStyle({strokeNoScale:!0,strokeFirst:!0}),c.style.lineWidth*=2,c.ensureState("emphasis").style=i.getModel(["emphasis","handleStyle"]).getItemStyle(),es(c,!0),r.add(c);var f=this.visualMapModel.textStyleModel,p=new Ae({cursor:d,draggable:!0,drift:l,onmousemove:function(m){on(m.event)},ondragend:u,style:Xe(f,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var g=[h,0],v=this._shapes;v.handleThumbs[n]=c,v.handleLabelPoints[n]=g,v.handleLabels[n]=p},t.prototype._createIndicator=function(i,r,n,o,s){var a=or(i.get("indicatorSize"),n[0]),l=ct(i.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var u=i.getModel("indicatorStyle").getItemStyle();if(l instanceof Rt){var h=l.style;l.useStyle(V({image:h.image,x:h.x,y:h.y,width:h.width,height:h.height},u))}else l.useStyle(u);r.add(l);var c=this.visualMapModel.textStyleModel,d=new Ae({silent:!0,invisible:!0,style:Xe(c,{x:0,y:0,text:""})});this.group.add(d);var f=[(s==="horizontal"?o/2:vse)+n[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=d,p.indicatorLabelPoint=f,this._firstShowIndicator=!0},t.prototype._dragHandle=function(i,r,n,o){if(this._useHandle){if(this._dragging=!r,!r){var s=this._applyTransform([n,o],this._shapes.mainGroup,!0);this._updateInterval(i,s[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():SA(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[i],!1)}},t.prototype._resetInterval=function(){var i=this.visualMapModel,r=this._dataInterval=i.getSelected(),n=i.getExtent(),o=[0,i.itemSize[1]];this._handleEnds=[mr(r[0],n,o,!0),mr(r[1],n,o,!0)]},t.prototype._updateInterval=function(i,r){r=r||0;var n=this.visualMapModel,o=this._handleEnds,s=[0,n.itemSize[1]];Hs(r,o,s,i,0);var a=n.getExtent();this._dataInterval=[mr(o[0],s,a,!0),mr(o[1],s,a,!0)]},t.prototype._updateView=function(i){var r=this.visualMapModel,n=r.getExtent(),o=this._shapes,s=[0,r.itemSize[1]],a=i?s:this._handleEnds,l=this._createBarVisual(this._dataInterval,n,a,"inRange"),u=this._createBarVisual(n,n,s,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(a,l)},t.prototype._createBarVisual=function(i,r,n,o){var s={forceState:o,convertOpacityToAlpha:!0},a=this._makeColorGradient(i,s),l=[this.getControllerVisual(i[0],"symbolSize",s),this.getControllerVisual(i[1],"symbolSize",s)],u=this._createBarPoints(n,l);return{barColor:new Ch(0,0,0,1,a),barPoints:u,handlesColor:[a[0].color,a[a.length-1].color]}},t.prototype._makeColorGradient=function(i,r){var n=100,o=[],s=(i[1]-i[0])/n;o.push({color:this.getControllerVisual(i[0],"color",r),offset:0});for(var a=1;a<n;a++){var l=i[0]+s*a;if(l>i[1])break;o.push({color:this.getControllerVisual(l,"color",r),offset:a/n})}return o.push({color:this.getControllerVisual(i[1],"color",r),offset:1}),o},t.prototype._createBarPoints=function(i,r){var n=this.visualMapModel.itemSize;return[[n[0]-r[0],i[0]],[n[0],i[0]],[n[0],i[1]],[n[0]-r[1],i[1]]]},t.prototype._createBarGroup=function(i){var r=this._orient,n=this.visualMapModel.get("inverse");return new le(r==="horizontal"&&!n?{scaleX:i==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&n?{scaleX:i==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!n?{scaleX:i==="left"?1:-1,scaleY:-1}:{scaleX:i==="left"?1:-1})},t.prototype._updateHandle=function(i,r){if(this._useHandle){var n=this._shapes,o=this.visualMapModel,s=n.handleThumbs,a=n.handleLabels,l=o.itemSize,u=o.getExtent(),h=this._applyTransform("left",n.mainGroup);pse([0,1],function(c){var d=s[c];d.setStyle("fill",r.handlesColor[c]),d.y=i[c];var f=mr(i[c],[0,l[1]],u,!0),p=this.getControllerVisual(f,"symbolSize");d.scaleX=d.scaleY=p/l[0],d.x=l[0]-p/2;var g=rr(n.handleLabelPoints[c],vs(d,this.group));if(this._orient==="horizontal"){var v=h==="left"||h==="top"?(l[0]-p)/2:(l[0]-p)/-2;g[1]+=v}a[c].setStyle({x:g[0],y:g[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(i,r,n,o){var s=this.visualMapModel,a=s.getExtent(),l=s.itemSize,u=[0,l[1]],h=this._shapes,c=h.indicator;if(c){c.attr("invisible",!1);var d={convertOpacityToAlpha:!0},f=this.getControllerVisual(i,"color",d),p=this.getControllerVisual(i,"symbolSize"),g=mr(i,a,u,!0),v=l[0]-p/2,m={x:c.x,y:c.y};c.y=g,c.x=v;var y=rr(h.indicatorLabelPoint,vs(c,this.group)),C=h.indicatorLabel;C.attr("invisible",!1);var S=this._applyTransform("left",h.mainGroup),b=this._orient,w=b==="horizontal";C.setStyle({text:(n||"")+s.formatValueText(r),verticalAlign:w?S:"middle",align:w?"center":S});var x={x:v,y:g,style:{fill:f}},R={style:{x:y[0],y:y[1]}};if(s.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var D={duration:100,easing:"cubicInOut",additive:!0};c.x=m.x,c.y=m.y,c.animateTo(x,D),C.animateTo(R,D)}else c.attr(x),C.attr(R);this._firstShowIndicator=!1;var T=this._shapes.handleLabels;if(T)for(var A=0;A<T.length;A++)this.api.enterBlur(T[A])}},t.prototype._enableHoverLinkToSeries=function(){var i=this;this._shapes.mainGroup.on("mousemove",function(r){if(i._hovering=!0,!i._dragging){var n=i.visualMapModel.itemSize,o=i._applyTransform([r.offsetX,r.offsetY],i._shapes.mainGroup,!0,!0);o[1]=yA(rm(0,o[1]),n[1]),i._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=n[0])}}).on("mouseout",function(){i._hovering=!1,!i._dragging&&i._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var i=this.api.getZr();this.visualMapModel.option.hoverLink?(i.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),i.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(i,r){var n=this.visualMapModel,o=n.itemSize;if(n.option.hoverLink){var s=[0,o[1]],a=n.getExtent();i=yA(rm(s[0],i),s[1]);var l=yse(n,a,s),u=[i-l,i+l],h=mr(i,s,a,!0),c=[mr(u[0],s,a,!0),mr(u[1],s,a,!0)];u[0]<s[0]&&(c[0]=-1/0),u[1]>s[1]&&(c[1]=1/0),r&&(c[0]===-1/0?this._showIndicator(h,c[1],"< ",l):c[1]===1/0?this._showIndicator(h,c[0],"> ",l):this._showIndicator(h,h," ",l));var d=this._hoverLinkDataIndices,f=[];(r||SA(n))&&(f=this._hoverLinkDataIndices=n.findTargetDataIndices(c));var p=D4(d,f);this._dispatchHighDown("downplay",gd(p[0],n)),this._dispatchHighDown("highlight",gd(p[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(i){var r;if(is(i.target,function(l){var u=ue(l);if(u.dataIndex!=null)return r=u,!0},!0),!!r){var n=this.ecModel.getSeriesByIndex(r.seriesIndex),o=this.visualMapModel;if(o.isTargetSeries(n)){var s=n.getData(r.dataType),a=s.getStore().get(o.getDataDimensionIndex(s),r.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},t.prototype._hideIndicator=function(){var i=this._shapes;i.indicator&&i.indicator.attr("invisible",!0),i.indicatorLabel&&i.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var n=0;n<r.length;n++)this.api.leaveBlur(r[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var i=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",gd(i,this.visualMapModel)),i.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var i=this.api.getZr();i.off("mouseover",this._hoverLinkFromSeriesMouseOver),i.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(i,r,n,o){var s=vs(r,o?null:this.group);return H(i)?rr(i,s,n):qf(i,s,n)},t.prototype._dispatchHighDown=function(i,r){r&&r.length&&this.api.dispatchAction({type:i,batch:r})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(cO);function CA(e,t,i,r){return new ei({shape:{points:e},draggable:!!i,cursor:t,drift:i,onmousemove:function(n){on(n.event)},ondragend:r})}function yse(e,t,i){var r=gse/2,n=e.get("hoverLinkDataSize");return n&&(r=mr(n,t,i,!0)/2),r}function SA(e){var t=e.get("hoverLinkOnHandle");return!!(t??e.get("realtime"))}function wA(e){return e==="vertical"?"ns-resize":"ew-resize"}var Cse={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Sse=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(i){i.setSelected(e.selected)})},wse=[{createOnAllSeries:!0,reset:function(e,t){var i=[];return t.eachComponent("visualMap",function(r){var n=e.pipelineContext;!r.isTargetSeries(e)||n&&n.large||i.push(Wne(r.stateList,r.targetVisuals,Z(r.getValueState,r),r.getDataDimensionIndex(e.getData())))}),i}},{createOnAllSeries:!0,reset:function(e,t){var i=e.getData(),r=[];t.eachComponent("visualMap",function(n){if(n.isTargetSeries(e)){var o=n.getVisualMeta(Z(bse,null,e,n))||{stops:[],outerColors:[]},s=n.getDataDimensionIndex(i);s>=0&&(o.dimension=s,r.push(o))}}),e.getData().setVisual("visualMeta",r)}}];function bse(e,t,i,r){for(var n=t.targetVisuals[r],o=Ct.prepareVisualTypes(n),s={color:xh(e.getData(),"color")},a=0,l=o.length;a<l;a++){var u=o[a],h=n[u==="opacity"?"__alphaForOpacity":u];h&&h.applyVisual(i,c,d)}return s.color;function c(f){return s[f]}function d(f,p){s[f]=p}}var bA=_;function xse(e){var t=e&&e.visualMap;H(t)||(t=t?[t]:[]),bA(t,function(i){if(i){la(i,"splitList")&&!la(i,"pieces")&&(i.pieces=i.splitList,delete i.splitList);var r=i.pieces;r&&H(r)&&bA(r,function(n){se(n)&&(la(n,"start")&&!la(n,"min")&&(n.min=n.start),la(n,"end")&&!la(n,"max")&&(n.max=n.end))})}})}function la(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var xA=!1;function fO(e){xA||(xA=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(Cse,Sse),_(wse,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(xse))}function pO(e){e.registerComponentModel(fse),e.registerComponentView(mse),fO(e)}var Rse=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i._pieceList=[],i}return t.prototype.optionUpdated=function(i,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],Dse[this._mode].call(this,this._pieceList),this._resetSelected(i,r);var o=this.option.categories;this.resetVisual(function(s,a){n==="categories"?(s.mappingMethod="category",s.categories=ae(o)):(s.dataExtent=this.getExtent(),s.mappingMethod="piecewise",s.pieceList=z(this._pieceList,function(l){return l=ae(l),a!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var i=this.option,r={},n=Ct.listVisualTypes(),o=this.isCategory();_(i.pieces,function(a){_(n,function(l){a.hasOwnProperty(l)&&(r[l]=1)})}),_(r,function(a,l){var u=!1;_(this.stateList,function(h){u=u||s(i,h,l)||s(i.target,h,l)},this),!u&&_(this.stateList,function(h){(i[h]||(i[h]={}))[l]=hO.get(l,h==="inRange"?"active":"inactive",o)})},this);function s(a,l,u){return a&&a[l]&&a[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(i,r){var n=this.option,o=this._pieceList,s=(r?n:i).selected||{};if(n.selected=s,_(o,function(l,u){var h=this.getSelectedMapKey(l);s.hasOwnProperty(h)||(s[h]=!0)},this),n.selectedMode==="single"){var a=!1;_(o,function(l,u){var h=this.getSelectedMapKey(l);s[h]&&(a?s[h]=!1:a=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(i){return this._mode==="categories"?i.value+"":i.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var i=this.option;return i.pieces&&i.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(i){this.option.selected=ae(i)},t.prototype.getValueState=function(i){var r=Ct.findPieceIndex(i,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(i){var r=[],n=this._pieceList;return this.eachTargetSeries(function(o){var s=[],a=o.getData();a.each(this.getDataDimensionIndex(a),function(l,u){var h=Ct.findPieceIndex(l,n);h===i&&s.push(u)},this),r.push({seriesId:o.id,dataIndex:s})},this),r},t.prototype.getRepresentValue=function(i){var r;if(this.isCategory())r=i.value;else if(i.value!=null)r=i.value;else{var n=i.interval||[];r=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return r},t.prototype.getVisualMeta=function(i){if(this.isCategory())return;var r=[],n=["",""],o=this;function s(h,c){var d=o.getRepresentValue({interval:h});c||(c=o.getValueState(d));var f=i(d,c);h[0]===-1/0?n[0]=f:h[1]===1/0?n[1]=f:r.push({value:h[0],color:f},{value:h[1],color:f})}var a=this._pieceList.slice();if(!a.length)a.push({interval:[-1/0,1/0]});else{var l=a[0].interval[0];l!==-1/0&&a.unshift({interval:[-1/0,l]}),l=a[a.length-1].interval[1],l!==1/0&&a.push({interval:[l,1/0]})}var u=-1/0;return _(a,function(h){var c=h.interval;c&&(c[0]>u&&s([u,c[0]],"outOfRange"),s(c.slice()),u=c[1])},this),{stops:r,outerColors:n}},t.type="visualMap.piecewise",t.defaultOption=ho(Sf.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(Sf),Dse={splitNumber:function(e){var t=this.option,i=Math.min(t.precision,20),r=this.getExtent(),n=t.splitNumber;n=Math.max(parseInt(n,10),1),t.splitNumber=n;for(var o=(r[1]-r[0])/n;+o.toFixed(i)!==o&&i<5;)i++;t.precision=i,o=+o.toFixed(i),t.minOpen&&e.push({interval:[-1/0,r[0]],close:[0,0]});for(var s=0,a=r[0];s<n;a+=o,s++){var l=s===n-1?r[1]:a+o;e.push({interval:[a,l],close:[1,1]})}t.maxOpen&&e.push({interval:[r[1],1/0],close:[0,0]}),vb(e),_(e,function(u,h){u.index=h,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;_(t.categories,function(i){e.push({text:this.formatValueText(i,!0),value:i})},this),RA(t,e)},pieces:function(e){var t=this.option;_(t.pieces,function(i,r){se(i)||(i={value:i});var n={text:"",index:r};if(i.label!=null&&(n.text=i.label),i.hasOwnProperty("value")){var o=n.value=i.value;n.interval=[o,o],n.close=[1,1]}else{for(var s=n.interval=[],a=n.close=[0,0],l=[1,0,1],u=[-1/0,1/0],h=[],c=0;c<2;c++){for(var d=[["gte","gt","min"],["lte","lt","max"]][c],f=0;f<3&&s[c]==null;f++)s[c]=i[d[f]],a[c]=l[f],h[c]=f===2;s[c]==null&&(s[c]=u[c])}h[0]&&s[1]===1/0&&(a[0]=0),h[1]&&s[0]===-1/0&&(a[1]=0),s[0]===s[1]&&a[0]&&a[1]&&(n.value=s[0])}n.visual=Ct.retrieveVisuals(i),e.push(n)},this),RA(t,e),vb(e),_(e,function(i){var r=i.close,n=[["<",""][r[1]],[">",""][r[0]]];i.text=i.text||this.formatValueText(i.value!=null?i.value:i.interval,!1,n)},this)}};function RA(e,t){var i=e.inverse;(e.orient==="vertical"?!i:i)&&t.reverse()}var Tse=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type=t.type,i}return t.prototype.doRender=function(){var i=this.group;i.removeAll();var r=this.visualMapModel,n=r.get("textGap"),o=r.textStyleModel,s=o.getFont(),a=o.getTextColor(),l=this._getItemAlign(),u=r.itemSize,h=this._getViewData(),c=h.endsText,d=xt(r.get("showLabel",!0),!c),f=!r.get("selectedMode");c&&this._renderEndsText(i,c[0],u,d,l),_(h.viewPieceList,function(p){var g=p.piece,v=new le;v.onclick=Z(this._onItemClick,this,g),this._enableHoverLink(v,p.indexInModelPieceList);var m=r.getRepresentValue(g);if(this._createItemSymbol(v,m,[0,0,u[0],u[1]],f),d){var y=this.visualMapModel.getValueState(m);v.add(new Ae({style:{x:l==="right"?-n:u[0]+n,y:u[1]/2,text:g.text,verticalAlign:"middle",align:l,font:s,fill:a,opacity:y==="outOfRange"?.5:1},silent:f}))}i.add(v)},this),c&&this._renderEndsText(i,c[1],u,d,l),ms(r.get("orient"),i,r.get("itemGap")),this.renderBackground(i),this.positionGroup(i)},t.prototype._enableHoverLink=function(i,r){var n=this;i.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(s){var a=n.visualMapModel;a.option.hoverLink&&n.api.dispatchAction({type:s,batch:gd(a.findTargetDataIndices(r),a)})}},t.prototype._getItemAlign=function(){var i=this.visualMapModel,r=i.option;if(r.orient==="vertical")return dO(i,this.api,i.itemSize);var n=r.align;return(!n||n==="auto")&&(n="left"),n},t.prototype._renderEndsText=function(i,r,n,o,s){if(r){var a=new le,l=this.visualMapModel.textStyleModel;a.add(new Ae({style:Xe(l,{x:o?s==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:o?s:"center",text:r})})),i.add(a)}},t.prototype._getViewData=function(){var i=this.visualMapModel,r=z(i.getPieceList(),function(a,l){return{piece:a,indexInModelPieceList:l}}),n=i.get("text"),o=i.get("orient"),s=i.get("inverse");return(o==="horizontal"?s:!s)?r.reverse():n&&(n=n.slice().reverse()),{viewPieceList:r,endsText:n}},t.prototype._createItemSymbol=function(i,r,n,o){var s=ct(this.getControllerVisual(r,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(r,"color"));s.silent=o,i.add(s)},t.prototype._onItemClick=function(i){var r=this.visualMapModel,n=r.option,o=n.selectedMode;if(o){var s=ae(n.selected),a=r.getSelectedMapKey(i);o==="single"||o===!0?(s[a]=!0,_(s,function(l,u){s[u]=u===a})):s[a]=!s[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},t.type="visualMap.piecewise",t}(cO);function gO(e){e.registerComponentModel(Rse),e.registerComponentView(Tse),fO(e)}function _se(e){we(pO),we(gO)}var Ase={label:{enabled:!0},decal:{show:!1}},DA=_e(),Pse={};function Mse(e,t){var i=e.getModel("aria");if(!i.get("enabled"))return;var r=ae(Ase);pe(r.label,e.getLocaleModel().get("aria"),!1),pe(i.option,r,!1),n(),o();function n(){var u=i.getModel("decal"),h=u.get("show");if(h){var c=Q();e.eachSeries(function(d){if(!d.isColorBySeries()){var f=c.get(d.type);f||(f={},c.set(d.type,f)),DA(d).scope=f}}),e.eachRawSeries(function(d){if(e.isSeriesFiltered(d))return;if(ie(d.enableAriaDecal)){d.enableAriaDecal();return}var f=d.getData();if(d.isColorBySeries()){var y=fy(d.ecModel,d.name,Pse,e.getSeriesCount()),C=f.getVisual("decal");f.setVisual("decal",S(C,y))}else{var p=d.getRawData(),g={},v=DA(d).scope;f.each(function(b){var w=f.getRawIndex(b);g[w]=b});var m=p.count();p.each(function(b){var w=g[b],x=p.getName(b)||b+"",R=fy(d.ecModel,x,v,m),D=f.getItemVisual(w,"decal");f.setItemVisual(w,"decal",S(D,R))})}function S(b,w){var x=b?V(V({},w),b):w;return x.dirty=!0,x}})}}function o(){var u=t.getZr().dom;if(u){var h=e.getLocaleModel().get("aria"),c=i.getModel("label");if(c.option=ne(c.option,h),!!c.get("enabled")){if(u.setAttribute("role","img"),c.get("description")){u.setAttribute("aria-label",c.get("description"));return}var d=e.getSeriesCount(),f=c.get(["data","maxCount"])||10,p=c.get(["series","maxCount"])||10,g=Math.min(d,p),v;if(!(d<1)){var m=a();if(m){var y=c.get(["general","withTitle"]);v=s(y,{title:m})}else v=c.get(["general","withoutTitle"]);var C=[],S=d>1?c.get(["series","multiple","prefix"]):c.get(["series","single","prefix"]);v+=s(S,{seriesCount:d}),e.eachSeries(function(R,D){if(D<g){var T=void 0,A=R.get("name"),P=A?"withName":"withoutName";T=d>1?c.get(["series","multiple",P]):c.get(["series","single",P]),T=s(T,{seriesId:R.seriesIndex,seriesName:R.get("name"),seriesType:l(R.subType)});var M=R.getData();if(M.count()>f){var F=c.get(["data","partialData"]);T+=s(F,{displayCnt:f})}else T+=c.get(["data","allData"]);for(var E=c.get(["data","separator","middle"]),I=c.get(["data","separator","end"]),O=c.get(["data","excludeDimensionId"]),k=[],G=0;G<M.count();G++)if(G<f){var W=M.getName(G),$=O?Le(M.getValues(G),function(te,re){return Ce(O,re)===-1}):M.getValues(G),X=c.get(["data",W?"withName":"withoutName"]);k.push(s(X,{name:W,value:$.join(E)}))}T+=k.join(E)+I,C.push(T)}});var b=c.getModel(["series","multiple","separator"]),w=b.get("middle"),x=b.get("end");v+=C.join(w)+x,u.setAttribute("aria-label",v)}}}}function s(u,h){if(!q(u))return u;var c=u;return _(h,function(d,f){c=c.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),d)}),c}function a(){var u=e.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){var h=e.getLocaleModel().get(["series","typeNames"]);return h[u]||h.chart}}function Fse(e){if(!(!e||!e.aria)){var t=e.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},_(["description","general","series","data"],function(i){t[i]!=null&&(t.label[i]=t[i])})}}function Ese(e){e.registerPreprocessor(Fse),e.registerVisual(e.PRIORITY.VISUAL.ARIA,Mse)}var TA={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Ise=function(){function e(t){var i=this._condVal=q(t)?new RegExp(t):$3(t)?t:null;if(i==null){var r="";Ie(r)}}return e.prototype.evaluate=function(t){var i=typeof t;return q(i)?this._condVal.test(t):Pe(i)?this._condVal.test(t+""):!1},e}(),Lse=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),kse=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,i=0;i<t.length;i++)if(!t[i].evaluate())return!1;return!0},e}(),Ose=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,i=0;i<t.length;i++)if(t[i].evaluate())return!0;return!1},e}(),Gse=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Nse=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,i=this.getValue,r=i(this.valueGetterParam),n=t?this.valueParser(r):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?n:r))return!1;return!0},e}();function a0(e,t){if(e===!0||e===!1){var i=new Lse;return i.value=e,i}var r="";return vO(e)||Ie(r),e.and?_A("and",e,t):e.or?_A("or",e,t):e.not?Vse(e,t):Bse(e,t)}function _A(e,t,i){var r=t[e],n="";H(r)||Ie(n),r.length||Ie(n);var o=e==="and"?new kse:new Ose;return o.children=z(r,function(s){return a0(s,i)}),o.children.length||Ie(n),o}function Vse(e,t){var i=e.not,r="";vO(i)||Ie(r);var n=new Gse;return n.child=a0(i,t),n.child||Ie(r),n}function Bse(e,t){for(var i="",r=t.prepareGetValue(e),n=[],o=De(e),s=e.parser,a=s?QF(s):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var h=j(TA,u)?TA[u]:u,c=e[u],d=a?a(c):c,f=A6(h,d)||h==="reg"&&new Ise(d);f||Ie(i),n.push(f)}}n.length||Ie(i);var p=new Nse;return p.valueGetterParam=r,p.valueParser=a,p.getValue=t.getValue,p.subCondList=n,p}function vO(e){return se(e)&&!Ot(e)}var Hse=function(){function e(t,i){this._cond=a0(t,i)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function zse(e,t){return new Hse(e,t)}var Wse={type:"echarts:filter",transform:function(e){for(var t=e.upstream,i,r=zse(e.config,{valueGetterAttrMap:Q({dimension:!0}),prepareGetValue:function(a){var l="",u=a.dimension;j(a,"dimension")||Ie(l);var h=t.getDimensionInfo(u);return h||Ie(l),{dimIdx:h.index}},getValue:function(a){return t.retrieveValueFromItem(i,a.dimIdx)}}),n=[],o=0,s=t.count();o<s;o++)i=t.getRawDataItem(o),r.evaluate()&&n.push(i);return{data:n}}},Use={type:"echarts:sort",transform:function(e){var t=e.upstream,i=e.config,r="",n=ze(i);n.length||Ie(r);var o=[];_(n,function(h){var c=h.dimension,d=h.order,f=h.parser,p=h.incomparable;if(c==null&&Ie(r),d!=="asc"&&d!=="desc"&&Ie(r),p&&p!=="min"&&p!=="max"){var g="";Ie(g)}if(d!=="asc"&&d!=="desc"){var v="";Ie(v)}var m=t.getDimensionInfo(c);m||Ie(r);var y=f?QF(f):null;f&&!y&&Ie(r),o.push({dimIdx:m.index,parser:y,comparator:new eE(d,p)})});var s=t.sourceFormat;s!==Gt&&s!==$i&&Ie(r);for(var a=[],l=0,u=t.count();l<u;l++)a.push(t.getRawDataItem(l));return a.sort(function(h,c){for(var d=0;d<o.length;d++){var f=o[d],p=t.retrieveValueFromItem(h,f.dimIdx),g=t.retrieveValueFromItem(c,f.dimIdx);f.parser&&(p=f.parser(p),g=f.parser(g));var v=f.comparator.evaluate(p,g);if(v!==0)return v}return 0}),{data:a}}};function $se(e){e.registerTransform(Wse),e.registerTransform(Use)}var Kse=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type="dataset",i}return t.prototype.init=function(i,r,n){e.prototype.init.call(this,i,r,n),this._sourceManager=new nE(this),Px(this)},t.prototype.mergeOption=function(i,r){e.prototype.mergeOption.call(this,i,r),Px(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Pr},t}(Re),Yse=function(e){L(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.type="dataset",i}return t.type="dataset",t}(Qe);function Xse(e){e.registerComponentModel(Kse),e.registerComponentView(Yse)}var gr=Or.CMD;function wa(e,t){return Math.abs(e-t)<1e-5}function pC(e){var t=e.data,i=e.len(),r=[],n,o=0,s=0,a=0,l=0;function u(M,F){n&&n.length>2&&r.push(n),n=[M,F]}function h(M,F,E,I){wa(M,E)&&wa(F,I)||n.push(M,F,E,I,E,I)}function c(M,F,E,I,O,k){var G=Math.abs(F-M),W=Math.tan(G/4)*4/3,$=F<M?-1:1,X=Math.cos(M),te=Math.sin(M),re=Math.cos(F),he=Math.sin(F),Be=X*O+E,rt=te*k+I,me=re*O+E,oe=he*k+I,Se=O*W*$,ee=k*W*$;n.push(Be-Se*te,rt+ee*X,me+Se*he,oe-ee*re,me,oe)}for(var d,f,p,g,v=0;v<i;){var m=t[v++],y=v===1;switch(y&&(o=t[v],s=t[v+1],a=o,l=s,(m===gr.L||m===gr.C||m===gr.Q)&&(n=[a,l])),m){case gr.M:o=a=t[v++],s=l=t[v++],u(a,l);break;case gr.L:d=t[v++],f=t[v++],h(o,s,d,f),o=d,s=f;break;case gr.C:n.push(t[v++],t[v++],t[v++],t[v++],o=t[v++],s=t[v++]);break;case gr.Q:d=t[v++],f=t[v++],p=t[v++],g=t[v++],n.push(o+2/3*(d-o),s+2/3*(f-s),p+2/3*(d-p),g+2/3*(f-g),p,g),o=p,s=g;break;case gr.A:var C=t[v++],S=t[v++],b=t[v++],w=t[v++],x=t[v++],R=t[v++]+x;v+=1;var D=!t[v++];d=Math.cos(x)*b+C,f=Math.sin(x)*w+S,y?(a=d,l=f,u(a,l)):h(o,s,d,f),o=Math.cos(R)*b+C,s=Math.sin(R)*w+S;for(var T=(D?-1:1)*Math.PI/2,A=x;D?A>R:A<R;A+=T){var P=D?Math.max(A+T,R):Math.min(A+T,R);c(A,P,C,S,b,w)}break;case gr.R:a=o=t[v++],l=s=t[v++],d=a+t[v++],f=l+t[v++],u(d,l),h(d,l,d,f),h(d,f,a,f),h(a,f,a,l),h(a,l,d,l);break;case gr.Z:n&&h(o,s,a,l),o=a,s=l;break}}return n&&n.length>2&&r.push(n),r}function gC(e,t,i,r,n,o,s,a,l,u){if(wa(e,i)&&wa(t,r)&&wa(n,s)&&wa(o,a)){l.push(s,a);return}var h=2/u,c=h*h,d=s-e,f=a-t,p=Math.sqrt(d*d+f*f);d/=p,f/=p;var g=i-e,v=r-t,m=n-s,y=o-a,C=g*g+v*v,S=m*m+y*y;if(C<c&&S<c){l.push(s,a);return}var b=d*g+f*v,w=-d*m-f*y,x=C-b*b,R=S-w*w;if(x<c&&b>=0&&R<c&&w>=0){l.push(s,a);return}var D=[],T=[];to(e,i,n,s,.5,D),to(t,r,o,a,.5,T),gC(D[0],T[0],D[1],T[1],D[2],T[2],D[3],T[3],l,u),gC(D[4],T[4],D[5],T[5],D[6],T[6],D[7],T[7],l,u)}function qse(e,t){var i=pC(e),r=[];t=t||1;for(var n=0;n<i.length;n++){var o=i[n],s=[],a=o[0],l=o[1];s.push(a,l);for(var u=2;u<o.length;){var h=o[u++],c=o[u++],d=o[u++],f=o[u++],p=o[u++],g=o[u++];gC(a,l,h,c,d,f,p,g,s,t),a=p,l=g}r.push(s)}return r}function mO(e,t,i){var r=e[t],n=e[1-t],o=Math.abs(r/n),s=Math.ceil(Math.sqrt(o*i)),a=Math.floor(i/s);a===0&&(a=1,s=i);for(var l=[],u=0;u<s;u++)l.push(a);var h=s*a,c=i-h;if(c>0)for(var u=0;u<c;u++)l[u%s]+=1;return l}function AA(e,t,i){for(var r=e.r0,n=e.r,o=e.startAngle,s=e.endAngle,a=Math.abs(s-o),l=a*n,u=n-r,h=l>Math.abs(u),c=mO([l,u],h?0:1,t),d=(h?a:u)/c.length,f=0;f<c.length;f++)for(var p=(h?u:a)/c[f],g=0;g<c[f];g++){var v={};h?(v.startAngle=o+d*f,v.endAngle=o+d*(f+1),v.r0=r+p*g,v.r=r+p*(g+1)):(v.startAngle=o+p*g,v.endAngle=o+p*(g+1),v.r0=r+d*f,v.r=r+d*(f+1)),v.clockwise=e.clockwise,v.cx=e.cx,v.cy=e.cy,i.push(v)}}function Zse(e,t,i){for(var r=e.width,n=e.height,o=r>n,s=mO([r,n],o?0:1,t),a=o?"width":"height",l=o?"height":"width",u=o?"x":"y",h=o?"y":"x",c=e[a]/s.length,d=0;d<s.length;d++)for(var f=e[l]/s[d],p=0;p<s[d];p++){var g={};g[u]=d*c,g[h]=p*f,g[a]=c,g[l]=f,g.x+=e.x,g.y+=e.y,i.push(g)}}function PA(e,t,i,r){return e*r-i*t}function jse(e,t,i,r,n,o,s,a){var l=i-e,u=r-t,h=s-n,c=a-o,d=PA(h,c,l,u);if(Math.abs(d)<1e-6)return null;var f=e-n,p=t-o,g=PA(f,p,h,c)/d;return g<0||g>1?null:new ge(g*l+e,g*u+t)}function Qse(e,t,i){var r=new ge;ge.sub(r,i,t),r.normalize();var n=new ge;ge.sub(n,e,t);var o=n.dot(r);return o}function ua(e,t){var i=e[e.length-1];i&&i[0]===t[0]&&i[1]===t[1]||e.push(t)}function Jse(e,t,i){for(var r=e.length,n=[],o=0;o<r;o++){var s=e[o],a=e[(o+1)%r],l=jse(s[0],s[1],a[0],a[1],t.x,t.y,i.x,i.y);l&&n.push({projPt:Qse(l,t,i),pt:l,idx:o})}if(n.length<2)return[{points:e},{points:e}];n.sort(function(v,m){return v.projPt-m.projPt});var u=n[0],h=n[n.length-1];if(h.idx<u.idx){var c=u;u=h,h=c}for(var d=[u.pt.x,u.pt.y],f=[h.pt.x,h.pt.y],p=[d],g=[f],o=u.idx+1;o<=h.idx;o++)ua(p,e[o].slice());ua(p,f),ua(p,d);for(var o=h.idx+1;o<=u.idx+r;o++)ua(g,e[o%r].slice());return ua(g,d),ua(g,f),[{points:p},{points:g}]}function MA(e){var t=e.points,i=[],r=[];Wf(t,i,r);var n=new ve(i[0],i[1],r[0]-i[0],r[1]-i[1]),o=n.width,s=n.height,a=n.x,l=n.y,u=new ge,h=new ge;return o>s?(u.x=h.x=a+o/2,u.y=l,h.y=l+s):(u.y=h.y=l+s/2,u.x=a,h.x=a+o),Jse(t,u,h)}function wf(e,t,i,r){if(i===1)r.push(t);else{var n=Math.floor(i/2),o=e(t);wf(e,o[0],n,r),wf(e,o[1],i-n,r)}return r}function eae(e,t){for(var i=[],r=0;r<t;r++)i.push(RS(e));return i}function tae(e,t){t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel}function iae(e){for(var t=[],i=0;i<e.length;)t.push([e[i++],e[i++]]);return t}function rae(e,t){var i=[],r=e.shape,n;switch(e.type){case"rect":Zse(r,t,i),n=Te;break;case"sector":AA(r,t,i),n=Jt;break;case"circle":AA({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},t,i),n=Jt;break;default:var o=e.getComputedTransform(),s=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,a=z(qse(e.getUpdatedPathProxy(),s),function(m){return iae(m)}),l=a.length;if(l===0)wf(MA,{points:a[0]},t,i);else if(l===t)for(var u=0;u<l;u++)i.push({points:a[u]});else{var h=0,c=z(a,function(m){var y=[],C=[];Wf(m,y,C);var S=(C[1]-y[1])*(C[0]-y[0]);return h+=S,{poly:m,area:S}});c.sort(function(m,y){return y.area-m.area});for(var d=t,u=0;u<l;u++){var f=c[u];if(d<=0)break;var p=u===l-1?d:Math.ceil(f.area/h*t);p<0||(wf(MA,{points:f.poly},p,i),d-=p)}}n=ei;break}if(!n)return eae(e,t);for(var g=[],u=0;u<i.length;u++){var v=new n;v.setShape(i[u]),tae(e,v),g.push(v)}return g}function nae(e,t){var i=e.length,r=t.length;if(i===r)return[e,t];for(var n=[],o=[],s=i<r?e:t,a=Math.min(i,r),l=Math.abs(r-i)/6,u=(a-2)/6,h=Math.ceil(l/u)+1,c=[s[0],s[1]],d=l,f=2;f<a;){var p=s[f-2],g=s[f-1],v=s[f++],m=s[f++],y=s[f++],C=s[f++],S=s[f++],b=s[f++];if(d<=0){c.push(v,m,y,C,S,b);continue}for(var w=Math.min(d,h-1)+1,x=1;x<=w;x++){var R=x/w;to(p,v,y,S,R,n),to(g,m,C,b,R,o),p=n[3],g=o[3],c.push(n[1],o[1],n[2],o[2],p,g),v=n[5],m=o[5],y=n[6],C=o[6]}d-=w-1}return s===e?[c,t]:[e,c]}function FA(e,t){for(var i=e.length,r=e[i-2],n=e[i-1],o=[],s=0;s<t.length;)o[s++]=r,o[s++]=n;return o}function oae(e,t){for(var i,r,n,o=[],s=[],a=0;a<Math.max(e.length,t.length);a++){var l=e[a],u=t[a],h=void 0,c=void 0;l?u?(i=nae(l,u),h=i[0],c=i[1],r=h,n=c):(c=FA(n||l,l),h=l):(h=FA(r||u,u),c=u),o.push(h),s.push(c)}return[o,s]}function EA(e){for(var t=0,i=0,r=0,n=e.length,o=0,s=n-2;o<n;s=o,o+=2){var a=e[s],l=e[s+1],u=e[o],h=e[o+1],c=a*h-u*l;t+=c,i+=(a+u)*c,r+=(l+h)*c}return t===0?[e[0]||0,e[1]||0]:[i/t/3,r/t/3,t]}function sae(e,t,i,r){for(var n=(e.length-2)/6,o=1/0,s=0,a=e.length,l=a-2,u=0;u<n;u++){for(var h=u*6,c=0,d=0;d<a;d+=2){var f=d===0?h:(h+d-2)%l+2,p=e[f]-i[0],g=e[f+1]-i[1],v=t[d]-r[0],m=t[d+1]-r[1],y=v-p,C=m-g;c+=y*y+C*C}c<o&&(o=c,s=u)}return s}function aae(e){for(var t=[],i=e.length,r=0;r<i;r+=2)t[r]=e[i-r-2],t[r+1]=e[i-r-1];return t}function lae(e,t,i,r){for(var n=[],o,s=0;s<e.length;s++){var a=e[s],l=t[s],u=EA(a),h=EA(l);o==null&&(o=u[2]<0!=h[2]<0);var c=[],d=[],f=0,p=1/0,g=[],v=a.length;o&&(a=aae(a));for(var m=sae(a,l,u,h)*6,y=v-2,C=0;C<y;C+=2){var S=(m+C)%y+2;c[C+2]=a[S]-u[0],c[C+3]=a[S+1]-u[1]}c[0]=a[m]-u[0],c[1]=a[m+1]-u[1];for(var b=r/i,w=-r/2;w<=r/2;w+=b){for(var x=Math.sin(w),R=Math.cos(w),D=0,C=0;C<a.length;C+=2){var T=c[C],A=c[C+1],P=l[C]-h[0],M=l[C+1]-h[1],F=P*R-M*x,E=P*x+M*R;g[C]=F,g[C+1]=E;var I=F-T,O=E-A;D+=I*I+O*O}if(D<p){p=D,f=w;for(var k=0;k<g.length;k++)d[k]=g[k]}}n.push({from:c,to:d,fromCp:u,toCp:h,rotation:-f})}return n}function bf(e){return e.__isCombineMorphing}var yO="__mOriginal_";function xf(e,t,i){var r=yO+t,n=e[r]||e[t];e[r]||(e[r]=e[t]);var o=i.replace,s=i.after,a=i.before;e[t]=function(){var l=arguments,u;return a&&a.apply(this,l),o?u=o.apply(this,l):u=n.apply(this,l),s&&s.apply(this,l),u}}function Tu(e,t){var i=yO+t;e[i]&&(e[t]=e[i],e[i]=null)}function IA(e,t){for(var i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;){var o=r[n],s=r[n+1];r[n++]=t[0]*o+t[2]*s+t[4],r[n++]=t[1]*o+t[3]*s+t[5]}}function CO(e,t){var i=e.getUpdatedPathProxy(),r=t.getUpdatedPathProxy(),n=oae(pC(i),pC(r)),o=n[0],s=n[1],a=e.getComputedTransform(),l=t.getComputedTransform();function u(){this.transform=null}a&&IA(o,a),l&&IA(s,l),xf(t,"updateTransform",{replace:u}),t.transform=null;var h=lae(o,s,10,Math.PI),c=[];xf(t,"buildPath",{replace:function(d){for(var f=t.__morphT,p=1-f,g=[],v=0;v<h.length;v++){var m=h[v],y=m.from,C=m.to,S=m.rotation*f,b=m.fromCp,w=m.toCp,x=Math.sin(S),R=Math.cos(S);jc(g,b,w,f);for(var D=0;D<y.length;D+=2){var T=y[D],A=y[D+1],P=C[D],M=C[D+1],F=T*p+P*f,E=A*p+M*f;c[D]=F*R-E*x+g[0],c[D+1]=F*x+E*R+g[1]}var I=c[0],O=c[1];d.moveTo(I,O);for(var D=2;D<y.length;){var P=c[D++],M=c[D++],k=c[D++],G=c[D++],W=c[D++],$=c[D++];I===P&&O===M&&k===W&&G===$?d.lineTo(W,$):d.bezierCurveTo(P,M,k,G,W,$),I=W,O=$}}}})}function l0(e,t,i){if(!e||!t)return t;var r=i.done,n=i.during;CO(e,t),t.__morphT=0;function o(){Tu(t,"buildPath"),Tu(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},ne({during:function(s){t.dirtyShape(),n&&n(s)},done:function(){o(),r&&r()}},i)),t}function uae(e,t,i,r,n,o){var s=16;e=n===i?0:Math.round(32767*(e-i)/(n-i)),t=o===r?0:Math.round(32767*(t-r)/(o-r));for(var a=0,l,u=(1<<s)/2;u>0;u/=2){var h=0,c=0;(e&u)>0&&(h=1),(t&u)>0&&(c=1),a+=u*u*(3*h^c),c===0&&(h===1&&(e=u-1-e,t=u-1-t),l=e,e=t,t=l)}return a}function Rf(e){var t=1/0,i=1/0,r=-1/0,n=-1/0,o=z(e,function(a){var l=a.getBoundingRect(),u=a.getComputedTransform(),h=l.x+l.width/2+(u?u[4]:0),c=l.y+l.height/2+(u?u[5]:0);return t=Math.min(h,t),i=Math.min(c,i),r=Math.max(h,r),n=Math.max(c,n),[h,c]}),s=z(o,function(a,l){return{cp:a,z:uae(a[0],a[1],t,i,r,n),path:e[l]}});return s.sort(function(a,l){return a.z-l.z}).map(function(a){return a.path})}function SO(e){return rae(e.path,e.count)}function vC(){return{fromIndividuals:[],toIndividuals:[],count:0}}function hae(e,t,i){var r=[];function n(b){for(var w=0;w<b.length;w++){var x=b[w];bf(x)?n(x.childrenRef()):x instanceof be&&r.push(x)}}n(e);var o=r.length;if(!o)return vC();var s=i.dividePath||SO,a=s({path:t,count:o});if(a.length!==o)return console.error("Invalid morphing: unmatched splitted path"),vC();r=Rf(r),a=Rf(a);for(var l=i.done,u=i.during,h=i.individualDelay,c=new Yr,d=0;d<o;d++){var f=r[d],p=a[d];p.parent=t,p.copyTransform(c),h||CO(f,p)}t.__isCombineMorphing=!0,t.childrenRef=function(){return a};function g(b){for(var w=0;w<a.length;w++)a[w].addSelfToZr(b)}xf(t,"addSelfToZr",{after:function(b){g(b)}}),xf(t,"removeSelfFromZr",{after:function(b){for(var w=0;w<a.length;w++)a[w].removeSelfFromZr(b)}});function v(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,Tu(t,"addSelfToZr"),Tu(t,"removeSelfFromZr")}var m=a.length;if(h)for(var y=m,C=function(){y--,y===0&&(v(),l&&l())},d=0;d<m;d++){var S=h?ne({delay:(i.delay||0)+h(d,m,r[d],a[d]),done:C},i):i;l0(r[d],a[d],S)}else t.__morphT=0,t.animateTo({__morphT:1},ne({during:function(b){for(var w=0;w<m;w++){var x=a[w];x.__morphT=t.__morphT,x.dirtyShape()}u&&u(b)},done:function(){v();for(var b=0;b<e.length;b++)Tu(e[b],"updateTransform");l&&l()}},i));return t.__zr&&g(t.__zr),{fromIndividuals:r,toIndividuals:a,count:m}}function cae(e,t,i){var r=t.length,n=[],o=i.dividePath||SO;function s(f){for(var p=0;p<f.length;p++){var g=f[p];bf(g)?s(g.childrenRef()):g instanceof be&&n.push(g)}}if(bf(e)){s(e.childrenRef());var a=n.length;if(a<r)for(var l=0,u=a;u<r;u++)n.push(RS(n[l++%a]));n.length=r}else{n=o({path:e,count:r});for(var h=e.getComputedTransform(),u=0;u<n.length;u++)n[u].setLocalTransform(h);if(n.length!==r)return console.error("Invalid morphing: unmatched splitted path"),vC()}n=Rf(n),t=Rf(t);for(var c=i.individualDelay,u=0;u<r;u++){var d=c?ne({delay:(i.delay||0)+c(u,r,n[u],t[u])},i):i;l0(n[u],t[u],d)}return{fromIndividuals:n,toIndividuals:t,count:t.length}}function LA(e){return H(e[0])}function kA(e,t){for(var i=[],r=e.length,n=0;n<r;n++)i.push({one:e[n],many:[]});for(var n=0;n<t.length;n++){var o=t[n].length,s=void 0;for(s=0;s<o;s++)i[s%r].many.push(t[n][s])}for(var a=0,n=r-1;n>=0;n--)if(!i[n].many.length){var l=i[a].many;if(l.length<=1)if(a)a=0;else return i;var o=l.length,u=Math.ceil(o/2);i[n].many=l.slice(u,o),i[a].many=l.slice(0,u),a++}return i}var dae={clone:function(e){for(var t=[],i=1-Math.pow(1-e.path.style.opacity,1/e.count),r=0;r<e.count;r++){var n=RS(e.path);n.setStyle("opacity",i),t.push(n)}return t},split:null};function nm(e,t,i,r,n,o){if(!e.length||!t.length)return;var s=il("update",r,n);if(!(s&&s.duration>0))return;var a=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},s),u,h;LA(e)&&(u=e,h=t),LA(t)&&(u=t,h=e);function c(m,y,C,S,b){var w=m.many,x=m.one;if(w.length===1&&!b){var R=y?w[0]:x,D=y?x:w[0];if(bf(R))c({many:[R],one:D},!0,C,S,!0);else{var T=a?ne({delay:a(C,S)},l):l;l0(R,D,T),o(R,D,R,D,T)}}else for(var A=ne({dividePath:dae[i],individualDelay:a&&function(O,k,G,W){return a(O+C,S)}},l),P=y?hae(w,x,A):cae(x,w,A),M=P.fromIndividuals,F=P.toIndividuals,E=M.length,I=0;I<E;I++){var T=a?ne({delay:a(I,E)},l):l;o(M[I],F[I],y?w[I]:m.one,y?m.one:w[I],T)}}for(var d=u?u===e:e.length>t.length,f=u?kA(h,u):kA(d?t:e,[d?e:t]),p=0,g=0;g<f.length;g++)p+=f[g].many.length;for(var v=0,g=0;g<f.length;g++)c(f[g],d,v,p),v+=f[g].many.length}function Uo(e){if(!e)return[];if(H(e)){for(var t=[],i=0;i<e.length;i++)t.push(Uo(e[i]));return t}var r=[];return e.traverse(function(n){n instanceof be&&!n.disableMorphing&&!n.invisible&&!n.ignore&&r.push(n)}),r}var wO=1e4,fae=0,OA=1,GA=2,pae=_e();function gae(e,t){for(var i=e.dimensions,r=0;r<i.length;r++){var n=e.getDimensionInfo(i[r]);if(n&&n.otherDims[t]===0)return i[r]}}function vae(e,t,i){var r=e.getDimensionInfo(i),n=r&&r.ordinalMeta;if(r){var o=e.get(r.name,t);return n&&n.categories[o]||o+""}}function NA(e,t,i,r){var n=r?"itemChildGroupId":"itemGroupId",o=gae(e,n);if(o){var s=vae(e,t,o);return s}var a=e.getRawDataItem(t),l=r?"childGroupId":"groupId";if(a&&a[l])return a[l]+"";if(!r)return i||e.getId(t)}function VA(e){var t=[];return _(e,function(i){var r=i.data,n=i.dataGroupId;if(!(r.count()>wO))for(var o=r.getIndices(),s=0;s<o.length;s++)t.push({data:r,groupId:NA(r,s,n,!1),childGroupId:NA(r,s,n,!0),divide:i.divide,dataIndex:s})}),t}function om(e,t,i){e.traverse(function(r){r instanceof be&&Ze(r,{style:{opacity:0}},t,{dataIndex:i,isFrom:!0})})}function sm(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function ha(e){e.stopAnimation(),e.isGroup&&e.traverse(function(t){t.stopAnimation()})}function mae(e,t,i){var r=il("update",i,t);r&&e.traverse(function(n){if(n instanceof zi){var o=cY(n);o&&n.animateFrom({style:o},r)}})}function yae(e,t){var i=e.length;if(i!==t.length)return!1;for(var r=0;r<i;r++){var n=e[r],o=t[r];if(n.data.getId(n.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}function bO(e,t,i){var r=VA(e),n=VA(t);function o(C,S,b,w,x){(b||C)&&S.animateFrom({style:b&&b!==C?V(V({},b.style),C.style):C.style},x)}var s=!1,a=fae,l=Q(),u=Q();r.forEach(function(C){C.groupId&&l.set(C.groupId,!0),C.childGroupId&&u.set(C.childGroupId,!0)});for(var h=0;h<n.length;h++){var c=n[h].groupId;if(u.get(c)){a=OA;break}var d=n[h].childGroupId;if(d&&l.get(d)){a=GA;break}}function f(C,S){return function(b){var w=b.data,x=b.dataIndex;return S?w.getId(x):C?a===OA?b.childGroupId:b.groupId:a===GA?b.childGroupId:b.groupId}}var p=yae(r,n),g={};if(!p)for(var h=0;h<n.length;h++){var v=n[h],m=v.data.getItemGraphicEl(v.dataIndex);m&&(g[m.id]=!0)}function y(C,S){var b=r[S],w=n[C],x=w.data.hostModel,R=b.data.getItemGraphicEl(b.dataIndex),D=w.data.getItemGraphicEl(w.dataIndex);if(R===D){D&&mae(D,w.dataIndex,x);return}R&&g[R.id]||D&&(ha(D),R?(ha(R),sm(R),s=!0,nm(Uo(R),Uo(D),w.divide,x,C,o)):om(D,x,C))}new un(r,n,f(!0,p),f(!1,p),null,"multiple").update(y).updateManyToOne(function(C,S){var b=n[C],w=b.data,x=w.hostModel,R=w.getItemGraphicEl(b.dataIndex),D=Le(z(S,function(T){return r[T].data.getItemGraphicEl(r[T].dataIndex)}),function(T){return T&&T!==R&&!g[T.id]});R&&(ha(R),D.length?(_(D,function(T){ha(T),sm(T)}),s=!0,nm(Uo(D),Uo(R),b.divide,x,C,o)):om(R,x,b.dataIndex))}).updateOneToMany(function(C,S){var b=r[S],w=b.data.getItemGraphicEl(b.dataIndex);if(!(w&&g[w.id])){var x=Le(z(C,function(D){return n[D].data.getItemGraphicEl(n[D].dataIndex)}),function(D){return D&&D!==w}),R=n[C[0]].data.hostModel;x.length&&(_(x,function(D){return ha(D)}),w?(ha(w),sm(w),s=!0,nm(Uo(w),Uo(x),b.divide,R,C[0],o)):_(x,function(D){return om(D,R,C[0])}))}}).updateManyToMany(function(C,S){new un(S,C,function(b){return r[b].data.getId(r[b].dataIndex)},function(b){return n[b].data.getId(n[b].dataIndex)}).update(function(b,w){y(C[b],S[w])}).execute()}).execute(),s&&_(t,function(C){var S=C.data,b=S.hostModel,w=b&&i.getViewOfSeriesModel(b),x=il("update",b,0);w&&b.isAnimationEnabled()&&x&&x.duration>0&&w.group.traverse(function(R){R instanceof be&&!R.animators.length&&R.animateFrom({style:{opacity:0}},x)})})}function BA(e){var t=e.getModel("universalTransition").get("seriesKey");return t||e.id}function HA(e){return H(e)?e.sort().join(","):e}function kn(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function Cae(e,t){var i=Q(),r=Q(),n=Q();return _(e.oldSeries,function(o,s){var a=e.oldDataGroupIds[s],l=e.oldData[s],u=BA(o),h=HA(u);r.set(h,{dataGroupId:a,data:l}),H(u)&&_(u,function(c){n.set(c,{key:h,dataGroupId:a,data:l})})}),_(t.updatedSeries,function(o){if(o.isUniversalTransitionEnabled()&&o.isAnimationEnabled()){var s=o.get("dataGroupId"),a=o.getData(),l=BA(o),u=HA(l),h=r.get(u);if(h)i.set(u,{oldSeries:[{dataGroupId:h.dataGroupId,divide:kn(h.data),data:h.data}],newSeries:[{dataGroupId:s,divide:kn(a),data:a}]});else if(H(l)){var c=[];_(l,function(p){var g=r.get(p);g.data&&c.push({dataGroupId:g.dataGroupId,divide:kn(g.data),data:g.data})}),c.length&&i.set(u,{oldSeries:c,newSeries:[{dataGroupId:s,data:a,divide:kn(a)}]})}else{var d=n.get(l);if(d){var f=i.get(d.key);f||(f={oldSeries:[{dataGroupId:d.dataGroupId,data:d.data,divide:kn(d.data)}],newSeries:[]},i.set(d.key,f)),f.newSeries.push({dataGroupId:s,data:a,divide:kn(a)})}}}}),i}function zA(e,t){for(var i=0;i<e.length;i++){var r=t.seriesIndex!=null&&t.seriesIndex===e[i].seriesIndex||t.seriesId!=null&&t.seriesId===e[i].id;if(r)return i}}function Sae(e,t,i,r){var n=[],o=[];_(ze(e.from),function(s){var a=zA(t.oldSeries,s);a>=0&&n.push({dataGroupId:t.oldDataGroupIds[a],data:t.oldData[a],divide:kn(t.oldData[a]),groupIdDim:s.dimension})}),_(ze(e.to),function(s){var a=zA(i.updatedSeries,s);if(a>=0){var l=i.updatedSeries[a].getData();o.push({dataGroupId:t.oldDataGroupIds[a],data:l,divide:kn(l),groupIdDim:s.dimension})}}),n.length>0&&o.length>0&&bO(n,o,r)}function wae(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,i,r){_(ze(r.seriesTransition),function(n){_(ze(n.to),function(o){for(var s=r.updatedSeries,a=0;a<s.length;a++)(o.seriesIndex!=null&&o.seriesIndex===s[a].seriesIndex||o.seriesId!=null&&o.seriesId===s[a].id)&&(s[a][ld]=!0)})})}),e.registerUpdateLifecycle("series:transition",function(t,i,r){var n=pae(i);if(n.oldSeries&&r.updatedSeries&&r.optionChanged){var o=r.seriesTransition;if(o)_(ze(o),function(f){Sae(f,n,r,i)});else{var s=Cae(n,r);_(s.keys(),function(f){var p=s.get(f);bO(p.oldSeries,p.newSeries,i)})}_(r.updatedSeries,function(f){f[ld]&&(f[ld]=!1)})}for(var a=t.getSeries(),l=n.oldSeries=[],u=n.oldDataGroupIds=[],h=n.oldData=[],c=0;c<a.length;c++){var d=a[c].getData();d.count()<wO&&(l.push(a[c]),u.push(a[c].get("dataGroupId")),h.push(d))}})}we([F7]);we([T7]);we([j7,dZ,bZ,t9,d9,Q9,Tj,uQ,FQ,GQ,KQ,BJ,cee,bee,Nee,zee,Qee,ote,vte,bte,Ete,gie]);we(Lie);we(sre);we(SL);we(Cre);we(ok);we(xre);we(Ere);we(Cne);we(Nne);we(Lh);we(toe);we(noe);we(poe);we(woe);we(_oe);we(Ioe);we(Woe);we(ase);we(lO);we(uO);we(_se);we(pO);we(gO);we(Ese);we($se);we(Xse);we(wae);we(Kq);export{Rae as c,Dae as i};
